(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function i(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(e){if(e.ep)return;e.ep=!0;const n=i(e);fetch(e.href,n)}})();function $o(t,s){const i=Object.create(null),r=t.split(",");for(let e=0;e<r.length;e++)i[r[e]]=!0;return s?e=>!!i[e.toLowerCase()]:e=>!!i[e]}const pe={},Xn=[],dt=()=>{},af=()=>!1,lf=/^on[^a-z]/,gs=t=>lf.test(t),Wo=t=>t.startsWith("onUpdate:"),Me=Object.assign,zo=(t,s)=>{const i=t.indexOf(s);i>-1&&t.splice(i,1)},uf=Object.prototype.hasOwnProperty,ne=(t,s)=>uf.call(t,s),$=Array.isArray,$n=t=>ir(t)==="[object Map]",ys=t=>ir(t)==="[object Set]",$a=t=>ir(t)==="[object Date]",J=t=>typeof t=="function",Te=t=>typeof t=="string",Hi=t=>typeof t=="symbol",ve=t=>t!==null&&typeof t=="object",Hu=t=>ve(t)&&J(t.then)&&J(t.catch),Uu=Object.prototype.toString,ir=t=>Uu.call(t),cf=t=>ir(t).slice(8,-1),Vu=t=>ir(t)==="[object Object]",qo=t=>Te(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Tr=$o(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ms=t=>{const s=Object.create(null);return i=>s[i]||(s[i]=t(i))},hf=/-(\w)/g,St=ms(t=>t.replace(hf,(s,i)=>i?i.toUpperCase():"")),ff=/\B([A-Z])/g,ci=ms(t=>t.replace(ff,"-$1").toLowerCase()),_s=ms(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ys=ms(t=>t?`on${_s(t)}`:""),Ui=(t,s)=>!Object.is(t,s),Ar=(t,s)=>{for(let i=0;i<t.length;i++)t[i](s)},Vr=(t,s,i)=>{Object.defineProperty(t,s,{configurable:!0,enumerable:!1,value:i})},Yu=t=>{const s=parseFloat(t);return isNaN(s)?t:s};let Wa;const uo=()=>Wa||(Wa=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Es(t){if($(t)){const s={};for(let i=0;i<t.length;i++){const r=t[i],e=Te(r)?gf(r):Es(r);if(e)for(const n in e)s[n]=e[n]}return s}else{if(Te(t))return t;if(ve(t))return t}}const df=/;(?![^(]*\))/g,pf=/:([^]+)/,vf=/\/\*[^]*?\*\//g;function gf(t){const s={};return t.replace(vf,"").split(df).forEach(i=>{if(i){const r=i.split(pf);r.length>1&&(s[r[0].trim()]=r[1].trim())}}),s}function hi(t){let s="";if(Te(t))s=t;else if($(t))for(let i=0;i<t.length;i++){const r=hi(t[i]);r&&(s+=r+" ")}else if(ve(t))for(const i in t)t[i]&&(s+=i+" ");return s.trim()}const yf="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",mf=$o(yf);function Xu(t){return!!t||t===""}function _f(t,s){if(t.length!==s.length)return!1;let i=!0;for(let r=0;i&&r<t.length;r++)i=bs(t[r],s[r]);return i}function bs(t,s){if(t===s)return!0;let i=$a(t),r=$a(s);if(i||r)return i&&r?t.getTime()===s.getTime():!1;if(i=Hi(t),r=Hi(s),i||r)return t===s;if(i=$(t),r=$(s),i||r)return i&&r?_f(t,s):!1;if(i=ve(t),r=ve(s),i||r){if(!i||!r)return!1;const e=Object.keys(t).length,n=Object.keys(s).length;if(e!==n)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=s.hasOwnProperty(o);if(a&&!l||!a&&l||!bs(t[o],s[o]))return!1}}return String(t)===String(s)}function Ef(t,s){return t.findIndex(i=>bs(i,s))}const gn=t=>Te(t)?t:t==null?"":$(t)||ve(t)&&(t.toString===Uu||!J(t.toString))?JSON.stringify(t,$u,2):String(t),$u=(t,s)=>s&&s.__v_isRef?$u(t,s.value):$n(s)?{[`Map(${s.size})`]:[...s.entries()].reduce((i,[r,e])=>(i[`${r} =>`]=e,i),{})}:ys(s)?{[`Set(${s.size})`]:[...s.values()]}:ve(s)&&!$(s)&&!Vu(s)?String(s):s;let ct;class bf{constructor(s=!1){this.detached=s,this._active=!0,this.effects=[],this.cleanups=[],this.parent=ct,!s&&ct&&(this.index=(ct.scopes||(ct.scopes=[])).push(this)-1)}get active(){return this._active}run(s){if(this._active){const i=ct;try{return ct=this,s()}finally{ct=i}}}on(){ct=this}off(){ct=this.parent}stop(s){if(this._active){let i,r;for(i=0,r=this.effects.length;i<r;i++)this.effects[i].stop();for(i=0,r=this.cleanups.length;i<r;i++)this.cleanups[i]();if(this.scopes)for(i=0,r=this.scopes.length;i<r;i++)this.scopes[i].stop(!0);if(!this.detached&&this.parent&&!s){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0,this._active=!1}}}function Cf(t,s=ct){s&&s.active&&s.effects.push(t)}function xf(){return ct}const Ko=t=>{const s=new Set(t);return s.w=0,s.n=0,s},Wu=t=>(t.w&en)>0,zu=t=>(t.n&en)>0,Sf=({deps:t})=>{if(t.length)for(let s=0;s<t.length;s++)t[s].w|=en},Pf=t=>{const{deps:s}=t;if(s.length){let i=0;for(let r=0;r<s.length;r++){const e=s[r];Wu(e)&&!zu(e)?e.delete(t):s[i++]=e,e.w&=~en,e.n&=~en}s.length=i}},Yr=new WeakMap;let Oi=0,en=1;const co=30;let ht;const _n=Symbol(""),ho=Symbol("");class Jo{constructor(s,i=null,r){this.fn=s,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,Cf(this,r)}run(){if(!this.active)return this.fn();let s=ht,i=Kt;for(;s;){if(s===this)return;s=s.parent}try{return this.parent=ht,ht=this,Kt=!0,en=1<<++Oi,Oi<=co?Sf(this):za(this),this.fn()}finally{Oi<=co&&Pf(this),en=1<<--Oi,ht=this.parent,Kt=i,this.parent=void 0,this.deferStop&&this.stop()}}stop(){ht===this?this.deferStop=!0:this.active&&(za(this),this.onStop&&this.onStop(),this.active=!1)}}function za(t){const{deps:s}=t;if(s.length){for(let i=0;i<s.length;i++)s[i].delete(t);s.length=0}}let Kt=!0;const qu=[];function fi(){qu.push(Kt),Kt=!1}function di(){const t=qu.pop();Kt=t===void 0?!0:t}function $e(t,s,i){if(Kt&&ht){let r=Yr.get(t);r||Yr.set(t,r=new Map);let e=r.get(i);e||r.set(i,e=Ko()),Ku(e)}}function Ku(t,s){let i=!1;Oi<=co?zu(t)||(t.n|=en,i=!Wu(t)):i=!t.has(ht),i&&(t.add(ht),ht.deps.push(t))}function Rt(t,s,i,r,e,n){const o=Yr.get(t);if(!o)return;let a=[];if(s==="clear")a=[...o.values()];else if(i==="length"&&$(t)){const l=Number(r);o.forEach((u,c)=>{(c==="length"||c>=l)&&a.push(u)})}else switch(i!==void 0&&a.push(o.get(i)),s){case"add":$(t)?qo(i)&&a.push(o.get("length")):(a.push(o.get(_n)),$n(t)&&a.push(o.get(ho)));break;case"delete":$(t)||(a.push(o.get(_n)),$n(t)&&a.push(o.get(ho)));break;case"set":$n(t)&&a.push(o.get(_n));break}if(a.length===1)a[0]&&fo(a[0]);else{const l=[];for(const u of a)u&&l.push(...u);fo(Ko(l))}}function fo(t,s){const i=$(t)?t:[...t];for(const r of i)r.computed&&qa(r);for(const r of i)r.computed||qa(r)}function qa(t,s){(t!==ht||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}function kf(t,s){var i;return(i=Yr.get(t))==null?void 0:i.get(s)}const Tf=$o("__proto__,__v_isRef,__isVue"),Ju=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Hi)),Af=Zo(),Of=Zo(!1,!0),wf=Zo(!0),Ka=Df();function Df(){const t={};return["includes","indexOf","lastIndexOf"].forEach(s=>{t[s]=function(...i){const r=re(this);for(let n=0,o=this.length;n<o;n++)$e(r,"get",n+"");const e=r[s](...i);return e===-1||e===!1?r[s](...i.map(re)):e}}),["push","pop","shift","unshift","splice"].forEach(s=>{t[s]=function(...i){fi();const r=re(this)[s].apply(this,i);return di(),r}}),t}function Mf(t){const s=re(this);return $e(s,"has",t),s.hasOwnProperty(t)}function Zo(t=!1,s=!1){return function(r,e,n){if(e==="__v_isReactive")return!t;if(e==="__v_isReadonly")return t;if(e==="__v_isShallow")return s;if(e==="__v_raw"&&n===(t?s?zf:nc:s?tc:ec).get(r))return r;const o=$(r);if(!t){if(o&&ne(Ka,e))return Reflect.get(Ka,e,n);if(e==="hasOwnProperty")return Mf}const a=Reflect.get(r,e,n);return(Hi(e)?Ju.has(e):Tf(e))||(t||$e(r,"get",e),s)?a:De(a)?o&&qo(e)?a:a.value:ve(a)?t?ic(a):xs(a):a}}const If=Zu(),Lf=Zu(!0);function Zu(t=!1){return function(i,r,e,n){let o=i[r];if(Zn(o)&&De(o)&&!De(e))return!1;if(!t&&(!Xr(e)&&!Zn(e)&&(o=re(o),e=re(e)),!$(i)&&De(o)&&!De(e)))return o.value=e,!0;const a=$(i)&&qo(r)?Number(r)<i.length:ne(i,r),l=Reflect.set(i,r,e,n);return i===re(n)&&(a?Ui(e,o)&&Rt(i,"set",r,e):Rt(i,"add",r,e)),l}}function Nf(t,s){const i=ne(t,s);t[s];const r=Reflect.deleteProperty(t,s);return r&&i&&Rt(t,"delete",s,void 0),r}function Rf(t,s){const i=Reflect.has(t,s);return(!Hi(s)||!Ju.has(s))&&$e(t,"has",s),i}function Ff(t){return $e(t,"iterate",$(t)?"length":_n),Reflect.ownKeys(t)}const Qu={get:Af,set:If,deleteProperty:Nf,has:Rf,ownKeys:Ff},Gf={get:wf,set(t,s){return!0},deleteProperty(t,s){return!0}},jf=Me({},Qu,{get:Of,set:Lf}),Qo=t=>t,Cs=t=>Reflect.getPrototypeOf(t);function cr(t,s,i=!1,r=!1){t=t.__v_raw;const e=re(t),n=re(s);i||(s!==n&&$e(e,"get",s),$e(e,"get",n));const{has:o}=Cs(e),a=r?Qo:i?na:Vi;if(o.call(e,s))return a(t.get(s));if(o.call(e,n))return a(t.get(n));t!==e&&t.get(s)}function hr(t,s=!1){const i=this.__v_raw,r=re(i),e=re(t);return s||(t!==e&&$e(r,"has",t),$e(r,"has",e)),t===e?i.has(t):i.has(t)||i.has(e)}function fr(t,s=!1){return t=t.__v_raw,!s&&$e(re(t),"iterate",_n),Reflect.get(t,"size",t)}function Ja(t){t=re(t);const s=re(this);return Cs(s).has.call(s,t)||(s.add(t),Rt(s,"add",t,t)),this}function Za(t,s){s=re(s);const i=re(this),{has:r,get:e}=Cs(i);let n=r.call(i,t);n||(t=re(t),n=r.call(i,t));const o=e.call(i,t);return i.set(t,s),n?Ui(s,o)&&Rt(i,"set",t,s):Rt(i,"add",t,s),this}function Qa(t){const s=re(this),{has:i,get:r}=Cs(s);let e=i.call(s,t);e||(t=re(t),e=i.call(s,t)),r&&r.call(s,t);const n=s.delete(t);return e&&Rt(s,"delete",t,void 0),n}function el(){const t=re(this),s=t.size!==0,i=t.clear();return s&&Rt(t,"clear",void 0,void 0),i}function dr(t,s){return function(r,e){const n=this,o=n.__v_raw,a=re(o),l=s?Qo:t?na:Vi;return!t&&$e(a,"iterate",_n),o.forEach((u,c)=>r.call(e,l(u),l(c),n))}}function pr(t,s,i){return function(...r){const e=this.__v_raw,n=re(e),o=$n(n),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=e[t](...r),c=i?Qo:s?na:Vi;return!s&&$e(n,"iterate",l?ho:_n),{next(){const{value:h,done:d}=u.next();return d?{value:h,done:d}:{value:a?[c(h[0]),c(h[1])]:c(h),done:d}},[Symbol.iterator](){return this}}}}function Ht(t){return function(...s){return t==="delete"?!1:this}}function Bf(){const t={get(n){return cr(this,n)},get size(){return fr(this)},has:hr,add:Ja,set:Za,delete:Qa,clear:el,forEach:dr(!1,!1)},s={get(n){return cr(this,n,!1,!0)},get size(){return fr(this)},has:hr,add:Ja,set:Za,delete:Qa,clear:el,forEach:dr(!1,!0)},i={get(n){return cr(this,n,!0)},get size(){return fr(this,!0)},has(n){return hr.call(this,n,!0)},add:Ht("add"),set:Ht("set"),delete:Ht("delete"),clear:Ht("clear"),forEach:dr(!0,!1)},r={get(n){return cr(this,n,!0,!0)},get size(){return fr(this,!0)},has(n){return hr.call(this,n,!0)},add:Ht("add"),set:Ht("set"),delete:Ht("delete"),clear:Ht("clear"),forEach:dr(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(n=>{t[n]=pr(n,!1,!1),i[n]=pr(n,!0,!1),s[n]=pr(n,!1,!0),r[n]=pr(n,!0,!0)}),[t,i,s,r]}const[Hf,Uf,Vf,Yf]=Bf();function ea(t,s){const i=s?t?Yf:Vf:t?Uf:Hf;return(r,e,n)=>e==="__v_isReactive"?!t:e==="__v_isReadonly"?t:e==="__v_raw"?r:Reflect.get(ne(i,e)&&e in r?i:r,e,n)}const Xf={get:ea(!1,!1)},$f={get:ea(!1,!0)},Wf={get:ea(!0,!1)},ec=new WeakMap,tc=new WeakMap,nc=new WeakMap,zf=new WeakMap;function qf(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Kf(t){return t.__v_skip||!Object.isExtensible(t)?0:qf(cf(t))}function xs(t){return Zn(t)?t:ta(t,!1,Qu,Xf,ec)}function Jf(t){return ta(t,!1,jf,$f,tc)}function ic(t){return ta(t,!0,Gf,Wf,nc)}function ta(t,s,i,r,e){if(!ve(t)||t.__v_raw&&!(s&&t.__v_isReactive))return t;const n=e.get(t);if(n)return n;const o=Kf(t);if(o===0)return t;const a=new Proxy(t,o===2?r:i);return e.set(t,a),a}function Wn(t){return Zn(t)?Wn(t.__v_raw):!!(t&&t.__v_isReactive)}function Zn(t){return!!(t&&t.__v_isReadonly)}function Xr(t){return!!(t&&t.__v_isShallow)}function rc(t){return Wn(t)||Zn(t)}function re(t){const s=t&&t.__v_raw;return s?re(s):t}function sc(t){return Vr(t,"__v_skip",!0),t}const Vi=t=>ve(t)?xs(t):t,na=t=>ve(t)?ic(t):t;function oc(t){Kt&&ht&&(t=re(t),Ku(t.dep||(t.dep=Ko())))}function ac(t,s){t=re(t);const i=t.dep;i&&fo(i)}function De(t){return!!(t&&t.__v_isRef===!0)}function Ye(t){return Zf(t,!1)}function Zf(t,s){return De(t)?t:new Qf(t,s)}class Qf{constructor(s,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?s:re(s),this._value=i?s:Vi(s)}get value(){return oc(this),this._value}set value(s){const i=this.__v_isShallow||Xr(s)||Zn(s);s=i?s:re(s),Ui(s,this._rawValue)&&(this._rawValue=s,this._value=i?s:Vi(s),ac(this))}}function Mt(t){return De(t)?t.value:t}const ed={get:(t,s,i)=>Mt(Reflect.get(t,s,i)),set:(t,s,i,r)=>{const e=t[s];return De(e)&&!De(i)?(e.value=i,!0):Reflect.set(t,s,i,r)}};function lc(t){return Wn(t)?t:new Proxy(t,ed)}function uc(t){const s=$(t)?new Array(t.length):{};for(const i in t)s[i]=nd(t,i);return s}class td{constructor(s,i,r){this._object=s,this._key=i,this._defaultValue=r,this.__v_isRef=!0}get value(){const s=this._object[this._key];return s===void 0?this._defaultValue:s}set value(s){this._object[this._key]=s}get dep(){return kf(re(this._object),this._key)}}function nd(t,s,i){const r=t[s];return De(r)?r:new td(t,s,i)}class id{constructor(s,i,r,e){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Jo(s,()=>{this._dirty||(this._dirty=!0,ac(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!e,this.__v_isReadonly=r}get value(){const s=re(this);return oc(s),(s._dirty||!s._cacheable)&&(s._dirty=!1,s._value=s.effect.run()),s._value}set value(s){this._setter(s)}}function rd(t,s,i=!1){let r,e;const n=J(t);return n?(r=t,e=dt):(r=t.get,e=t.set),new id(r,e,n||!e,i)}function Jt(t,s,i,r){let e;try{e=r?t(...r):t()}catch(n){Ss(n,s,i)}return e}function pt(t,s,i,r){if(J(t)){const n=Jt(t,s,i,r);return n&&Hu(n)&&n.catch(o=>{Ss(o,s,i)}),n}const e=[];for(let n=0;n<t.length;n++)e.push(pt(t[n],s,i,r));return e}function Ss(t,s,i,r=!0){const e=s?s.vnode:null;if(s){let n=s.parent;const o=s.proxy,a=i;for(;n;){const u=n.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](t,o,a)===!1)return}n=n.parent}const l=s.appContext.config.errorHandler;if(l){Jt(l,null,10,[t,o,a]);return}}sd(t,i,e,r)}function sd(t,s,i,r=!0){console.error(t)}let Yi=!1,po=!1;const Re=[];let Ct=0;const zn=[];let wt=null,fn=0;const cc=Promise.resolve();let ia=null;function hc(t){const s=ia||cc;return t?s.then(this?t.bind(this):t):s}function od(t){let s=Ct+1,i=Re.length;for(;s<i;){const r=s+i>>>1;Xi(Re[r])<t?s=r+1:i=r}return s}function ra(t){(!Re.length||!Re.includes(t,Yi&&t.allowRecurse?Ct+1:Ct))&&(t.id==null?Re.push(t):Re.splice(od(t.id),0,t),fc())}function fc(){!Yi&&!po&&(po=!0,ia=cc.then(pc))}function ad(t){const s=Re.indexOf(t);s>Ct&&Re.splice(s,1)}function ld(t){$(t)?zn.push(...t):(!wt||!wt.includes(t,t.allowRecurse?fn+1:fn))&&zn.push(t),fc()}function tl(t,s=Yi?Ct+1:0){for(;s<Re.length;s++){const i=Re[s];i&&i.pre&&(Re.splice(s,1),s--,i())}}function dc(t){if(zn.length){const s=[...new Set(zn)];if(zn.length=0,wt){wt.push(...s);return}for(wt=s,wt.sort((i,r)=>Xi(i)-Xi(r)),fn=0;fn<wt.length;fn++)wt[fn]();wt=null,fn=0}}const Xi=t=>t.id==null?1/0:t.id,ud=(t,s)=>{const i=Xi(t)-Xi(s);if(i===0){if(t.pre&&!s.pre)return-1;if(s.pre&&!t.pre)return 1}return i};function pc(t){po=!1,Yi=!0,Re.sort(ud);const s=dt;try{for(Ct=0;Ct<Re.length;Ct++){const i=Re[Ct];i&&i.active!==!1&&Jt(i,null,14)}}finally{Ct=0,Re.length=0,dc(),Yi=!1,ia=null,(Re.length||zn.length)&&pc()}}function cd(t,s,...i){if(t.isUnmounted)return;const r=t.vnode.props||pe;let e=i;const n=s.startsWith("update:"),o=n&&s.slice(7);if(o&&o in r){const c=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=r[c]||pe;d&&(e=i.map(p=>Te(p)?p.trim():p)),h&&(e=i.map(Yu))}let a,l=r[a=Ys(s)]||r[a=Ys(St(s))];!l&&n&&(l=r[a=Ys(ci(s))]),l&&pt(l,t,6,e);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,pt(u,t,6,e)}}function vc(t,s,i=!1){const r=s.emitsCache,e=r.get(t);if(e!==void 0)return e;const n=t.emits;let o={},a=!1;if(!J(t)){const l=u=>{const c=vc(u,s,!0);c&&(a=!0,Me(o,c))};!i&&s.mixins.length&&s.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!n&&!a?(ve(t)&&r.set(t,null),null):($(n)?n.forEach(l=>o[l]=null):Me(o,n),ve(t)&&r.set(t,o),o)}function Ps(t,s){return!t||!gs(s)?!1:(s=s.slice(2).replace(/Once$/,""),ne(t,s[0].toLowerCase()+s.slice(1))||ne(t,ci(s))||ne(t,s))}let it=null,ks=null;function $r(t){const s=it;return it=t,ks=t&&t.type.__scopeId||null,s}function sa(t){ks=t}function oa(){ks=null}function vo(t,s=it,i){if(!s||t._n)return t;const r=(...e)=>{r._d&&fl(-1);const n=$r(s);let o;try{o=t(...e)}finally{$r(n),r._d&&fl(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Xs(t){const{type:s,vnode:i,proxy:r,withProxy:e,props:n,propsOptions:[o],slots:a,attrs:l,emit:u,render:c,renderCache:h,data:d,setupState:p,ctx:v,inheritAttrs:y}=t;let m,b;const C=$r(t);try{if(i.shapeFlag&4){const S=e||r;m=_t(c.call(S,S,h,n,p,d,v)),b=l}else{const S=s;m=_t(S.length>1?S(n,{attrs:l,slots:a,emit:u}):S(n,null)),b=s.props?l:hd(l)}}catch(S){Gi.length=0,Ss(S,t,1),m=Ge(Cn)}let E=m;if(b&&y!==!1){const S=Object.keys(b),{shapeFlag:D}=E;S.length&&D&7&&(o&&S.some(Wo)&&(b=fd(b,o)),E=Qn(E,b))}return i.dirs&&(E=Qn(E),E.dirs=E.dirs?E.dirs.concat(i.dirs):i.dirs),i.transition&&(E.transition=i.transition),m=E,$r(C),m}const hd=t=>{let s;for(const i in t)(i==="class"||i==="style"||gs(i))&&((s||(s={}))[i]=t[i]);return s},fd=(t,s)=>{const i={};for(const r in t)(!Wo(r)||!(r.slice(9)in s))&&(i[r]=t[r]);return i};function dd(t,s,i){const{props:r,children:e,component:n}=t,{props:o,children:a,patchFlag:l}=s,u=n.emitsOptions;if(s.dirs||s.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return r?nl(r,o,u):!!o;if(l&8){const c=s.dynamicProps;for(let h=0;h<c.length;h++){const d=c[h];if(o[d]!==r[d]&&!Ps(u,d))return!0}}}else return(e||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?nl(r,o,u):!0:!!o;return!1}function nl(t,s,i){const r=Object.keys(s);if(r.length!==Object.keys(t).length)return!0;for(let e=0;e<r.length;e++){const n=r[e];if(s[n]!==t[n]&&!Ps(i,n))return!0}return!1}function pd({vnode:t,parent:s},i){for(;s&&s.subTree===t;)(t=s.vnode).el=i,s=s.parent}const vd=t=>t.__isSuspense;function gd(t,s){s&&s.pendingBranch?$(t)?s.effects.push(...t):s.effects.push(t):ld(t)}const vr={};function Or(t,s,i){return gc(t,s,i)}function gc(t,s,{immediate:i,deep:r,flush:e,onTrack:n,onTrigger:o}=pe){var a;const l=xf()===((a=Ne)==null?void 0:a.scope)?Ne:null;let u,c=!1,h=!1;if(De(t)?(u=()=>t.value,c=Xr(t)):Wn(t)?(u=()=>t,r=!0):$(t)?(h=!0,c=t.some(S=>Wn(S)||Xr(S)),u=()=>t.map(S=>{if(De(S))return S.value;if(Wn(S))return yn(S);if(J(S))return Jt(S,l,2)})):J(t)?s?u=()=>Jt(t,l,2):u=()=>{if(!(l&&l.isUnmounted))return d&&d(),pt(t,l,3,[p])}:u=dt,s&&r){const S=u;u=()=>yn(S())}let d,p=S=>{d=C.onStop=()=>{Jt(S,l,4)}},v;if(Wi)if(p=dt,s?i&&pt(s,l,3,[u(),h?[]:void 0,p]):u(),e==="sync"){const S=dp();v=S.__watcherHandles||(S.__watcherHandles=[])}else return dt;let y=h?new Array(t.length).fill(vr):vr;const m=()=>{if(C.active)if(s){const S=C.run();(r||c||(h?S.some((D,G)=>Ui(D,y[G])):Ui(S,y)))&&(d&&d(),pt(s,l,3,[S,y===vr?void 0:h&&y[0]===vr?[]:y,p]),y=S)}else C.run()};m.allowRecurse=!!s;let b;e==="sync"?b=m:e==="post"?b=()=>Ve(m,l&&l.suspense):(m.pre=!0,l&&(m.id=l.uid),b=()=>ra(m));const C=new Jo(u,b);s?i?m():y=C.run():e==="post"?Ve(C.run.bind(C),l&&l.suspense):C.run();const E=()=>{C.stop(),l&&l.scope&&zo(l.scope.effects,C)};return v&&v.push(E),E}function yd(t,s,i){const r=this.proxy,e=Te(t)?t.includes(".")?yc(r,t):()=>r[t]:t.bind(r,r);let n;J(s)?n=s:(n=s.handler,i=s);const o=Ne;ei(this);const a=gc(e,n.bind(r),i);return o?ei(o):En(),a}function yc(t,s){const i=s.split(".");return()=>{let r=t;for(let e=0;e<i.length&&r;e++)r=r[i[e]];return r}}function yn(t,s){if(!ve(t)||t.__v_skip||(s=s||new Set,s.has(t)))return t;if(s.add(t),De(t))yn(t.value,s);else if($(t))for(let i=0;i<t.length;i++)yn(t[i],s);else if(ys(t)||$n(t))t.forEach(i=>{yn(i,s)});else if(Vu(t))for(const i in t)yn(t[i],s);return t}function Ri(t,s){const i=it;if(i===null)return t;const r=ws(i)||i.proxy,e=t.dirs||(t.dirs=[]);for(let n=0;n<s.length;n++){let[o,a,l,u=pe]=s[n];o&&(J(o)&&(o={mounted:o,updated:o}),o.deep&&yn(a),e.push({dir:o,instance:r,value:a,oldValue:void 0,arg:l,modifiers:u}))}return t}function sn(t,s,i,r){const e=t.dirs,n=s&&s.dirs;for(let o=0;o<e.length;o++){const a=e[o];n&&(a.oldValue=n[o].value);let l=a.dir[r];l&&(fi(),pt(l,i,8,[t.el,a,t,s]),di())}}function md(t,s){return J(t)?(()=>Me({name:t.name},s,{setup:t}))():t}const wr=t=>!!t.type.__asyncLoader,mc=t=>t.type.__isKeepAlive;function _d(t,s){_c(t,"a",s)}function Ed(t,s){_c(t,"da",s)}function _c(t,s,i=Ne){const r=t.__wdc||(t.__wdc=()=>{let e=i;for(;e;){if(e.isDeactivated)return;e=e.parent}return t()});if(Ts(s,r,i),i){let e=i.parent;for(;e&&e.parent;)mc(e.parent.vnode)&&bd(r,s,i,e),e=e.parent}}function bd(t,s,i,r){const e=Ts(s,t,r,!0);bc(()=>{zo(r[s],e)},i)}function Ts(t,s,i=Ne,r=!1){if(i){const e=i[t]||(i[t]=[]),n=s.__weh||(s.__weh=(...o)=>{if(i.isUnmounted)return;fi(),ei(i);const a=pt(s,i,t,o);return En(),di(),a});return r?e.unshift(n):e.push(n),n}}const jt=t=>(s,i=Ne)=>(!Wi||t==="sp")&&Ts(t,(...r)=>s(...r),i),Cd=jt("bm"),Ec=jt("m"),xd=jt("bu"),Sd=jt("u"),Pd=jt("bum"),bc=jt("um"),kd=jt("sp"),Td=jt("rtg"),Ad=jt("rtc");function Od(t,s=Ne){Ts("ec",t,s)}const Cc="components";function wd(t,s){return Md(Cc,t,!0,s)||t}const Dd=Symbol.for("v-ndc");function Md(t,s,i=!0,r=!1){const e=it||Ne;if(e){const n=e.type;if(t===Cc){const a=up(n,!1);if(a&&(a===s||a===St(s)||a===_s(St(s))))return n}const o=il(e[t]||n[t],s)||il(e.appContext[t],s);return!o&&r?n:o}}function il(t,s){return t&&(t[s]||t[St(s)]||t[_s(St(s))])}function Wr(t,s,i,r){let e;const n=i&&i[r];if($(t)||Te(t)){e=new Array(t.length);for(let o=0,a=t.length;o<a;o++)e[o]=s(t[o],o,void 0,n&&n[o])}else if(typeof t=="number"){e=new Array(t);for(let o=0;o<t;o++)e[o]=s(o+1,o,void 0,n&&n[o])}else if(ve(t))if(t[Symbol.iterator])e=Array.from(t,(o,a)=>s(o,a,void 0,n&&n[a]));else{const o=Object.keys(t);e=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const u=o[a];e[a]=s(t[u],u,a,n&&n[a])}}else e=[];return i&&(i[r]=e),e}const go=t=>t?Nc(t)?ws(t)||t.proxy:go(t.parent):null,Fi=Me(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>go(t.parent),$root:t=>go(t.root),$emit:t=>t.emit,$options:t=>aa(t),$forceUpdate:t=>t.f||(t.f=()=>ra(t.update)),$nextTick:t=>t.n||(t.n=hc.bind(t.proxy)),$watch:t=>yd.bind(t)}),$s=(t,s)=>t!==pe&&!t.__isScriptSetup&&ne(t,s),Id={get({_:t},s){const{ctx:i,setupState:r,data:e,props:n,accessCache:o,type:a,appContext:l}=t;let u;if(s[0]!=="$"){const p=o[s];if(p!==void 0)switch(p){case 1:return r[s];case 2:return e[s];case 4:return i[s];case 3:return n[s]}else{if($s(r,s))return o[s]=1,r[s];if(e!==pe&&ne(e,s))return o[s]=2,e[s];if((u=t.propsOptions[0])&&ne(u,s))return o[s]=3,n[s];if(i!==pe&&ne(i,s))return o[s]=4,i[s];yo&&(o[s]=0)}}const c=Fi[s];let h,d;if(c)return s==="$attrs"&&$e(t,"get",s),c(t);if((h=a.__cssModules)&&(h=h[s]))return h;if(i!==pe&&ne(i,s))return o[s]=4,i[s];if(d=l.config.globalProperties,ne(d,s))return d[s]},set({_:t},s,i){const{data:r,setupState:e,ctx:n}=t;return $s(e,s)?(e[s]=i,!0):r!==pe&&ne(r,s)?(r[s]=i,!0):ne(t.props,s)||s[0]==="$"&&s.slice(1)in t?!1:(n[s]=i,!0)},has({_:{data:t,setupState:s,accessCache:i,ctx:r,appContext:e,propsOptions:n}},o){let a;return!!i[o]||t!==pe&&ne(t,o)||$s(s,o)||(a=n[0])&&ne(a,o)||ne(r,o)||ne(Fi,o)||ne(e.config.globalProperties,o)},defineProperty(t,s,i){return i.get!=null?t._.accessCache[s]=0:ne(i,"value")&&this.set(t,s,i.value,null),Reflect.defineProperty(t,s,i)}};function rl(t){return $(t)?t.reduce((s,i)=>(s[i]=null,s),{}):t}let yo=!0;function Ld(t){const s=aa(t),i=t.proxy,r=t.ctx;yo=!1,s.beforeCreate&&sl(s.beforeCreate,t,"bc");const{data:e,computed:n,methods:o,watch:a,provide:l,inject:u,created:c,beforeMount:h,mounted:d,beforeUpdate:p,updated:v,activated:y,deactivated:m,beforeDestroy:b,beforeUnmount:C,destroyed:E,unmounted:S,render:D,renderTracked:G,renderTriggered:L,errorCaptured:T,serverPrefetch:q,expose:W,inheritAttrs:te,components:R,directives:he,filters:gt}=s;if(u&&Nd(u,r,null),o)for(const fe in o){const le=o[fe];J(le)&&(r[fe]=le.bind(i))}if(e){const fe=e.call(i,i);ve(fe)&&(t.data=xs(fe))}if(yo=!0,n)for(const fe in n){const le=n[fe],Ke=J(le)?le.bind(i,i):J(le.get)?le.get.bind(i,i):dt,On=!J(le)&&J(le.set)?le.set.bind(i):dt,ot=hp({get:Ke,set:On});Object.defineProperty(r,fe,{enumerable:!0,configurable:!0,get:()=>ot.value,set:Ue=>ot.value=Ue})}if(a)for(const fe in a)xc(a[fe],r,i,fe);if(l){const fe=J(l)?l.call(i):l;Reflect.ownKeys(fe).forEach(le=>{Hd(le,fe[le])})}c&&sl(c,t,"c");function se(fe,le){$(le)?le.forEach(Ke=>fe(Ke.bind(i))):le&&fe(le.bind(i))}if(se(Cd,h),se(Ec,d),se(xd,p),se(Sd,v),se(_d,y),se(Ed,m),se(Od,T),se(Ad,G),se(Td,L),se(Pd,C),se(bc,S),se(kd,q),$(W))if(W.length){const fe=t.exposed||(t.exposed={});W.forEach(le=>{Object.defineProperty(fe,le,{get:()=>i[le],set:Ke=>i[le]=Ke})})}else t.exposed||(t.exposed={});D&&t.render===dt&&(t.render=D),te!=null&&(t.inheritAttrs=te),R&&(t.components=R),he&&(t.directives=he)}function Nd(t,s,i=dt){$(t)&&(t=mo(t));for(const r in t){const e=t[r];let n;ve(e)?"default"in e?n=Dr(e.from||r,e.default,!0):n=Dr(e.from||r):n=Dr(e),De(n)?Object.defineProperty(s,r,{enumerable:!0,configurable:!0,get:()=>n.value,set:o=>n.value=o}):s[r]=n}}function sl(t,s,i){pt($(t)?t.map(r=>r.bind(s.proxy)):t.bind(s.proxy),s,i)}function xc(t,s,i,r){const e=r.includes(".")?yc(i,r):()=>i[r];if(Te(t)){const n=s[t];J(n)&&Or(e,n)}else if(J(t))Or(e,t.bind(i));else if(ve(t))if($(t))t.forEach(n=>xc(n,s,i,r));else{const n=J(t.handler)?t.handler.bind(i):s[t.handler];J(n)&&Or(e,n,t)}}function aa(t){const s=t.type,{mixins:i,extends:r}=s,{mixins:e,optionsCache:n,config:{optionMergeStrategies:o}}=t.appContext,a=n.get(s);let l;return a?l=a:!e.length&&!i&&!r?l=s:(l={},e.length&&e.forEach(u=>zr(l,u,o,!0)),zr(l,s,o)),ve(s)&&n.set(s,l),l}function zr(t,s,i,r=!1){const{mixins:e,extends:n}=s;n&&zr(t,n,i,!0),e&&e.forEach(o=>zr(t,o,i,!0));for(const o in s)if(!(r&&o==="expose")){const a=Rd[o]||i&&i[o];t[o]=a?a(t[o],s[o]):s[o]}return t}const Rd={data:ol,props:al,emits:al,methods:wi,computed:wi,beforeCreate:je,created:je,beforeMount:je,mounted:je,beforeUpdate:je,updated:je,beforeDestroy:je,beforeUnmount:je,destroyed:je,unmounted:je,activated:je,deactivated:je,errorCaptured:je,serverPrefetch:je,components:wi,directives:wi,watch:Gd,provide:ol,inject:Fd};function ol(t,s){return s?t?function(){return Me(J(t)?t.call(this,this):t,J(s)?s.call(this,this):s)}:s:t}function Fd(t,s){return wi(mo(t),mo(s))}function mo(t){if($(t)){const s={};for(let i=0;i<t.length;i++)s[t[i]]=t[i];return s}return t}function je(t,s){return t?[...new Set([].concat(t,s))]:s}function wi(t,s){return t?Me(Object.create(null),t,s):s}function al(t,s){return t?$(t)&&$(s)?[...new Set([...t,...s])]:Me(Object.create(null),rl(t),rl(s??{})):s}function Gd(t,s){if(!t)return s;if(!s)return t;const i=Me(Object.create(null),t);for(const r in s)i[r]=je(t[r],s[r]);return i}function Sc(){return{app:null,config:{isNativeTag:af,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let jd=0;function Bd(t,s){return function(r,e=null){J(r)||(r=Me({},r)),e!=null&&!ve(e)&&(e=null);const n=Sc(),o=new Set;let a=!1;const l=n.app={_uid:jd++,_component:r,_props:e,_container:null,_context:n,_instance:null,version:pp,get config(){return n.config},set config(u){},use(u,...c){return o.has(u)||(u&&J(u.install)?(o.add(u),u.install(l,...c)):J(u)&&(o.add(u),u(l,...c))),l},mixin(u){return n.mixins.includes(u)||n.mixins.push(u),l},component(u,c){return c?(n.components[u]=c,l):n.components[u]},directive(u,c){return c?(n.directives[u]=c,l):n.directives[u]},mount(u,c,h){if(!a){const d=Ge(r,e);return d.appContext=n,c&&s?s(d,u):t(d,u,h),a=!0,l._container=u,u.__vue_app__=l,ws(d.component)||d.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(u,c){return n.provides[u]=c,l},runWithContext(u){qr=l;try{return u()}finally{qr=null}}};return l}}let qr=null;function Hd(t,s){if(Ne){let i=Ne.provides;const r=Ne.parent&&Ne.parent.provides;r===i&&(i=Ne.provides=Object.create(r)),i[t]=s}}function Dr(t,s,i=!1){const r=Ne||it;if(r||qr){const e=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:qr._context.provides;if(e&&t in e)return e[t];if(arguments.length>1)return i&&J(s)?s.call(r&&r.proxy):s}}function Ud(t,s,i,r=!1){const e={},n={};Vr(n,Os,1),t.propsDefaults=Object.create(null),Pc(t,s,e,n);for(const o in t.propsOptions[0])o in e||(e[o]=void 0);i?t.props=r?e:Jf(e):t.type.props?t.props=e:t.props=n,t.attrs=n}function Vd(t,s,i,r){const{props:e,attrs:n,vnode:{patchFlag:o}}=t,a=re(e),[l]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const c=t.vnode.dynamicProps;for(let h=0;h<c.length;h++){let d=c[h];if(Ps(t.emitsOptions,d))continue;const p=s[d];if(l)if(ne(n,d))p!==n[d]&&(n[d]=p,u=!0);else{const v=St(d);e[v]=_o(l,a,v,p,t,!1)}else p!==n[d]&&(n[d]=p,u=!0)}}}else{Pc(t,s,e,n)&&(u=!0);let c;for(const h in a)(!s||!ne(s,h)&&((c=ci(h))===h||!ne(s,c)))&&(l?i&&(i[h]!==void 0||i[c]!==void 0)&&(e[h]=_o(l,a,h,void 0,t,!0)):delete e[h]);if(n!==a)for(const h in n)(!s||!ne(s,h))&&(delete n[h],u=!0)}u&&Rt(t,"set","$attrs")}function Pc(t,s,i,r){const[e,n]=t.propsOptions;let o=!1,a;if(s)for(let l in s){if(Tr(l))continue;const u=s[l];let c;e&&ne(e,c=St(l))?!n||!n.includes(c)?i[c]=u:(a||(a={}))[c]=u:Ps(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(n){const l=re(i),u=a||pe;for(let c=0;c<n.length;c++){const h=n[c];i[h]=_o(e,l,h,u[h],t,!ne(u,h))}}return o}function _o(t,s,i,r,e,n){const o=t[i];if(o!=null){const a=ne(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&J(l)){const{propsDefaults:u}=e;i in u?r=u[i]:(ei(e),r=u[i]=l.call(null,s),En())}else r=l}o[0]&&(n&&!a?r=!1:o[1]&&(r===""||r===ci(i))&&(r=!0))}return r}function kc(t,s,i=!1){const r=s.propsCache,e=r.get(t);if(e)return e;const n=t.props,o={},a=[];let l=!1;if(!J(t)){const c=h=>{l=!0;const[d,p]=kc(h,s,!0);Me(o,d),p&&a.push(...p)};!i&&s.mixins.length&&s.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!n&&!l)return ve(t)&&r.set(t,Xn),Xn;if($(n))for(let c=0;c<n.length;c++){const h=St(n[c]);ll(h)&&(o[h]=pe)}else if(n)for(const c in n){const h=St(c);if(ll(h)){const d=n[c],p=o[h]=$(d)||J(d)?{type:d}:Me({},d);if(p){const v=hl(Boolean,p.type),y=hl(String,p.type);p[0]=v>-1,p[1]=y<0||v<y,(v>-1||ne(p,"default"))&&a.push(h)}}}const u=[o,a];return ve(t)&&r.set(t,u),u}function ll(t){return t[0]!=="$"}function ul(t){const s=t&&t.toString().match(/^\s*(function|class) (\w+)/);return s?s[2]:t===null?"null":""}function cl(t,s){return ul(t)===ul(s)}function hl(t,s){return $(s)?s.findIndex(i=>cl(i,t)):J(s)&&cl(s,t)?0:-1}const Tc=t=>t[0]==="_"||t==="$stable",la=t=>$(t)?t.map(_t):[_t(t)],Yd=(t,s,i)=>{if(s._n)return s;const r=vo((...e)=>la(s(...e)),i);return r._c=!1,r},Ac=(t,s,i)=>{const r=t._ctx;for(const e in t){if(Tc(e))continue;const n=t[e];if(J(n))s[e]=Yd(e,n,r);else if(n!=null){const o=la(n);s[e]=()=>o}}},Oc=(t,s)=>{const i=la(s);t.slots.default=()=>i},Xd=(t,s)=>{if(t.vnode.shapeFlag&32){const i=s._;i?(t.slots=re(s),Vr(s,"_",i)):Ac(s,t.slots={})}else t.slots={},s&&Oc(t,s);Vr(t.slots,Os,1)},$d=(t,s,i)=>{const{vnode:r,slots:e}=t;let n=!0,o=pe;if(r.shapeFlag&32){const a=s._;a?i&&a===1?n=!1:(Me(e,s),!i&&a===1&&delete e._):(n=!s.$stable,Ac(s,e)),o=s}else s&&(Oc(t,s),o={default:1});if(n)for(const a in e)!Tc(a)&&!(a in o)&&delete e[a]};function Eo(t,s,i,r,e=!1){if($(t)){t.forEach((d,p)=>Eo(d,s&&($(s)?s[p]:s),i,r,e));return}if(wr(r)&&!e)return;const n=r.shapeFlag&4?ws(r.component)||r.component.proxy:r.el,o=e?null:n,{i:a,r:l}=t,u=s&&s.r,c=a.refs===pe?a.refs={}:a.refs,h=a.setupState;if(u!=null&&u!==l&&(Te(u)?(c[u]=null,ne(h,u)&&(h[u]=null)):De(u)&&(u.value=null)),J(l))Jt(l,a,12,[o,c]);else{const d=Te(l),p=De(l);if(d||p){const v=()=>{if(t.f){const y=d?ne(h,l)?h[l]:c[l]:l.value;e?$(y)&&zo(y,n):$(y)?y.includes(n)||y.push(n):d?(c[l]=[n],ne(h,l)&&(h[l]=c[l])):(l.value=[n],t.k&&(c[t.k]=l.value))}else d?(c[l]=o,ne(h,l)&&(h[l]=o)):p&&(l.value=o,t.k&&(c[t.k]=o))};o?(v.id=-1,Ve(v,i)):v()}}}const Ve=gd;function Wd(t){return zd(t)}function zd(t,s){const i=uo();i.__VUE__=!0;const{insert:r,remove:e,patchProp:n,createElement:o,createText:a,createComment:l,setText:u,setElementText:c,parentNode:h,nextSibling:d,setScopeId:p=dt,insertStaticContent:v}=t,y=(_,x,P,O=null,A=null,I=null,F=!1,M=null,N=!!x.dynamicChildren)=>{if(_===x)return;_&&!mi(_,x)&&(O=Ze(_),Ue(_,A,I,!0),_=null),x.patchFlag===-2&&(N=!1,x.dynamicChildren=null);const{type:w,ref:V,shapeFlag:j}=x;switch(w){case As:m(_,x,P,O);break;case Cn:b(_,x,P,O);break;case Ws:_==null&&C(x,P,O,F);break;case Xe:R(_,x,P,O,A,I,F,M,N);break;default:j&1?D(_,x,P,O,A,I,F,M,N):j&6?he(_,x,P,O,A,I,F,M,N):(j&64||j&128)&&w.process(_,x,P,O,A,I,F,M,N,wn)}V!=null&&A&&Eo(V,_&&_.ref,I,x||_,!x)},m=(_,x,P,O)=>{if(_==null)r(x.el=a(x.children),P,O);else{const A=x.el=_.el;x.children!==_.children&&u(A,x.children)}},b=(_,x,P,O)=>{_==null?r(x.el=l(x.children||""),P,O):x.el=_.el},C=(_,x,P,O)=>{[_.el,_.anchor]=v(_.children,x,P,O,_.el,_.anchor)},E=({el:_,anchor:x},P,O)=>{let A;for(;_&&_!==x;)A=d(_),r(_,P,O),_=A;r(x,P,O)},S=({el:_,anchor:x})=>{let P;for(;_&&_!==x;)P=d(_),e(_),_=P;e(x)},D=(_,x,P,O,A,I,F,M,N)=>{F=F||x.type==="svg",_==null?G(x,P,O,A,I,F,M,N):q(_,x,A,I,F,M,N)},G=(_,x,P,O,A,I,F,M)=>{let N,w;const{type:V,props:j,shapeFlag:Y,transition:K,dirs:Z}=_;if(N=_.el=o(_.type,I,j&&j.is,j),Y&8?c(N,_.children):Y&16&&T(_.children,N,null,O,A,I&&V!=="foreignObject",F,M),Z&&sn(_,null,O,"created"),L(N,_,_.scopeId,F,O),j){for(const ue in j)ue!=="value"&&!Tr(ue)&&n(N,ue,null,j[ue],I,_.children,O,A,Je);"value"in j&&n(N,"value",null,j.value),(w=j.onVnodeBeforeMount)&&mt(w,O,_)}Z&&sn(_,null,O,"beforeMount");const de=(!A||A&&!A.pendingBranch)&&K&&!K.persisted;de&&K.beforeEnter(N),r(N,x,P),((w=j&&j.onVnodeMounted)||de||Z)&&Ve(()=>{w&&mt(w,O,_),de&&K.enter(N),Z&&sn(_,null,O,"mounted")},A)},L=(_,x,P,O,A)=>{if(P&&p(_,P),O)for(let I=0;I<O.length;I++)p(_,O[I]);if(A){let I=A.subTree;if(x===I){const F=A.vnode;L(_,F,F.scopeId,F.slotScopeIds,A.parent)}}},T=(_,x,P,O,A,I,F,M,N=0)=>{for(let w=N;w<_.length;w++){const V=_[w]=M?Wt(_[w]):_t(_[w]);y(null,V,x,P,O,A,I,F,M)}},q=(_,x,P,O,A,I,F)=>{const M=x.el=_.el;let{patchFlag:N,dynamicChildren:w,dirs:V}=x;N|=_.patchFlag&16;const j=_.props||pe,Y=x.props||pe;let K;P&&on(P,!1),(K=Y.onVnodeBeforeUpdate)&&mt(K,P,x,_),V&&sn(x,_,P,"beforeUpdate"),P&&on(P,!0);const Z=A&&x.type!=="foreignObject";if(w?W(_.dynamicChildren,w,M,P,O,Z,I):F||le(_,x,M,null,P,O,Z,I,!1),N>0){if(N&16)te(M,x,j,Y,P,O,A);else if(N&2&&j.class!==Y.class&&n(M,"class",null,Y.class,A),N&4&&n(M,"style",j.style,Y.style,A),N&8){const de=x.dynamicProps;for(let ue=0;ue<de.length;ue++){const xe=de[ue],at=j[xe],Dn=Y[xe];(Dn!==at||xe==="value")&&n(M,xe,at,Dn,A,_.children,P,O,Je)}}N&1&&_.children!==x.children&&c(M,x.children)}else!F&&w==null&&te(M,x,j,Y,P,O,A);((K=Y.onVnodeUpdated)||V)&&Ve(()=>{K&&mt(K,P,x,_),V&&sn(x,_,P,"updated")},O)},W=(_,x,P,O,A,I,F)=>{for(let M=0;M<x.length;M++){const N=_[M],w=x[M],V=N.el&&(N.type===Xe||!mi(N,w)||N.shapeFlag&70)?h(N.el):P;y(N,w,V,null,O,A,I,F,!0)}},te=(_,x,P,O,A,I,F)=>{if(P!==O){if(P!==pe)for(const M in P)!Tr(M)&&!(M in O)&&n(_,M,P[M],null,F,x.children,A,I,Je);for(const M in O){if(Tr(M))continue;const N=O[M],w=P[M];N!==w&&M!=="value"&&n(_,M,w,N,F,x.children,A,I,Je)}"value"in O&&n(_,"value",P.value,O.value)}},R=(_,x,P,O,A,I,F,M,N)=>{const w=x.el=_?_.el:a(""),V=x.anchor=_?_.anchor:a("");let{patchFlag:j,dynamicChildren:Y,slotScopeIds:K}=x;K&&(M=M?M.concat(K):K),_==null?(r(w,P,O),r(V,P,O),T(x.children,P,V,A,I,F,M,N)):j>0&&j&64&&Y&&_.dynamicChildren?(W(_.dynamicChildren,Y,P,A,I,F,M),(x.key!=null||A&&x===A.subTree)&&wc(_,x,!0)):le(_,x,P,V,A,I,F,M,N)},he=(_,x,P,O,A,I,F,M,N)=>{x.slotScopeIds=M,_==null?x.shapeFlag&512?A.ctx.activate(x,P,O,F,N):gt(x,P,O,A,I,F,N):st(_,x,N)},gt=(_,x,P,O,A,I,F)=>{const M=_.component=rp(_,O,A);if(mc(_)&&(M.ctx.renderer=wn),sp(M),M.asyncDep){if(A&&A.registerDep(M,se),!_.el){const N=M.subTree=Ge(Cn);b(null,N,x,P)}return}se(M,_,x,P,A,I,F)},st=(_,x,P)=>{const O=x.component=_.component;if(dd(_,x,P))if(O.asyncDep&&!O.asyncResolved){fe(O,x,P);return}else O.next=x,ad(O.update),O.update();else x.el=_.el,O.vnode=x},se=(_,x,P,O,A,I,F)=>{const M=()=>{if(_.isMounted){let{next:V,bu:j,u:Y,parent:K,vnode:Z}=_,de=V,ue;on(_,!1),V?(V.el=Z.el,fe(_,V,F)):V=Z,j&&Ar(j),(ue=V.props&&V.props.onVnodeBeforeUpdate)&&mt(ue,K,V,Z),on(_,!0);const xe=Xs(_),at=_.subTree;_.subTree=xe,y(at,xe,h(at.el),Ze(at),_,A,I),V.el=xe.el,de===null&&pd(_,xe.el),Y&&Ve(Y,A),(ue=V.props&&V.props.onVnodeUpdated)&&Ve(()=>mt(ue,K,V,Z),A)}else{let V;const{el:j,props:Y}=x,{bm:K,m:Z,parent:de}=_,ue=wr(x);if(on(_,!1),K&&Ar(K),!ue&&(V=Y&&Y.onVnodeBeforeMount)&&mt(V,de,x),on(_,!0),j&&Vs){const xe=()=>{_.subTree=Xs(_),Vs(j,_.subTree,_,A,null)};ue?x.type.__asyncLoader().then(()=>!_.isUnmounted&&xe()):xe()}else{const xe=_.subTree=Xs(_);y(null,xe,P,O,_,A,I),x.el=xe.el}if(Z&&Ve(Z,A),!ue&&(V=Y&&Y.onVnodeMounted)){const xe=x;Ve(()=>mt(V,de,xe),A)}(x.shapeFlag&256||de&&wr(de.vnode)&&de.vnode.shapeFlag&256)&&_.a&&Ve(_.a,A),_.isMounted=!0,x=P=O=null}},N=_.effect=new Jo(M,()=>ra(w),_.scope),w=_.update=()=>N.run();w.id=_.uid,on(_,!0),w()},fe=(_,x,P)=>{x.component=_;const O=_.vnode.props;_.vnode=x,_.next=null,Vd(_,x.props,O,P),$d(_,x.children,P),fi(),tl(),di()},le=(_,x,P,O,A,I,F,M,N=!1)=>{const w=_&&_.children,V=_?_.shapeFlag:0,j=x.children,{patchFlag:Y,shapeFlag:K}=x;if(Y>0){if(Y&128){On(w,j,P,O,A,I,F,M,N);return}else if(Y&256){Ke(w,j,P,O,A,I,F,M,N);return}}K&8?(V&16&&Je(w,A,I),j!==w&&c(P,j)):V&16?K&16?On(w,j,P,O,A,I,F,M,N):Je(w,A,I,!0):(V&8&&c(P,""),K&16&&T(j,P,O,A,I,F,M,N))},Ke=(_,x,P,O,A,I,F,M,N)=>{_=_||Xn,x=x||Xn;const w=_.length,V=x.length,j=Math.min(w,V);let Y;for(Y=0;Y<j;Y++){const K=x[Y]=N?Wt(x[Y]):_t(x[Y]);y(_[Y],K,P,null,A,I,F,M,N)}w>V?Je(_,A,I,!0,!1,j):T(x,P,O,A,I,F,M,N,j)},On=(_,x,P,O,A,I,F,M,N)=>{let w=0;const V=x.length;let j=_.length-1,Y=V-1;for(;w<=j&&w<=Y;){const K=_[w],Z=x[w]=N?Wt(x[w]):_t(x[w]);if(mi(K,Z))y(K,Z,P,null,A,I,F,M,N);else break;w++}for(;w<=j&&w<=Y;){const K=_[j],Z=x[Y]=N?Wt(x[Y]):_t(x[Y]);if(mi(K,Z))y(K,Z,P,null,A,I,F,M,N);else break;j--,Y--}if(w>j){if(w<=Y){const K=Y+1,Z=K<V?x[K].el:O;for(;w<=Y;)y(null,x[w]=N?Wt(x[w]):_t(x[w]),P,Z,A,I,F,M,N),w++}}else if(w>Y)for(;w<=j;)Ue(_[w],A,I,!0),w++;else{const K=w,Z=w,de=new Map;for(w=Z;w<=Y;w++){const We=x[w]=N?Wt(x[w]):_t(x[w]);We.key!=null&&de.set(We.key,w)}let ue,xe=0;const at=Y-Z+1;let Dn=!1,Va=0;const yi=new Array(at);for(w=0;w<at;w++)yi[w]=0;for(w=K;w<=j;w++){const We=_[w];if(xe>=at){Ue(We,A,I,!0);continue}let yt;if(We.key!=null)yt=de.get(We.key);else for(ue=Z;ue<=Y;ue++)if(yi[ue-Z]===0&&mi(We,x[ue])){yt=ue;break}yt===void 0?Ue(We,A,I,!0):(yi[yt-Z]=w+1,yt>=Va?Va=yt:Dn=!0,y(We,x[yt],P,null,A,I,F,M,N),xe++)}const Ya=Dn?qd(yi):Xn;for(ue=Ya.length-1,w=at-1;w>=0;w--){const We=Z+w,yt=x[We],Xa=We+1<V?x[We+1].el:O;yi[w]===0?y(null,yt,P,Xa,A,I,F,M,N):Dn&&(ue<0||w!==Ya[ue]?ot(yt,P,Xa,2):ue--)}}},ot=(_,x,P,O,A=null)=>{const{el:I,type:F,transition:M,children:N,shapeFlag:w}=_;if(w&6){ot(_.component.subTree,x,P,O);return}if(w&128){_.suspense.move(x,P,O);return}if(w&64){F.move(_,x,P,wn);return}if(F===Xe){r(I,x,P);for(let j=0;j<N.length;j++)ot(N[j],x,P,O);r(_.anchor,x,P);return}if(F===Ws){E(_,x,P);return}if(O!==2&&w&1&&M)if(O===0)M.beforeEnter(I),r(I,x,P),Ve(()=>M.enter(I),A);else{const{leave:j,delayLeave:Y,afterLeave:K}=M,Z=()=>r(I,x,P),de=()=>{j(I,()=>{Z(),K&&K()})};Y?Y(I,Z,de):de()}else r(I,x,P)},Ue=(_,x,P,O=!1,A=!1)=>{const{type:I,props:F,ref:M,children:N,dynamicChildren:w,shapeFlag:V,patchFlag:j,dirs:Y}=_;if(M!=null&&Eo(M,null,P,_,!0),V&256){x.ctx.deactivate(_);return}const K=V&1&&Y,Z=!wr(_);let de;if(Z&&(de=F&&F.onVnodeBeforeUnmount)&&mt(de,x,_),V&6)ur(_.component,P,O);else{if(V&128){_.suspense.unmount(P,O);return}K&&sn(_,null,x,"beforeUnmount"),V&64?_.type.remove(_,x,P,A,wn,O):w&&(I!==Xe||j>0&&j&64)?Je(w,x,P,!1,!0):(I===Xe&&j&384||!A&&V&16)&&Je(N,x,P),O&&lr(_)}(Z&&(de=F&&F.onVnodeUnmounted)||K)&&Ve(()=>{de&&mt(de,x,_),K&&sn(_,null,x,"unmounted")},P)},lr=_=>{const{type:x,el:P,anchor:O,transition:A}=_;if(x===Xe){gi(P,O);return}if(x===Ws){S(_);return}const I=()=>{e(P),A&&!A.persisted&&A.afterLeave&&A.afterLeave()};if(_.shapeFlag&1&&A&&!A.persisted){const{leave:F,delayLeave:M}=A,N=()=>F(P,I);M?M(_.el,I,N):N()}else I()},gi=(_,x)=>{let P;for(;_!==x;)P=d(_),e(_),_=P;e(x)},ur=(_,x,P)=>{const{bum:O,scope:A,update:I,subTree:F,um:M}=_;O&&Ar(O),A.stop(),I&&(I.active=!1,Ue(F,_,x,P)),M&&Ve(M,x),Ve(()=>{_.isUnmounted=!0},x),x&&x.pendingBranch&&!x.isUnmounted&&_.asyncDep&&!_.asyncResolved&&_.suspenseId===x.pendingId&&(x.deps--,x.deps===0&&x.resolve())},Je=(_,x,P,O=!1,A=!1,I=0)=>{for(let F=I;F<_.length;F++)Ue(_[F],x,P,O,A)},Ze=_=>_.shapeFlag&6?Ze(_.component.subTree):_.shapeFlag&128?_.suspense.next():d(_.anchor||_.el),Ua=(_,x,P)=>{_==null?x._vnode&&Ue(x._vnode,null,null,!0):y(x._vnode||null,_,x,null,null,null,P),tl(),dc(),x._vnode=_},wn={p:y,um:Ue,m:ot,r:lr,mt:gt,mc:T,pc:le,pbc:W,n:Ze,o:t};let Us,Vs;return s&&([Us,Vs]=s(wn)),{render:Ua,hydrate:Us,createApp:Bd(Ua,Us)}}function on({effect:t,update:s},i){t.allowRecurse=s.allowRecurse=i}function wc(t,s,i=!1){const r=t.children,e=s.children;if($(r)&&$(e))for(let n=0;n<r.length;n++){const o=r[n];let a=e[n];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=e[n]=Wt(e[n]),a.el=o.el),i||wc(o,a)),a.type===As&&(a.el=o.el)}}function qd(t){const s=t.slice(),i=[0];let r,e,n,o,a;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(e=i[i.length-1],t[e]<u){s[r]=e,i.push(r);continue}for(n=0,o=i.length-1;n<o;)a=n+o>>1,t[i[a]]<u?n=a+1:o=a;u<t[i[n]]&&(n>0&&(s[r]=i[n-1]),i[n]=r)}}for(n=i.length,o=i[n-1];n-- >0;)i[n]=o,o=s[o];return i}const Kd=t=>t.__isTeleport,Xe=Symbol.for("v-fgt"),As=Symbol.for("v-txt"),Cn=Symbol.for("v-cmt"),Ws=Symbol.for("v-stc"),Gi=[];let ft=null;function be(t=!1){Gi.push(ft=t?null:[])}function Jd(){Gi.pop(),ft=Gi[Gi.length-1]||null}let $i=1;function fl(t){$i+=t}function Dc(t){return t.dynamicChildren=$i>0?ft||Xn:null,Jd(),$i>0&&ft&&ft.push(t),t}function Se(t,s,i,r,e,n){return Dc(B(t,s,i,r,e,n,!0))}function Mc(t,s,i,r,e){return Dc(Ge(t,s,i,r,e,!0))}function Zd(t){return t?t.__v_isVNode===!0:!1}function mi(t,s){return t.type===s.type&&t.key===s.key}const Os="__vInternal",Ic=({key:t})=>t??null,Mr=({ref:t,ref_key:s,ref_for:i})=>(typeof t=="number"&&(t=""+t),t!=null?Te(t)||De(t)||J(t)?{i:it,r:t,k:s,f:!!i}:t:null);function B(t,s=null,i=null,r=0,e=null,n=t===Xe?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:s,key:s&&Ic(s),ref:s&&Mr(s),scopeId:ks,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:n,patchFlag:r,dynamicProps:e,dynamicChildren:null,appContext:null,ctx:it};return a?(ua(l,i),n&128&&t.normalize(l)):i&&(l.shapeFlag|=Te(i)?8:16),$i>0&&!o&&ft&&(l.patchFlag>0||n&6)&&l.patchFlag!==32&&ft.push(l),l}const Ge=Qd;function Qd(t,s=null,i=null,r=0,e=null,n=!1){if((!t||t===Dd)&&(t=Cn),Zd(t)){const a=Qn(t,s,!0);return i&&ua(a,i),$i>0&&!n&&ft&&(a.shapeFlag&6?ft[ft.indexOf(t)]=a:ft.push(a)),a.patchFlag|=-2,a}if(cp(t)&&(t=t.__vccOpts),s){s=ep(s);let{class:a,style:l}=s;a&&!Te(a)&&(s.class=hi(a)),ve(l)&&(rc(l)&&!$(l)&&(l=Me({},l)),s.style=Es(l))}const o=Te(t)?1:vd(t)?128:Kd(t)?64:ve(t)?4:J(t)?2:0;return B(t,s,i,r,e,o,n,!0)}function ep(t){return t?rc(t)||Os in t?Me({},t):t:null}function Qn(t,s,i=!1){const{props:r,ref:e,patchFlag:n,children:o}=t,a=s?tp(r||{},s):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&Ic(a),ref:s&&s.ref?i&&e?$(e)?e.concat(Mr(s)):[e,Mr(s)]:Mr(s):e,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:s&&t.type!==Xe?n===-1?16:n|16:n,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Qn(t.ssContent),ssFallback:t.ssFallback&&Qn(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Kr(t=" ",s=0){return Ge(As,null,t,s)}function Lc(t="",s=!1){return s?(be(),Mc(Cn,null,t)):Ge(Cn,null,t)}function _t(t){return t==null||typeof t=="boolean"?Ge(Cn):$(t)?Ge(Xe,null,t.slice()):typeof t=="object"?Wt(t):Ge(As,null,String(t))}function Wt(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Qn(t)}function ua(t,s){let i=0;const{shapeFlag:r}=t;if(s==null)s=null;else if($(s))i=16;else if(typeof s=="object")if(r&65){const e=s.default;e&&(e._c&&(e._d=!1),ua(t,e()),e._c&&(e._d=!0));return}else{i=32;const e=s._;!e&&!(Os in s)?s._ctx=it:e===3&&it&&(it.slots._===1?s._=1:(s._=2,t.patchFlag|=1024))}else J(s)?(s={default:s,_ctx:it},i=32):(s=String(s),r&64?(i=16,s=[Kr(s)]):i=8);t.children=s,t.shapeFlag|=i}function tp(...t){const s={};for(let i=0;i<t.length;i++){const r=t[i];for(const e in r)if(e==="class")s.class!==r.class&&(s.class=hi([s.class,r.class]));else if(e==="style")s.style=Es([s.style,r.style]);else if(gs(e)){const n=s[e],o=r[e];o&&n!==o&&!($(n)&&n.includes(o))&&(s[e]=n?[].concat(n,o):o)}else e!==""&&(s[e]=r[e])}return s}function mt(t,s,i,r=null){pt(t,s,7,[i,r])}const np=Sc();let ip=0;function rp(t,s,i){const r=t.type,e=(s?s.appContext:t.appContext)||np,n={uid:ip++,vnode:t,type:r,parent:s,appContext:e,root:null,next:null,subTree:null,effect:null,update:null,scope:new bf(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:s?s.provides:Object.create(e.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:kc(r,e),emitsOptions:vc(r,e),emit:null,emitted:null,propsDefaults:pe,inheritAttrs:r.inheritAttrs,ctx:pe,data:pe,props:pe,attrs:pe,slots:pe,refs:pe,setupState:pe,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return n.ctx={_:n},n.root=s?s.root:n,n.emit=cd.bind(null,n),t.ce&&t.ce(n),n}let Ne=null,ca,Mn,dl="__VUE_INSTANCE_SETTERS__";(Mn=uo()[dl])||(Mn=uo()[dl]=[]),Mn.push(t=>Ne=t),ca=t=>{Mn.length>1?Mn.forEach(s=>s(t)):Mn[0](t)};const ei=t=>{ca(t),t.scope.on()},En=()=>{Ne&&Ne.scope.off(),ca(null)};function Nc(t){return t.vnode.shapeFlag&4}let Wi=!1;function sp(t,s=!1){Wi=s;const{props:i,children:r}=t.vnode,e=Nc(t);Ud(t,i,e,s),Xd(t,r);const n=e?op(t,s):void 0;return Wi=!1,n}function op(t,s){const i=t.type;t.accessCache=Object.create(null),t.proxy=sc(new Proxy(t.ctx,Id));const{setup:r}=i;if(r){const e=t.setupContext=r.length>1?lp(t):null;ei(t),fi();const n=Jt(r,t,0,[t.props,e]);if(di(),En(),Hu(n)){if(n.then(En,En),s)return n.then(o=>{pl(t,o,s)}).catch(o=>{Ss(o,t,0)});t.asyncDep=n}else pl(t,n,s)}else Rc(t,s)}function pl(t,s,i){J(s)?t.type.__ssrInlineRender?t.ssrRender=s:t.render=s:ve(s)&&(t.setupState=lc(s)),Rc(t,i)}let vl;function Rc(t,s,i){const r=t.type;if(!t.render){if(!s&&vl&&!r.render){const e=r.template||aa(t).template;if(e){const{isCustomElement:n,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,u=Me(Me({isCustomElement:n,delimiters:a},o),l);r.render=vl(e,u)}}t.render=r.render||dt}ei(t),fi(),Ld(t),di(),En()}function ap(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(s,i){return $e(t,"get","$attrs"),s[i]}}))}function lp(t){const s=i=>{t.exposed=i||{}};return{get attrs(){return ap(t)},slots:t.slots,emit:t.emit,expose:s}}function ws(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(lc(sc(t.exposed)),{get(s,i){if(i in s)return s[i];if(i in Fi)return Fi[i](t)},has(s,i){return i in s||i in Fi}}))}function up(t,s=!0){return J(t)?t.displayName||t.name:t.name||s&&t.__name}function cp(t){return J(t)&&"__vccOpts"in t}const hp=(t,s)=>rd(t,s,Wi),fp=Symbol.for("v-scx"),dp=()=>Dr(fp),pp="3.3.4",vp="http://www.w3.org/2000/svg",dn=typeof document<"u"?document:null,gl=dn&&dn.createElement("template"),gp={insert:(t,s,i)=>{s.insertBefore(t,i||null)},remove:t=>{const s=t.parentNode;s&&s.removeChild(t)},createElement:(t,s,i,r)=>{const e=s?dn.createElementNS(vp,t):dn.createElement(t,i?{is:i}:void 0);return t==="select"&&r&&r.multiple!=null&&e.setAttribute("multiple",r.multiple),e},createText:t=>dn.createTextNode(t),createComment:t=>dn.createComment(t),setText:(t,s)=>{t.nodeValue=s},setElementText:(t,s)=>{t.textContent=s},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>dn.querySelector(t),setScopeId(t,s){t.setAttribute(s,"")},insertStaticContent(t,s,i,r,e,n){const o=i?i.previousSibling:s.lastChild;if(e&&(e===n||e.nextSibling))for(;s.insertBefore(e.cloneNode(!0),i),!(e===n||!(e=e.nextSibling)););else{gl.innerHTML=r?`<svg>${t}</svg>`:t;const a=gl.content;if(r){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}s.insertBefore(a,i)}return[o?o.nextSibling:s.firstChild,i?i.previousSibling:s.lastChild]}};function yp(t,s,i){const r=t._vtc;r&&(s=(s?[s,...r]:[...r]).join(" ")),s==null?t.removeAttribute("class"):i?t.setAttribute("class",s):t.className=s}function mp(t,s,i){const r=t.style,e=Te(i);if(i&&!e){if(s&&!Te(s))for(const n in s)i[n]==null&&bo(r,n,"");for(const n in i)bo(r,n,i[n])}else{const n=r.display;e?s!==i&&(r.cssText=i):s&&t.removeAttribute("style"),"_vod"in t&&(r.display=n)}}const yl=/\s*!important$/;function bo(t,s,i){if($(i))i.forEach(r=>bo(t,s,r));else if(i==null&&(i=""),s.startsWith("--"))t.setProperty(s,i);else{const r=_p(t,s);yl.test(i)?t.setProperty(ci(r),i.replace(yl,""),"important"):t[r]=i}}const ml=["Webkit","Moz","ms"],zs={};function _p(t,s){const i=zs[s];if(i)return i;let r=St(s);if(r!=="filter"&&r in t)return zs[s]=r;r=_s(r);for(let e=0;e<ml.length;e++){const n=ml[e]+r;if(n in t)return zs[s]=n}return s}const _l="http://www.w3.org/1999/xlink";function Ep(t,s,i,r,e){if(r&&s.startsWith("xlink:"))i==null?t.removeAttributeNS(_l,s.slice(6,s.length)):t.setAttributeNS(_l,s,i);else{const n=mf(s);i==null||n&&!Xu(i)?t.removeAttribute(s):t.setAttribute(s,n?"":i)}}function bp(t,s,i,r,e,n,o){if(s==="innerHTML"||s==="textContent"){r&&o(r,e,n),t[s]=i??"";return}const a=t.tagName;if(s==="value"&&a!=="PROGRESS"&&!a.includes("-")){t._value=i;const u=a==="OPTION"?t.getAttribute("value"):t.value,c=i??"";u!==c&&(t.value=c),i==null&&t.removeAttribute(s);return}let l=!1;if(i===""||i==null){const u=typeof t[s];u==="boolean"?i=Xu(i):i==null&&u==="string"?(i="",l=!0):u==="number"&&(i=0,l=!0)}try{t[s]=i}catch{}l&&t.removeAttribute(s)}function Fc(t,s,i,r){t.addEventListener(s,i,r)}function Cp(t,s,i,r){t.removeEventListener(s,i,r)}function xp(t,s,i,r,e=null){const n=t._vei||(t._vei={}),o=n[s];if(r&&o)o.value=r;else{const[a,l]=Sp(s);if(r){const u=n[s]=Tp(r,e);Fc(t,a,u,l)}else o&&(Cp(t,a,o,l),n[s]=void 0)}}const El=/(?:Once|Passive|Capture)$/;function Sp(t){let s;if(El.test(t)){s={};let r;for(;r=t.match(El);)t=t.slice(0,t.length-r[0].length),s[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ci(t.slice(2)),s]}let qs=0;const Pp=Promise.resolve(),kp=()=>qs||(Pp.then(()=>qs=0),qs=Date.now());function Tp(t,s){const i=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=i.attached)return;pt(Ap(r,i.value),s,5,[r])};return i.value=t,i.attached=kp(),i}function Ap(t,s){if($(s)){const i=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{i.call(t),t._stopped=!0},s.map(r=>e=>!e._stopped&&r&&r(e))}else return s}const bl=/^on[a-z]/,Op=(t,s,i,r,e=!1,n,o,a,l)=>{s==="class"?yp(t,r,e):s==="style"?mp(t,i,r):gs(s)?Wo(s)||xp(t,s,i,r,o):(s[0]==="."?(s=s.slice(1),!0):s[0]==="^"?(s=s.slice(1),!1):wp(t,s,r,e))?bp(t,s,r,n,o,a,l):(s==="true-value"?t._trueValue=r:s==="false-value"&&(t._falseValue=r),Ep(t,s,r,e))};function wp(t,s,i,r){return r?!!(s==="innerHTML"||s==="textContent"||s in t&&bl.test(s)&&J(i)):s==="spellcheck"||s==="draggable"||s==="translate"||s==="form"||s==="list"&&t.tagName==="INPUT"||s==="type"&&t.tagName==="TEXTAREA"||bl.test(s)&&Te(i)?!1:s in t}const Cl=t=>{const s=t.props["onUpdate:modelValue"]||!1;return $(s)?i=>Ar(s,i):s},Ks={deep:!0,created(t,{value:s,modifiers:{number:i}},r){const e=ys(s);Fc(t,"change",()=>{const n=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>i?Yu(Jr(o)):Jr(o));t._assign(t.multiple?e?new Set(n):n:n[0])}),t._assign=Cl(r)},mounted(t,{value:s}){xl(t,s)},beforeUpdate(t,s,i){t._assign=Cl(i)},updated(t,{value:s}){xl(t,s)}};function xl(t,s){const i=t.multiple;if(!(i&&!$(s)&&!ys(s))){for(let r=0,e=t.options.length;r<e;r++){const n=t.options[r],o=Jr(n);if(i)$(s)?n.selected=Ef(s,o)>-1:n.selected=s.has(o);else if(bs(Jr(n),s)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!i&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Jr(t){return"_value"in t?t._value:t.value}const Dp=["ctrl","shift","alt","meta"],Mp={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,s)=>Dp.some(i=>t[`${i}Key`]&&!s.includes(i))},zi=(t,s)=>(i,...r)=>{for(let e=0;e<s.length;e++){const n=Mp[s[e]];if(n&&n(i,s))return}return t(i,...r)},Gc={beforeMount(t,{value:s},{transition:i}){t._vod=t.style.display==="none"?"":t.style.display,i&&s?i.beforeEnter(t):_i(t,s)},mounted(t,{value:s},{transition:i}){i&&s&&i.enter(t)},updated(t,{value:s,oldValue:i},{transition:r}){!s!=!i&&(r?s?(r.beforeEnter(t),_i(t,!0),r.enter(t)):r.leave(t,()=>{_i(t,!1)}):_i(t,s))},beforeUnmount(t,{value:s}){_i(t,s)}};function _i(t,s){t.style.display=s?t._vod:"none"}const Ip=Me({patchProp:Op},gp);let Sl;function Lp(){return Sl||(Sl=Wd(Ip))}const Np=(...t)=>{const s=Lp().createApp(...t),{mount:i}=s;return s.mount=r=>{const e=Rp(r);if(!e)return;const n=s._component;!J(n)&&!n.render&&!n.template&&(n.template=e.innerHTML),e.innerHTML="";const o=i(e,!1,e instanceof SVGElement);return e instanceof Element&&(e.removeAttribute("v-cloak"),e.setAttribute("data-v-app","")),o},s};function Rp(t){return Te(t)?document.querySelector(t):t}const Fp={id:"topbar"},Gp=B("h3",null,"Verfahrensrezept-Editor",-1),jp=[Gp],Bp={__name:"Topbar",setup(t){return(s,i)=>(be(),Se("div",Fp,jp))}},Hp="/assets/logo-03d6d6da.png";function jc(t,s){return function(){return t.apply(s,arguments)}}const{toString:Up}=Object.prototype,{getPrototypeOf:ha}=Object,Ds=(t=>s=>{const i=Up.call(s);return t[i]||(t[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),kt=t=>(t=t.toLowerCase(),s=>Ds(s)===t),Ms=t=>s=>typeof s===t,{isArray:pi}=Array,qi=Ms("undefined");function Vp(t){return t!==null&&!qi(t)&&t.constructor!==null&&!qi(t.constructor)&&rt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Bc=kt("ArrayBuffer");function Yp(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&Bc(t.buffer),s}const Xp=Ms("string"),rt=Ms("function"),Hc=Ms("number"),Is=t=>t!==null&&typeof t=="object",$p=t=>t===!0||t===!1,Ir=t=>{if(Ds(t)!=="object")return!1;const s=ha(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Wp=kt("Date"),zp=kt("File"),qp=kt("Blob"),Kp=kt("FileList"),Jp=t=>Is(t)&&rt(t.pipe),Zp=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||rt(t.append)&&((s=Ds(t))==="formdata"||s==="object"&&rt(t.toString)&&t.toString()==="[object FormData]"))},Qp=kt("URLSearchParams"),ev=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function rr(t,s,{allOwnKeys:i=!1}={}){if(t===null||typeof t>"u")return;let r,e;if(typeof t!="object"&&(t=[t]),pi(t))for(r=0,e=t.length;r<e;r++)s.call(null,t[r],r,t);else{const n=i?Object.getOwnPropertyNames(t):Object.keys(t),o=n.length;let a;for(r=0;r<o;r++)a=n[r],s.call(null,t[a],a,t)}}function Uc(t,s){s=s.toLowerCase();const i=Object.keys(t);let r=i.length,e;for(;r-- >0;)if(e=i[r],s===e.toLowerCase())return e;return null}const Vc=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Yc=t=>!qi(t)&&t!==Vc;function Co(){const{caseless:t}=Yc(this)&&this||{},s={},i=(r,e)=>{const n=t&&Uc(s,e)||e;Ir(s[n])&&Ir(r)?s[n]=Co(s[n],r):Ir(r)?s[n]=Co({},r):pi(r)?s[n]=r.slice():s[n]=r};for(let r=0,e=arguments.length;r<e;r++)arguments[r]&&rr(arguments[r],i);return s}const tv=(t,s,i,{allOwnKeys:r}={})=>(rr(s,(e,n)=>{i&&rt(e)?t[n]=jc(e,i):t[n]=e},{allOwnKeys:r}),t),nv=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),iv=(t,s,i,r)=>{t.prototype=Object.create(s.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),i&&Object.assign(t.prototype,i)},rv=(t,s,i,r)=>{let e,n,o;const a={};if(s=s||{},t==null)return s;do{for(e=Object.getOwnPropertyNames(t),n=e.length;n-- >0;)o=e[n],(!r||r(o,t,s))&&!a[o]&&(s[o]=t[o],a[o]=!0);t=i!==!1&&ha(t)}while(t&&(!i||i(t,s))&&t!==Object.prototype);return s},sv=(t,s,i)=>{t=String(t),(i===void 0||i>t.length)&&(i=t.length),i-=s.length;const r=t.indexOf(s,i);return r!==-1&&r===i},ov=t=>{if(!t)return null;if(pi(t))return t;let s=t.length;if(!Hc(s))return null;const i=new Array(s);for(;s-- >0;)i[s]=t[s];return i},av=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&ha(Uint8Array)),lv=(t,s)=>{const r=(t&&t[Symbol.iterator]).call(t);let e;for(;(e=r.next())&&!e.done;){const n=e.value;s.call(t,n[0],n[1])}},uv=(t,s)=>{let i;const r=[];for(;(i=t.exec(s))!==null;)r.push(i);return r},cv=kt("HTMLFormElement"),hv=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,r,e){return r.toUpperCase()+e}),Pl=(({hasOwnProperty:t})=>(s,i)=>t.call(s,i))(Object.prototype),fv=kt("RegExp"),Xc=(t,s)=>{const i=Object.getOwnPropertyDescriptors(t),r={};rr(i,(e,n)=>{s(e,n,t)!==!1&&(r[n]=e)}),Object.defineProperties(t,r)},dv=t=>{Xc(t,(s,i)=>{if(rt(t)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const r=t[i];if(rt(r)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},pv=(t,s)=>{const i={},r=e=>{e.forEach(n=>{i[n]=!0})};return pi(t)?r(t):r(String(t).split(s)),i},vv=()=>{},gv=(t,s)=>(t=+t,Number.isFinite(t)?t:s),Js="abcdefghijklmnopqrstuvwxyz",kl="0123456789",$c={DIGIT:kl,ALPHA:Js,ALPHA_DIGIT:Js+Js.toUpperCase()+kl},yv=(t=16,s=$c.ALPHA_DIGIT)=>{let i="";const{length:r}=s;for(;t--;)i+=s[Math.random()*r|0];return i};function mv(t){return!!(t&&rt(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const _v=t=>{const s=new Array(10),i=(r,e)=>{if(Is(r)){if(s.indexOf(r)>=0)return;if(!("toJSON"in r)){s[e]=r;const n=pi(r)?[]:{};return rr(r,(o,a)=>{const l=i(o,e+1);!qi(l)&&(n[a]=l)}),s[e]=void 0,n}}return r};return i(t,0)},Ev=kt("AsyncFunction"),bv=t=>t&&(Is(t)||rt(t))&&rt(t.then)&&rt(t.catch),k={isArray:pi,isArrayBuffer:Bc,isBuffer:Vp,isFormData:Zp,isArrayBufferView:Yp,isString:Xp,isNumber:Hc,isBoolean:$p,isObject:Is,isPlainObject:Ir,isUndefined:qi,isDate:Wp,isFile:zp,isBlob:qp,isRegExp:fv,isFunction:rt,isStream:Jp,isURLSearchParams:Qp,isTypedArray:av,isFileList:Kp,forEach:rr,merge:Co,extend:tv,trim:ev,stripBOM:nv,inherits:iv,toFlatObject:rv,kindOf:Ds,kindOfTest:kt,endsWith:sv,toArray:ov,forEachEntry:lv,matchAll:uv,isHTMLForm:cv,hasOwnProperty:Pl,hasOwnProp:Pl,reduceDescriptors:Xc,freezeMethods:dv,toObjectSet:pv,toCamelCase:hv,noop:vv,toFiniteNumber:gv,findKey:Uc,global:Vc,isContextDefined:Yc,ALPHABET:$c,generateString:yv,isSpecCompliantForm:mv,toJSONObject:_v,isAsyncFn:Ev,isThenable:bv};function ie(t,s,i,r,e){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),i&&(this.config=i),r&&(this.request=r),e&&(this.response=e)}k.inherits(ie,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:k.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Wc=ie.prototype,zc={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{zc[t]={value:t}});Object.defineProperties(ie,zc);Object.defineProperty(Wc,"isAxiosError",{value:!0});ie.from=(t,s,i,r,e,n)=>{const o=Object.create(Wc);return k.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),ie.call(o,t.message,s,i,r,e),o.cause=t,o.name=t.name,n&&Object.assign(o,n),o};const Cv=null;function xo(t){return k.isPlainObject(t)||k.isArray(t)}function qc(t){return k.endsWith(t,"[]")?t.slice(0,-2):t}function Tl(t,s,i){return t?t.concat(s).map(function(e,n){return e=qc(e),!i&&n?"["+e+"]":e}).join(i?".":""):s}function xv(t){return k.isArray(t)&&!t.some(xo)}const Sv=k.toFlatObject(k,{},null,function(s){return/^is[A-Z]/.test(s)});function Ls(t,s,i){if(!k.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,i=k.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,m){return!k.isUndefined(m[y])});const r=i.metaTokens,e=i.visitor||c,n=i.dots,o=i.indexes,l=(i.Blob||typeof Blob<"u"&&Blob)&&k.isSpecCompliantForm(s);if(!k.isFunction(e))throw new TypeError("visitor must be a function");function u(v){if(v===null)return"";if(k.isDate(v))return v.toISOString();if(!l&&k.isBlob(v))throw new ie("Blob is not supported. Use a Buffer instead.");return k.isArrayBuffer(v)||k.isTypedArray(v)?l&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function c(v,y,m){let b=v;if(v&&!m&&typeof v=="object"){if(k.endsWith(y,"{}"))y=r?y:y.slice(0,-2),v=JSON.stringify(v);else if(k.isArray(v)&&xv(v)||(k.isFileList(v)||k.endsWith(y,"[]"))&&(b=k.toArray(v)))return y=qc(y),b.forEach(function(E,S){!(k.isUndefined(E)||E===null)&&s.append(o===!0?Tl([y],S,n):o===null?y:y+"[]",u(E))}),!1}return xo(v)?!0:(s.append(Tl(m,y,n),u(v)),!1)}const h=[],d=Object.assign(Sv,{defaultVisitor:c,convertValue:u,isVisitable:xo});function p(v,y){if(!k.isUndefined(v)){if(h.indexOf(v)!==-1)throw Error("Circular reference detected in "+y.join("."));h.push(v),k.forEach(v,function(b,C){(!(k.isUndefined(b)||b===null)&&e.call(s,b,k.isString(C)?C.trim():C,y,d))===!0&&p(b,y?y.concat(C):[C])}),h.pop()}}if(!k.isObject(t))throw new TypeError("data must be an object");return p(t),s}function Al(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return s[r]})}function fa(t,s){this._pairs=[],t&&Ls(t,this,s)}const Kc=fa.prototype;Kc.append=function(s,i){this._pairs.push([s,i])};Kc.toString=function(s){const i=s?function(r){return s.call(this,r,Al)}:Al;return this._pairs.map(function(e){return i(e[0])+"="+i(e[1])},"").join("&")};function Pv(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Jc(t,s,i){if(!s)return t;const r=i&&i.encode||Pv,e=i&&i.serialize;let n;if(e?n=e(s,i):n=k.isURLSearchParams(s)?s.toString():new fa(s,i).toString(r),n){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+n}return t}class kv{constructor(){this.handlers=[]}use(s,i,r){return this.handlers.push({fulfilled:s,rejected:i,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){k.forEach(this.handlers,function(r){r!==null&&s(r)})}}const Ol=kv,Zc={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Tv=typeof URLSearchParams<"u"?URLSearchParams:fa,Av=typeof FormData<"u"?FormData:null,Ov=typeof Blob<"u"?Blob:null,wv=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),Dv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),xt={isBrowser:!0,classes:{URLSearchParams:Tv,FormData:Av,Blob:Ov},isStandardBrowserEnv:wv,isStandardBrowserWebWorkerEnv:Dv,protocols:["http","https","file","blob","url","data"]};function Mv(t,s){return Ls(t,new xt.classes.URLSearchParams,Object.assign({visitor:function(i,r,e,n){return xt.isNode&&k.isBuffer(i)?(this.append(r,i.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},s))}function Iv(t){return k.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function Lv(t){const s={},i=Object.keys(t);let r;const e=i.length;let n;for(r=0;r<e;r++)n=i[r],s[n]=t[n];return s}function Qc(t){function s(i,r,e,n){let o=i[n++];const a=Number.isFinite(+o),l=n>=i.length;return o=!o&&k.isArray(e)?e.length:o,l?(k.hasOwnProp(e,o)?e[o]=[e[o],r]:e[o]=r,!a):((!e[o]||!k.isObject(e[o]))&&(e[o]=[]),s(i,r,e[o],n)&&k.isArray(e[o])&&(e[o]=Lv(e[o])),!a)}if(k.isFormData(t)&&k.isFunction(t.entries)){const i={};return k.forEachEntry(t,(r,e)=>{s(Iv(r),e,i,0)}),i}return null}const Nv={"Content-Type":void 0};function Rv(t,s,i){if(k.isString(t))try{return(s||JSON.parse)(t),k.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(i||JSON.stringify)(t)}const Ns={transitional:Zc,adapter:["xhr","http"],transformRequest:[function(s,i){const r=i.getContentType()||"",e=r.indexOf("application/json")>-1,n=k.isObject(s);if(n&&k.isHTMLForm(s)&&(s=new FormData(s)),k.isFormData(s))return e&&e?JSON.stringify(Qc(s)):s;if(k.isArrayBuffer(s)||k.isBuffer(s)||k.isStream(s)||k.isFile(s)||k.isBlob(s))return s;if(k.isArrayBufferView(s))return s.buffer;if(k.isURLSearchParams(s))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let a;if(n){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Mv(s,this.formSerializer).toString();if((a=k.isFileList(s))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Ls(a?{"files[]":s}:s,l&&new l,this.formSerializer)}}return n||e?(i.setContentType("application/json",!1),Rv(s)):s}],transformResponse:[function(s){const i=this.transitional||Ns.transitional,r=i&&i.forcedJSONParsing,e=this.responseType==="json";if(s&&k.isString(s)&&(r&&!this.responseType||e)){const o=!(i&&i.silentJSONParsing)&&e;try{return JSON.parse(s)}catch(a){if(o)throw a.name==="SyntaxError"?ie.from(a,ie.ERR_BAD_RESPONSE,this,null,this.response):a}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:xt.classes.FormData,Blob:xt.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};k.forEach(["delete","get","head"],function(s){Ns.headers[s]={}});k.forEach(["post","put","patch"],function(s){Ns.headers[s]=k.merge(Nv)});const da=Ns,Fv=k.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Gv=t=>{const s={};let i,r,e;return t&&t.split(`
`).forEach(function(o){e=o.indexOf(":"),i=o.substring(0,e).trim().toLowerCase(),r=o.substring(e+1).trim(),!(!i||s[i]&&Fv[i])&&(i==="set-cookie"?s[i]?s[i].push(r):s[i]=[r]:s[i]=s[i]?s[i]+", "+r:r)}),s},wl=Symbol("internals");function Ei(t){return t&&String(t).trim().toLowerCase()}function Lr(t){return t===!1||t==null?t:k.isArray(t)?t.map(Lr):String(t)}function jv(t){const s=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=i.exec(t);)s[r[1]]=r[2];return s}const Bv=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Zs(t,s,i,r,e){if(k.isFunction(r))return r.call(this,s,i);if(e&&(s=i),!!k.isString(s)){if(k.isString(r))return s.indexOf(r)!==-1;if(k.isRegExp(r))return r.test(s)}}function Hv(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,i,r)=>i.toUpperCase()+r)}function Uv(t,s){const i=k.toCamelCase(" "+s);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+i,{value:function(e,n,o){return this[r].call(this,s,e,n,o)},configurable:!0})})}class Rs{constructor(s){s&&this.set(s)}set(s,i,r){const e=this;function n(a,l,u){const c=Ei(l);if(!c)throw new Error("header name must be a non-empty string");const h=k.findKey(e,c);(!h||e[h]===void 0||u===!0||u===void 0&&e[h]!==!1)&&(e[h||l]=Lr(a))}const o=(a,l)=>k.forEach(a,(u,c)=>n(u,c,l));return k.isPlainObject(s)||s instanceof this.constructor?o(s,i):k.isString(s)&&(s=s.trim())&&!Bv(s)?o(Gv(s),i):s!=null&&n(i,s,r),this}get(s,i){if(s=Ei(s),s){const r=k.findKey(this,s);if(r){const e=this[r];if(!i)return e;if(i===!0)return jv(e);if(k.isFunction(i))return i.call(this,e,r);if(k.isRegExp(i))return i.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,i){if(s=Ei(s),s){const r=k.findKey(this,s);return!!(r&&this[r]!==void 0&&(!i||Zs(this,this[r],r,i)))}return!1}delete(s,i){const r=this;let e=!1;function n(o){if(o=Ei(o),o){const a=k.findKey(r,o);a&&(!i||Zs(r,r[a],a,i))&&(delete r[a],e=!0)}}return k.isArray(s)?s.forEach(n):n(s),e}clear(s){const i=Object.keys(this);let r=i.length,e=!1;for(;r--;){const n=i[r];(!s||Zs(this,this[n],n,s,!0))&&(delete this[n],e=!0)}return e}normalize(s){const i=this,r={};return k.forEach(this,(e,n)=>{const o=k.findKey(r,n);if(o){i[o]=Lr(e),delete i[n];return}const a=s?Hv(n):String(n).trim();a!==n&&delete i[n],i[a]=Lr(e),r[a]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const i=Object.create(null);return k.forEach(this,(r,e)=>{r!=null&&r!==!1&&(i[e]=s&&k.isArray(r)?r.join(", "):r)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,i])=>s+": "+i).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...i){const r=new this(s);return i.forEach(e=>r.set(e)),r}static accessor(s){const r=(this[wl]=this[wl]={accessors:{}}).accessors,e=this.prototype;function n(o){const a=Ei(o);r[a]||(Uv(e,o),r[a]=!0)}return k.isArray(s)?s.forEach(n):n(s),this}}Rs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);k.freezeMethods(Rs.prototype);k.freezeMethods(Rs);const Nt=Rs;function Qs(t,s){const i=this||da,r=s||i,e=Nt.from(r.headers);let n=r.data;return k.forEach(t,function(a){n=a.call(i,n,e.normalize(),s?s.status:void 0)}),e.normalize(),n}function eh(t){return!!(t&&t.__CANCEL__)}function sr(t,s,i){ie.call(this,t??"canceled",ie.ERR_CANCELED,s,i),this.name="CanceledError"}k.inherits(sr,ie,{__CANCEL__:!0});function Vv(t,s,i){const r=i.config.validateStatus;!i.status||!r||r(i.status)?t(i):s(new ie("Request failed with status code "+i.status,[ie.ERR_BAD_REQUEST,ie.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}const Yv=xt.isStandardBrowserEnv?function(){return{write:function(i,r,e,n,o,a){const l=[];l.push(i+"="+encodeURIComponent(r)),k.isNumber(e)&&l.push("expires="+new Date(e).toGMTString()),k.isString(n)&&l.push("path="+n),k.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(i){const r=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(i){this.write(i,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Xv(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function $v(t,s){return s?t.replace(/\/+$/,"")+"/"+s.replace(/^\/+/,""):t}function th(t,s){return t&&!Xv(s)?$v(t,s):s}const Wv=xt.isStandardBrowserEnv?function(){const s=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");let r;function e(n){let o=n;return s&&(i.setAttribute("href",o),o=i.href),i.setAttribute("href",o),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return r=e(window.location.href),function(o){const a=k.isString(o)?e(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function zv(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function qv(t,s){t=t||10;const i=new Array(t),r=new Array(t);let e=0,n=0,o;return s=s!==void 0?s:1e3,function(l){const u=Date.now(),c=r[n];o||(o=u),i[e]=l,r[e]=u;let h=n,d=0;for(;h!==e;)d+=i[h++],h=h%t;if(e=(e+1)%t,e===n&&(n=(n+1)%t),u-o<s)return;const p=c&&u-c;return p?Math.round(d*1e3/p):void 0}}function Dl(t,s){let i=0;const r=qv(50,250);return e=>{const n=e.loaded,o=e.lengthComputable?e.total:void 0,a=n-i,l=r(a),u=n<=o;i=n;const c={loaded:n,total:o,progress:o?n/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&u?(o-n)/l:void 0,event:e};c[s?"download":"upload"]=!0,t(c)}}const Kv=typeof XMLHttpRequest<"u",Jv=Kv&&function(t){return new Promise(function(i,r){let e=t.data;const n=Nt.from(t.headers).normalize(),o=t.responseType;let a;function l(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}k.isFormData(e)&&(xt.isStandardBrowserEnv||xt.isStandardBrowserWebWorkerEnv?n.setContentType(!1):n.setContentType("multipart/form-data;",!1));let u=new XMLHttpRequest;if(t.auth){const p=t.auth.username||"",v=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";n.set("Authorization","Basic "+btoa(p+":"+v))}const c=th(t.baseURL,t.url);u.open(t.method.toUpperCase(),Jc(c,t.params,t.paramsSerializer),!0),u.timeout=t.timeout;function h(){if(!u)return;const p=Nt.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),y={data:!o||o==="text"||o==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:p,config:t,request:u};Vv(function(b){i(b),l()},function(b){r(b),l()},y),u=null}if("onloadend"in u?u.onloadend=h:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(h)},u.onabort=function(){u&&(r(new ie("Request aborted",ie.ECONNABORTED,t,u)),u=null)},u.onerror=function(){r(new ie("Network Error",ie.ERR_NETWORK,t,u)),u=null},u.ontimeout=function(){let v=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const y=t.transitional||Zc;t.timeoutErrorMessage&&(v=t.timeoutErrorMessage),r(new ie(v,y.clarifyTimeoutError?ie.ETIMEDOUT:ie.ECONNABORTED,t,u)),u=null},xt.isStandardBrowserEnv){const p=(t.withCredentials||Wv(c))&&t.xsrfCookieName&&Yv.read(t.xsrfCookieName);p&&n.set(t.xsrfHeaderName,p)}e===void 0&&n.setContentType(null),"setRequestHeader"in u&&k.forEach(n.toJSON(),function(v,y){u.setRequestHeader(y,v)}),k.isUndefined(t.withCredentials)||(u.withCredentials=!!t.withCredentials),o&&o!=="json"&&(u.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&u.addEventListener("progress",Dl(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",Dl(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=p=>{u&&(r(!p||p.type?new sr(null,t,u):p),u.abort(),u=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const d=zv(c);if(d&&xt.protocols.indexOf(d)===-1){r(new ie("Unsupported protocol "+d+":",ie.ERR_BAD_REQUEST,t));return}u.send(e||null)})},Nr={http:Cv,xhr:Jv};k.forEach(Nr,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const Zv={getAdapter:t=>{t=k.isArray(t)?t:[t];const{length:s}=t;let i,r;for(let e=0;e<s&&(i=t[e],!(r=k.isString(i)?Nr[i.toLowerCase()]:i));e++);if(!r)throw r===!1?new ie(`Adapter ${i} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(k.hasOwnProp(Nr,i)?`Adapter '${i}' is not available in the build`:`Unknown adapter '${i}'`);if(!k.isFunction(r))throw new TypeError("adapter is not a function");return r},adapters:Nr};function eo(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new sr(null,t)}function Ml(t){return eo(t),t.headers=Nt.from(t.headers),t.data=Qs.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Zv.getAdapter(t.adapter||da.adapter)(t).then(function(r){return eo(t),r.data=Qs.call(t,t.transformResponse,r),r.headers=Nt.from(r.headers),r},function(r){return eh(r)||(eo(t),r&&r.response&&(r.response.data=Qs.call(t,t.transformResponse,r.response),r.response.headers=Nt.from(r.response.headers))),Promise.reject(r)})}const Il=t=>t instanceof Nt?t.toJSON():t;function ti(t,s){s=s||{};const i={};function r(u,c,h){return k.isPlainObject(u)&&k.isPlainObject(c)?k.merge.call({caseless:h},u,c):k.isPlainObject(c)?k.merge({},c):k.isArray(c)?c.slice():c}function e(u,c,h){if(k.isUndefined(c)){if(!k.isUndefined(u))return r(void 0,u,h)}else return r(u,c,h)}function n(u,c){if(!k.isUndefined(c))return r(void 0,c)}function o(u,c){if(k.isUndefined(c)){if(!k.isUndefined(u))return r(void 0,u)}else return r(void 0,c)}function a(u,c,h){if(h in s)return r(u,c);if(h in t)return r(void 0,u)}const l={url:n,method:n,data:n,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,c)=>e(Il(u),Il(c),!0)};return k.forEach(Object.keys(Object.assign({},t,s)),function(c){const h=l[c]||e,d=h(t[c],s[c],c);k.isUndefined(d)&&h!==a||(i[c]=d)}),i}const nh="1.4.0",pa={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{pa[t]=function(r){return typeof r===t||"a"+(s<1?"n ":" ")+t}});const Ll={};pa.transitional=function(s,i,r){function e(n,o){return"[Axios v"+nh+"] Transitional option '"+n+"'"+o+(r?". "+r:"")}return(n,o,a)=>{if(s===!1)throw new ie(e(o," has been removed"+(i?" in "+i:"")),ie.ERR_DEPRECATED);return i&&!Ll[o]&&(Ll[o]=!0,console.warn(e(o," has been deprecated since v"+i+" and will be removed in the near future"))),s?s(n,o,a):!0}};function Qv(t,s,i){if(typeof t!="object")throw new ie("options must be an object",ie.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let e=r.length;for(;e-- >0;){const n=r[e],o=s[n];if(o){const a=t[n],l=a===void 0||o(a,n,t);if(l!==!0)throw new ie("option "+n+" must be "+l,ie.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new ie("Unknown option "+n,ie.ERR_BAD_OPTION)}}const So={assertOptions:Qv,validators:pa},Ut=So.validators;class Zr{constructor(s){this.defaults=s,this.interceptors={request:new Ol,response:new Ol}}request(s,i){typeof s=="string"?(i=i||{},i.url=s):i=s||{},i=ti(this.defaults,i);const{transitional:r,paramsSerializer:e,headers:n}=i;r!==void 0&&So.assertOptions(r,{silentJSONParsing:Ut.transitional(Ut.boolean),forcedJSONParsing:Ut.transitional(Ut.boolean),clarifyTimeoutError:Ut.transitional(Ut.boolean)},!1),e!=null&&(k.isFunction(e)?i.paramsSerializer={serialize:e}:So.assertOptions(e,{encode:Ut.function,serialize:Ut.function},!0)),i.method=(i.method||this.defaults.method||"get").toLowerCase();let o;o=n&&k.merge(n.common,n[i.method]),o&&k.forEach(["delete","get","head","post","put","patch","common"],v=>{delete n[v]}),i.headers=Nt.concat(o,n);const a=[];let l=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(i)===!1||(l=l&&y.synchronous,a.unshift(y.fulfilled,y.rejected))});const u=[];this.interceptors.response.forEach(function(y){u.push(y.fulfilled,y.rejected)});let c,h=0,d;if(!l){const v=[Ml.bind(this),void 0];for(v.unshift.apply(v,a),v.push.apply(v,u),d=v.length,c=Promise.resolve(i);h<d;)c=c.then(v[h++],v[h++]);return c}d=a.length;let p=i;for(h=0;h<d;){const v=a[h++],y=a[h++];try{p=v(p)}catch(m){y.call(this,m);break}}try{c=Ml.call(this,p)}catch(v){return Promise.reject(v)}for(h=0,d=u.length;h<d;)c=c.then(u[h++],u[h++]);return c}getUri(s){s=ti(this.defaults,s);const i=th(s.baseURL,s.url);return Jc(i,s.params,s.paramsSerializer)}}k.forEach(["delete","get","head","options"],function(s){Zr.prototype[s]=function(i,r){return this.request(ti(r||{},{method:s,url:i,data:(r||{}).data}))}});k.forEach(["post","put","patch"],function(s){function i(r){return function(n,o,a){return this.request(ti(a||{},{method:s,headers:r?{"Content-Type":"multipart/form-data"}:{},url:n,data:o}))}}Zr.prototype[s]=i(),Zr.prototype[s+"Form"]=i(!0)});const Rr=Zr;class va{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(n){i=n});const r=this;this.promise.then(e=>{if(!r._listeners)return;let n=r._listeners.length;for(;n-- >0;)r._listeners[n](e);r._listeners=null}),this.promise.then=e=>{let n;const o=new Promise(a=>{r.subscribe(a),n=a}).then(e);return o.cancel=function(){r.unsubscribe(n)},o},s(function(n,o,a){r.reason||(r.reason=new sr(n,o,a),i(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const i=this._listeners.indexOf(s);i!==-1&&this._listeners.splice(i,1)}static source(){let s;return{token:new va(function(e){s=e}),cancel:s}}}const eg=va;function tg(t){return function(i){return t.apply(null,i)}}function ng(t){return k.isObject(t)&&t.isAxiosError===!0}const Po={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Po).forEach(([t,s])=>{Po[s]=t});const ig=Po;function ih(t){const s=new Rr(t),i=jc(Rr.prototype.request,s);return k.extend(i,Rr.prototype,s,{allOwnKeys:!0}),k.extend(i,s,null,{allOwnKeys:!0}),i.create=function(e){return ih(ti(t,e))},i}const Ae=ih(da);Ae.Axios=Rr;Ae.CanceledError=sr;Ae.CancelToken=eg;Ae.isCancel=eh;Ae.VERSION=nh;Ae.toFormData=Ls;Ae.AxiosError=ie;Ae.Cancel=Ae.CanceledError;Ae.all=function(s){return Promise.all(s)};Ae.spread=tg;Ae.isAxiosError=ng;Ae.mergeConfig=ti;Ae.AxiosHeaders=Nt;Ae.formToJSON=t=>Qc(k.isHTMLForm(t)?new FormData(t):t);Ae.HttpStatusCode=ig;Ae.default=Ae;const rg=Ae;const Fs=(t,s)=>{const i=t.__vccOpts||t;for(const[r,e]of s)i[r]=e;return i},Ee=t=>(sa("data-v-5229ae4c"),t=t(),oa(),t),sg={id:"addElements",class:"settings"},og={style:{display:"flex"}},ag={style:{float:"left"}},lg=Ee(()=>B("span",{class:"close-icons"},"X",-1)),ug=[lg],cg=Ee(()=>B("br",null,null,-1)),hg=Ee(()=>B("span",null,"Select Ontology: ",-1)),fg=["value"],dg=Ee(()=>B("option",{value:"new"},"add new to server",-1)),pg=Ee(()=>B("span",{class:"reload"},"↻",-1)),vg=[pg],gg={key:0},yg=Ee(()=>B("span",null,"Choose a File or URL",-1)),mg=Ee(()=>B("option",{value:"file"},"File",-1)),_g=Ee(()=>B("option",{value:"url"},"URL",-1)),Eg=[mg,_g],bg=Ee(()=>B("br",null,null,-1)),Cg={key:0},xg=Ee(()=>B("label",{for:"url_input"},"Select URL: ",-1)),Sg=Ee(()=>B("input",{type:"url",id:"url_input"},null,-1)),Pg=[xg,Sg],kg={key:1},Tg=Ee(()=>B("label",{for:"file_input"},"Select File: ",-1)),Ag=Ee(()=>B("br",null,null,-1)),Og=Ee(()=>B("label",{for:"add_to_server_btt"},"Add Ontology to Server: ",-1)),wg=Ee(()=>B("h5",null,"ADD Ontology to Server",-1)),Dg=[wg],Mg={key:1},Ig=Ee(()=>B("br",null,null,-1)),Lg=Ee(()=>B("label",{for:"super_class_select"},"Select Name of Superclass: ",-1)),Ng=["value"],Rg=Ee(()=>B("br",null,null,-1)),Fg=Ee(()=>B("label",{for:"relation_input"},"Name of Relation: ",-1)),Gg=Ee(()=>B("input",{id:"relation_input",type:"text",value:"subclass_of"},null,-1)),jg=Ee(()=>B("br",null,null,-1)),Bg=Ee(()=>B("br",null,null,-1)),Hg={__name:"addDialog",props:{element_type:String},emits:["close","add"],setup(t,{emit:s}){const i=t,{element_type:r}=uc(i),e=Ye(""),n=Ye(""),o=Ye(""),a=Ye([""]),l=Ye([]);Ye({});const u=Ye({}),c=rg.create({baseURL:""});function h(){c.get("/onto").then(C=>{console.log(C.data),console.log("test"),a.value=C.data,console.log(a.value),console.log("test2")}).catch(C=>{console.log(C.response)})}function d(){s("close")}function p(C,E){console.log("adding started"),console.log(C+E);let S=y(C,E);console.log(S),s("add",S)}function v(C){C!=="new"&&c.get("/onto/"+C+"/classes").then(E=>{console.log(E.data),console.log("test"),l.value=E.data,console.log(a.value),console.log("test2")}).catch(E=>{console.log(E.response)})}function y(C,E){c.get("/onto/"+C+"/"+E+"/subclasses").then(S=>{console.log(S.data),S.data,s("add",S.data)}).catch(S=>{console.log(S.response)})}function m(C){const E=C.target;E&&E.files&&(u.value=E.files[0])}function b(C,E){var S=new FormData;S.append("file",E),console.log("test"),c.post("/onto",S,{headers:{"Content-Type":"multipart/form-data"}}).then(D=>{console.log(D.data),console.log("test")}).catch(D=>{console.log(D.response)})}return h(),(C,E)=>(be(),Se("div",sg,[B("div",og,[B("h3",ag,"Add "+gn(Mt(r)),1),B("button",{onClick:d},ug)]),cg,B("form",null,[hg,Ri(B("select",{"onUpdate:modelValue":E[0]||(E[0]=S=>e.value=S),name:"Ontology",id:"ontoSelect",onChange:E[1]||(E[1]=S=>v(e.value))},[(be(!0),Se(Xe,null,Wr(a.value,S=>(be(),Se("option",{value:S},gn(S),9,fg))),256)),dg],544),[[Ks,e.value]]),B("button",{type:"button",onClick:h},vg),e.value==="new"?(be(),Se("div",gg,[yg,Ri(B("select",{"onUpdate:modelValue":E[2]||(E[2]=S=>n.value=S),id:"addOption"},Eg,512),[[Ks,n.value]]),bg,n.value==="url"?(be(),Se("div",Cg,Pg)):n.value==="file"?(be(),Se("div",kg,[Tg,B("input",{onChange:E[3]||(E[3]=S=>m(S)),type:"file",id:"file_input",enctype:"multipart/form-data/"},null,32)])):Lc("",!0),Ag,Og,B("button",{class:"button",type:"button",onClick:E[4]||(E[4]=S=>b("test.owl",u.value))},Dg)])):(be(),Se("div",Mg,[Ig,Lg,Ri(B("select",{id:"super_class_select","onUpdate:modelValue":E[5]||(E[5]=S=>o.value=S),name:"super-class"},[(be(!0),Se(Xe,null,Wr(l.value,S=>(be(),Se("option",{value:S},gn(S),9,Ng))),256))],512),[[Ks,o.value]]),Rg,Fg,Gg,jg,Bg,B("button",{class:"button",type:"button",onClick:E[6]||(E[6]=S=>p(e.value,o.value))},[B("h5",null,"ADD "+gn(Mt(r))+" to Sidebar",1)])]))])]))}},Ug=Fs(Hg,[["__scopeId","data-v-5229ae4c"]]),Vg="modulepreload",Yg=function(t){return"/"+t},Nl={},Xg=function(s,i,r){if(!i||i.length===0)return s();const e=document.getElementsByTagName("link");return Promise.all(i.map(n=>{if(n=Yg(n),n in Nl)return;Nl[n]=!0;const o=n.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let c=e.length-1;c>=0;c--){const h=e[c];if(h.href===n&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":Vg,o||(u.as="script",u.crossOrigin=""),u.href=n,document.head.appendChild(u),o)return new Promise((c,h)=>{u.addEventListener("load",c),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>s())};const $g=md({name:"RecursiveComponent",props:{items:{type:Object,required:!0},indentationLevel:{type:Number,default:0}},components:{RecursiveComponent:()=>Xg(()=>Promise.resolve().then(()=>qg),void 0)},setup(t){const s=xs({toggleItem(i){i.expanded=!i.expanded},hasChildItems(i){return i.children&&i.children.length>0},handleItemClick(i,r){console.log("Clicked:",i.name),s.toggleItem(i),r.stopPropagation()}});return{...s}},methods:{getIndentationStyle(t){return{paddingLeft:`${t*20}px`}}}}),Wg=["onClick"];function zg(t,s,i,r,e,n){const o=wd("recursive-component",!0);return be(),Se("ul",null,[(be(!0),Se(Xe,null,Wr(t.items,a=>(be(),Se("li",{key:a.name,onClick:l=>t.handleItemClick(a,l)},[B("span",{style:Es(t.getIndentationStyle(t.indentationLevel)),class:hi({expandable:t.hasChildItems(a)})},null,6),Kr(" "+gn(a.name)+" ",1),a.expanded&&t.hasChildItems(a)?(be(),Mc(o,{key:0,items:a.children,indentationLevel:t.indentationLevel+1,onClick:s[0]||(s[0]=zi(()=>{},["stop"]))},null,8,["items","indentationLevel"])):Lc("",!0)],8,Wg))),128))])}const rh=Fs($g,[["render",zg],["__scopeId","data-v-473c4da6"]]),qg=Object.freeze(Object.defineProperty({__proto__:null,default:rh},Symbol.toStringTag,{value:"Module"}));const sh=t=>(sa("data-v-c1af47f4"),t=t(),oa(),t),Kg={id:"elements_window"},Jg={id:"elements_heading"},Zg={style:{float:"left"}},Qg=sh(()=>B("span",{class:"toggle-icons"},"+",-1)),ey=[Qg],ty=sh(()=>B("div",{class:"element_spacer"},null,-1)),ny={id:"elements"},iy={__name:"elementWindow",props:{element_type:String},setup(t){const s=t,{element_type:i}=uc(s);let r=Ye({});i.value==="Processes"?r.value=[{name:"GeneralCapabilityEffecting",children:[{name:"Draining",children:[{type:"process",name:"test1",children:[{name:"test2",type:"process"}]}]},{type:"process",name:"Pumping"}]}]:i.value==="Materials"?r=[{name:"Grundmaterialien",children:[{type:"materials_package",name:"foundation_materials",children:[{type:"material",name:"Eingangsmaterial"},{type:"material",name:"Zwischenprodukt"},{type:"material",name:"Endprodukt"}]}]}]:console.log("unknown element type: "+i);let e=Ye(!1);function n(a){console.log("materials in sidebar"),r.value=a}const o=()=>{e.value=!e.value};return(a,l)=>(be(),Se(Xe,null,[B("div",Kg,[B("div",Jg,[B("div",Zg,[B("h4",null,gn(Mt(i)),1)]),B("button",{onClick:o},ey)]),ty,B("div",ny,[Ge(rh,{items:Mt(r),indentationLevel:0},null,8,["items"])])]),Ri(Ge(Ug,{element_type:Mt(i),onClose:l[0]||(l[0]=u=>De(e)?e.value=!1:e=!1),onAdd:n},null,8,["element_type"]),[[Gc,Mt(e)]])],64))}},Rl=Fs(iy,[["__scopeId","data-v-c1af47f4"]]);const ga=t=>(sa("data-v-33058346"),t=t(),oa(),t),ry={class:"logo"},sy=["src"],oy=ga(()=>B("span",{class:"material-icons"},">>",-1)),ay=[oy],ly=ga(()=>B("div",{class:"element_spacer"},null,-1)),uy=ga(()=>B("div",{class:"element_spacer"},null,-1)),cy={__name:"Sidebar",setup(t){const s=Ye(localStorage.getItem("is_expanded")==="true"),i=()=>{s.value=!s.value,localStorage.setItem("is_expanded",s.value)};return(r,e)=>(be(),Se("aside",{class:hi(`${s.value?"is-expanded":""}`),onDrop:e[0]||(e[0]=n=>r.onDrop(n)),onDragenter:e[1]||(e[1]=zi(()=>{},["prevent"])),onDragover:e[2]||(e[2]=zi(()=>{},["prevent"]))},[B("div",ry,[B("img",{src:Mt(Hp),alt:"Vue"},null,8,sy)]),B("div",{class:"menu-toggle-wrap"},[B("button",{class:"menu-toggle",onClick:i},ay)]),Ri(B("div",null,[ly,Ge(Rl,{element_type:"Materials"},{default:vo(()=>[Kr(" Test ")]),_:1}),uy,Ge(Rl,{element_type:"Processes"},{default:vo(()=>[Kr(" Test ")]),_:1})],512),[[Gc,s.value]])],34))}},hy=Fs(cy,[["__scopeId","data-v-33058346"]]);function qn(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?qn=function(s){return typeof s}:qn=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},qn(t)}function H(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Fl(t,s){for(var i=0;i<s.length;i++){var r=s[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function z(t,s,i){return s&&Fl(t.prototype,s),i&&Fl(t,i),t}function f(t,s,i){return s in t?Object.defineProperty(t,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[s]=i,t}function oe(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),s&&ko(t,s)}function ye(t){return ye=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},ye(t)}function ko(t,s){return ko=Object.setPrototypeOf||function(r,e){return r.__proto__=e,r},ko(t,s)}function fy(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function g(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dy(t,s){return s&&(typeof s=="object"||typeof s=="function")?s:g(t)}function ae(t){var s=fy();return function(){var r=ye(t),e;if(s){var n=ye(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return dy(this,e)}}function py(t,s){for(;!Object.prototype.hasOwnProperty.call(t,s)&&(t=ye(t),t!==null););return t}function me(t,s,i){return typeof Reflect<"u"&&Reflect.get?me=Reflect.get:me=function(e,n,o){var a=py(e,n);if(a){var l=Object.getOwnPropertyDescriptor(a,n);return l.get?l.get.call(o):l.value}},me(t,s,i||t)}function Fr(t,s){return gy(t)||my(t,s)||oh(t,s)||Ey()}function ni(t){return vy(t)||yy(t)||oh(t)||_y()}function vy(t){if(Array.isArray(t))return To(t)}function gy(t){if(Array.isArray(t))return t}function yy(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function my(t,s){var i=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(i!=null){var r=[],e=!0,n=!1,o,a;try{for(i=i.call(t);!(e=(o=i.next()).done)&&(r.push(o.value),!(s&&r.length===s));e=!0);}catch(l){n=!0,a=l}finally{try{!e&&i.return!=null&&i.return()}finally{if(n)throw a}}return r}}function oh(t,s){if(t){if(typeof t=="string")return To(t,s);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return To(t,s)}}function To(t,s){(s==null||s>t.length)&&(s=t.length);for(var i=0,r=new Array(s);i<s;i++)r[i]=t[i];return r}function _y(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ey(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function an(t,s,i){return t==="*"?!0:t.length>0?t.indexOf(s)!==-1:!i}function U(t,s,i){var r;t=t||{},s=s||{};var e=t,n=s;if(i)for(r=0;r<i.length;r++)e[i[r]]=n[i[r]];else for(r in n)e[r]=n[r];return t}function Ao(t){return Object.prototype.toString.call(t)==="[object Number]"}function _e(t){return typeof t=="string"}function ah(t){return typeof t=="boolean"}function ii(t){return t==null?!1:Object.prototype.toString.call(t)==="[object Object]"}function by(t){return Object.prototype.toString.call(t)==="[object Date]"}function xn(t){return Object.prototype.toString.call(t)==="[object Function]"}function Qr(t){if(_e(t))return""+t;if(ah(t))return!!t;if(by(t))return new Date(t.getTime());if(xn(t))return t;if(Array.isArray(t)){for(var s=[],i=0;i<t.length;i++)s.push(Qr(t[i]));return s}else if(ii(t)){var r={};for(var e in t)r[e]=Qr(t[e]);return r}else return t}function es(t,s,i,r){var e={},n,o,a={};for(i=i||[],r=r||[],o=0;o<i.length;o++)e[i[o]]=!0;for(o=0;o<r.length;o++)a[r[o]]=!0;var l=Qr(t);for(o in s)if(l[o]==null||a[o])l[o]=s[o];else if(e[o])n=[],n.push.apply(n,Array.isArray(l[o])?l[o]:[l[o]]),n.push(s[o]),l[o]=n;else if(_e(s[o])||ah(s[o])||xn(s[o])||Ao(s[o]))l[o]=s[o];else if(Array.isArray(s[o]))n=[],Array.isArray(l[o])&&n.push.apply(n,l[o]),n.push.apply(n,s[o]),l[o]=n;else if(ii(s[o])){ii(l[o])||(l[o]={});for(var u in s[o])l[o][u]=s[o][u]}return l}function lh(t,s,i){for(var r=0;r<i.length;r++){var e=i[r][0][i[r][1]].apply(i[r][0],i[r][2]);if(e===s)return e}return t}function Cy(t,s,i,r){var e=function(a){var l=a.match(/(\${.*?})/g);if(l!=null)for(var u=0;u<l.length;u++){var c=s[l[u].substring(2,l[u].length-1)]||"";c!=null&&(a=a.replace(l[u],c))}if(l=a.match(/({{.*?}})/g),l!=null)for(var h=0;h<l.length;h++){var d=s[l[h].substring(2,l[h].length-2)]||"";d!=null&&(a=a.replace(l[h],d))}return a},n=function o(a){if(a!=null){if(_e(a))return e(a);if(xn(a)&&!r&&(i==null||(a.name||"").indexOf(i)===0))return a(s);if(Array.isArray(a)){for(var l=[],u=0;u<a.length;u++)l.push(o(a[u]));return l}else if(ii(a)){var c={};for(var h in a)c[h]=o(a[h]);return c}else return a}};return n(t)}function X(t,s){if(t)for(var i=0;i<t.length;i++)s(t[i]);else return null}function tn(t,s){if(t){for(var i=0;i<t.length;i++)if(s(t[i]))return i}return-1}function xy(t,s){var i=[];if(t)for(var r=0;r<t.length;r++)s(t[r])&&i.push(r);return i}function ya(t,s){var i=tn(t,s);return i===-1?null:t[i]}function Sy(t,s){var i=xy(t,s);return i.map(function(r){return t[r]})}function uh(t,s){var i=null;return t.forEach(function(r){s(r)&&(i=r)}),i}function Py(t){var s=[];return t.forEach(function(i){s.push(i)}),s}function we(t,s){var i=tn(t,s);return i>-1&&t.splice(i,1),i!==-1}function gr(t){if(Array.fromArray!=null)return Array.from(t);var s=[];return Array.prototype.push.apply(s,t),s}function Gl(t,s){var i=t.indexOf(s);return i>-1&&t.splice(i,1),i!==-1}function ch(t,s,i,r){var e=t[s];return e==null&&(e=[],t[s]=e),e[r?"unshift":"push"](i),e}function bi(t,s,i){return t.indexOf(s)===-1?(i?t.unshift(s):t.push(s),!0):!1}var Ie=[];for(var Ci=0;Ci<256;Ci++)Ie[Ci]=(Ci<16?"0":"")+Ci.toString(16);function ke(){var t=Math.random()*4294967295|0,s=Math.random()*4294967295|0,i=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return Ie[t&255]+Ie[t>>8&255]+Ie[t>>16&255]+Ie[t>>24&255]+"-"+Ie[s&255]+Ie[s>>8&255]+"-"+Ie[s>>16&15|64]+Ie[s>>24&255]+"-"+Ie[i&63|128]+Ie[i>>8&255]+"-"+Ie[i>>16&255]+Ie[i>>24&255]+Ie[r&255]+Ie[r>>8&255]+Ie[r>>16&255]+Ie[r>>24&255]}function ts(t,s,i){var r={x:t.x-s.x,y:t.y-s.y},e=Math.cos(i/360*Math.PI*2),n=Math.sin(i/360*Math.PI*2);return{x:r.x*e-r.y*n+s.x,y:r.y*e+r.x*n+s.y,cr:e,sr:n}}function ma(t){if(t==null)return null;for(var s=t.replace(/^\s\s*/,""),i=/\s/,r=s.length;i.test(s.charAt(--r)););return s.slice(0,r+1)}function ky(t,s){t=t.length==null||typeof t=="string"?[t]:t;for(var i=0;i<t.length;i++)s(t[i])}function hh(t,s){for(var i=[],r=0;r<t.length;r++)i.push(s(t[r]));return i}function Pe(){for(var t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];if(typeof console<"u")try{var r=arguments[arguments.length-1];console.log(r)}catch{}}function ns(t){return t<0?-1:t>0?1:0}function yr(t,s,i){return function(){var r=null;try{s!=null&&(r=s.apply(this,arguments))}catch(e){Pe("jsPlumb function failed : "+e)}if(t!=null&&(i==null||r!==i))try{r=t.apply(this,arguments)}catch(e){Pe("wrapped function failed : "+e)}return r}}function jl(t,s,i){return t.has(s)||t.set(s,i()),t.get(s)}function fh(t,s){for(var i=t.__proto__;i!=null;){if(i instanceof s)return!0;i=i.__proto__}return!1}function Ty(t,s,i,r){if(s.length===0)s.push(t);else{for(var e=r?-1:1,n=0,o=s.length,a=Math.floor((n+o)/2);o>n;){var l=i(t,s[a])*e;l<0?o=a:n=a+1,a=Math.floor((n+o)/2)}s.splice(a,0,t)}}function Sn(t,s,i){i=i||t.parentNode;for(var r=i.querySelectorAll(s),e=0;e<r.length;e++)if(r[e]===t)return!0;return!1}function Ki(t,s){t.stopPropagation?t.stopPropagation():t.returnValue=!1,!s&&t.preventDefault&&t.preventDefault()}function Dt(t,s,i,r){if(r&&Sn(t,s,i))return t;for(t=t.parentNode;t!=null&&t!==i;){if(Sn(t,s))return t;t=t.parentNode}}function ze(t){return t.srcElement||t.target}function Ay(t,s,i){s=ma(s),typeof t.className.baseVal<"u"?t.className.baseVal=s:t.className=s;try{var r=t.classList;if(r!=null){for(;r.length>0;)r.remove(r.item(0));for(var e=0;e<i.length;e++)i[e]&&r.add(i[e])}}catch(n){Pe("WARN: cannot set class list",n)}}function _a(t){return t.className!=null?typeof t.className.baseVal>"u"?t.className:t.className.baseVal:""}function dh(t,s,i){var r=s==null?[]:Array.isArray(s)?s:s.split(/\s+/),e=i==null?[]:Array.isArray(i)?i:i.split(/\s+/),n=_a(t),o=n.split(/\s+/),a=function(u,c){for(var h=0;h<c.length;h++)if(u)o.indexOf(c[h])===-1&&o.push(c[h]);else{var d=o.indexOf(c[h]);d!==-1&&o.splice(d,1)}};a(!0,r),a(!1,e),Ay(t,o.join(" "),o)}function Ji(t){return!_e(t)&&!Array.isArray(t)&&t.length!=null&&t.documentElement==null&&t.nodeType==null}function Oy(t){return _a(t)}function pn(t,s){var i=function(e,n){if(e!=null&&n!=null&&n.length>0)if(e.classList){var o=ma(n).split(/\s+/);X(o,function(a){e.classList.add(a)})}else dh(e,n)};Ji(t)?X(t,function(r){return i(r,s)}):i(t,s)}function wy(t,s){return t.classList?t.classList.contains(s):_a(t).indexOf(s)!==-1}function Oo(t,s){var i=function(e,n){if(e!=null&&n!=null&&n.length>0)if(e.classList){var o=ma(n).split(/\s+/);o.forEach(function(a){e.classList.remove(a)})}else dh(e,null,n)};Ji(t)?X(t,function(r){return i(r,s)}):i(t,s)}function Dy(t,s){var i=this,r=function(n,o){n!=null&&o!=null&&o.length>0&&(n.classList?n.classList.toggle(o):i.hasClass(n,o)?i.removeClass(n,o):i.addClass(n,o))};Ji(t)?X(t,function(e){return r(e,s)}):r(t,s)}function ph(t,s,i,r){return vh(null,t,s,i,r)}function vh(t,s,i,r,e){var n=t==null?document.createElement(s):document.createElementNS(t,s),o;i=i||{};for(o in i)n.style[o]=i[o];r&&(n.className=r),e=e||{};for(o in e)n.setAttribute(o,""+e[o]);return n}function Un(t){var s=t.getBoundingClientRect(),i=document.body,r=document.documentElement,e=window.pageYOffset||r.scrollTop||i.scrollTop,n=window.pageXOffset||r.scrollLeft||i.scrollLeft,o=r.clientTop||i.clientTop||0,a=r.clientLeft||i.clientLeft||0,l=s.top+e-o,u=s.left+n-a;return{x:Math.round(u),y:Math.round(l)}}function My(t){return{w:t.offsetWidth,h:t.offsetHeight}}function Iy(t){try{return{w:parseFloat(t.width.baseVal.value),h:parseFloat(t.height.baseVal.value)}}catch{return{w:0,h:0}}}function Ly(t){try{return{x:parseFloat(t.x.baseVal.value),y:parseFloat(t.y.baseVal.value)}}catch{return{x:0,y:0}}}function mr(t,s){var i=s.getContainer().getBoundingClientRect(),r=t.getBoundingClientRect(),e=s.currentZoom;return{x:(r.left-i.left)/e,y:(r.top-i.top)/e}}function xi(t,s){var i=t.getBoundingClientRect(),r=s.currentZoom;return{w:i.width/r,h:i.height/r}}var Pn;(function(t){t.SVG="SVG",t.HTML="HTML"})(Pn||(Pn={}));function wo(t){return t instanceof SVGElement?Pn.SVG:Pn.HTML}function Ny(t){return wo(t)===Pn.SVG}function kn(){for(var t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return s.map(function(r){return"."+r}).join(",")}function Ry(){for(var t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return s.join(" ")}function Gs(){for(var t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return s.map(function(r){return"["+r+"]"}).join(",")}var Do="source",gh="target",Mo="block",ri="none",Zi="absolute",Bl="fixed",Fy="static",yh="data-jtk-group",zt="data-jtk-managed",Gr="data-jtk-not-draggable",Hl="tabindex",Gy="data-jtk-scope",mh=Gy+"-",_h="checkCondition",jy="checkDropAllowed",Ea="jtk-connector",By="jtk-connector-outline",Hy="jtk-connected",Kn="jtk-endpoint",Uy="jtk-endpoint-connected",Vy="jtk-endpoint-full",ba="jtk-floating-endpoint",Yy="jtk-endpoint-drop-allowed",Xy="jtk-endpoint-drop-forbidden",$y="jtk-endpoint-anchor",_r="jtk-group-collapsed",Si="jtk-group-expanded",js="jtk-overlay",Wy="anchor:changed",Eh="connection",bh="internal.connection",zy="connection:detach",Ch="connection:move",qy="container:change",Ky="endpoint:replaced",xh="internal.endpoint:unregistered",Ca="internal.connection:detached",Sh="element:manage",Jy="group:added",Zy="group:collapse",Qy="group:expand",em="group:member:added",tm="group:member:removed",nm="group:removed",Ph="maxConnections",im="group:nested:added",rm="group:nested:removed",kh="element:unmanage",Th="zoom",Jn="isDetachAllowed",sm="beforeDrag",Ah="beforeDrop",Oh="beforeDetach",om="beforeStartDetach",ge=Gs(zt),am="Cannot establish connection: source endpoint is full",lm="Cannot establish connection: target endpoint is full",um="Cannot establish connection: source does not exist",cm="Cannot establish connection: target does not exist",hm="connectionOverlays",Ul={"stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},Pi="stroke-dasharray",to="dashstyle",fm="fill",dm="stroke",pm="stroke-width",vm="strokeWidth",wh="svg",Io="path",Vl={svg:"http://www.w3.org/2000/svg"};function Ft(t,s){for(var i in s)t.setAttribute(i,""+s[i])}function Gt(t,s){return s=s||{},s.version="1.1",s.xmlns=Vl.svg,vh(Vl.svg,t,null,null,s)}function Dh(t){return"position:absolute;left:"+t[0]+"px;top:"+t[1]+"px"}function Lo(t,s,i){if(s.setAttribute(fm,i.fill?i.fill:ri),s.setAttribute(dm,i.stroke?i.stroke:ri),i.strokeWidth&&s.setAttribute(pm,i.strokeWidth),i[to]&&i[vm]&&!i[Pi]){var r=i[to].indexOf(",")===-1?" ":",",e=i[to].split(r),n="";X(e,function(a){n+=Math.floor(a*i.strokeWidth)+r}),s.setAttribute(Pi,n)}else i[Pi]&&s.setAttribute(Pi,i[Pi]);for(var o in Ul)i[o]&&s.setAttribute(Ul[o],i[o])}function jr(t,s,i){t.childNodes.length>i?t.insertBefore(s,t.childNodes[i]):t.appendChild(s)}function ce(t,s,i){var r=[t,s];return i&&r.push(i),r.join(":")}var Yl="data-jtk-container",gm="data-jtk-group-content",Er="data-jtk-enabled",no="data-jtk-scope",Bt="endpoint",Tt="element",At="connection",Mh="div",Be="click",It="contextmenu",qe="dblclick",Qe="dbltap",ym="focus",Q="mousedown",xa="mouseenter",Sa="mouseexit",Oe="mousemove",ee="mouseup",et="mouseout",tt="mouseover",nt="tap",mm="touchstart",_m="touchend",Em="touchmove",bm="drag:move",Cm="drag:stop",xm="drag:start",is="revert",Sm="connection:abort",Xl="connection:drag",$l=ce(Tt,Be),Pm=ce(Tt,qe),Wl=ce(Tt,Qe),km=ce(Tt,et),Tm=ce(Tt,tt),Am=ce(Tt,Oe),Om=ce(Tt,ee),wm=ce(Tt,Q),Dm=ce(Tt,It),zl=ce(Tt,nt),Mm=ce(Bt,Be),Im=ce(Bt,qe);ce(Bt,Qe);var Lm=ce(Bt,et),Nm=ce(Bt,tt),Rm=ce(Bt,ee),Fm=ce(Bt,Q);ce(Bt,nt);var Gm=ce(At,Be),jm=ce(At,qe),Bm=ce(At,Qe),Hm=ce(At,et),Um=ce(At,tt),Vm=ce(At,ee),Ym=ce(At,Q),Xm=ce(At,It),$m=ce(At,nt),ql="position",lt=kn(Ea),ln=kn(Kn),Wm=Gs(yh),zm=Gs(gm),Ot=kn(js),nn;(function(t){t.Circle="Circle",t.Ellipse="Ellipse",t.Triangle="Triangle",t.Diamond="Diamond",t.Rectangle="Rectangle",t.Square="Square"})(nn||(nn={}));var Pt;(function(t){t.Assign="Assign",t.AutoDefault="AutoDefault",t.Bottom="Bottom",t.BottomLeft="BottomLeft",t.BottomRight="BottomRight",t.Center="Center",t.Continuous="Continuous",t.ContinuousBottom="ContinuousBottom",t.ContinuousLeft="ContinuousLeft",t.ContinuousRight="ContinuousRight",t.ContinuousTop="ContinuousTop",t.ContinuousLeftRight="ContinuousLeftRight",t.ContinuousTopBottom="ContinuousTopBottom",t.Left="Left",t.Perimeter="Perimeter",t.Right="Right",t.Top="Top",t.TopLeft="TopLeft",t.TopRight="TopRight"})(Pt||(Pt={}));function qm(){return{d:1/0,x:null,y:null,l:null,x1:null,y1:null,x2:null,y2:null}}function rs(){return{xmin:1/0,xmax:-1/0,ymin:1/0,ymax:-1/0}}var Pa=function(){function t(s){H(this,t),this.params=s,f(this,"x1",void 0),f(this,"x2",void 0),f(this,"y1",void 0),f(this,"y2",void 0),f(this,"extents",rs()),f(this,"type",void 0),this.x1=s.x1,this.y1=s.y1,this.x2=s.x2,this.y2=s.y2}return z(t,[{key:"findClosestPointOnPath",value:function(i,r){return qm()}},{key:"lineIntersection",value:function(i,r,e,n){return[]}},{key:"boxIntersection",value:function(i,r,e,n){var o=[];return o.push.apply(o,this.lineIntersection(i,r,i+e,r)),o.push.apply(o,this.lineIntersection(i+e,r,i+e,r+n)),o.push.apply(o,this.lineIntersection(i+e,r+n,i,r+n)),o.push.apply(o,this.lineIntersection(i,r+n,i,r)),o}},{key:"boundingBoxIntersection",value:function(i){return this.boxIntersection(i.x,i.y,i.w,i.h)}}]),t}(),Ih="undefined",ss="default",Lh="true",Vn="false",mn="*",ki,Ti;function Km(t,s,i,r,e,n,o){return new Touch({target:t,identifier:ke(),pageX:s,pageY:i,screenX:r,screenY:e,clientX:n||r,clientY:o||e})}function Jm(){var t=[];return t.push.apply(t,arguments),t.item=function(s){return this[s]},t}function Zm(t,s,i,r,e,n,o){return Jm(Km(t,s,i,r,e,n,o))}function si(t,s,i){i=i||t.parentNode;for(var r=i.querySelectorAll(s),e=0;e<r.length;e++)if(r[e]===t)return!0;return!1}function Qi(t){return t.srcElement||t.target}function No(t,s,i,r){if(r){var e=t.composedPath?t.composedPath():t.path;if(typeof e<"u"&&e.indexOf)return{path:e,end:e.indexOf(i)};var n={path:[],end:-1},o=function a(l){n.path.push(l),l===i?n.end=n.path.length-1:l.parentNode!=null&&a(l.parentNode)};return o(s),n}else return{path:[s],end:1}}function Qm(t,s){var i=0,r;for(i=0,r=t.length;i<r&&t[i][0]!==s;i++);i<t.length&&t.splice(i,1)}var e_=1;function ji(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints!=null&&navigator.maxTouchPoints>0}function Br(){return"onmousedown"in document.documentElement}var Lt=(ki={},f(ki,Q,mm),f(ki,ee,_m),f(ki,Oe,Em),ki),t_="page",n_="screen",i_="client";function ka(t,s){if(t==null)return{x:0,y:0};var i=Nh(t),r=o_(i,0);return{x:r[s+"X"],y:r[s+"Y"]}}function os(t){return ka(t,t_)}function r_(t){return ka(t,n_)}function s_(t){return ka(t,i_)}function o_(t,s){return t.item?t.item(s):t[s]}function Nh(t){return t.touches&&t.touches.length>0?t.touches:t.changedTouches&&t.changedTouches.length>0?t.changedTouches:t.targetTouches&&t.targetTouches.length>0?t.targetTouches:[t]}function a_(t){return Nh(t).length}function as(t,s,i,r,e){if(Fh(t,s,i),r.__tauid=i.__tauid,t.addEventListener)t.addEventListener(s,i,!1,e);else if(t.attachEvent){var n=s+i.__tauid;t["e"+n]=i,t[n]=function(){t["e"+n]&&t["e"+n](window.event)},t.attachEvent("on"+s,t[n])}}function er(t,s,i){var r=this;i!=null&&Rh(t,function(e){if(l_(e,s,i),i.__tauid!=null){if(e.removeEventListener)e.removeEventListener(s,i,!1),ji()&&Lt[s]&&e.removeEventListener(Lt[s],i,!1);else if(r.detachEvent){var n=s+i.__tauid;e[n]&&e.detachEvent("on"+s,e[n]),e[n]=null,e["e"+n]=null}}i.__taTouchProxy&&er(t,i.__taTouchProxy[1],i.__taTouchProxy[0])})}function Rh(t,s){if(t!=null)for(var i=typeof t=="string"?document.querySelectorAll(t):t.length!=null?t:[t],r=0;r<i.length;r++)s(i[r])}function Fh(t,s,i){var r=e_++;return t.__ta=t.__ta||{},t.__ta[s]=t.__ta[s]||{},t.__ta[s][r]=i,i.__tauid=r,r}function l_(t,s,i){if(t.__ta&&t.__ta[s]&&delete t.__ta[s][i.__tauid],i.__taExtra){for(var r=0;r<i.__taExtra.length;r++)er(t,i.__taExtra[r][0],i.__taExtra[r][1]);i.__taExtra.length=0}i.__taUnstore&&i.__taUnstore()}var u_=/:not\(([^)]+)\)/;function ls(t,s,i,r){if(t==null)return i;var e=t.split(","),n=[],o=[];X(e,function(l){var u=l.match(u_);u!=null?o.push(u[1]):n.push(l)}),o.length>0&&n.length===0&&n.push(mn);var a=function l(u){l.__tauid=i.__tauid;var c=Qi(u),h=!1,d=c,p=No(u,c,s,t!=null);if(p.end!=-1)for(var v=0;!h&&v<p.end;v++){d=p.path[v];for(var y=0;y<o.length;y++)if(si(d,o[y],s))return;for(var m=0;!h&&m<n.length;m++)if(si(d,n[m],s)){i.apply(d,[u,d]),h=!0;break}}};return c_(i,r,a),a}function c_(t,s,i){t.__taExtra=t.__taExtra||[],t.__taExtra.push([s,i])}var Hr=function(s,i,r,e,n){if(ji()&&Lt[i]){var o=ls(e,s,r,Lt[i]);as(s,Lt[i],o,r,n)}i===ym&&s.getAttribute(Hl)==null&&s.setAttribute(Hl,"1"),as(s,i,ls(e,s,r,i),r,n)},io=(Ti={},f(Ti,nt,{touches:1,taps:1}),f(Ti,Qe,{touches:1,taps:2}),f(Ti,It,{touches:2,taps:1}),Ti);function Kl(t,s,i,r){for(var e in i.__tamee[t])i.__tamee[t].hasOwnProperty(e)&&i.__tamee[t][e].apply(r,[s])}var h_=function(){function t(){H(this,t)}return z(t,null,[{key:"generate",value:function(i,r){return function(e,n,o,a){if(n==It&&Br())Hr(e,n,o,a);else{if(e.__taTapHandler==null){var l=e.__taTapHandler={tap:[],dbltap:[],down:!1,taps:0,downSelectors:[]},u=function(v){for(var y=Qi(v),m=No(v,y,e,a!=null),b=!1,C=0;C<m.end;C++){if(b)return;y=m.path[C];for(var E=0;E<l.downSelectors.length;E++)if(l.downSelectors[E]==null||si(y,l.downSelectors[E],e)){l.down=!0,setTimeout(h,i),setTimeout(d,r),b=!0;break}}},c=function(v){if(l.down){var y=Qi(v),m,b;l.taps++;var C=a_(v);for(var E in io)if(io.hasOwnProperty(E)){var S=io[E];if(S.touches===C&&(S.taps===1||S.taps===l.taps))for(var D=0;D<l[E].length;D++){b=No(v,y,e,l[E][D][1]!=null);for(var G=0;G<b.end;G++)if(m=b.path[G],l[E][D][1]==null||si(m,l[E][D][1],e)){l[E][D][0].apply(m,[v,m]);break}}}}},h=function(){l.down=!1},d=function(){l.taps=0};e.__taTapHandler.downHandler=u,e.__taTapHandler.upHandler=c,Hr(e,Q,u),Hr(e,ee,c)}e.__taTapHandler.downSelectors.push(a),e.__taTapHandler[n].push([o,a]),o.__taUnstore=function(){e.__taTapHandler!=null&&(we(e.__taTapHandler.downSelectors,function(p){return p===a}),Qm(e.__taTapHandler[n],o),e.__taTapHandler.downSelectors.length===0&&(er(e,Q,e.__taTapHandler.downHandler),er(e,ee,e.__taTapHandler.upHandler),delete e.__taTapHandler))}}}}}]),t}(),f_=function(){function t(){H(this,t)}return z(t,null,[{key:"generate",value:function(){var i=[];return function(r,e,n,o){if(!r.__tamee){r.__tamee={over:!1,mouseenter:[],mouseexit:[]};var a=function(c){var h=Qi(c);(o==null&&h==r&&!r.__tamee.over||si(h,o,r)&&(h.__tamee==null||!h.__tamee.over))&&(Kl(xa,c,r,h),h.__tamee=h.__tamee||{},h.__tamee.over=!0,i.push(h))},l=function(c){for(var h=Qi(c),d=0;d<i.length;d++)h==i[d]&&!si(c.relatedTarget||c.toElement,"*",h)&&(h.__tamee.over=!1,i.splice(d,1),Kl(Sa,c,r,h))};as(r,tt,ls(o,r,a,tt),a),as(r,et,ls(o,r,l,et),l)}n.__taUnstore=function(){delete r.__tamee[e][n.__tauid]},Fh(r,e,n),r.__tamee[e][n.__tauid]=n}}}]),t}(),Ta=function(){function t(s){H(this,t),f(this,"clickThreshold",void 0),f(this,"dblClickThreshold",void 0),f(this,"tapHandler",void 0),f(this,"mouseEnterExitHandler",void 0),s=s||{},this.clickThreshold=s.clickThreshold||250,this.dblClickThreshold=s.dblClickThreshold||450,this.mouseEnterExitHandler=f_.generate(),this.tapHandler=h_.generate(this.clickThreshold,this.dblClickThreshold)}return z(t,[{key:"_doBind",value:function(i,r,e,n,o){if(e!=null){var a=i;r===nt||r===Qe||r===It?this.tapHandler(a,r,e,n,o):r===xa||r==Sa?this.mouseEnterExitHandler(a,r,e,n,o):Hr(a,r,e,n,o)}}},{key:"on",value:function(i,r,e,n,o){var a=n==null?null:e,l=n??e;return this._doBind(i,r,l,a,o),this}},{key:"off",value:function(i,r,e){return er(i,r,e),this}},{key:"trigger",value:function(i,r,e,n,o){var a=Br()&&(typeof MouseEvent>"u"||e==null||e.constructor===MouseEvent),l=ji()&&!Br()&&Lt[r]?Lt[r]:r,u=!(ji()&&!Br()&&Lt[r]),c=os(e),h=r_(e),d=s_(e);return Rh(i,function(p){var v;e=e||{screenX:h.x,screenY:h.y,clientX:d.x,clientY:d.y};var y=function(S){n&&(S.payload=n)},m={TouchEvent:function(S){var D=Zm(p,c.x,c.y,h.x,h.y,d.x,d.y),G=S.initTouchEvent||S.initEvent;G(l,!0,!0,window,null,h.x,h.y,d.x,d.y,!1,!1,!1,!1,D,D,D,1,0)},MouseEvents:function(S){S.initMouseEvent(l,!0,!0,window,o??1,h.x,h.y,d.x,d.y,!1,!1,!1,!1,1,p)}},b=!u&&!a&&ji()&&Lt[r],C=b?"TouchEvent":"MouseEvents";v=document.createEvent(C),m[C](v),y(v),p.dispatchEvent(v)}),this}}]),t}(),d_=[null,[1,-1],[1,1],[-1,1],[-1,-1]],p_=[null,[-1,-1],[-1,1],[1,1],[1,-1]],un=2*Math.PI;function oi(t,s){return s.x===t.x?s.y>t.y?1/0:-1/0:s.y===t.y?s.x>t.x?0:-0:(s.y-t.y)/(s.x-t.x)}function v_(t,s){return-1/oi(t,s)}function Ro(t,s){return Math.sqrt(Math.pow(s.y-t.y,2)+Math.pow(s.x-t.x,2))}function Aa(t,s){return s.x>t.x||s.x==t.x?s.y>t.y?2:1:s.y>t.y?3:4}function g_(t,s){var i=oi(t,s),r=Math.atan(i),e=Aa(t,s);return(e==4||e==3)&&(r+=Math.PI),r<0&&(r+=2*Math.PI),r}function Gh(t,s){var i=t.x,r=t.x+t.w,e=t.y,n=t.y+t.h,o=s.x,a=s.x+s.w,l=s.y,u=s.y+s.h;return i<=o&&o<=r&&e<=l&&l<=n||i<=a&&a<=r&&e<=l&&l<=n||i<=o&&o<=r&&e<=u&&u<=n||i<=a&&o<=r&&e<=u&&u<=n||o<=i&&i<=a&&l<=e&&e<=u||o<=r&&r<=a&&l<=e&&e<=u||o<=i&&i<=a&&l<=n&&n<=u||o<=r&&i<=a&&l<=n&&n<=u}function vn(t,s,i){var r=oi(t,s),e=Aa(t,s),n=i>0?d_[e]:p_[e],o=Math.atan(r),a=Math.abs(i*Math.sin(o))*n[1],l=Math.abs(i*Math.cos(o))*n[0];return{x:t.x+l,y:t.y+a}}function y_(t,s,i){var r=oi(t,s),e=Math.atan(-1/r),n=i/2*Math.sin(e),o=i/2*Math.cos(e);return[{x:s.x+o,y:s.y+n},{x:s.x-o,y:s.y-n}]}function m_(t,s,i,r){i=i??(s.thresholdX==null?s.w/2:s.thresholdX),r=r??(s.thresholdY==null?s.h/2:s.thresholdY);var e=Math.floor(t.x/s.w),n=s.w*e,o=n+s.w,a=Math.abs(t.x-n)<=i?n:Math.abs(o-t.x)<=i?o:t.x,l=Math.floor(t.y/s.h),u=s.h*l,c=u+s.h,h=Math.abs(t.y-u)<=r?u:Math.abs(c-t.y)<=r?c:t.y;return{x:a,y:h}}function __(t,s,i){if(Sn(s,i,t))return s;for(var r=s.parentNode;r!=null&&r!==t;){if(Sn(r,i,t))return r;r=r.parentNode}}function E_(t){return typeof t=="function"?(t._katavorioId=ke(),t._katavorioId):t}function Jl(t,s,i){var r=s.parentNode,e=t.getSize(r),n=t.getSize(s),o=i.x,a=o+n.w,l=i.y,u=l+n.h;return a>0&&o<e.w&&u>0&&l<e.h}function b_(t,s,i){for(var r=null,e=s.getAttribute("katavorio-draggable"),n=e!=null?"[katavorio-draggable='"+e+"'] ":"",o=0;o<t.length;o++)if(r=__(s,i,n+t[o].selector),r!=null){if(t[o].filter){var a=Sn(i,t[o].filter,r),l=t[o].filterExclude===!0;if(l&&!a||a)return null}return[t[o],r]}return null}var jh="start",Bh="beforeStart",Hh="drag",C_="drop",x_="over",S_="out",Uh="stop",Vh="katavorio-draggable",P_=Vh,k_=10,T_=10,ro=function(){return!0},A_=function(){return!1},Di={delegatedDraggable:"katavorio-delegated-draggable",draggable:P_,drag:"katavorio-drag",selected:"katavorio-drag-selected",noSelect:"katavorio-drag-no-select",ghostProxy:"katavorio-ghost-proxy",clonedDrag:"katavorio-clone-drag"},vt;(function(t){t.absolutePosition="absolutePosition",t.transform="transform",t.xyAttributes="xyAttributes"})(vt||(vt={}));var Oa=new Map;Oa.set(vt.absolutePosition,function(t,s){t.style.left="".concat(s.x,"px"),t.style.top="".concat(s.y,"px")});Oa.set(vt.xyAttributes,function(t,s){t.setAttribute("x","".concat(s.x)),t.setAttribute("y","".concat(s.y))});var wa=new Map;wa.set(vt.absolutePosition,function(t){return{x:t.offsetLeft,y:t.offsetTop}});wa.set(vt.xyAttributes,function(t){return{x:parseFloat(t.getAttribute("x")),y:parseFloat(t.getAttribute("y"))}});var Da=new Map;Da.set(vt.absolutePosition,function(t,s){t.style.width="".concat(s.w,"px"),t.style.height="".concat(s.h,"px")});Da.set(vt.xyAttributes,function(t,s){t.setAttribute("width","".concat(s.w)),t.setAttribute("height","".concat(s.h))});var Ma=new Map;Ma.set(vt.absolutePosition,function(t){return{w:t.offsetWidth,h:t.offsetHeight}});Ma.set(vt.xyAttributes,function(t){return{w:parseFloat(t.getAttribute("width")),h:parseFloat(t.getAttribute("height"))}});var so=[Uh,jh,Hh,C_,x_,S_,Bh],O_=function(){},In=function(s,i){if(s!=null){s=!_e(s)&&s.tagName==null&&s.length!=null?s:[s];for(var r=0;r<s.length;r++)i.apply(s[r],[s[r]])}},w_=function(s,i,r){var e=s.srcElement||s.target;return!Sn(e,r.getInputFilterSelector(),i)},D_=function(){function t(s,i){H(this,t),this.el=s,this.manager=i,f(this,"_class",void 0),f(this,"uuid",ke()),f(this,"enabled",!0),f(this,"scopes",[]),f(this,"eventManager",void 0),this.eventManager=i.eventManager}return z(t,[{key:"setEnabled",value:function(i){this.enabled=i}},{key:"isEnabled",value:function(){return this.enabled}},{key:"toggleEnabled",value:function(){this.enabled=!this.enabled}},{key:"addScope",value:function(i){var r={};In(this.scopes,function(n){r[n]=!0}),In(i?i.split(/\s+/):[],function(n){r[n]=!0}),this.scopes.length=0;for(var e in r)this.scopes.push(e)}},{key:"removeScope",value:function(i){var r={};In(this.scopes,function(n){r[n]=!0}),In(i?i.split(/\s+/):[],function(n){delete r[n]}),this.scopes.length=0;for(var e in r)this.scopes.push(e)}},{key:"toggleScope",value:function(i){var r={};In(this.scopes,function(n){r[n]=!0}),In(i?i.split(/\s+/):[],function(n){r[n]?delete r[n]:r[n]=!0}),this.scopes.length=0;for(var e in r)this.scopes.push(e)}}]),t}();function M_(t){return{w:t.parentNode.offsetWidth+t.parentNode.scrollLeft,h:t.parentNode.offsetHeight+t.parentNode.scrollTop}}var Bi;(function(t){t.notNegative="notNegative",t.parent="parent",t.parentEnclosed="parentEnclosed"})(Bi||(Bi={}));var I_=function(t){oe(i,t);var s=ae(i);function i(r,e,n){var o;if(H(this,i),o=s.call(this,r,n),f(g(o),"_class",void 0),f(g(o),"rightButtonCanDrag",void 0),f(g(o),"consumeStartEvent",void 0),f(g(o),"clone",void 0),f(g(o),"scroll",void 0),f(g(o),"trackScroll",void 0),f(g(o),"_downAt",void 0),f(g(o),"_posAtDown",void 0),f(g(o),"_pagePosAtDown",void 0),f(g(o),"_pageDelta",{x:0,y:0}),f(g(o),"_moving",void 0),f(g(o),"_lastPosition",void 0),f(g(o),"_lastScrollValues",{x:0,y:0}),f(g(o),"_initialScroll",{x:0,y:0}),f(g(o),"_size",void 0),f(g(o),"_currentParentPosition",void 0),f(g(o),"_ghostParentPosition",void 0),f(g(o),"_dragEl",void 0),f(g(o),"_multipleDrop",void 0),f(g(o),"_ghostProxyOffsets",void 0),f(g(o),"_ghostDx",void 0),f(g(o),"_ghostDy",void 0),f(g(o),"_isConstrained",!1),f(g(o),"_ghostProxyParent",void 0),f(g(o),"_useGhostProxy",void 0),f(g(o),"_ghostProxyFunction",void 0),f(g(o),"_activeSelectorParams",void 0),f(g(o),"_availableSelectors",[]),f(g(o),"_canDrag",void 0),f(g(o),"_consumeFilteredEvents",void 0),f(g(o),"_parent",void 0),f(g(o),"_ignoreZoom",void 0),f(g(o),"_filters",{}),f(g(o),"_constrainRect",void 0),f(g(o),"_elementToDrag",void 0),f(g(o),"downListener",void 0),f(g(o),"moveListener",void 0),f(g(o),"upListener",void 0),f(g(o),"scrollTracker",void 0),f(g(o),"listeners",{start:[],drag:[],stop:[],over:[],out:[],beforeStart:[],revert:[]}),o._class=o.manager.css.draggable,pn(o.el,o._class),o.downListener=o._downListener.bind(g(o)),o.upListener=o._upListener.bind(g(o)),o.moveListener=o._moveListener.bind(g(o)),o.rightButtonCanDrag=e.rightButtonCanDrag===!0,o.consumeStartEvent=e.consumeStartEvent!==!1,o._dragEl=o.el,o.clone=e.clone===!0,o.scroll=e.scroll===!0,o.trackScroll=e.trackScroll!==!1,o._multipleDrop=e.multipleDrop!==!1,o._canDrag=e.canDrag||ro,o._consumeFilteredEvents=e.consumeFilteredEvents,o._parent=e.parent,o._ignoreZoom=e.ignoreZoom===!0,o._ghostProxyParent=e.ghostProxyParent,o.trackScroll&&(o.scrollTracker=o._trackScroll.bind(g(o)),document.addEventListener("scroll",o.scrollTracker)),e.ghostProxy===!0?o._useGhostProxy=ro:e.ghostProxy&&typeof e.ghostProxy=="function"?o._useGhostProxy=e.ghostProxy:o._useGhostProxy=function(l,u){return o._activeSelectorParams&&o._activeSelectorParams.useGhostProxy?o._activeSelectorParams.useGhostProxy(l,u):!1},e.makeGhostProxy?o._ghostProxyFunction=e.makeGhostProxy:o._ghostProxyFunction=function(l){return o._activeSelectorParams&&o._activeSelectorParams.makeGhostProxy?o._activeSelectorParams.makeGhostProxy(l):l.cloneNode(!0)},e.selector){var a=o.el.getAttribute(Vh);a==null&&(a=""+new Date().getTime(),o.el.setAttribute("katavorio-draggable",a)),o._availableSelectors.push(e)}return o.eventManager.on(o.el,Q,o.downListener),o}return z(i,[{key:"_trackScroll",value:function(e){if(this._moving){var n={x:document.documentElement.scrollLeft,y:document.documentElement.scrollTop},o=n.x-this._lastScrollValues.x,a=n.y-this._lastScrollValues.y,l={x:o+this._lastPosition.x,y:a+this._lastPosition.y},u=l.x-this._downAt.x,c=l.y-this._downAt.y,h=this._ignoreZoom?1:this.manager.getZoom();this._dragEl&&this._dragEl.parentNode&&(u+=this._dragEl.parentNode.scrollLeft-this._initialScroll.x,c+=this._dragEl.parentNode.scrollTop-this._initialScroll.y),u/=h,c/=h,this.moveBy(u,c,e),this._lastPosition=l,this._lastScrollValues=n}}},{key:"on",value:function(e,n){this.listeners[e]&&this.listeners[e].push(n)}},{key:"off",value:function(e,n){if(this.listeners[e]){for(var o=[],a=0;a<this.listeners[e].length;a++)this.listeners[e][a]!==n&&o.push(this.listeners[e][a]);this.listeners[e]=o}}},{key:"_upListener",value:function(e){this._downAt&&(this._downAt=null,this.eventManager.off(document,Oe,this.moveListener),this.eventManager.off(document,ee,this.upListener),Oo(document.body,Di.noSelect),this.unmark(e),this.stop(e),this._moving=!1,this.clone?(this._dragEl&&this._dragEl.parentNode&&this._dragEl.parentNode.removeChild(this._dragEl),this._dragEl=null):this._activeSelectorParams&&this._activeSelectorParams.revertFunction&&this._activeSelectorParams.revertFunction(this._dragEl,this.manager.getPosition(this._dragEl))===!0&&(this.manager.setPosition(this._dragEl,this._posAtDown),this._dispatch(is,this._dragEl)))}},{key:"_downListener",value:function(e){if(!e.defaultPrevented){var n=this.rightButtonCanDrag||e.which!==3&&e.button!==2;if(n&&this.isEnabled()&&this._canDrag()){var o=this._testFilter(e)&&w_(e,this.el,this.manager);if(o){this._activeSelectorParams=null,this._elementToDrag=null,this._availableSelectors.length===0&&console.log("JSPLUMB: no available drag selectors");var a=e.target||e.srcElement,l=b_(this._availableSelectors,this.el,a);if(l!=null&&(this._activeSelectorParams=l[0],this._elementToDrag=l[1]),this._activeSelectorParams==null||this._elementToDrag==null)return;var u=this._activeSelectorParams.dragInit?this._activeSelectorParams.dragInit(this._elementToDrag,e):null;if(u!=null&&(this._elementToDrag=u),this.clone)if(this._dragEl=this._elementToDrag.cloneNode(!0),pn(this._dragEl,Di.clonedDrag),this._dragEl.setAttribute("id",null),this._dragEl.style.position="absolute",this._parent!=null){var c=this.manager.getPosition(this.el);this._dragEl.style.left=c.x+"px",this._dragEl.style.top=c.y+"px",this._parent.appendChild(this._dragEl)}else{var h=Un(this._elementToDrag);this._dragEl.style.left=h.x+"px",this._dragEl.style.top=h.y+"px",document.body.appendChild(this._dragEl)}else this._dragEl=this._elementToDrag;this.consumeStartEvent&&Ki(e),this._downAt=os(e),this._dragEl&&this._dragEl.parentNode&&(this._initialScroll={x:this._dragEl.parentNode.scrollLeft,y:this._dragEl.parentNode.scrollTop}),this._posAtDown=this.manager.getPosition(this._dragEl),this._pagePosAtDown=Un(this._dragEl),this._pageDelta={x:this._pagePosAtDown.x-this._posAtDown.x,y:this._pagePosAtDown.y-this._posAtDown.y},this._size=this.manager.getSize(this._dragEl),this.eventManager.on(document,Oe,this.moveListener),this.eventManager.on(document,ee,this.upListener),pn(document.body,Di.noSelect),this._dispatch(Bh,{el:this.el,pos:this._posAtDown,e,drag:this,size:this._size})}else this._consumeFilteredEvents&&Ki(e)}}}},{key:"_moveListener",value:function(e){if(this._downAt){if(!this._moving){var n=this._dispatch(jh,{el:this.el,pos:this._posAtDown,e,drag:this,size:this._size});if(n!==!1){if(!this._downAt)return;this.mark(n),this._moving=!0}else this.abort()}if(this._downAt){var o=os(e),a=o.x-this._downAt.x,l=o.y-this._downAt.y,u=this._ignoreZoom?1:this.manager.getZoom();this._lastPosition={x:o.x,y:o.y},this._lastScrollValues={x:document.documentElement.scrollLeft,y:document.documentElement.scrollTop},this._dragEl&&this._dragEl.parentNode&&(a+=this._dragEl.parentNode.scrollLeft-this._initialScroll.x,l+=this._dragEl.parentNode.scrollTop-this._initialScroll.y),a/=u,l/=u,this.moveBy(a,l,e)}}}},{key:"getDragDelta",value:function(){return this._posAtDown!=null&&this._downAt!=null?{x:this._downAt.x-this._posAtDown.x,y:this._downAt.y-this._posAtDown.y}:{x:0,y:0}}},{key:"mark",value:function(e){this._posAtDown=this.manager.getPosition(this._dragEl),this._pagePosAtDown=Un(this._dragEl),this._pageDelta={x:this._pagePosAtDown.x-this._posAtDown.x,y:this._pagePosAtDown.y-this._posAtDown.y},this._size=this.manager.getSize(this._dragEl),pn(this._dragEl,this.manager.css.drag),this._constrainRect=M_(this._dragEl),this._ghostDx=0,this._ghostDy=0}},{key:"unmark",value:function(e){this._isConstrained&&this._useGhostProxy(this._elementToDrag,this._dragEl)?(this._ghostProxyOffsets={x:this._dragEl.offsetLeft-this._ghostDx,y:this._dragEl.offsetTop-this._ghostDy},this._dragEl.parentNode.removeChild(this._dragEl),this._dragEl=this._elementToDrag):this._ghostProxyOffsets=null,Oo(this._dragEl,this.manager.css.drag),this._isConstrained=!1}},{key:"moveBy",value:function(e,n,o){var a=this.toGrid({x:this._posAtDown.x+e,y:this._posAtDown.y+n}),l=this._doConstrain(a,this._dragEl,this._constrainRect,this._size,o);if(l!=null){if(this._useGhostProxy(this.el,this._dragEl))if(a.x!==l.x||a.y!==l.y){if(!this._isConstrained){var u=this._ghostProxyFunction(this._elementToDrag);pn(u,Di.ghostProxy),this._ghostProxyParent?(this._ghostProxyParent.appendChild(u),this._currentParentPosition=Un(this._elementToDrag.parentNode),this._ghostParentPosition=Un(this._ghostProxyParent),this._ghostDx=this._currentParentPosition.x-this._ghostParentPosition.x,this._ghostDy=this._currentParentPosition.y-this._ghostParentPosition.y):this._elementToDrag.parentNode.appendChild(u),this._dragEl=u,this._isConstrained=!0}l=a}else this._isConstrained&&(this._dragEl.parentNode.removeChild(this._dragEl),this._dragEl=this._elementToDrag,this._isConstrained=!1,this._currentParentPosition=null,this._ghostParentPosition=null,this._ghostDx=0,this._ghostDy=0);this.manager.setPosition(this._dragEl,{x:l.x+this._ghostDx,y:l.y+this._ghostDy}),this._dispatch(Hh,{el:this.el,pos:l,e:o,drag:this,size:this._size,originalPos:this._posAtDown})}}},{key:"abort",value:function(){this._downAt!=null&&this._upListener()}},{key:"getDragElement",value:function(e){return e?this._elementToDrag||this.el:this._dragEl||this.el}},{key:"stop",value:function(e,n){if(n||this._moving){var o=[],a=this.manager.getPosition(this._dragEl);o.push([this._dragEl,a,this,this._size]),this._dispatch(Uh,{el:this._dragEl,pos:this._ghostProxyOffsets||a,finalPos:a,e,drag:this,selection:o,size:this._size,originalPos:{x:this._posAtDown.x,y:this._posAtDown.y}})}else this._moving||this._activeSelectorParams.dragAbort&&this._activeSelectorParams.dragAbort(this._elementToDrag)}},{key:"_dispatch",value:function(e,n){var o=null;if(this._activeSelectorParams&&this._activeSelectorParams[e])o=this._activeSelectorParams[e](n);else if(this.listeners[e])for(var a=0;a<this.listeners[e].length;a++)try{var l=this.listeners[e][a](n);l!=null&&(o=l)}catch{}return o}},{key:"resolveGrid",value:function(){var e={grid:null,thresholdX:k_/2,thresholdY:T_/2};return this._activeSelectorParams!=null&&this._activeSelectorParams.grid!=null&&(e.grid=this._activeSelectorParams.grid,this._activeSelectorParams.snapThreshold!=null&&(e.thresholdX=this._activeSelectorParams.snapThreshold,e.thresholdY=this._activeSelectorParams.snapThreshold)),e}},{key:"toGrid",value:function(e){var n=this.resolveGrid(),o=n.grid,a=n.thresholdX,l=n.thresholdY;if(o==null)return e;var u=o?o.w/2:a,c=o?o.h/2:l;return m_(e,o,u,c)}},{key:"setUseGhostProxy",value:function(e){this._useGhostProxy=e?ro:A_}},{key:"_doConstrain",value:function(e,n,o,a,l){return this._activeSelectorParams!=null&&this._activeSelectorParams.constrainFunction&&typeof this._activeSelectorParams.constrainFunction=="function"?this._activeSelectorParams.constrainFunction(e,n,o,a,l):e}},{key:"_testFilter",value:function(e){for(var n in this._filters){var o=this._filters[n],a=o[0](e);if(o[1]&&(a=!a),!a)return!1}return!0}},{key:"addFilter",value:function(e,n){var o=this;if(e){var a=E_(e);this._filters[a]=[function(l){var u=l.srcElement||l.target,c;return _e(e)?c=Sn(u,e,o.el):typeof e=="function"&&(c=e(l,o.el)),c},n!==!1]}}},{key:"removeFilter",value:function(e){var n=typeof e=="function"?e._katavorioId:e;delete this._filters[n]}},{key:"clearAllFilters",value:function(){this._filters={}}},{key:"addSelector",value:function(e,n){e.selector&&(n?this._availableSelectors.unshift(e):this._availableSelectors.push(e))}},{key:"destroy",value:function(){this.eventManager.off(this.el,Q,this.downListener),this.eventManager.off(document,Oe,this.moveListener),this.eventManager.off(document,ee,this.upListener),this.downListener=null,this.upListener=null,this.moveListener=null,this.scrollTracker!=null&&document.removeEventListener("scroll",this.scrollTracker)}}]),i}(D_),L_=["input","textarea","select","button","option"],N_=L_.join(","),R_=function(){function t(s){H(this,t),f(this,"eventManager",void 0),f(this,"zoom",1),f(this,"css",{}),f(this,"inputFilterSelector",void 0),f(this,"positioningStrategy",void 0),f(this,"_positionSetter",void 0),f(this,"_positionGetter",void 0),f(this,"_sizeSetter",void 0),f(this,"_sizeGetter",void 0),s=s||{},this.inputFilterSelector=s.inputFilterSelector||N_,this.eventManager=new Ta,this.zoom=s.zoom||1,this.positioningStrategy=s.positioningStrategy||vt.absolutePosition,this._positionGetter=wa.get(this.positioningStrategy),this._positionSetter=Oa.get(this.positioningStrategy),this._sizeGetter=Ma.get(this.positioningStrategy),this._sizeSetter=Da.get(this.positioningStrategy);var i=s.css||{};U(this.css,i)}return z(t,[{key:"getPosition",value:function(i){return this._positionGetter(i)}},{key:"setPosition",value:function(i,r){this._positionSetter(i,r)}},{key:"getSize",value:function(i){return this._sizeGetter(i)}},{key:"getZoom",value:function(){return this.zoom}},{key:"setZoom",value:function(i){this.zoom=i}},{key:"_prepareParams",value:function(i){i=i||{};var r={events:{}},e;for(e in i)r[e]=i[e];for(e=0;e<so.length;e++)r.events[so[e]]=i[so[e]]||O_;return r}},{key:"getInputFilterSelector",value:function(){return this.inputFilterSelector}},{key:"setInputFilterSelector",value:function(i){return this.inputFilterSelector=i,this}},{key:"draggable",value:function(i,r){if(i._katavorioDrag==null){var e=this._prepareParams(r),n=new I_(i,e,this);return pn(i,Di.delegatedDraggable),i._katavorioDrag=n,n}else return i._katavorioDrag}},{key:"destroyDraggable",value:function(i){i._katavorioDrag&&(i._katavorioDrag.destroy(),delete i._katavorioDrag)}}]),t}(),Ur="jtk-drag-selected",F_=function(){function t(s){H(this,t),this.instance=s,f(this,"_dragSelection",[]),f(this,"_dragSizes",new Map),f(this,"_dragElements",new Map),f(this,"_dragElementStartPositions",new Map),f(this,"_dragElementPositions",new Map),f(this,"__activeSet",void 0)}return z(t,[{key:"_activeSet",get:function(){return this.__activeSet==null?this._dragSelection:this.__activeSet}},{key:"length",get:function(){return this._dragSelection.length}},{key:"filterActiveSet",value:function(i){var r=this;this.__activeSet=[],X(this._dragSelection,function(e){i(e)&&r.__activeSet.push(e)})}},{key:"clear",value:function(){var i=this;this.reset(),X(this._dragSelection,function(r){return i.instance.removeClass(r.jel,Ur)}),this._dragSelection.length=0}},{key:"reset",value:function(){this._dragElementStartPositions.clear(),this._dragElementPositions.clear(),this._dragSizes.clear(),this._dragElements.clear(),this.__activeSet=null}},{key:"initialisePositions",value:function(){var i=this;X(this._activeSet,function(r){var e=i.instance.viewport.getPosition(r.id),n={x:parseInt(""+r.jel.offsetLeft,10),y:parseInt(""+r.jel.offsetTop,10)};i._dragElementStartPositions.set(r.id,n),i._dragElementPositions.set(r.id,n),i._dragSizes.set(r.id,{w:e.w,h:e.h})})}},{key:"updatePositions",value:function(i,r,e){var n=this,o=i.x-r.x,a=i.y-r.y;X(this._activeSet,function(l){var u=n._dragElementStartPositions.get(l.id);if(u){var c=u.x+o,h=u.y+a,d=n._dragSizes.get(l.id),p={x:c,y:h,w:d.w,h:d.h};if(l.jel._jsPlumbParentGroup&&l.jel._jsPlumbParentGroup.constrain){var v={w:l.jel.parentNode.offsetWidth+l.jel.parentNode.scrollLeft,h:l.jel.parentNode.offsetHeight+l.jel.parentNode.scrollTop};p.x=Math.max(p.x,0),p.y=Math.max(p.y,0),p.x=Math.min(p.x,v.w-d.w),p.y=Math.min(p.y,v.h-d.h)}n._dragElementPositions.set(l.id,{x:c,y:h}),l.jel.style.left=p.x+"px",l.jel.style.top=p.y+"px",e(l.jel,l.id,d,p)}})}},{key:"each",value:function(i){var r=this;X(this._activeSet,function(e){var n=r._dragSizes.get(e.id),o=r._dragElementPositions.get(e.id),a=r._dragElementStartPositions.get(e.id);i(e.jel,e.id,o,n,a)})}},{key:"add",value:function(i,r){var e=i;r=r||this.instance.getId(e);var n=tn(this._dragSelection,function(o){return o.id===r});n===-1&&(this.instance.addClass(i,Ur),this._dragSelection.push({id:r,jel:e}))}},{key:"remove",value:function(i){var r=this,e=i;this._dragSelection=this._dragSelection.filter(function(n){var o=n.jel!==e;return o||r.instance.removeClass(n.jel,Ur),o})}},{key:"toggle",value:function(i){var r=i,e=tn(this._dragSelection,function(n){return n.jel===r});e!==-1?this.remove(r):this.add(i)}}]),t}(),G_="jtk-delegated-draggable",j_="jtk-draggable",B_="jtk-drag",H_="jtk-ghost-proxy",qt="jtk-drag-active",U_="jtk-dragged",Zt="jtk-drag-hover",V_=function(){function t(s,i,r){var e=this;H(this,t),this.instance=s,this.dragSelection=i,f(this,"collicat",void 0),f(this,"drag",void 0),f(this,"_draggables",{}),f(this,"_dlist",[]),f(this,"_elementsWithEndpoints",{}),f(this,"_draggablesForElements",{}),f(this,"handlers",[]),f(this,"_trackScroll",void 0),f(this,"_filtersToAdd",[]),this.collicat=new R_({zoom:this.instance.currentZoom,css:{noSelect:this.instance.dragSelectClass,delegatedDraggable:G_,draggable:j_,drag:B_,selected:Ur,active:qt,hover:Zt,ghostProxy:H_}}),this.instance.bind(Th,function(n){e.collicat.setZoom(n)}),r=r||{},this._trackScroll=r.trackScroll!==!1}return z(t,[{key:"addHandler",value:function(i,r){var e=this,n=U({selector:i.selector},r||{});n.start=yr(n.start,function(l){return i.onStart(l)},!1),n.drag=yr(n.drag,function(l){return i.onDrag(l)}),n.stop=yr(n.stop,function(l){return i.onStop(l)});var o=(i.onBeforeStart||function(l){}).bind(i);if(n.beforeStart=yr(n.beforeStart,function(l){return o(l)}),n.dragInit=function(l,u){return i.onDragInit(l,u)},n.dragAbort=function(l){return i.onDragAbort(l)},i.useGhostProxy&&(n.useGhostProxy=i.useGhostProxy,n.makeGhostProxy=i.makeGhostProxy),n.constrainFunction==null&&n.containment!=null)switch(n.containment){case Bi.notNegative:{n.constrainFunction=function(l,u,c,h){return{x:Math.max(0,Math.min(l.x)),y:Math.max(0,Math.min(l.y))}};break}case Bi.parent:{var a=n.containmentPadding||5;n.constrainFunction=function(l,u,c,h){var d=l.x<0?0:l.x>c.w-a?c.w-a:l.x,p=l.y<0?0:l.y>c.h-a?c.h-a:l.y;return{x:d,y:p}};break}case Bi.parentEnclosed:{n.constrainFunction=function(l,u,c,h){var d=l.x<0?0:l.x+h.w>c.w?c.w-h.w:l.x,p=l.y<0?0:l.y+h.h>c.h?c.h-h.h:l.y;return{x:d,y:p}};break}}this.drag==null?(n.trackScroll=this._trackScroll,this.drag=this.collicat.draggable(this.instance.getContainer(),n),X(this._filtersToAdd,function(l){return e.drag.addFilter(l[0],l[1])}),this.drag.on(is,function(l){e.instance.revalidate(l)})):this.drag.addSelector(n),this.handlers.push({handler:i,options:n}),i.init(this.drag)}},{key:"addSelector",value:function(i,r){this.drag&&this.drag.addSelector(i,r)}},{key:"addFilter",value:function(i,r){this.drag==null?this._filtersToAdd.push([i,r===!0]):this.drag.addFilter(i,r)}},{key:"removeFilter",value:function(i){this.drag!=null&&this.drag.removeFilter(i)}},{key:"setFilters",value:function(i){var r=this;X(i,function(e){r.drag.addFilter(e[0],e[1])})}},{key:"reset",value:function(){var i=[];if(X(this.handlers,function(n){n.handler.reset()}),this.handlers.length=0,this.drag!=null){var r=this.drag._filters;for(var e in r)i.push([e,r[e][1]]);this.collicat.destroyDraggable(this.instance.getContainer())}return delete this.drag,i}},{key:"setOption",value:function(i,r){var e=ya(this.handlers,function(n){return n.handler===i});e!=null&&U(e.options,r||{})}}]),t}();function Y_(t,s){return _e(s)?{id:s,active:!0}:{id:s.id,active:s.active}}function X_(t,s){var i=uh(t.members,function(r){return r.el===s});return i!==null?i.active===!0:!1}function $_(t){for(var s=[],i=t._jsPlumbParentGroup;i!=null;)s.push(i.el),i=i.group;return s}var Fo=function(){function t(s,i){H(this,t),this.instance=s,this._dragSelection=i,f(this,"selector","> "+ge+":not("+kn(js)+")"),f(this,"_dragOffset",null),f(this,"_groupLocations",[]),f(this,"_intersectingGroups",[]),f(this,"_currentDragParentGroup",null),f(this,"_dragGroupByElementIdMap",{}),f(this,"_dragGroupMap",{}),f(this,"_currentDragGroup",null),f(this,"_currentDragGroupOffsets",new Map),f(this,"_currentDragGroupSizes",new Map),f(this,"_currentDragGroupOriginalPositions",new Map),f(this,"_dragPayload",null),f(this,"drag",void 0),f(this,"originalPosition",void 0)}return z(t,[{key:"onDragInit",value:function(i){return null}},{key:"onDragAbort",value:function(i){return null}},{key:"getDropGroup",value:function(){var i=null;if(this._intersectingGroups.length>0){var r=this._intersectingGroups[0].groupLoc.group,e=this._intersectingGroups[0].intersectingElement,n=e._jsPlumbParentGroup;n!==r&&(n==null||!n.overrideDrop(e,r))&&(i=this._intersectingGroups[0])}return i}},{key:"onStop",value:function(i){var r,e=this,n=i.drag.getDragElement(),o=this.getDropGroup(),a=[];a.push({el:n,id:this.instance.getId(n),pos:i.finalPos,originalGroup:n._jsPlumbParentGroup,redrawResult:null,originalPos:i.originalPos,reverted:!1,dropGroup:o!=null?o.groupLoc.group:null});function l(v,y,m,b,C){var E=m.x,S=m.y;if(v._jsPlumbParentGroup&&v._jsPlumbParentGroup.constrain){var D={w:v.parentNode.offsetWidth+v.parentNode.scrollLeft,h:v.parentNode.offsetHeight+v.parentNode.scrollTop};E=Math.max(E,0),S=Math.max(S,0),E=Math.min(E,D.w-b.w),S=Math.min(S,D.h-b.h),m.x=E,m.y=S}a.push({el:v,id:y,pos:m,originalPos:C,originalGroup:v._jsPlumbParentGroup,redrawResult:null,reverted:!1,dropGroup:o==null?void 0:o.groupLoc.group})}if(this._dragSelection.each(function(v,y,m,b,C){v!==i.el&&l(v,y,{x:m.x,y:m.y},b,C)}),(r=this._currentDragGroup)===null||r===void 0||r.members.forEach(function(v){if(v.el!==i.el){var y=e._currentDragGroupOffsets.get(v.elId),m=e._currentDragGroupSizes.get(v.elId),b={x:i.finalPos.x+y[0].x,y:i.finalPos.y+y[0].y};l(v.el,v.elId,b,m,e._currentDragGroupOriginalPositions.get(v.elId))}}),X(a,function(v){var y=v.originalGroup!=null,m=y&&Jl(e.instance,v.el,v.pos),b={x:0,y:0};if(y&&!m){if(o==null){var C=e._pruneOrOrphan(v,!0,!0);C.pos!=null?v.pos=C.pos.pos:!C.pruned&&v.originalGroup.revert&&(v.pos=v.originalPos,v.reverted=!0)}}else y&&m&&(b=e._computeOffsetByParentGroup(v.originalGroup));o!=null&&!m?e.instance.groupManager.addToGroup(o.groupLoc.group,!1,v.el):v.dropGroup=null,v.reverted&&e.instance.setPosition(v.el,v.pos),v.redrawResult=e.instance.setElementPosition(v.el,v.pos.x+b.x,v.pos.y+b.y),e.instance.removeClass(v.el,U_),e.instance.select({source:v.el}).removeClass(e.instance.elementDraggingClass+" "+e.instance.sourceElementDraggingClass,!0),e.instance.select({target:v.el}).removeClass(e.instance.elementDraggingClass+" "+e.instance.targetElementDraggingClass,!0)}),a[0].originalGroup!=null){var u=n._jsPlumbParentGroup;if(u!==a[0].originalGroup){var c=i.drag.getDragElement(!0);if(a[0].originalGroup.ghost){var h=this.instance.getPosition(this.instance.getGroupContentArea(u)),d=this.instance.getPosition(this.instance.getGroupContentArea(a[0].originalGroup)),p={x:d.x+i.pos.x-h.x,y:d.y+i.pos.y-h.y};c.style.left=p.x+"px",c.style.top=p.y+"px",this.instance.revalidate(c)}}}this.instance.fire(Cm,{elements:a,e:i.e,el:n,payload:this._dragPayload}),this._cleanup()}},{key:"_cleanup",value:function(){var i=this;X(this._groupLocations,function(r){i.instance.removeClass(r.el,qt),i.instance.removeClass(r.el,Zt)}),this._currentDragParentGroup=null,this._groupLocations.length=0,this.instance.hoverSuspended=!1,this._dragOffset=null,this._dragSelection.reset(),this._dragPayload=null,this._currentDragGroupOffsets.clear(),this._currentDragGroupSizes.clear(),this._currentDragGroupOriginalPositions.clear(),this._currentDragGroup=null}},{key:"reset",value:function(){}},{key:"init",value:function(i){this.drag=i}},{key:"onDrag",value:function(i){var r=this,e=i.drag.getDragElement(),n=this.instance.getId(e),o=i.pos,a=this.instance.viewport.getPosition(n),l={x:o.x,y:o.y};this._intersectingGroups.length=0,this._dragOffset!=null&&(l.x+=this._dragOffset.x,l.y+=this._dragOffset.y);var u=function(d,p,v){if(v){var y=new Set;X(r._groupLocations,function(m){!y.has(m.group.id)&&Gh(p,m.r)?(m.group!==r._currentDragParentGroup&&r.instance.addClass(m.el,Zt),r._intersectingGroups.push({groupLoc:m,intersectingElement:i.drag.getDragElement(!0),d:0}),X(r.instance.groupManager.getAncestors(m.group),function(b){return y.add(b.id)})):r.instance.removeClass(m.el,Zt)})}r.instance.setElementPosition(d,p.x,p.y),r.instance.fire(bm,{el:d,e:i.e,pos:{x:p.x,y:p.y},originalPosition:r.originalPosition,payload:r._dragPayload})},c={x:l.x,y:l.y,w:a.w,h:a.h};u(e,c,!0),this._dragSelection.updatePositions(o,this.originalPosition,function(h,d,p,v){u(h,v,!1)}),this._currentDragGroupOffsets.forEach(function(h,d){var p=r._currentDragGroupSizes.get(d),v={x:c.x+h[0].x,y:c.y+h[0].y,w:p.w,h:p.h};h[1].style.left=v.x+"px",h[1].style.top=v.y+"px",u(h[1],v,!1)})}},{key:"_computeOffsetByParentGroup",value:function(i){var r=this.instance.getPosition(i.el),e=i.contentArea;if(e!==i.el){var n=this.instance.getPosition(e);r.x+=n.x,r.y+=n.y}if(i.el._jsPlumbParentGroup){var o=this._computeOffsetByParentGroup(i.el._jsPlumbParentGroup);r.x+=o.x,r.y+=o.y}return r}},{key:"onStart",value:function(i){var r=this,e=i.drag.getDragElement(),n=this.instance.getPosition(e);this.originalPosition={x:i.pos.x,y:i.pos.y},e._jsPlumbParentGroup&&(this._dragOffset=this._computeOffsetByParentGroup(e._jsPlumbParentGroup),this._currentDragParentGroup=e._jsPlumbParentGroup);var o=!0,a=e.getAttribute(Gr);if((this.instance.elementsDraggable===!1||a!=null&&a!==Vn)&&(o=!1),o){this._groupLocations.length=0,this._intersectingGroups.length=0,this.instance.hoverSuspended=!0;var l=i.drag.getDragElement(!0),u=l.querySelectorAll(ge),c=$_(l),h=[];Array.prototype.push.apply(h,u),Array.prototype.push.apply(h,c),this._dragSelection.filterActiveSet(function(y){return h.indexOf(y.jel)===-1}),this._dragSelection.initialisePositions();var d=function(m,b,C){if(!m._isJsPlumbGroup||r.instance.allowNestedGroups){var E=!m._jsPlumbParentGroup,S=E||m._jsPlumbParentGroup.dropOverride!==!0,D=!E&&(m._jsPlumbParentGroup.ghost||m._jsPlumbParentGroup.constrain!==!0);(E||S&&D)&&(X(r.instance.groupManager.getGroups(),function(G){var L=m._jsPlumbGroup;if(G.droppable!==!1&&G.enabled!==!1&&m._jsPlumbGroup!==G&&!r.instance.groupManager.isDescendant(G,L)){var T=G.el,q=r.instance.getId(T),W=r.instance.viewport.getPosition(q),te={x:W.x,y:W.y,w:W.w,h:W.h},R={el:T,r:te,group:G};r._groupLocations.push(R),G!==r._currentDragParentGroup&&r.instance.addClass(T,qt)}}),r._groupLocations.sort(function(G,L){return r.instance.groupManager.isDescendant(G.group,L.group)?-1:r.instance.groupManager.isAncestor(L.group,G.group)?1:0}))}return r.instance.select({source:m}).addClass(r.instance.elementDraggingClass+" "+r.instance.sourceElementDraggingClass,!0),r.instance.select({target:m}).addClass(r.instance.elementDraggingClass+" "+r.instance.targetElementDraggingClass,!0),r.instance.fire(xm,{el:m,e:i.e,originalPosition:r.originalPosition,pos:r.originalPosition,dragGroup:b,dragGroupMemberSpec:C})},p=this.instance.getId(e);this._currentDragGroup=this._dragGroupByElementIdMap[p],this._currentDragGroup&&!X_(this._currentDragGroup,e)&&(this._currentDragGroup=null);var v=d(e);if(v===!1)return this._cleanup(),!1;this._dragPayload=v,this._currentDragGroup!=null&&(this._currentDragGroupOffsets.clear(),this._currentDragGroupSizes.clear(),this._currentDragGroup.members.forEach(function(y){var m=r.instance.viewport.getPosition(y.elId);r._currentDragGroupOffsets.set(y.elId,[{x:m.x-n.x,y:m.y-n.y},y.el]),r._currentDragGroupSizes.set(y.elId,m),r._currentDragGroupOriginalPositions.set(y.elId,{x:m.x,y:m.y}),d(y.el,r._currentDragGroup,y)}))}return o}},{key:"addToDragGroup",value:function(i){var r=this,e=Y_(this.instance,i),n=this._dragGroupMap[e.id];n==null&&(n={id:e.id,members:new Set},this._dragGroupMap[e.id]=n);for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];this.removeFromDragGroup.apply(this,a),X(a,function(u){var c=r.instance.getId(u);n.members.add({elId:c,el:u,active:e.active}),r._dragGroupByElementIdMap[c]=n})}},{key:"removeFromDragGroup",value:function(){for(var i=this,r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];X(e,function(o){var a=i.instance.getId(o),l=i._dragGroupByElementIdMap[a];if(l!=null){var u=new Set;l.members.forEach(function(c){c.el!==o&&u.add(c)}),l.members=u,delete i._dragGroupByElementIdMap[a]}})}},{key:"setDragGroupState",value:function(i){for(var r=this,e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];var a=n.map(function(l){return r.instance.getId(l)});X(a,function(l){var u=r._dragGroupByElementIdMap[l];if(u!=null){var c=uh(u.members,function(h){return h.elId===l});c!=null&&(c.active=i)}})}},{key:"clearDragGroup",value:function(i){var r=this,e=this._dragGroupMap[i];e!=null&&(e.members.forEach(function(n){delete r._dragGroupByElementIdMap[n.elId]}),e.members.clear())}},{key:"_pruneOrOrphan",value:function(i,r,e){var n=i.el,o={pruned:!1,pos:null};if(e||!Jl(this.instance,n,i.pos)){var a=n._jsPlumbParentGroup;a.prune?(n._isJsPlumbGroup?this.instance.removeGroup(n._jsPlumbGroup):a.remove(i.el,!0),o.pruned=!0):a.orphan&&(o.pos=this.instance.groupManager.orphan(i.el,r),n._isJsPlumbGroup?a.removeGroup(n._jsPlumbGroup):a.remove(i.el))}return o}}]),t}(),Zl={},Ql={},eu={},Qt={get:function(s,i,r){var e=Zl[i];if(e)return new e(s,r);throw{message:"jsPlumb: unknown endpoint type '"+i+"'"}},clone:function(s){var i=eu[s.type];return Qt.get(s.endpoint,s.type,i.getParams(s))},compute:function(s,i,r,e){var n=Ql[s.type];if(n!=null)return n(s,i,r,e);Pe("jsPlumb: cannot find endpoint calculator for endpoint of type ",s.type)},registerHandler:function(s){eu[s.type]=s,Zl[s.type]=s.cls,Ql[s.type]=s.compute}},vi=function(){function t(s,i){H(this,t),this.endpoint=s,f(this,"typeId",void 0),f(this,"x",void 0),f(this,"y",void 0),f(this,"w",void 0),f(this,"h",void 0),f(this,"computedValue",void 0),f(this,"bounds",rs()),f(this,"classes",[]),f(this,"instance",void 0),f(this,"type",void 0),i=i||{},this.instance=s.instance,s.cssClass&&this.classes.push(s.cssClass),i.cssClass&&this.classes.push(i.cssClass)}return z(t,[{key:"addClass",value:function(i){this.classes.push(i),this.instance.addEndpointClass(this.endpoint,i)}},{key:"removeClass",value:function(i){this.classes=this.classes.filter(function(r){return r!==i}),this.instance.removeEndpointClass(this.endpoint,i)}},{key:"compute",value:function(i,r,e){this.computedValue=Qt.compute(this,i,r,e),this.bounds.xmin=this.x,this.bounds.ymin=this.y,this.bounds.xmax=this.x+this.w,this.bounds.ymax=this.y+this.h}},{key:"setVisible",value:function(i){this.instance.setEndpointVisible(this.endpoint,i)}}]),t}(),Ln,Nn,Rn,ai;(function(t){t.top="top",t.left="left",t.right="right",t.bottom="bottom"})(ai||(ai={}));var Ce=ai.top,Fe=ai.left,Le=ai.right,He=ai.bottom,W_=[Fe,Le],z_=[Ce,He],q_=function(){function t(s,i,r){H(this,t),this.instance=s,this.element=i,f(this,"isFloating",!0),f(this,"isContinuous",void 0),f(this,"isDynamic",void 0),f(this,"locations",[]),f(this,"currentLocation",0),f(this,"locked",!1),f(this,"cssClass",""),f(this,"timestamp",null),f(this,"type","Floating"),f(this,"id",ke()),f(this,"orientation",[0,0]),f(this,"size",void 0),this.size=s.viewport.getPosition(r),this.locations.push({x:.5,y:.5,ox:this.orientation[0],oy:this.orientation[1],offx:0,offy:0,iox:this.orientation[0],ioy:this.orientation[1],cls:""})}return z(t,[{key:"_updateOrientationInRouter",value:function(){this.instance.router.setAnchorOrientation(this,[this.locations[0].ox,this.locations[0].oy])}},{key:"over",value:function(i){this.orientation=this.instance.router.getEndpointOrientation(i),this.locations[0].ox=this.orientation[0],this.locations[0].oy=this.orientation[1],this._updateOrientationInRouter()}},{key:"out",value:function(){this.orientation=null,this.locations[0].ox=this.locations[0].iox,this.locations[0].oy=this.locations[0].ioy,this._updateOrientationInRouter()}}]),t}(),tu=(Ln={},f(Ln,Ce,He),f(Ln,Le,Fe),f(Ln,Fe,Le),f(Ln,He,Ce),Ln),Yh=(Nn={},f(Nn,Ce,Le),f(Nn,Le,He),f(Nn,Fe,Ce),f(Nn,He,Fe),Nn),Xh=(Rn={},f(Rn,Ce,Fe),f(Rn,Le,Ce),f(Rn,Fe,He),f(Rn,He,Le),Rn);function K_(t){return t.faces.length===0?Ce:t.faces[0]}function Mi(t,s){return t.faces.indexOf(s)!==-1}function J_(t,s){return(t.clockwise?Yh:Xh)[s]}function Z_(t,s){return(t.clockwise?Xh:Yh)[s]}function nu(t,s){return t.lockedAxis==null?t.lockedFace==null?Mi(t,s)===!0:t.lockedFace===s:t.lockedAxis.indexOf(s)!==-1}function Q_(t,s){if(Mi(t,s))return s;if(Mi(t,tu[s]))return tu[s];var i=J_(t,s);if(Mi(t,i))return i;var r=Z_(t,s);return Mi(t,r)?r:s}var iu={x:.5,y:0,ox:0,oy:-1,offx:0,offy:0},ru={x:.5,y:1,ox:0,oy:1,offx:0,offy:0},su={x:0,y:.5,ox:-1,oy:0,offx:0,offy:0},ou={x:1,y:.5,ox:1,oy:0,offx:0,offy:0},e0={x:0,y:0,ox:0,oy:-1,offx:0,offy:0},t0={x:1,y:0,ox:1,oy:-1,offx:0,offy:0},n0={x:0,y:1,ox:0,oy:1,offx:0,offy:0},i0={x:1,y:1,ox:0,oy:1,offx:0,offy:0},r0={x:.5,y:.5,ox:0,oy:0,offx:0,offy:0},$h={Top:[iu],Bottom:[ru],Left:[su],Right:[ou],TopLeft:[e0],TopRight:[t0],BottomLeft:[n0],BottomRight:[i0],Center:[r0],AutoDefault:[iu,su,ru,ou]},s0={Continuous:{faces:[Ce,Fe,He,Le]},ContinuousTop:{faces:[Ce]},ContinuousRight:{faces:[Le]},ContinuousBottom:{faces:[He]},ContinuousLeft:{faces:[Fe]},ContinuousLeftRight:{faces:[Fe,Le]},ContinuousTopBottom:{faces:[Ce,He]}};function au(t,s){if(s=s||{},t===Pt.Perimeter)return d0(s);var i=$h[t];if(i!=null)return us(t,hh(i,function(r){return U({iox:r.ox,ioy:r.oy},r)}),s);if(i=s0[t],i!=null)return l0(t,i.faces,s);throw{message:"jsPlumb: unknown anchor type '"+t+"'"}}function us(t,s,i){return{type:t,locations:s,currentLocation:0,locked:!1,id:ke(),isFloating:!1,isContinuous:!1,isDynamic:s.length>1,timestamp:null,cssClass:i.cssClass||""}}function o0(t,s,i){return new q_(t,s,i)}var a0="currentFace";function l0(t,s,i){var r={type:t,locations:[],currentLocation:0,locked:!1,id:ke(),cssClass:i.cssClass||"",isFloating:!1,isContinuous:!0,timestamp:null,faces:i.faces||s,lockedFace:null,lockedAxis:null,clockwise:i.clockwise!==!1,__currentFace:null};return Object.defineProperty(r,a0,{get:function(){return this.__currentFace},set:function(n){this.__currentFace=Q_(this,n)}}),r}function lu(t){return t.length<7&&t.every(Ao)||t.length===7&&t.slice(0,5).every(Ao)&&_e(t[6])}function Ii(t){if(_e(t))return au(t,null);if(Array.isArray(t))if(lu(t)){var s=t;return us(null,[{x:s[0],y:s[1],ox:s[2],oy:s[3],offx:s[4]==null?0:s[4],offy:s[5]==null?0:s[5],iox:s[2],ioy:s[3],cls:s[6]||""}],{cssClass:s[6]||""})}else{var i=hh(t,function(e){if(_e(e)){var n=$h[e];return n!=null?U({iox:n[0].ox,ioy:n[0].oy,cls:""},n[0]):null}else if(lu(e))return{x:e[0],y:e[1],ox:e[2],oy:e[3],offx:e[4]==null?0:e[4],offy:e[5]==null?0:e[5],iox:e[2],ioy:e[3],cls:e[6]||""}}).filter(function(e){return e!=null});return us("Dynamic",i,{})}else{var r=t;return au(r.type,r.options)}}function Wh(t){for(var s=.5,i=Math.PI*2/t,r=[],e=0,n=0;n<t;n++){var o=s+s*Math.sin(e),a=s+s*Math.cos(e);r.push({x:o,y:a,ox:0,oy:0,offx:0,offy:0,iox:0,ioy:0,cls:""}),e+=i}return r}function u0(t,s){for(var i=s/t.length,r=[],e=function(a,l,u,c,h,d,p){i=s*h;for(var v=(u-a)/i,y=(c-l)/i,m=0;m<i;m++)r.push({x:a+v*m,y:l+y*m,ox:d??0,oy:p??0,offx:0,offy:0,iox:0,ioy:0,cls:""})},n=0;n<t.length;n++)e.apply(null,t[n]);return r}function Ia(t,s){for(var i=[],r=0;r<t.length;r++)i.push([t[r][0],t[r][1],t[r][2],t[r][3],1/t.length,t[r][4],t[r][5]]);return u0(i,s)}function zh(t){return Ia([[0,0,1,0,0,-1],[1,0,1,1,1,0],[1,1,0,1,0,1],[0,1,0,0,-1,0]],t)}function c0(t){return Ia([[.5,0,1,.5],[1,.5,.5,1],[.5,1,0,.5],[0,.5,.5,0]],t)}function h0(t){return Ia([[.5,0,1,1],[1,1,0,1],[0,1,.5,0]],t)}function f0(t,s){for(var i=[],r=s/180*Math.PI,e=0;e<t.length;e++){var n=t[e].x-.5,o=t[e].y-.5;i.push({x:.5+(n*Math.cos(r)-o*Math.sin(r)),y:.5+(n*Math.sin(r)+o*Math.cos(r)),ox:t[e].ox,oy:t[e].oy,offx:0,offy:0,iox:0,ioy:0,cls:""})}return i}var rn=new Map;rn.set(nn.Circle,Wh);rn.set(nn.Ellipse,Wh);rn.set(nn.Rectangle,zh);rn.set(nn.Square,zh);rn.set(nn.Diamond,c0);rn.set(nn.Triangle,h0);function d0(t){t=t||{};var s=t.anchorCount||60,i=t.shape;if(!i)throw new Error("no shape supplied to Perimeter Anchor type");if(!rn.has(i))throw new Error("Shape ["+i+"] is unknown by Perimeter Anchor type");var r=rn.get(i)(s);t.rotation&&(r=f0(r,t.rotation));var e=us(Pt.Perimeter,r,t),n=U(e,{shape:i});return n}var uu=function(){function t(s,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;H(this,t),this.selector=s,this.def=i,this.exclude=r,f(this,"id",void 0),f(this,"redrop",void 0),this.id=ke(),this.redrop=i.def.redrop||qh}return z(t,[{key:"setEnabled",value:function(i){this.def.enabled=i}},{key:"isEnabled",value:function(){return this.def.enabled!==!1}}]),t}(),qh="strict",p0="any",v0="anySource",g0="anyTarget",y0="anySourceOrTarget";function m0(t,s,i,r,e,n){var o=o0(n,r,e),a={paintStyle:t.getPaintStyle(),preparedAnchor:o,element:r,scope:t.scope,cssClass:[ba,t.cssClass].join(" ")};s!=null&&(fh(s,vi)?a.existingEndpoint=s:a.endpoint=s);var l=n._internal_newEndpoint(a);return n._paintEndpoint(l,{}),l}function _0(t,s,i,r,e){for(var n=t.target||t.srcElement,o=!1,a=r.getSelector(s,i),l=0;l<a.length;l++)if(a[l]===n){o=!0;break}return e?!o:o}var E0=kn(qt,Zt),cu="sourceSelectorEndpoint",hu=function(){function t(s){H(this,t),this.instance=s,f(this,"jpc",void 0),f(this,"existingJpc",void 0),f(this,"_originalAnchorSpec",void 0),f(this,"ep",void 0),f(this,"endpointRepresentation",void 0),f(this,"canvasElement",void 0),f(this,"_activeDefinition",void 0),f(this,"placeholderInfo",{id:null,element:null}),f(this,"floatingIndex",void 0),f(this,"floatingId",void 0),f(this,"floatingElement",void 0),f(this,"floatingEndpoint",void 0),f(this,"floatingAnchor",void 0),f(this,"_stopped",void 0),f(this,"inPlaceCopy",void 0),f(this,"endpointDropTargets",[]),f(this,"currentDropTarget",null),f(this,"payload",void 0),f(this,"floatingConnections",{}),f(this,"_forceReattach",void 0),f(this,"_forceDetach",void 0),f(this,"mousedownHandler",void 0),f(this,"mouseupHandler",void 0),f(this,"selector",kn(Kn));var i=s.getContainer();this.mousedownHandler=this._mousedownHandler.bind(this),this.mouseupHandler=this._mouseupHandler.bind(this),s.on(i,Q,ge,this.mousedownHandler),s.on(i,ee,[ge,kn(Kn)].join(","),this.mouseupHandler)}return z(t,[{key:"_resolveDragParent",value:function(i,r){var e=this.instance.getContainer(),n=Dt(r,ge,e,!0);if(i.parentSelector!=null){var o=Dt(r,i.parentSelector,e,!0);return o!=null&&(n=Dt(o.parentNode,ge,e,!1)),o||n}else return n}},{key:"_mousedownHandler",value:function(i){var r,e;if(!(i.which===3||i.button===2)){var n=i.target||i.srcElement;if(e=this._getSourceDefinition(i),!(e!=null&&(r=this._resolveDragParent(e.def.def,n),r==null||r.getAttribute(Er)===Vn))&&e){var o=i.currentTarget,a;if(n.getAttribute(Er)!==Vn){if(Ki(i),this._activeDefinition=e,a=e.def.def,a.canAcceptNewConnection!=null&&!a.canAcceptNewConnection(r,i))return!1;var l=Tu(i,r,this.instance.currentZoom),u={element:r};if(U(u,a),u.isTemporarySource=!0,a.scope)u.scope=a.scope;else{var c=n.getAttribute(no);c!=null&&(u.scope=c)}var h=a.parameterExtractor?a.parameterExtractor(r,n,i):{};if(u=es(u,h),u.maxConnections!=null&&u.maxConnections>=0){var d=this.instance.select({source:r}).length;if(d>=u.maxConnections)return Ki(i),a.onMaxConnections&&a.onMaxConnections({element:r,maxConnections:u.maxConnections},i),i.stopImmediatePropagation&&i.stopImmediatePropagation(),!1}if(a.anchorPositionFinder){var p=a.anchorPositionFinder(r,l,a,i);p!=null&&(u.anchor=p)}this._originalAnchorSpec=u.anchor||(this.instance.areDefaultAnchorsSet()?this.instance.defaults.anchors[0]:this.instance.defaults.anchor);var v=this.instance.router.prepareAnchor(this._originalAnchorSpec),y=[l.x,l.y,0,0];if(v.locations.length>0)y[2]=v.locations[0].ox,y[3]=v.locations[0].oy;else if(v.isContinuous){var m=l.x<.5?l.x:1-l.x,b=l.y<.5?l.y:1-l.y;y[2]=m<b?l.x<.5?-1:1:0,y[3]=b<m?l.y<.5?-1:1:0}u.anchor=y,u.deleteOnEmpty=!0,this.ep=this.instance._internal_newEndpoint(u);var C={};if(a.extract){for(var E in a.extract){var S=n.getAttribute(E);S&&(C[a.extract[E]]=S)}this.ep.mergeParameters(C)}if(u.uniqueEndpoint){var D=this.ep.elementId,G=this.instance.getManagedData(D,cu,e.id);G==null?(this.instance.setManagedData(D,cu,e.id,this.ep),this.ep.deleteOnEmpty=!1):this.ep.finalEndpoint=G}o._jsPlumbOrphanedEndpoints=o._jsPlumbOrphanedEndpoints||[],o._jsPlumbOrphanedEndpoints.push(this.ep),this.instance.trigger(this.ep.endpoint.canvas,Q,i,C)}}}}},{key:"_mouseupHandler",value:function(i){var r=i.currentTarget||i.srcElement;r._jsPlumbOrphanedEndpoints&&(ky(r._jsPlumbOrphanedEndpoints,this.instance._maybePruneEndpoint.bind(this.instance)),r._jsPlumbOrphanedEndpoints.length=0),this._activeDefinition=null}},{key:"onDragInit",value:function(i){var r=mr(i,this.instance),e=xi(i,this.instance);return this._makeDraggablePlaceholder(r,e),this.placeholderInfo.element.jtk=i.jtk,this.placeholderInfo.element}},{key:"onDragAbort",value:function(i){this._cleanupDraggablePlaceholder()}},{key:"_makeDraggablePlaceholder",value:function(i,r){this.placeholderInfo=this.placeholderInfo||{};var e=ph(Mh,{position:"absolute"});this.instance._appendElementToContainer(e);var n=this.instance.getId(e);return this.instance.setPosition(e,i),e.style.width=r.w+"px",e.style.height=r.h+"px",this.instance.manage(e),this.placeholderInfo.id=n,this.placeholderInfo.element=e,e}},{key:"_cleanupDraggablePlaceholder",value:function(){this.placeholderInfo.element&&(this.instance.unmanage(this.placeholderInfo.element,!0),delete this.placeholderInfo.element,delete this.placeholderInfo.id)}},{key:"reset",value:function(){var i=this.instance.getContainer();this.instance.off(i,ee,this.mouseupHandler),this.instance.off(i,Q,this.mousedownHandler)}},{key:"init",value:function(i){}},{key:"startNewConnectionDrag",value:function(i,r){this.jpc=this.instance._newConnection({sourceEndpoint:this.ep,targetEndpoint:this.floatingEndpoint,source:this.ep.element,target:this.placeholderInfo.element,paintStyle:this.ep.connectorStyle,hoverPaintStyle:this.ep.connectorHoverStyle,connector:this.ep.connector,overlays:this.ep.connectorOverlays,type:this.ep.edgeType,cssClass:this.ep.connectorClass,hoverClass:this.ep.connectorHoverClass,scope:i,data:r}),this.jpc.pending=!0,this.jpc.addClass(this.instance.draggingClass),this.ep.addClass(this.instance.draggingClass),this.instance.fire(Xl,this.jpc)}},{key:"startExistingConnectionDrag",value:function(){this.existingJpc=!0,this.instance.setHover(this.jpc,!1);var i=this.jpc.endpoints[0].id===this.ep.id?0:1;this.ep.detachFromConnection(this.jpc,null,!0),this.floatingEndpoint.addConnection(this.jpc),this.instance.fire(Xl,this.jpc),this.instance.sourceOrTargetChanged(this.jpc.endpoints[i].elementId,this.placeholderInfo.id,this.jpc,this.placeholderInfo.element,i),this.jpc.suspendedEndpoint=this.jpc.endpoints[i],this.jpc.suspendedElement=this.jpc.endpoints[i].element,this.jpc.suspendedElementId=this.jpc.endpoints[i].elementId,this.jpc.suspendedElementType=i===0?Do:gh,this.instance.setHover(this.jpc.suspendedEndpoint,!1),this.floatingEndpoint.referenceEndpoint=this.jpc.suspendedEndpoint,this.floatingEndpoint.mergeParameters(this.jpc.suspendedEndpoint.parameters),this.jpc.endpoints[i]=this.floatingEndpoint,this.jpc.addClass(this.instance.draggingClass),this.floatingId=this.placeholderInfo.id,this.floatingIndex=i,this.instance._refreshEndpoint(this.ep)}},{key:"_shouldStartDrag",value:function(){var i=!0;this.ep.enabled||(i=!1),this.jpc==null&&!this.ep.isSource&&!this.ep.isTemporarySource&&(i=!1),this.ep.isSource&&this.ep.isFull()&&!(this.jpc!=null&&this.ep.dragAllowedWhenFull)&&(i=!1),this.jpc!=null&&!this.jpc.isDetachable(this.ep)&&(this.ep.isFull()?i=!1:this.jpc=null);var r={},e=this.instance.checkCondition(this.jpc==null?sm:om,{endpoint:this.ep,source:this.ep.element,sourceId:this.ep.elementId,connection:this.jpc});return e===!1?i=!1:qn(e)==="object"?(r=e,U(r,this.payload||{})):r=this.payload||{},[i,r]}},{key:"_createFloatingEndpoint",value:function(i){var r=this.ep.endpoint;if(this.ep.edgeType!=null){var e=this.instance._deriveEndpointAndAnchorSpec(this.ep.edgeType);r=e.endpoints[1]}this.floatingEndpoint=m0(this.ep,r,i,this.placeholderInfo.element,this.placeholderInfo.id,this.instance),this.floatingAnchor=this.floatingEndpoint._anchor,this.floatingEndpoint.deleteOnEmpty=!0,this.floatingElement=this.floatingEndpoint.endpoint.canvas,this.floatingId=this.instance.getId(this.floatingElement)}},{key:"_populateTargets",value:function(i,r){var e=this,n=this.jpc&&this.jpc.endpoints[0]===this.ep,o,a=this.instance.getContainer().querySelectorAll([".",Kn,"[",mh,this.ep.scope,"]:not(.",ba,")"].join(""));if(X(a,function(h){if((e.jpc!=null||h!==i)&&h!==e.floatingElement&&(e.jpc!=null||!h.jtk.endpoint.isFull())&&(n&&h.jtk.endpoint.isSource||!n&&h.jtk.endpoint.isTarget)){var d=mr(h,e.instance),p=xi(h,e.instance);o={x:d.x,y:d.y,w:p.w,h:p.h},e.endpointDropTargets.push({el:h,targetEl:h,r:o,endpoint:h.jtk.endpoint,def:null}),e.instance.addClass(h,qt)}}),n){var l=ya(this.instance.sourceSelectors,function(h){return h.isEnabled()&&(h.def.def.scope==null||h.def.def.scope===e.ep.scope)});if(l!=null){var u=this._findTargetZones(l);X(u,function(h){if(h.getAttribute(Er)!==Vn){var d=h.getAttribute(no);if(d!=null&&d!==e.ep.scope)return;var p={r:null,el:h};p.targetEl=Dt(h,ge,e.instance.getContainer(),!0);var v=mr(p.el,e.instance),y=xi(p.el,e.instance);p.r={x:v.x,y:v.y,w:y.w,h:y.h},l.def.def.rank!=null&&(p.rank=l.def.def.rank),p.def=l.def,e.endpointDropTargets.push(p),e.instance.addClass(p.targetEl,qt)}})}}else{var c=Sy(this.instance.targetSelectors,function(h){return h.isEnabled()});c.forEach(function(h){var d=e._findTargetZones(h);X(d,function(p){if(p.getAttribute(Er)!==Vn){var v=p.getAttribute(no);if(v!=null&&v!==e.ep.scope)return;var y={r:null,el:p};if(h.def.def.parentSelector!=null&&(y.targetEl=Dt(p,h.def.def.parentSelector,e.instance.getContainer(),!0)),y.targetEl==null&&(y.targetEl=Dt(p,ge,e.instance.getContainer(),!0)),(h.def.def.allowLoopback===!1||e._activeDefinition&&e._activeDefinition.def.def.allowLoopback===!1)&&y.targetEl===e.ep.element||h.def.def.canAcceptNewConnection!=null&&!h.def.def.canAcceptNewConnection(y.targetEl,r))return;var m=h.def.def.maxConnections;if(m!=null&&m!==-1&&e.instance.select({target:y.targetEl}).length>=m)return;var b=mr(p,e.instance),C=xi(p,e.instance);y.r={x:b.x,y:b.y,w:C.w,h:C.h},y.def=h.def,h.def.def.rank!=null&&(y.rank=h.def.def.rank),e.endpointDropTargets.push(y),e.instance.addClass(y.targetEl,qt)}})})}this.endpointDropTargets.sort(function(h,d){if(h.targetEl._isJsPlumbGroup&&!d.targetEl._isJsPlumbGroup)return 1;if(!h.targetEl._isJsPlumbGroup&&d.targetEl._isJsPlumbGroup)return-1;if(h.targetEl._isJsPlumbGroup&&d.targetEl._isJsPlumbGroup){if(e.instance.groupManager.isAncestor(h.targetEl._jsPlumbGroup,d.targetEl._jsPlumbGroup))return-1;if(e.instance.groupManager.isAncestor(d.targetEl._jsPlumbGroup,h.targetEl._jsPlumbGroup))return 1}else if(h.rank!=null&&d.rank!=null){if(h.rank>d.rank)return-1;if(h.rank<d.rank)return 1}else return 0})}},{key:"_findTargetZones",value:function(i){var r;if(i.redrop===p0){var e=this.instance.targetSelectors.map(function(o){return o.selector});e.push.apply(e,ni(this.instance.sourceSelectors.map(function(o){return o.selector}))),e.push(ge),r=e.join(",")}else if(i.redrop===qh)r=i.selector;else if(i.redrop===v0)r=this.instance.sourceSelectors.map(function(o){return o.selector}).join(",");else if(i.redrop===g0)r=this.instance.targetSelectors.map(function(o){return o.selector}).join(",");else if(i.redrop===y0){var n=this.instance.targetSelectors.map(function(o){return o.selector});n.push.apply(n,ni(this.instance.sourceSelectors.map(function(o){return o.selector}))),r=n.join(",")}return this.instance.getContainer().querySelectorAll(r)}},{key:"onStart",value:function(i){this.endpointDropTargets.length=0,this.currentDropTarget=null,this._stopped=!1;var r=i.drag.getDragElement();if(this.ep=r.jtk.endpoint,!this.ep)return!1;this.endpointRepresentation=this.ep.endpoint,this.canvasElement=this.endpointRepresentation.canvas,this.jpc=this.ep.connectorSelector();var e=this._shouldStartDrag(),n=Fr(e,2),o=n[0],a=n[1];if(o===!1)return this._stopped=!0,!1;this.instance.setHover(this.ep,!1),this.instance.isConnectionBeingDragged=!0,this.jpc&&!this.ep.isFull()&&this.ep.isSource&&(this.jpc=null),this._createFloatingEndpoint(this.canvasElement),this._populateTargets(this.canvasElement,i.e),this.jpc==null?this.startNewConnectionDrag(this.ep.scope,a):this.startExistingConnectionDrag(),this._registerFloatingConnection(this.placeholderInfo,this.jpc),this.instance.currentlyDragging=!0}},{key:"onBeforeStart",value:function(i){this.payload=i.e.payload||{}}},{key:"onDrag",value:function(i){if(this._stopped)return!0;if(this.placeholderInfo.element){var r=xi(this.floatingElement,this.instance);this.instance.setElementPosition(this.placeholderInfo.element,i.pos.x,i.pos.y);for(var e={x:i.pos.x,y:i.pos.y,w:r.w,h:r.h},n,o,a,l=0;l<this.endpointDropTargets.length;l++)if(Gh(e,this.endpointDropTargets[l].r)){n=this.endpointDropTargets[l];break}if(n!==this.currentDropTarget&&this.currentDropTarget!=null&&(o=this._getFloatingAnchorIndex(),this.instance.removeClass(this.currentDropTarget.el,Zt),this.currentDropTarget.endpoint&&(this.currentDropTarget.endpoint.endpoint.removeClass(this.instance.endpointDropAllowedClass),this.currentDropTarget.endpoint.endpoint.removeClass(this.instance.endpointDropForbiddenClass)),this.floatingAnchor.out()),n!=null&&(this.instance.addClass(n.el,Zt),o=this._getFloatingAnchorIndex(),n.endpoint!=null))if(a=n.endpoint.isSource&&o===0||n.endpoint.isTarget&&o!==0||this.jpc.suspendedEndpoint&&n.endpoint.referenceEndpoint&&n.endpoint.referenceEndpoint.id===this.jpc.suspendedEndpoint.id,a){var u=this.instance.checkCondition(jy,{sourceEndpoint:this.jpc.endpoints[o],targetEndpoint:n.endpoint.endpoint,connection:this.jpc});u?(n.endpoint.endpoint.addClass(this.instance.endpointDropAllowedClass),n.endpoint.endpoint.removeClass(this.instance.endpointDropForbiddenClass)):(n.endpoint.endpoint.removeClass(this.instance.endpointDropAllowedClass),n.endpoint.endpoint.addClass(this.instance.endpointDropForbiddenClass)),this.floatingAnchor.over(n.endpoint),this.instance._paintConnection(this.jpc)}else n=null;this.currentDropTarget=n}}},{key:"_maybeCleanup",value:function(i){i._mtNew&&i.connections.length===0?this.instance.deleteEndpoint(i):delete i._mtNew}},{key:"_reattachOrDiscard",value:function(i){var r=this.jpc.suspendedEndpoint!=null,e=this._getFloatingAnchorIndex();return r&&this._shouldReattach()?(e===0?(this.jpc.source=this.jpc.suspendedElement,this.jpc.sourceId=this.jpc.suspendedElementId):(this.jpc.target=this.jpc.suspendedElement,this.jpc.targetId=this.jpc.suspendedElementId),this._doForceReattach(e),!0):(this._discard(e,i),!1)}},{key:"onStop",value:function(i){var r=this,e=i.e;this.instance.isConnectionBeingDragged=!1,this.instance.currentlyDragging=!1;var n=Ry(Zt,qt),o=this.instance.getContainer().querySelectorAll(E0);if(X(o,function(d){r.instance.removeClass(d,n)}),this.jpc&&this.jpc.endpoints!=null){var a=this.jpc.suspendedEndpoint!=null,l=this._getFloatingAnchorIndex(),u=this.jpc.suspendedEndpoint,c;if(this.currentDropTarget!=null)if(c=this._getDropEndpoint(i,this.jpc),c==null)this._reattachOrDiscard(i.e);else if(u&&u.id===c.id)this._doForceReattach(l);else if(!c.enabled)this._reattachOrDiscard(i.e);else if(c.isFull())c.fire(Ph,{endpoint:this,connection:this.jpc,maxConnections:this.instance.defaults.maxConnections},e),this._reattachOrDiscard(i.e);else{l===0?(this.jpc.source=c.element,this.jpc.sourceId=c.elementId):(this.jpc.target=c.element,this.jpc.targetId=c.elementId);var h=!0;a&&this.jpc.suspendedEndpoint.id!==c.id&&(!this.jpc.isDetachAllowed(this.jpc)||!this.jpc.endpoints[l].isDetachAllowed(this.jpc)||!this.jpc.suspendedEndpoint.isDetachAllowed(this.jpc)||!this.instance.checkCondition("beforeDetach",this.jpc))&&(h=!1),h=h&&c.isDropAllowed(this.jpc.sourceId,this.jpc.targetId,this.jpc.scope,this.jpc,c),h?this._drop(c,l,e,h):this._reattachOrDiscard(i.e)}else this._reattachOrDiscard(i.e);this.instance._refreshEndpoint(this.ep),this.ep.removeClass(this.instance.draggingClass),this._cleanupDraggablePlaceholder(),this.jpc.removeClass(this.instance.draggingClass),delete this.jpc.suspendedEndpoint,delete this.jpc.suspendedElement,delete this.jpc.suspendedElementType,delete this.jpc.suspendedElementId,delete this.jpc.suspendedIndex,delete this.floatingId,delete this.floatingIndex,delete this.floatingElement,delete this.floatingEndpoint,delete this.floatingAnchor,delete this.jpc.pending,c!=null&&this._maybeCleanup(c)}}},{key:"_getSourceDefinition",value:function(i){for(var r,e=this.instance.getContainer(),n=0;n<this.instance.sourceSelectors.length;n++)if(r=this.instance.sourceSelectors[n],r.isEnabled()){var o=_0(i,e,r.selector,this.instance,r.exclude);if(o!==!1)return r}}},{key:"_getDropEndpoint",value:function(i,r){var e;if(this.currentDropTarget.endpoint==null){var n=this.currentDropTarget.def,o=i.e.target||i.e.srcElement;if(n==null)return null;var a=this.currentDropTarget.targetEl,l=Tu(i.e,a,this.instance.currentZoom),u=this.instance._deriveEndpointAndAnchorSpec(r.getType().join(" "),!0),c=u.endpoints?U(i,{endpoint:n.def.endpoint||u.endpoints[1],cssClass:n.def.cssClass||"",source:n.def.source===!0,target:n.def.target===!0}):i,h=this.instance.validAnchorsSpec(u.anchors)?u.anchors:this.instance.areDefaultAnchorsSet()?this.instance.defaults.anchors:null,d=n.def.anchor,p=n.def.anchorPositionFinder?n.def.anchorPositionFinder(a,l,n.def,i.e):null,v=p??d??(h!=null&&h[1]!=null?h[1]:null);v!=null&&(c=U(c,{anchor:v})),n.def.portId!=null&&(c.portId=n.def.portId);var y=n.def.parameterExtractor?n.def.parameterExtractor(this.currentDropTarget.el,o,i.e):{};if(c=es(c,y),c.element=a,e=this.instance._internal_newEndpoint(c),e._mtNew=!0,e.deleteOnEmpty=!0,n.def.parameters&&e.mergeParameters(n.def.parameters),n.def.extract){var m={};for(var b in n.def.extract){var C=this.currentDropTarget.el.getAttribute(b);C&&(m[n.def.extract[b]]=C)}e.mergeParameters(m)}}else e=this.currentDropTarget.endpoint;return e&&(e.removeClass(this.instance.endpointDropAllowedClass),e.removeClass(this.instance.endpointDropForbiddenClass)),e}},{key:"_doForceReattach",value:function(i){this.floatingEndpoint.detachFromConnection(this.jpc,null,!0),this.jpc.endpoints[i]=this.jpc.suspendedEndpoint,this.instance.setHover(this.jpc,!1),this.jpc._forceDetach=!0,this.jpc.suspendedEndpoint.addConnection(this.jpc),this.instance.sourceOrTargetChanged(this.floatingId,this.jpc.suspendedEndpoint.elementId,this.jpc,this.jpc.suspendedEndpoint.element,i),this.instance.deleteEndpoint(this.floatingEndpoint),this.instance.repaint(this.jpc.source),delete this.jpc._forceDetach}},{key:"_shouldReattach",value:function(){if(this.jpc.isReattach()||this.jpc._forceReattach)return!0;var i=this.jpc.suspendedEndpoint,r=this.jpc.suspendedElementType==Do?1:0,e=this.jpc.endpoints[r];return!lh(!0,!1,[[i,Jn,[this.jpc]],[e,Jn,[this.jpc]],[this.jpc,Jn,[this.jpc]],[this.instance,_h,[Oh,this.jpc]]])}},{key:"_discard",value:function(i,r){this.jpc.pending?this.instance.fire(Sm,this.jpc,r):(i===0?(this.jpc.source=this.jpc.suspendedEndpoint.element,this.jpc.sourceId=this.jpc.suspendedEndpoint.elementId):(this.jpc.target=this.jpc.suspendedEndpoint.element,this.jpc.targetId=this.jpc.suspendedEndpoint.elementId),this.jpc.endpoints[i]=this.jpc.suspendedEndpoint),this.floatingEndpoint&&this.floatingEndpoint.detachFromConnection(this.jpc),this.instance.deleteConnection(this.jpc,{originalEvent:r,force:!0})}},{key:"_drop",value:function(i,r,e,n){if(this.jpc.endpoints[r].detachFromConnection(this.jpc),this.jpc.suspendedEndpoint&&this.jpc.suspendedEndpoint.detachFromConnection(this.jpc),this.jpc.endpoints[r]=i,i.addConnection(this.jpc),this.jpc.suspendedEndpoint){var o=this.jpc.suspendedEndpoint.elementId;this.instance.fireMoveEvent({index:r,originalSourceId:r===0?o:this.jpc.sourceId,newSourceId:r===0?i.elementId:this.jpc.sourceId,originalTargetId:r===1?o:this.jpc.targetId,newTargetId:r===1?i.elementId:this.jpc.targetId,originalEndpoint:this.jpc.suspendedEndpoint,connection:this.jpc,newEndpoint:i},e)}if(r===1?this.instance.sourceOrTargetChanged(this.floatingId,this.jpc.targetId,this.jpc,this.jpc.target,1):this.instance.sourceOrTargetChanged(this.floatingId,this.jpc.sourceId,this.jpc,this.jpc.source,0),this.jpc.endpoints[0].finalEndpoint){var a=this.jpc.endpoints[0];a.detachFromConnection(this.jpc),this.jpc.endpoints[0]=this.jpc.endpoints[0].finalEndpoint,this.jpc.endpoints[0].addConnection(this.jpc)}ii(n)&&this.jpc.mergeData(n),this._originalAnchorSpec&&(this.jpc.endpoints[0].setAnchor(this._originalAnchorSpec),this._originalAnchorSpec=null),this.instance._finaliseConnection(this.jpc,null,e),this.instance.setHover(this.jpc,!1),this.instance.revalidate(this.jpc.endpoints[0].element)}},{key:"_registerFloatingConnection",value:function(i,r){this.floatingConnections[i.id]=r}},{key:"_getFloatingAnchorIndex",value:function(){return this.floatingIndex==null?1:this.floatingIndex}}]),t}(),fu=function(t){oe(i,t);var s=ae(i);function i(r,e){var n;return H(this,i),n=s.call(this,r,e),n.instance=r,n.dragSelection=e,f(g(n),"selector",[">",Wm,ge].join(" ")),f(g(n),"doRevalidate",void 0),n.doRevalidate=n._revalidate.bind(g(n)),n}return z(i,[{key:"reset",value:function(){this.drag.off(is,this.doRevalidate)}},{key:"_revalidate",value:function(e){this.instance.revalidate(e)}},{key:"init",value:function(e){this.drag=e,e.on(is,this.doRevalidate)}},{key:"useGhostProxy",value:function(e,n){var o=n._jsPlumbParentGroup;return o==null?!1:o.ghost===!0}},{key:"makeGhostProxy",value:function(e){var n=e,o=n.cloneNode(!0);return o._jsPlumbParentGroup=n._jsPlumbParentGroup,o}}]),i}(Fo),La=function(){function t(s,i){H(this,t),this.instance=s,this.overlay=i,f(this,"htmlElementOverlay",void 0),this.htmlElementOverlay=i}return z(t,null,[{key:"getElement",value:function(i,r,e){if(i.canvas==null){if(e&&r){i.canvas=e(r);var n=i.instance.overlayClass+" "+(i.cssClass?i.cssClass:"");i.instance.addClass(i.canvas,n)}else i.canvas=ph(Mh,{},i.instance.overlayClass+" "+(i.cssClass?i.cssClass:""));i.instance.setAttribute(i.canvas,"jtk-overlay-id",i.id);for(var o in i.attributes)i.instance.setAttribute(i.canvas,o,i.attributes[o]);i.canvas.style.position=Zi,i.instance._appendElement(i.canvas,i.instance.getContainer()),i.instance.getId(i.canvas);var a="translate(-50%, -50%)";i.canvas.style.webkitTransform=a,i.canvas.style.mozTransform=a,i.canvas.style.msTransform=a,i.canvas.style.oTransform=a,i.canvas.style.transform=a,i.isVisible()||(i.canvas.style.display=ri),i.canvas.jtk={overlay:i}}return i.canvas}},{key:"destroy",value:function(i){i.canvas&&i.canvas.parentNode&&i.canvas.parentNode.removeChild(i.canvas),delete i.canvas,delete i.cachedDimensions}},{key:"_getDimensions",value:function(i,r){return(i.cachedDimensions==null||r)&&(i.cachedDimensions={w:1,h:1}),i.cachedDimensions}}]),t}(),or=function(){function t(){H(this,t),f(this,"_listeners",{}),f(this,"eventsSuspended",!1),f(this,"tick",!1),f(this,"eventsToDieOn",{ready:!0}),f(this,"queue",[])}return z(t,[{key:"fire",value:function(i,r,e){var n=null;if(this.tick)this.queue.unshift(arguments);else{if(this.tick=!0,!this.eventsSuspended&&this._listeners[i]){var o=this._listeners[i].length,a=0,l=!1;if(!this.shouldFireEvent||this.shouldFireEvent(i,r,e))for(;!l&&a<o&&n!==!1;){if(this.eventsToDieOn[i])this._listeners[i][a](r,e);else try{n=this._listeners[i][a](r,e)}catch(u){Pe("jsPlumb: fire failed for event "+i+" : "+(u.message||u))}a++,(this._listeners==null||this._listeners[i]==null)&&(l=!0)}}this.tick=!1,this._drain()}return n}},{key:"_drain",value:function(){var i=this.queue.pop();i&&this.fire.apply(this,i)}},{key:"unbind",value:function(i,r){if(arguments.length===0)this._listeners={};else if(arguments.length===1){if(typeof i=="string")delete this._listeners[i];else if(i.__jsPlumb){var e;for(var n in i.__jsPlumb)e=i.__jsPlumb[n],Gl(this._listeners[e]||[],i)}}else arguments.length===2&&Gl(this._listeners[i]||[],r);return this}},{key:"getListener",value:function(i){return this._listeners[i]||[]}},{key:"isSuspendEvents",value:function(){return this.eventsSuspended}},{key:"setSuspendEvents",value:function(i){this.eventsSuspended=i}},{key:"bind",value:function(i,r,e){var n=this,o=function(u){ch(n._listeners,u,r,e),r.__jsPlumb=r.__jsPlumb||{},r.__jsPlumb[ke()]=u};if(typeof i=="string")o(i);else if(i.length!=null)for(var a=0;a<i.length;a++)o(i[a]);return this}},{key:"silently",value:function(i){this.setSuspendEvents(!0);try{i()}catch(r){Pe("Cannot execute silent function "+r)}this.setSuspendEvents(!1)}}]),t}();(function(t){oe(i,t);var s=ae(i);function i(){return H(this,i),s.apply(this,arguments)}return z(i,[{key:"shouldFireEvent",value:function(e,n,o){return!0}}]),i})(or);function Go(t){var s=null;return _e(t)?s={type:t,options:{}}:s=t,s.options.id=s.options.id||ke(),s}var Bs=function(t){oe(i,t);var s=ae(i);function i(r,e,n){var o;H(this,i),o=s.call(this),o.instance=r,o.component=e,f(g(o),"id",void 0),f(g(o),"type",void 0),f(g(o),"cssClass",void 0),f(g(o),"visible",!0),f(g(o),"location",void 0),f(g(o),"events",void 0),f(g(o),"attributes",void 0),n=n||{},o.id=n.id||ke(),o.cssClass=n.cssClass||"",o.setLocation(n.location),o.events=n.events||{},o.attributes=n.attributes||{};for(var a in o.events)o.bind(a,o.events[a]);return o}return z(i,[{key:"setLocation",value:function(e){var n=this.location==null?.5:this.location;if(e!=null)try{var o=typeof e=="string"?parseFloat(e):e;isNaN(o)||(n=o)}catch{}this.location=n}},{key:"shouldFireEvent",value:function(e,n,o){return!0}},{key:"setVisible",value:function(e){this.visible=e,this.instance.setOverlayVisible(this,e)}},{key:"isVisible",value:function(){return this.visible}}]),i}(or),du={},Tn={get:function(s,i,r,e){var n=du[i];if(n)return new n(s,r,e);throw{message:"jsPlumb: unknown overlay type '"+i+"'"}},register:function(s,i){du[s]=i}},An=function(t){oe(i,t);var s=ae(i);function i(r,e,n){var o;return H(this,i),o=s.call(this,r,e,n),o.instance=r,o.component=e,f(g(o),"label",void 0),f(g(o),"labelText",void 0),f(g(o),"type",i.type),f(g(o),"cachedDimensions",void 0),n=n||{label:""},o.setLabel(n.label),o}return z(i,[{key:"getLabel",value:function(){return xn(this.label)?this.label(this):this.labelText}},{key:"setLabel",value:function(e){this.label=e,this.labelText=null,this.instance.updateLabel(this)}},{key:"getDimensions",value:function(){return{w:1,h:1}}},{key:"updateFrom",value:function(e){e.label!=null&&this.setLabel(e.label),e.location!=null&&(this.setLocation(e.location),this.instance.updateLabel(this))}}]),i}(Bs);f(An,"type","Label");function Vt(t){return t.type===An.type}Tn.register(An.type,An);function br(t){return t==null?null:t.split(" ").filter(function(s){return s!=null&&s.length>0})}function pu(t,s,i){for(var r in s)t[r]=i}var b0="connector",C0="override",x0="cssClass",vu="__default",S0="anchor",P0="anchors",Li="__label",k0="jtk-default-label",Kh="overlay",T0="labelLocation",gu="add",yu="remove";function Fn(t,s){if(t.getDefaultType){var i=t.getTypeDescriptor(),r={},e=t.getDefaultType(),n=U({},e);pu(r,e,vu),t._types.forEach(function(o){if(o!==vu){var a=t.instance.getType(o,i);if(a!=null){var l=new Set([b0,S0,P0]);if(a.mergeStrategy===C0)for(var u in a)l.add(u);n=es(n,a,[x0],Py(l)),pu(r,a,o)}}}),s&&(n=Cy(n,s,"_")),t.applyType(n,r)}}function oo(t,s){var i=t.instance.getType(s,t.getTypeDescriptor());i!=null&&i.cssClass&&t.removeClass(i.cssClass)}function mu(t){if(t.paintStyle&&t.hoverPaintStyle){var s={};U(s,t.paintStyle),U(s,t.hoverPaintStyle),t.hoverPaintStyle=s}}function A0(t,s){var i={cssClass:s.cssClass,id:Li,component:t},r=U(i,s);return new An(t.instance,t,r)}function O0(t,s){var i=null;if(_e(s))i=Tn.get(t.instance,s,t,{});else if(s.type!=null&&s.options!=null){var r=s,e=U({},r.options);i=Tn.get(t.instance,r.type,t,e)}else i=s;return i.id=i.id||ke(),t.cacheTypeItem(Kh,i,i.id),t.overlays[i.id]=i,i}var Jh=function(t){oe(i,t);var s=ae(i);function i(r,e){var n;if(H(this,i),n=s.call(this),n.instance=r,f(g(n),"defaultLabelLocation",.5),f(g(n),"overlays",{}),f(g(n),"overlayPositions",{}),f(g(n),"overlayPlacements",{}),f(g(n),"clone",void 0),f(g(n),"deleted",void 0),f(g(n),"segment",void 0),f(g(n),"x",void 0),f(g(n),"y",void 0),f(g(n),"w",void 0),f(g(n),"h",void 0),f(g(n),"id",void 0),f(g(n),"visible",!0),f(g(n),"typeId",void 0),f(g(n),"params",{}),f(g(n),"paintStyle",void 0),f(g(n),"hoverPaintStyle",void 0),f(g(n),"paintStyleInUse",void 0),f(g(n),"_hover",!1),f(g(n),"lastPaintedAt",void 0),f(g(n),"data",void 0),f(g(n),"_defaultType",void 0),f(g(n),"events",void 0),f(g(n),"parameters",void 0),f(g(n),"_types",void 0),f(g(n),"_typeCache",void 0),f(g(n),"cssClass",void 0),f(g(n),"hoverClass",void 0),f(g(n),"beforeDetach",void 0),f(g(n),"beforeDrop",void 0),e=e||{},n.cssClass=e.cssClass||"",n.hoverClass=e.hoverClass||r.defaults.hoverClass,n.beforeDetach=e.beforeDetach,n.beforeDrop=e.beforeDrop,n._types=new Set,n._typeCache={},n.parameters=Qr(e.parameters||{}),n.id=e.id||n.getIdPrefix()+new Date().getTime(),n._defaultType={parameters:n.parameters,scope:e.scope||n.instance.defaultScope,overlays:{}},e.events)for(var o in e.events)n.bind(o,e.events[o]);n.clone=function(){var p=Object.create(n.constructor.prototype);return n.constructor.apply(p,[r,e]),p},n.overlays={},n.overlayPositions={};var a=e.overlays||[],l={},u=n.getDefaultOverlayKey();if(u){var c=n.instance.defaults[u];c&&a.push.apply(a,ni(c));for(var h=0;h<a.length;h++){var d=Go(a[h]);l[d.options.id]=d}}return n._defaultType.overlays=l,e.label&&(n.getDefaultType().overlays[Li]={type:An.type,options:{label:e.label,location:e.labelLocation||n.defaultLabelLocation,id:Li,cssClass:k0}}),n}return z(i,[{key:"isDetachAllowed",value:function(e){var n=!0;if(this.beforeDetach)try{n=this.beforeDetach(e)}catch(o){Pe("jsPlumb: beforeDetach callback failed",o)}return n}},{key:"isDropAllowed",value:function(e,n,o,a,l){var u,c={sourceId:e,targetId:n,scope:o,connection:a,dropEndpoint:l};if(this.beforeDrop)try{u=this.beforeDrop(c)}catch(h){Pe("jsPlumb: beforeDrop callback failed",h)}else u=this.instance.checkCondition(Ah,c);return u}},{key:"getDefaultType",value:function(){return this._defaultType}},{key:"appendToDefaultType",value:function(e){for(var n in e)this._defaultType[n]=e[n]}},{key:"getId",value:function(){return this.id}},{key:"cacheTypeItem",value:function(e,n,o){this._typeCache[o]=this._typeCache[o]||{},this._typeCache[o][e]=n}},{key:"getCachedTypeItem",value:function(e,n){return this._typeCache[n]?this._typeCache[n][e]:null}},{key:"setType",value:function(e,n){this.clearTypes(),(br(e)||[]).forEach(this._types.add,this._types),Fn(this,n)}},{key:"getType",value:function(){return Array.from(this._types.keys())}},{key:"reapplyTypes",value:function(e){Fn(this,e)}},{key:"hasType",value:function(e){return this._types.has(e)}},{key:"addType",value:function(e,n){var o=br(e),a=!1;if(o!=null){for(var l=0,u=o.length;l<u;l++)this._types.has(o[l])||(this._types.add(o[l]),a=!0);a&&Fn(this,n)}}},{key:"removeType",value:function(e,n){var o=this,a=br(e),l=!1,u=function(p){return o._types.has(p)?(oo(o,p),o._types.delete(p),!0):!1};if(a!=null){for(var c=0,h=a.length;c<h;c++)l=u(a[c])||l;l&&Fn(this,n)}}},{key:"clearTypes",value:function(e){var n=this;this._types.forEach(function(o){oo(n,o)}),this._types.clear(),Fn(this,e)}},{key:"toggleType",value:function(e,n){var o=br(e);if(o!=null){for(var a=0,l=o.length;a<l;a++)this._types.has(o[a])?(oo(this,o[a]),this._types.delete(o[a])):this._types.add(o[a]);Fn(this,n)}}},{key:"applyType",value:function(e,n){if(this.setPaintStyle(e.paintStyle),this.setHoverPaintStyle(e.hoverPaintStyle),this.mergeParameters(e.parameters),this.paintStyleInUse=this.getPaintStyle(),e.overlays){var o={},a;for(a in e.overlays){var l=this.overlays[e.overlays[a].options.id];if(l)l.updateFrom(e.overlays[a].options),o[e.overlays[a].options.id]=!0,this.instance.reattachOverlay(l,this);else{var u=this.getCachedTypeItem(Kh,e.overlays[a].options.id);u!=null?(this.instance.reattachOverlay(u,this),u.setVisible(!0),u.updateFrom(e.overlays[a].options),this.overlays[u.id]=u):u=this.addOverlay(e.overlays[a]),o[u.id]=!0}}for(a in this.overlays)o[this.overlays[a].id]==null&&this.removeOverlay(this.overlays[a].id,!0)}}},{key:"setPaintStyle",value:function(e){this.paintStyle=e,this.paintStyleInUse=this.paintStyle,mu(this)}},{key:"getPaintStyle",value:function(){return this.paintStyle}},{key:"setHoverPaintStyle",value:function(e){this.hoverPaintStyle=e,mu(this)}},{key:"getHoverPaintStyle",value:function(){return this.hoverPaintStyle}},{key:"destroy",value:function(){for(var e in this.overlays)this.instance.destroyOverlay(this.overlays[e]);this.overlays={},this.overlayPositions={},this.unbind(),this.clone=null}},{key:"isHover",value:function(){return this._hover}},{key:"mergeParameters",value:function(e){e!=null&&U(this.parameters,e)}},{key:"setVisible",value:function(e){this.visible=e,e?this.showOverlays():this.hideOverlays()}},{key:"isVisible",value:function(){return this.visible}},{key:"setAbsoluteOverlayPosition",value:function(e,n){this.overlayPositions[e.id]=n}},{key:"getAbsoluteOverlayPosition",value:function(e){return this.overlayPositions?this.overlayPositions[e.id]:null}},{key:"_clazzManip",value:function(e,n){for(var o in this.overlays)e===gu?this.instance.addOverlayClass(this.overlays[o],n):e===yu&&this.instance.removeOverlayClass(this.overlays[o],n)}},{key:"addClass",value:function(e,n){var o=(this.cssClass||"").split(" ");o.push(e),this.cssClass=o.join(" "),this._clazzManip(gu,e)}},{key:"removeClass",value:function(e,n){var o=(this.cssClass||"").split(" ");this.cssClass=o.filter(function(a){return a!==e}).join(" "),this._clazzManip(yu,e)}},{key:"getClass",value:function(){return this.cssClass}},{key:"shouldFireEvent",value:function(e,n,o){return!0}},{key:"getData",value:function(){return this.data}},{key:"setData",value:function(e){this.data=e||{}}},{key:"mergeData",value:function(e){this.data=U(this.data,e)}},{key:"addOverlay",value:function(e){var n=O0(this,e);if(this.getData&&n.type===An.type&&!_e(e)){var o=this.getData(),a=e.options;if(o){var l=a.labelLocationAttribute||T0,u=o[l];u&&(n.location=u)}}return n}},{key:"getOverlay",value:function(e){return this.overlays[e]}},{key:"getOverlays",value:function(){return this.overlays}},{key:"hideOverlay",value:function(e){var n=this.getOverlay(e);n&&n.setVisible(!1)}},{key:"hideOverlays",value:function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];n=n||[];for(var a in this.overlays)(n.length===0||n.indexOf(a)!==-1)&&this.overlays[a].setVisible(!1)}},{key:"showOverlay",value:function(e){var n=this.getOverlay(e);n&&n.setVisible(!0)}},{key:"showOverlays",value:function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];n=n||[];for(var a in this.overlays)(n.length===0||n.indexOf(a)!==-1)&&this.overlays[a].setVisible(!0)}},{key:"removeAllOverlays",value:function(){for(var e in this.overlays)this.instance.destroyOverlay(this.overlays[e]);this.overlays={},this.overlayPositions=null,this.overlayPlacements={}}},{key:"removeOverlay",value:function(e,n){var o=this.overlays[e];o&&(o.setVisible(!1),n||this.instance.destroyOverlay(o),delete this.overlays[e],this.overlayPositions&&delete this.overlayPositions[e],this.overlayPlacements&&delete this.overlayPlacements[e])}},{key:"removeOverlays",value:function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];for(var a=0,l=n.length;a<l;a++)this.removeOverlay(arguments[a])}},{key:"getLabel",value:function(){var e=this.getLabelOverlay();return e!=null?e.getLabel():null}},{key:"getLabelOverlay",value:function(){return this.getOverlay(Li)}},{key:"setLabel",value:function(e){var n=this.getLabelOverlay();if(n)if(_e(e)||xn(e))n.setLabel(e);else{var a=e;a.label&&n.setLabel(a.label),a.location&&(n.location=a.location)}else{var o=_e(e)||xn(e)?{label:e}:e;n=A0(this,o),this.overlays[Li]=n}}}]),i}(or),w0=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"],Yn=function(t){oe(i,t);var s=ae(i);function i(r,e){var n;H(this,i),n=s.call(this,r,e),n.instance=r,f(g(n),"connections",[]),f(g(n),"endpoint",void 0),f(g(n),"element",void 0),f(g(n),"elementId",void 0),f(g(n),"dragAllowedWhenFull",!0),f(g(n),"timestamp",void 0),f(g(n),"portId",void 0),f(g(n),"maxConnections",void 0),f(g(n),"proxiedBy",void 0),f(g(n),"connectorClass",void 0),f(g(n),"connectorHoverClass",void 0),f(g(n),"finalEndpoint",void 0),f(g(n),"enabled",!0),f(g(n),"isSource",void 0),f(g(n),"isTarget",void 0),f(g(n),"isTemporarySource",void 0),f(g(n),"connectionCost",1),f(g(n),"connectionsDirected",void 0),f(g(n),"connectionsDetachable",void 0),f(g(n),"reattachConnections",void 0),f(g(n),"currentAnchorClass",void 0),f(g(n),"referenceEndpoint",void 0),f(g(n),"edgeType",void 0),f(g(n),"connector",void 0),f(g(n),"connectorOverlays",void 0),f(g(n),"connectorStyle",void 0),f(g(n),"connectorHoverStyle",void 0),f(g(n),"deleteOnEmpty",void 0),f(g(n),"uuid",void 0),f(g(n),"scope",void 0),f(g(n),"_anchor",void 0),f(g(n),"defaultLabelLocation",[.5,.5]),n.appendToDefaultType({edgeType:e.edgeType,maxConnections:e.maxConnections==null?n.instance.defaults.maxConnections:e.maxConnections,paintStyle:e.paintStyle||n.instance.defaults.endpointStyle,hoverPaintStyle:e.hoverPaintStyle||n.instance.defaults.endpointHoverStyle,connectorStyle:e.connectorStyle,connectorHoverStyle:e.connectorHoverStyle,connectorClass:e.connectorClass,connectorHoverClass:e.connectorHoverClass,connectorOverlays:e.connectorOverlays,connector:e.connector}),n.enabled=e.enabled!==!1,n.visible=!0,n.element=e.element,n.uuid=e.uuid,n.portId=e.portId,n.elementId=e.elementId,n.connectionCost=e.connectionCost==null?1:e.connectionCost,n.connectionsDirected=e.connectionsDirected,n.currentAnchorClass="",n.events={},n.connectorOverlays=e.connectorOverlays,n.connectorStyle=e.connectorStyle,n.connectorHoverStyle=e.connectorHoverStyle,n.connector=e.connector,n.edgeType=e.edgeType,n.connectorClass=e.connectorClass,n.connectorHoverClass=e.connectorHoverClass,n.deleteOnEmpty=e.deleteOnEmpty===!0,n.isSource=e.source||!1,n.isTemporarySource=e.isTemporarySource||!1,n.isTarget=e.target||!1,n.connections=e.connections||[],n.scope=e.scope||r.defaultScope,n.timestamp=null,n.reattachConnections=e.reattachConnections||r.defaults.reattachConnections,n.connectionsDetachable=r.defaults.connectionsDetachable,e.connectionsDetachable===!1&&(n.connectionsDetachable=!1),n.dragAllowedWhenFull=e.dragAllowedWhenFull!==!1,e.onMaxConnections&&n.bind(Ph,e.onMaxConnections);var o=e.endpoint||e.existingEndpoint||r.defaults.endpoint;if(n.setEndpoint(o),e.preparedAnchor!=null)n.setPreparedAnchor(e.preparedAnchor);else{var a=e.anchor?e.anchor:e.anchors?e.anchors:r.defaults.anchor||Pt.Top;n.setAnchor(a)}var l=[ss,e.type||""].join(" ");return n.addType(l,e.data),n}return z(i,[{key:"getIdPrefix",value:function(){return"_jsplumb_e"}},{key:"getTypeDescriptor",value:function(){return"endpoint"}},{key:"getXY",value:function(){return{x:this.endpoint.x,y:this.endpoint.y}}},{key:"getDefaultOverlayKey",value:function(){return"endpointOverlays"}},{key:"_updateAnchorClass",value:function(){var e=this._anchor&&this._anchor.cssClass;if(e!=null&&e.length>0){var n=this.instance.endpointAnchorClassPrefix+"-"+this.currentAnchorClass;this.currentAnchorClass=e;var o=this.instance.endpointAnchorClassPrefix+(this.currentAnchorClass?"-"+this.currentAnchorClass:"");n!==o&&(this.removeClass(n),this.addClass(o),this.instance.removeClass(this.element,n),this.instance.addClass(this.element,o))}}},{key:"setPreparedAnchor",value:function(e){return this.instance.router.setAnchor(this,e),this._updateAnchorClass(),this}},{key:"_anchorLocationChanged",value:function(e){this.fire(Wy,{endpoint:this,anchor:e}),this._updateAnchorClass()}},{key:"setAnchor",value:function(e){var n=this.instance.router.prepareAnchor(e);return this.setPreparedAnchor(n),this}},{key:"addConnection",value:function(e){this.connections.push(e),this.instance._refreshEndpoint(this)}},{key:"detachFromConnection",value:function(e,n,o){n=n??this.connections.indexOf(e),n>=0&&(this.connections.splice(n,1),this.instance._refreshEndpoint(this)),!o&&this.deleteOnEmpty&&this.connections.length===0&&this.instance.deleteEndpoint(this)}},{key:"deleteEveryConnection",value:function(e){for(var n=this.connections.length,o=0;o<n;o++)this.instance.deleteConnection(this.connections[0],e)}},{key:"detachFrom",value:function(e){for(var n=[],o=0;o<this.connections.length;o++)(this.connections[o].endpoints[1]===e||this.connections[o].endpoints[0]===e)&&n.push(this.connections[o]);for(var a=0,l=n.length;a<l;a++)this.instance.deleteConnection(n[0]);return this}},{key:"setVisible",value:function(e,n,o){if(me(ye(i.prototype),"setVisible",this).call(this,e),this.endpoint.setVisible(e),e?this.showOverlays():this.hideOverlays(),!n){for(var a=0;a<this.connections.length;a++)if(this.connections[a].setVisible(e),!o){var l=this===this.connections[a].endpoints[0]?1:0;this.connections[a].endpoints[l].connections.length===1&&this.connections[a].endpoints[l].setVisible(e,!0,!0)}}}},{key:"applyType",value:function(e,n){me(ye(i.prototype),"applyType",this).call(this,e,n),this.setPaintStyle(e.endpointStyle||e.paintStyle),this.setHoverPaintStyle(e.endpointHoverStyle||e.hoverPaintStyle),this.connectorStyle=e.connectorStyle,this.connectorHoverStyle=e.connectorHoverStyle,this.connector=e.connector,this.connectorOverlays=e.connectorOverlays,this.edgeType=e.edgeType,e.maxConnections!=null&&(this.maxConnections=e.maxConnections),e.scope&&(this.scope=e.scope),U(e,w0),this.instance.applyEndpointType(this,e)}},{key:"destroy",value:function(){me(ye(i.prototype),"destroy",this).call(this),this.deleted=!0,this.endpoint!=null&&this.instance.destroyEndpoint(this)}},{key:"isFull",value:function(){return this.maxConnections===0?!0:!(this.isFloating()||this.maxConnections<0||this.connections.length<this.maxConnections)}},{key:"isFloating",value:function(){return this.instance.router.isFloating(this)}},{key:"isConnectedTo",value:function(e){var n=!1;if(e){for(var o=0;o<this.connections.length;o++)if(this.connections[o].endpoints[1]===e||this.connections[o].endpoints[0]===e){n=!0;break}}return n}},{key:"setDragAllowedWhenFull",value:function(e){this.dragAllowedWhenFull=e}},{key:"getUuid",value:function(){return this.uuid}},{key:"connectorSelector",value:function(){return this.connections[0]}},{key:"prepareEndpoint",value:function(e,n){var o={cssClass:this.cssClass,endpoint:this},a;if(fh(e,vi)){var l=e;a=Qt.clone(l),a.classes=o.cssClass.split(" ")}else if(_e(e))a=Qt.get(this,e,o);else{var u=e;U(o,u.options||{}),a=Qt.get(this,u.type,o)}return a.typeId=n,a}},{key:"setEndpoint",value:function(e){var n=this.prepareEndpoint(e);this.setPreparedEndpoint(n)}},{key:"setPreparedEndpoint",value:function(e){this.endpoint!=null&&this.instance.destroyEndpoint(this),this.endpoint=e}},{key:"addClass",value:function(e,n){me(ye(i.prototype),"addClass",this).call(this,e,n),this.endpoint!=null&&this.endpoint.addClass(e)}},{key:"removeClass",value:function(e,n){me(ye(i.prototype),"removeClass",this).call(this,e,n),this.endpoint!=null&&this.endpoint.removeClass(e)}}]),i}(Jh),Cr="anchors",ao="connector";function _u(t,s,i,r,e,n,o){var a;if(s)t.endpoints[i]=s,s.addConnection(t);else{var l=o||t.endpointSpec||t.endpointsSpec[i]||t.instance.defaults.endpoints[i]||t.instance.defaults.endpoint,u=t.endpointStyles[i]||t.endpointStyle||t.instance.defaults.endpointStyles[i]||t.instance.defaults.endpointStyle;u.fill==null&&t.paintStyle!=null&&(u.fill=t.paintStyle.stroke),u.outlineStroke==null&&t.paintStyle!=null&&(u.outlineStroke=t.paintStyle.outlineStroke),u.outlineWidth==null&&t.paintStyle!=null&&(u.outlineWidth=t.paintStyle.outlineWidth);var c=t.endpointHoverStyles[i]||t.endpointHoverStyle||t.endpointHoverStyle||t.instance.defaults.endpointHoverStyles[i]||t.instance.defaults.endpointHoverStyle;t.hoverPaintStyle!=null&&(c==null&&(c={}),c.fill==null&&(c.fill=t.hoverPaintStyle.stroke));var h=t.uuids?t.uuids[i]:null;r=r??(t.instance.defaults.anchors!=null?t.instance.defaults.anchors[i]:t.instance.defaults.anchor),a=t.instance._internal_newEndpoint({paintStyle:u,hoverPaintStyle:c,endpoint:l,connections:[t],uuid:h,element:e,scope:t.scope,anchor:r,reattachConnections:t.reattach||t.instance.defaults.reattachConnections,connectionsDetachable:t.detachable||t.instance.defaults.connectionsDetachable}),t.instance._refreshEndpoint(a),s==null&&(a.deleteOnEmpty=!0),t.endpoints[i]=a}return a}var tr=function(t){oe(i,t);var s=ae(i);function i(r,e){var n;H(this,i),n=s.call(this,r,e),n.instance=r,f(g(n),"connector",void 0),f(g(n),"defaultLabelLocation",.5),f(g(n),"scope",void 0),f(g(n),"typeId","_jsplumb_connection"),f(g(n),"previousConnection",void 0),f(g(n),"sourceId",void 0),f(g(n),"targetId",void 0),f(g(n),"source",void 0),f(g(n),"target",void 0),f(g(n),"detachable",!0),f(g(n),"reattach",!1),f(g(n),"uuids",void 0),f(g(n),"cost",1),f(g(n),"directed",void 0),f(g(n),"endpoints",[null,null]),f(g(n),"endpointStyles",void 0),f(g(n),"endpointSpec",void 0),f(g(n),"endpointsSpec",void 0),f(g(n),"endpointStyle",{}),f(g(n),"endpointHoverStyle",{}),f(g(n),"endpointHoverStyles",void 0),f(g(n),"suspendedEndpoint",void 0),f(g(n),"suspendedIndex",void 0),f(g(n),"suspendedElement",void 0),f(g(n),"suspendedElementId",void 0),f(g(n),"suspendedElementType",void 0),f(g(n),"_forceReattach",void 0),f(g(n),"_forceDetach",void 0),f(g(n),"proxies",[]),f(g(n),"pending",!1),n.id=e.id,n.previousConnection=e.previousConnection,n.source=e.source,n.target=e.target,e.sourceEndpoint?(n.source=e.sourceEndpoint.element,n.sourceId=e.sourceEndpoint.elementId):n.sourceId=r.getId(n.source),e.targetEndpoint?(n.target=e.targetEndpoint.element,n.targetId=e.targetEndpoint.elementId):n.targetId=r.getId(n.target),n.scope=e.scope;var o=e.anchors?e.anchors[0]:e.anchor,a=e.anchors?e.anchors[1]:e.anchor;r.manage(n.source),r.manage(n.target),n.visible=!0,n.params={cssClass:e.cssClass,hoverClass:e.hoverClass,"pointer-events":e["pointer-events"],overlays:e.overlays},n.lastPaintedAt=null,e.type&&(e.endpoints=e.endpoints||n.instance._deriveEndpointAndAnchorSpec(e.type).endpoints),n.endpointSpec=e.endpoint,n.endpointsSpec=e.endpoints||[null,null],n.endpointStyle=e.endpointStyle,n.endpointHoverStyle=e.endpointHoverStyle,n.endpointStyles=e.endpointStyles||[null,null],n.endpointHoverStyles=e.endpointHoverStyles||[null,null],n.paintStyle=e.paintStyle,n.hoverPaintStyle=e.hoverPaintStyle,n.uuids=e.uuids,n.makeEndpoint(!0,n.source,n.sourceId,o,e.sourceEndpoint),n.makeEndpoint(!1,n.target,n.targetId,a,e.targetEndpoint),n.scope||(n.scope=n.endpoints[0].scope),e.deleteEndpointsOnEmpty!=null&&(n.endpoints[0].deleteOnEmpty=e.deleteEndpointsOnEmpty,n.endpoints[1].deleteOnEmpty=e.deleteEndpointsOnEmpty);var l=n.instance.defaults.connectionsDetachable;e.detachable===!1&&(l=!1),n.endpoints[0].connectionsDetachable===!1&&(l=!1),n.endpoints[1].connectionsDetachable===!1&&(l=!1),n.endpointsSpec=e.endpoints||[null,null],n.endpointSpec=e.endpoint||null;var u=e.reattach||n.endpoints[0].reattachConnections||n.endpoints[1].reattachConnections||n.instance.defaults.reattachConnections,c=U({},n.endpoints[0].connectorStyle||n.endpoints[1].connectorStyle||e.paintStyle||n.instance.defaults.paintStyle);if(n.appendToDefaultType({detachable:l,reattach:u,paintStyle:c,hoverPaintStyle:U({},n.endpoints[0].connectorHoverStyle||n.endpoints[1].connectorHoverStyle||e.hoverPaintStyle||n.instance.defaults.hoverPaintStyle)}),e.outlineWidth&&(c.outlineWidth=e.outlineWidth),e.outlineColor&&(c.outlineStroke=e.outlineColor),e.lineWidth&&(c.strokeWidth=e.lineWidth),e.color&&(c.stroke=e.color),!n.instance._suspendDrawing){var h=n.instance._suspendedAt||ke();n.instance._paintEndpoint(n.endpoints[0],{timestamp:h}),n.instance._paintEndpoint(n.endpoints[1],{timestamp:h})}n.cost=e.cost||n.endpoints[0].connectionCost,n.directed=e.directed,e.directed==null&&(n.directed=n.endpoints[0].connectionsDirected);var d=U({},n.endpoints[1].parameters);U(d,n.endpoints[0].parameters),U(d,n.parameters),n.parameters=d,n.paintStyleInUse=n.getPaintStyle()||{},n._setConnector(n.endpoints[0].connector||n.endpoints[1].connector||e.connector||n.instance.defaults.connector,!0);var p=e.data==null||!ii(e.data)?{}:e.data;n.setData(p);var v=[ss,n.endpoints[0].edgeType,n.endpoints[1].edgeType,e.type].join(" ");return/[^\s]/.test(v)&&n.addType(v,e.data),n}return z(i,[{key:"getIdPrefix",value:function(){return"_jsPlumb_c"}},{key:"getDefaultOverlayKey",value:function(){return hm}},{key:"getXY",value:function(){return{x:this.connector.x,y:this.connector.y}}},{key:"makeEndpoint",value:function(e,n,o,a,l){return o=o||this.instance.getId(n),_u(this,l,e?0:1,a,n)}},{key:"getTypeDescriptor",value:function(){return i.type}},{key:"isDetachable",value:function(e){return this.detachable===!1?!1:e!=null?e.connectionsDetachable===!0:this.detachable===!0}},{key:"setDetachable",value:function(e){this.detachable=e===!0}},{key:"isReattach",value:function(){return this.reattach===!0||this.endpoints[0].reattachConnections===!0||this.endpoints[1].reattachConnections===!0}},{key:"setReattach",value:function(e){this.reattach=e===!0}},{key:"applyType",value:function(e,n){var o=null;e.connector!=null&&(o=this.getCachedTypeItem(ao,n.connector),o==null&&(o=this.prepareConnector(e.connector,n.connector),this.cacheTypeItem(ao,o,n.connector)),this.setPreparedConnector(o)),me(ye(i.prototype),"applyType",this).call(this,e,n),e.detachable!=null&&this.setDetachable(e.detachable),e.reattach!=null&&this.setReattach(e.reattach),e.scope&&(this.scope=e.scope);var a=null;e.anchor?(a=this.getCachedTypeItem(Cr,n.anchor),a==null&&(a=[Ii(e.anchor),Ii(e.anchor)],this.cacheTypeItem(Cr,a,n.anchor))):e.anchors&&(a=this.getCachedTypeItem(Cr,n.anchors),a==null&&(a=[Ii(e.anchors[0]),Ii(e.anchors[1])],this.cacheTypeItem(Cr,a,n.anchors))),a!=null&&(this.instance.router.setConnectionAnchors(this,a),this.instance.router.isDynamicAnchor(this.endpoints[1])&&this.instance.repaint(this.endpoints[1].element)),this.instance.applyConnectorType(this.connector,e)}},{key:"addClass",value:function(e,n){me(ye(i.prototype),"addClass",this).call(this,e),n&&(this.endpoints[0].addClass(e),this.endpoints[1].addClass(e),this.suspendedEndpoint&&this.suspendedEndpoint.addClass(e)),this.connector&&this.instance.addConnectorClass(this.connector,e)}},{key:"removeClass",value:function(e,n){me(ye(i.prototype),"removeClass",this).call(this,e),n&&(this.endpoints[0].removeClass(e),this.endpoints[1].removeClass(e),this.suspendedEndpoint&&this.suspendedEndpoint.removeClass(e)),this.connector&&this.instance.removeConnectorClass(this.connector,e)}},{key:"setVisible",value:function(e){me(ye(i.prototype),"setVisible",this).call(this,e),this.connector&&this.instance.setConnectorVisible(this.connector,e),this.instance._paintConnection(this)}},{key:"destroy",value:function(){me(ye(i.prototype),"destroy",this).call(this),this.endpoints=null,this.endpointStyles=null,this.source=null,this.target=null,this.instance.destroyConnector(this),this.connector=null,this.deleted=!0}},{key:"getUuids",value:function(){return[this.endpoints[0].getUuid(),this.endpoints[1].getUuid()]}},{key:"prepareConnector",value:function(e,n){var o={cssClass:this.params.cssClass,hoverClass:this.params.hoverClass,"pointer-events":this.params["pointer-events"]},a;if(_e(e))a=this.instance._makeConnector(this,e,o);else{var l=e;a=this.instance._makeConnector(this,l.type,es(l.options||{},o))}return n!=null&&(a.typeId=n),a}},{key:"setPreparedConnector",value:function(e,n,o,a){if(this.connector!==e){var l,u="";if(this.connector!=null&&(l=this.connector,u=this.instance.getConnectorClass(this.connector),this.instance.destroyConnector(this)),this.connector=e,a&&this.cacheTypeItem(ao,e,a),this.addClass(u),l!=null){var c=this.getOverlays();for(var h in c)this.instance.reattachOverlay(c[h],this)}n||this.instance._paintConnection(this)}}},{key:"_setConnector",value:function(e,n,o,a){var l=this.prepareConnector(e,a);this.setPreparedConnector(l,n,o,a)}},{key:"replaceEndpoint",value:function(e,n){var o=this.endpoints[e],a=o.elementId,l=this.instance.getEndpoints(o.element),u=l.indexOf(o),c=_u(this,null,e,null,o.element,a,n);this.endpoints[e]=c,l.splice(u,1,c),o.detachFromConnection(this),this.instance.deleteEndpoint(o),this.instance.fire(Ky,{previous:o,current:c})}}]),i}(Jh);f(tr,"type","connection");function Ni(t){if(t.path==null){var s=U({"jtk-overlay-id":t.id},t.attributes);t.path=Gt(Io,s);var i=t.instance.overlayClass+" "+(t.cssClass?t.cssClass:"");t.instance.addClass(t.path,i),t.path.jtk={overlay:t}}var r=t.path.parentNode;if(r==null){if(t.component instanceof tr){var e=t.component.connector;r=e!=null?e.canvas:null}else if(t.component instanceof Yn){var n=t.component.endpoint;r=n!=null?n.canvas:n}r!=null&&jr(r,t.path,1)}return t.path}function D0(t,s,i,r){Ni(t);var e=[0,0];r.xmin<0&&(e[0]=-r.xmin),r.ymin<0&&(e[1]=-r.ymin);var n={d:s,stroke:i.stroke?i.stroke:null,fill:i.fill?i.fill:null,transform:"translate("+e[0]+","+e[1]+")","pointer-events":"visibleStroke"};Ft(t.path,n)}function M0(t,s){var i=t;i.path!=null&&i.path.parentNode!=null&&i.path.parentNode.removeChild(i.path),i.bgPath!=null&&i.bgPath.parentNode!=null&&i.bgPath.parentNode.removeChild(i.bgPath),delete i.path,delete i.bgPath}(function(t){oe(i,t);var s=ae(i);function i(){var r;H(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return r=s.call.apply(s,[this].concat(n)),f(g(r),"path",void 0),r}return i})(Bs);var Zh=function(){function t(){H(this,t)}return z(t,null,[{key:"paint",value:function(i,r,e,n){if(e!=null){var o=[i.x,i.y],a=[i.w,i.h];if(n!=null&&(n.xmin<0&&(o[0]+=n.xmin),n.ymin<0&&(o[1]+=n.ymin),a[0]=n.xmax+(n.xmin<0?-n.xmin:0),a[1]=n.ymax+(n.ymin<0?-n.ymin:0)),isFinite(a[0])&&isFinite(a[1])){var l={width:""+(a[0]||0),height:""+(a[1]||0)};r.containerType===Pn.HTML?Ft(i.canvas,U(l,{style:Dh([o[0],o[1]])})):Ft(i.canvas,U(l,{x:o[0],y:o[1]}))}}}}]),t}();function I0(t,s,i,r){L0(t,s),Zh.paint(s,t,i,r);var e="",n=[0,0];if(r.xmin<0&&(n[0]=-r.xmin),r.ymin<0&&(n[1]=-r.ymin),s.segments.length>0){e=t.getPathData(s);var o={d:e,transform:"translate("+n[0]+","+n[1]+")","pointer-events":"visibleStroke"},a=null;if(i.outlineStroke){var l=i.outlineWidth||1,u=i.strokeWidth+2*l;a=U({},i),a.stroke=i.outlineStroke,a.strokeWidth=u,s.bgPath==null?(s.bgPath=Gt(Io,o),t.addClass(s.bgPath,t.connectorOutlineClass),jr(s.canvas,s.bgPath,0)):Ft(s.bgPath,o),Lo(s.canvas,s.bgPath,a)}var c=s;c.path==null?(c.path=Gt(Io,o),jr(c.canvas,c.path,i.outlineStroke?1:0)):(c.path.parentNode!==c.canvas&&jr(c.canvas,c.path,i.outlineStroke?1:0),Ft(s.path,o)),Lo(s.canvas,s.path,i)}}function L0(t,s){if(s.canvas!=null)return s.canvas;var i=Gt(wh,{style:"",width:"0",height:"0","pointer-events":ri,position:Zi});return s.canvas=i,t._appendElement(s.canvas,t.getContainer()),s.cssClass!=null&&t.addClass(i,s.cssClass),t.addClass(i,t.connectorClass),i.jtk=i.jtk||{},i.jtk.connector=s,i}var N0=function(){function t(){H(this,t)}return z(t,null,[{key:"getEndpointElement",value:function(i){if(i.canvas!=null)return i.canvas;var r=Gt(wh,{style:"",width:"0",height:"0","pointer-events":"all",position:Zi});i.canvas=r;var e=i.classes.join(" ");i.instance.addClass(r,e);for(var n=i.endpoint.scope.split(/\s/),o=0;o<n.length;o++)i.instance.setAttribute(r,mh+n[o],Lh);return i.instance._appendElementToContainer(r),i.cssClass!=null&&i.instance.addClass(r,i.cssClass),i.instance.addClass(r,i.instance.endpointClass),r.jtk=r.jtk||{},r.jtk.endpoint=i.endpoint,r.style.display=i.endpoint.visible!==!1?Mo:ri,r}},{key:"paint",value:function(i,r,e){if(i.endpoint.deleted!==!0){this.getEndpointElement(i),Zh.paint(i,i.instance,e);var n=U({},e);n.outlineStroke&&(n.stroke=n.outlineStroke),i.node==null?(i.node=r.makeNode(i,n),i.canvas.appendChild(i.node)):r.updateNode!=null&&r.updateNode(i,i.node),Lo(i.canvas,i.node,n)}}}]),t}(),Hs=function(){function t(s,i){H(this,t),this.connection=s,f(this,"type",void 0),f(this,"edited",!1),f(this,"stub",void 0),f(this,"sourceStub",void 0),f(this,"targetStub",void 0),f(this,"maxStub",void 0),f(this,"typeId",void 0),f(this,"gap",void 0),f(this,"sourceGap",void 0),f(this,"targetGap",void 0),f(this,"segments",[]),f(this,"totalLength",0),f(this,"segmentProportions",[]),f(this,"segmentProportionalLengths",[]),f(this,"paintInfo",null),f(this,"strokeWidth",void 0),f(this,"x",void 0),f(this,"y",void 0),f(this,"w",void 0),f(this,"h",void 0),f(this,"segment",void 0),f(this,"bounds",rs()),f(this,"cssClass",void 0),f(this,"hoverClass",void 0),f(this,"geometry",void 0),this.stub=i.stub||this.getDefaultStubs(),this.sourceStub=Array.isArray(this.stub)?this.stub[0]:this.stub,this.targetStub=Array.isArray(this.stub)?this.stub[1]:this.stub,this.gap=i.gap||0,this.sourceGap=Array.isArray(this.gap)?this.gap[0]:this.gap,this.targetGap=Array.isArray(this.gap)?this.gap[1]:this.gap,this.maxStub=Math.max(this.sourceStub,this.targetStub),this.cssClass=i.cssClass||"",this.hoverClass=i.hoverClass||""}return z(t,[{key:"getTypeDescriptor",value:function(){return"connector"}},{key:"getIdPrefix",value:function(){return"_jsplumb_connector"}},{key:"setGeometry",value:function(i,r){this.geometry=i,this.edited=i!=null&&!r}},{key:"exportGeometry",value:function(){return this.geometry}},{key:"importGeometry",value:function(i){return this.geometry=i,!0}},{key:"resetGeometry",value:function(){this.geometry=null,this.edited=!1}},{key:"transformAnchorPlacement",value:function(i,r,e){return{x:i.x,y:i.y,ox:i.ox,oy:i.oy,curX:i.curX+r,curY:i.curY+e}}},{key:"resetBounds",value:function(){this.bounds=rs()}},{key:"findSegmentForPoint",value:function(i,r){for(var e={d:1/0,s:null,x:null,y:null,l:null,x1:null,y1:null,x2:null,y2:null,index:null,connectorLocation:null},n=0;n<this.segments.length;n++){var o=this.segments[n].findClosestPointOnPath(i,r);o.d<e.d&&(e.d=o.d,e.l=o.l,e.x=o.x,e.y=o.y,e.s=this.segments[n],e.x1=o.x1,e.x2=o.x2,e.y1=o.y1,e.y2=o.y2,e.index=n,e.connectorLocation=this.segmentProportions[n][0]+o.l*(this.segmentProportions[n][1]-this.segmentProportions[n][0]))}return e}},{key:"lineIntersection",value:function(i,r,e,n){for(var o=[],a=0;a<this.segments.length;a++)o.push.apply(o,this.segments[a].lineIntersection(i,r,e,n));return o}},{key:"boxIntersection",value:function(i,r,e,n){for(var o=[],a=0;a<this.segments.length;a++)o.push.apply(o,this.segments[a].boxIntersection(i,r,e,n));return o}},{key:"boundingBoxIntersection",value:function(i){for(var r=[],e=0;e<this.segments.length;e++)r.push.apply(r,this.segments[e].boundingBoxIntersection(i));return r}},{key:"_updateSegmentProportions",value:function(){for(var i=0,r=0;r<this.segments.length;r++){var e=this.segments[r].getLength();this.segmentProportionalLengths[r]=e/this.totalLength,this.segmentProportions[r]=[i,i+=e/this.totalLength]}}},{key:"_findSegmentForLocation",value:function(i,r){var e,n,o;if(r&&(i=i>0?i/this.totalLength:(this.totalLength+i)/this.totalLength),i===1)e=this.segments.length-1,o=1;else if(i===0)o=0,e=0;else if(i>=.5){for(e=0,o=0,n=this.segmentProportions.length-1;n>-1;n--)if(this.segmentProportions[n][1]>=i&&this.segmentProportions[n][0]<=i){e=n,o=(i-this.segmentProportions[n][0])/this.segmentProportionalLengths[n];break}}else for(e=this.segmentProportions.length-1,o=1,n=0;n<this.segmentProportions.length;n++)if(this.segmentProportions[n][1]>=i){e=n,o=(i-this.segmentProportions[n][0])/this.segmentProportionalLengths[n];break}return{segment:this.segments[e],proportion:o,index:e}}},{key:"_addSegment",value:function(i,r){if(!(r.x1===r.x2&&r.y1===r.y2)){var e=new i(r);this.segments.push(e),this.totalLength+=e.getLength(),this.updateBounds(e)}}},{key:"_clearSegments",value:function(){this.totalLength=0,this.segments.length=0,this.segmentProportions.length=0,this.segmentProportionalLengths.length=0}},{key:"getLength",value:function(){return this.totalLength}},{key:"_prepareCompute",value:function(i){this.strokeWidth=i.strokeWidth;var r=i.sourcePos.curX,e=i.targetPos.curX,n=i.sourcePos.curY,o=i.targetPos.curY,a=Aa({x:r,y:n},{x:e,y:o}),l=e<r,u=o<n,c=[i.sourcePos.ox,i.sourcePos.oy],h=[i.targetPos.ox,i.targetPos.oy],d=l?e:r,p=u?o:n,v=Math.abs(e-r),y=Math.abs(o-n),m=c[0]===0&&c[1]===0,b=h[0]===0&&h[1]===0;if(m||b){var C=v>y?0:1,E=[1,0][C],S=C===0?r:n,D=C===0?e:o;m&&(c[C]=S>D?-1:1,c[E]=0),b&&(h[C]=S>D?1:-1,h[E]=0)}var G=l?v+this.sourceGap*c[0]:this.sourceGap*c[0],L=u?y+this.sourceGap*c[1]:this.sourceGap*c[1],T=l?this.targetGap*h[0]:v+this.targetGap*h[0],q=u?this.targetGap*h[1]:y+this.targetGap*h[1],W=c[0]*h[0]+c[1]*h[1],te={sx:G,sy:L,tx:T,ty:q,xSpan:Math.abs(T-G),ySpan:Math.abs(q-L),mx:(G+T)/2,my:(L+q)/2,so:c,to:h,x:d,y:p,w:v,h:y,segment:a,startStubX:G+c[0]*this.sourceStub,startStubY:L+c[1]*this.sourceStub,endStubX:T+h[0]*this.targetStub,endStubY:q+h[1]*this.targetStub,isXGreaterThanStubTimes2:Math.abs(G-T)>this.sourceStub+this.targetStub,isYGreaterThanStubTimes2:Math.abs(L-q)>this.sourceStub+this.targetStub,opposite:W===-1,perpendicular:W===0,orthogonal:W===1,sourceAxis:c[0]===0?"y":"x",points:[d,p,v,y,G,L,T,q],stubs:[this.sourceStub,this.targetStub]};return te.anchorOrientation=te.opposite?"opposite":te.orthogonal?"orthogonal":"perpendicular",te}},{key:"updateBounds",value:function(i){var r=i.extents;this.bounds.xmin=Math.min(this.bounds.xmin,r.xmin),this.bounds.xmax=Math.max(this.bounds.xmax,r.xmax),this.bounds.ymin=Math.min(this.bounds.ymin,r.ymin),this.bounds.ymax=Math.max(this.bounds.ymax,r.ymax)}},{key:"dumpSegmentsToConsole",value:function(){Pe("SEGMENTS:");for(var i=0;i<this.segments.length;i++)Pe(this.segments[i].type,""+this.segments[i].getLength(),""+this.segmentProportions[i])}},{key:"pointOnPath",value:function(i,r){var e=this._findSegmentForLocation(i,r);return e.segment&&e.segment.pointOnPath(e.proportion,!1)||{x:0,y:0}}},{key:"gradientAtPoint",value:function(i,r){var e=this._findSegmentForLocation(i,r);return e.segment&&e.segment.gradientAtPoint(e.proportion,!1)||0}},{key:"pointAlongPathFrom",value:function(i,r,e){var n=this._findSegmentForLocation(i,e);return n.segment&&n.segment.pointAlongPathFrom(n.proportion,r,!1)||{x:0,y:0}}},{key:"compute",value:function(i){this.paintInfo=this._prepareCompute(i),this._clearSegments(),this._compute(this.paintInfo,i),this.x=this.paintInfo.points[0],this.y=this.paintInfo.points[1],this.w=this.paintInfo.points[2],this.h=this.paintInfo.points[3],this.segment=this.paintInfo.segment,this._updateSegmentProportions()}},{key:"setAnchorOrientation",value:function(i,r){}}]),t}(),R0=20,F0=20,li=function(t){oe(i,t);var s=ae(i);function i(r,e,n){var o;return H(this,i),o=s.call(this,r,e,n),o.instance=r,o.component=e,f(g(o),"width",void 0),f(g(o),"length",void 0),f(g(o),"foldback",void 0),f(g(o),"direction",void 0),f(g(o),"location",.5),f(g(o),"paintStyle",void 0),f(g(o),"type",i.type),f(g(o),"cachedDimensions",void 0),n=n||{},o.width=n.width||R0,o.length=n.length||F0,o.direction=(n.direction||1)<0?-1:1,o.foldback=n.foldback||.623,o.paintStyle=n.paintStyle||{strokeWidth:1},o.location=n.location==null?o.location:Array.isArray(n.location)?n.location[0]:n.location,o}return z(i,[{key:"draw",value:function(e,n,o){if(e instanceof Hs){var a=e,l,u,c,h,d;if(this.location>1||this.location<0){var p=this.location<0?1:0;l=a.pointAlongPathFrom(p,this.location,!1),u=a.pointAlongPathFrom(p,this.location-this.direction*this.length/2,!1),c=vn(l,u,this.length)}else if(this.location===1){if(l=a.pointOnPath(this.location),u=a.pointAlongPathFrom(this.location,-this.length),c=vn(l,u,this.length),this.direction===-1){var v=c;c=l,l=v}}else if(this.location===0){if(c=a.pointOnPath(this.location),u=a.pointAlongPathFrom(this.location,this.length),l=vn(c,u,this.length),this.direction===-1){var y=c;c=l,l=y}}else l=a.pointAlongPathFrom(this.location,this.direction*this.length/2),u=a.pointOnPath(this.location),c=vn(l,u,this.length);h=y_(l,c,this.width),d=vn(l,c,this.foldback*this.length);var m={hxy:l,tail:h,cxy:d},b=this.paintStyle.stroke||n.stroke,C=this.paintStyle.fill||n.stroke,E=this.paintStyle.strokeWidth||n.strokeWidth;return{component:e,d:m,"stroke-width":E,stroke:b,fill:C,xmin:Math.min(l.x,h[0].x,h[1].x),xmax:Math.max(l.x,h[0].x,h[1].x),ymin:Math.min(l.y,h[0].y,h[1].y),ymax:Math.max(l.y,h[0].y,h[1].y)}}}},{key:"updateFrom",value:function(e){}}]),i}(Bs);f(li,"type","Arrow");function jo(t){return t.type===li.type}Tn.register(li.type,li);var cs=function(t){oe(i,t);var s=ae(i);function i(r,e,n){var o;return H(this,i),o=s.call(this,r,e,n),o.instance=r,f(g(o),"type",i.type),o.length=o.length/2,o.foldback=2,o}return i}(li);f(cs,"type","Diamond");function Bo(t){return t.type===cs.type}Tn.register(cs.type,cs);var Na=function(t){oe(i,t);var s=ae(i);function i(r,e,n){var o;return H(this,i),o=s.call(this,r,e,n),o.instance=r,f(g(o),"type",i.type),o.foldback=1,o}return i}(li);f(Na,"type","PlainArrow");function Ho(t){return t.type===Na.type}Tn.register("PlainArrow",Na);var hs=function(t){oe(i,t);var s=ae(i);function i(r,e,n){var o;return H(this,i),o=s.call(this,r,e,n),o.instance=r,o.component=e,f(g(o),"create",void 0),f(g(o),"type",i.type),o.create=n.create,o}return z(i,[{key:"updateFrom",value:function(e){}}]),i}(Bs);f(hs,"type","Custom");function Yt(t){return t.type===hs.type}Tn.register(hs.type,hs);var G0="allowNestedGroups",Gn="paintStyle",j0="scope",ui=function(t){oe(i,t);var s=ae(i);function i(r,e){var n;return H(this,i),n=s.call(this,r,e),f(g(n),"radius",void 0),f(g(n),"defaultOffset",void 0),f(g(n),"defaultInnerRadius",void 0),f(g(n),"type",i.type),e=e||{},n.radius=e.radius||5,n.defaultOffset=.5*n.radius,n.defaultInnerRadius=n.radius/3,n}return i}(vi);f(ui,"type","Dot");var B0={type:ui.type,cls:ui,compute:function(s,i,r,e){var n=i.curX-s.radius,o=i.curY-s.radius,a=s.radius*2,l=s.radius*2;if(e&&e.stroke){var u=e.strokeWidth||1;n-=u,o-=u,a+=u*2,l+=u*2}return s.x=n,s.y=o,s.w=a,s.h=l,[n,o,a,l,s.radius]},getParams:function(s){return{radius:s.radius}}},lo=function t(s,i){H(this,t),this.instance=s,this.el=i,f(this,"group",void 0)},H0=function(t){oe(i,t);var s=ae(i);function i(r,e,n){var o;H(this,i),o=s.call(this,r,e),o.instance=r,f(g(o),"children",[]),f(g(o),"collapsed",!1),f(g(o),"droppable",void 0),f(g(o),"enabled",void 0),f(g(o),"orphan",void 0),f(g(o),"constrain",void 0),f(g(o),"proxied",void 0),f(g(o),"ghost",void 0),f(g(o),"revert",void 0),f(g(o),"prune",void 0),f(g(o),"dropOverride",void 0),f(g(o),"anchor",void 0),f(g(o),"endpoint",void 0),f(g(o),"connections",{source:[],target:[],internal:[]}),f(g(o),"manager",void 0),f(g(o),"id",void 0),f(g(o),"elId",void 0);var a=o.el;return a._isJsPlumbGroup=!0,a._jsPlumbGroup=g(o),o.elId=r.getId(e),o.orphan=n.orphan===!0,o.revert=o.orphan===!0?!1:n.revert!==!1,o.droppable=n.droppable!==!1,o.ghost=n.ghost===!0,o.enabled=n.enabled!==!1,o.prune=o.orphan!==!0&&n.prune===!0,o.constrain=o.ghost||n.constrain===!0,o.proxied=n.proxied!==!1,o.id=n.id||ke(),o.dropOverride=n.dropOverride===!0,o.anchor=n.anchor,o.endpoint=n.endpoint,o.anchor=n.anchor,r.setAttribute(e,yh,""),o}return z(i,[{key:"contentArea",get:function(){return this.instance.getGroupContentArea(this)}},{key:"overrideDrop",value:function(e,n){return this.dropOverride&&(this.revert||this.prune||this.orphan)}},{key:"getAnchor",value:function(e,n){return this.anchor||"Continuous"}},{key:"getEndpoint",value:function(e,n){return this.endpoint||{type:ui.type,options:{radius:10}}}},{key:"add",value:function(e,n){var o=this.instance.getGroupContentArea(this),a=e;if(a._jsPlumbParentGroup!=null){if(a._jsPlumbParentGroup===this)return;a._jsPlumbParentGroup.remove(e,!0,n,!1)}a._jsPlumbParentGroup=this,this.children.push(new lo(this.instance,e)),this.instance._appendElement(a,o),this.manager._updateConnectionsForGroup(this)}},{key:"resolveNode",value:function(e){return e==null?null:ya(this.children,function(n){return n.el===e})}},{key:"remove",value:function(e,n,o,a,l){var u=this.resolveNode(e);u!=null&&this._doRemove(u,n,o,a,l)}},{key:"_doRemove",value:function(e,n,o,a,l){var u=e.el;if(delete u._jsPlumbParentGroup,we(this.children,function(h){return h===e}),n)try{this.instance.getGroupContentArea(this).removeChild(u)}catch(h){Pe("Could not remove element from Group "+h)}if(!o){var c={group:this,el:u};l&&(c.targetGroup=l),this.instance.fire(tm,c)}a||this.manager._updateConnectionsForGroup(this)}},{key:"removeAll",value:function(e,n){for(var o=0,a=this.children.length;o<a;o++){var l=this.children[0];this._doRemove(l,e,n,!0),this.instance.unmanage(l.el,!0)}this.children.length=0,this.manager._updateConnectionsForGroup(this)}},{key:"orphanAll",value:function(){for(var e={},n=0;n<this.children.length;n++){var o=this.manager.orphan(this.children[n].el,!1);e[o.id]=o.pos}return this.children.length=0,e}},{key:"addGroup",value:function(e){if(this.instance.allowNestedGroups&&e!==this){if(this.instance.groupManager.isAncestor(this,e))return!1;e.group!=null&&e.group.removeGroup(e);var n=this.instance.getId(e.el),o=this.instance.getManagedElements()[n];o.group=this.elId;var a=this.instance.getOffsetRelativeToRoot(e.el),l=this.collapsed?this.instance.getOffsetRelativeToRoot(this.el):this.instance.getOffsetRelativeToRoot(this.instance.getGroupContentArea(this));e.el._jsPlumbParentGroup=this,this.children.push(e),this.instance._appendElementToGroup(this,e.el),e.group=this;var u={x:a.x-l.x,y:a.y-l.y};return this.instance.setPosition(e.el,u),this.instance.fire(im,{parent:this,child:e}),!0}else return!1}},{key:"removeGroup",value:function(e){if(e.group===this){var n=e.el,o=this.instance.getGroupContentArea(this);o===n.parentNode&&o.removeChild(e.el);var a=this.instance.getId(e.el),l=this.instance.getManagedElements()[a];l&&delete l.group,this.children=this.children.filter(function(u){return u.id!==e.id}),delete e.group,delete n._jsPlumbParentGroup,this.instance.fire(rm,{parent:this,child:e})}}},{key:"getGroups",value:function(){return this.children.filter(function(e){return e.constructor===i})}},{key:"getNodes",value:function(){return this.children.filter(function(e){return e.constructor===lo})}},{key:"collapseParent",get:function(){var e=null;if(this.group==null)return null;for(var n=this.group;n!=null;)n.collapsed&&(e=n),n=n.group;return e}}]),i}(lo),U0=function(){function t(s){var i=this;H(this,t),this.instance=s,f(this,"groupMap",{}),f(this,"_connectionSourceMap",{}),f(this,"_connectionTargetMap",{}),s.bind(bh,function(r){var e=i.getGroupFor(r.source),n=i.getGroupFor(r.target);e!=null&&n!=null&&e===n?(i._connectionSourceMap[r.connection.id]=e,i._connectionTargetMap[r.connection.id]=e,bi(e.connections.internal,r.connection)):(e!=null&&(r.target._jsPlumbGroup===e?bi(e.connections.internal,r.connection):bi(e.connections.source,r.connection),i._connectionSourceMap[r.connection.id]=e),n!=null&&(r.source._jsPlumbGroup===n?bi(n.connections.internal,r.connection):bi(n.connections.target,r.connection),i._connectionTargetMap[r.connection.id]=n))}),s.bind(Ca,function(r){i._cleanupDetachedConnection(r.connection)}),s.bind(Ch,function(r){var e=r.originalEndpoint.element,n=i.getGroupFor(e),o=r.connection.endpoints[r.index],a=o.element,l=i.getGroupFor(a),u=r.index===0?i._connectionSourceMap:i._connectionTargetMap,c=r.index===0?i._connectionTargetMap:i._connectionSourceMap;l!=null?(u[r.connection.id]=l,r.connection.source===r.connection.target&&(c[r.connection.id]=l)):(delete u[r.connection.id],r.connection.source===r.connection.target&&delete c[r.connection.id]),n!=null&&i._updateConnectionsForGroup(n),l!=null&&i._updateConnectionsForGroup(l)})}return z(t,[{key:"_cleanupDetachedConnection",value:function(i){i.proxies.length=0;var r=this._connectionSourceMap[i.id],e;r!=null&&(e=function(o){return o.id===i.id},we(r.connections.source,e),we(r.connections.target,e),we(r.connections.internal,e),delete this._connectionSourceMap[i.id]),r=this._connectionTargetMap[i.id],r!=null&&(e=function(o){return o.id===i.id},we(r.connections.source,e),we(r.connections.target,e),we(r.connections.internal,e),delete this._connectionTargetMap[i.id])}},{key:"addGroup",value:function(i){var r=i.el;if(this.groupMap[i.id]!=null)throw new Error("cannot create Group ["+i.id+"]; a Group with that ID exists");if(r._isJsPlumbGroup!=null)throw new Error("cannot create Group ["+i.id+"]; the given element is already a Group");var e=new H0(this.instance,i.el,i);return this.groupMap[e.id]=e,i.collapsed&&this.collapseGroup(e),this.instance.manage(e.el),this.instance.addClass(e.el,Si),e.manager=this,this._updateConnectionsForGroup(e),this.instance.fire(Jy,{group:e}),e}},{key:"getGroup",value:function(i){var r=i;if(_e(i)&&(r=this.groupMap[i],r==null))throw new Error("No such group ["+i+"]");return r}},{key:"getGroupFor",value:function(i){for(var r=i,e=this.instance.getContainer(),n=!1,o=null;!n;)r==null||r===e?n=!0:r._jsPlumbParentGroup?(o=r._jsPlumbParentGroup,n=!0):r=r.parentNode;return o}},{key:"getGroups",value:function(){var i=[];for(var r in this.groupMap)i.push(this.groupMap[r]);return i}},{key:"removeGroup",value:function(i,r,e,n){var o=this,a=this.getGroup(i);this.expandGroup(a,!0);var l={};return X(a.children,function(u){var c=o.instance.getManagedElements()[o.instance.getId(u.el)];c&&delete c.group}),r?(X(a.getGroups(),function(u){return o.removeGroup(u,r,e)}),a.removeAll(e,n)):(a.group&&X(a.children,function(u){return a.group.add(u.el)}),l=a.orphanAll()),a.group&&a.group.removeGroup(a),this.instance.unmanage(a.el,!0),delete this.groupMap[a.id],this.instance.fire(nm,{group:a}),l}},{key:"removeAllGroups",value:function(i,r,e){for(var n in this.groupMap)this.removeGroup(this.groupMap[n],i,r,e)}},{key:"forEach",value:function(i){for(var r in this.groupMap)i(this.groupMap[r])}},{key:"orphan",value:function(i,r){var e=i;if(e._jsPlumbParentGroup){var n=e._jsPlumbParentGroup,o=this.instance.getId(e),a=this.instance.getOffset(i);return r!==!0&&n.group?this.instance._appendElementToGroup(n.group,i):this.instance._appendElementToContainer(i),this.instance.setPosition(i,a),delete e._jsPlumbParentGroup,{id:o,pos:a}}}},{key:"_updateConnectionsForGroup",value:function(i){var r=this;i.connections.source.length=0,i.connections.target.length=0,i.connections.internal.length=0;var e=i.children.slice().map(function(d){return d.el}),n=[];if(X(e,function(d){Array.prototype.push.apply(n,r.instance.getSelector(d,ge))}),Array.prototype.push.apply(e,n),e.length>0){var o=this.instance.getConnections({source:e,scope:mn},!0),a=this.instance.getConnections({target:e,scope:mn},!0),l={},u,c,h=function(p){for(var v=0;v<p.length;v++)l[p[v].id]||(l[p[v].id]=!0,u=r.getGroupFor(p[v].source),c=r.getGroupFor(p[v].target),p[v].source===i.el&&c===i||p[v].target===i.el&&u===i?i.connections.internal.push(p[v]):u===i?(c!==i?i.connections.source.push(p[v]):i.connections.internal.push(p[v]),r._connectionSourceMap[p[v].id]=i):c===i&&(i.connections.target.push(p[v]),r._connectionTargetMap[p[v].id]=i))};h(o),h(a)}}},{key:"_collapseConnection",value:function(i,r,e){var n=i.endpoints[r===0?1:0].element;if(n._jsPlumbParentGroup&&!n._jsPlumbParentGroup.proxied&&n._jsPlumbParentGroup.collapsed)return!1;var o=i.endpoints[0].element,a=o._jsPlumbParentGroup,l=a!=null?a.collapseParent||a:null,u=i.endpoints[1].element,c=u._jsPlumbParentGroup,h=c!=null?c.collapseParent||c:null;if(l==null||h==null||l.id!==h.id){var d=e.el;return this.instance.getId(d),this.instance.proxyConnection(i,r,d,function(p,v){return e.getEndpoint(p,v)},function(p,v){return e.getAnchor(p,v)}),!0}else return!1}},{key:"_expandConnection",value:function(i,r,e){this.instance.unproxyConnection(i,r)}},{key:"isElementDescendant",value:function(i,r){for(var e=this.instance.getContainer(),n=!1;!n;){if(i==null||i===e)return!1;if(i===r)return!0;i=i.parentNode}}},{key:"collapseGroup",value:function(i){var r=this,e=this.getGroup(i);if(!(e==null||e.collapsed)){var n=e.el;if(e.collapseParent==null){if(this.instance.setGroupVisible(e,!1),e.collapsed=!0,this.instance.removeClass(n,Si),this.instance.addClass(n,_r),e.proxied){var o=new Set,a=function(u,c){for(var h=0;h<u.length;h++){var d=u[h];r._collapseConnection(d,c,e)===!0&&o.add(d.id)}};a(e.connections.source,0),a(e.connections.target,1),X(e.getGroups(),function(l){r.cascadeCollapse(e,l,o)})}this.instance.revalidate(n),this.repaintGroup(e),this.instance.fire(Zy,{group:e})}else e.collapsed=!0,this.instance.removeClass(n,Si),this.instance.addClass(n,_r)}}},{key:"cascadeCollapse",value:function(i,r,e){var n=this;if(i.proxied){var o=function(l,u){for(var c=0;c<l.length;c++){var h=l[c];e.has(h.id)||n._collapseConnection(h,u,i)===!0&&e.add(h.id)}};o(r.connections.source,0),o(r.connections.target,1)}X(r.getGroups(),function(a){n.cascadeCollapse(i,a,e)})}},{key:"expandGroup",value:function(i,r){var e=this,n=this.getGroup(i);if(n!=null){var o=n.el;if(n.collapseParent==null){if(this.instance.setGroupVisible(n,!0),n.collapsed=!1,this.instance.addClass(o,Si),this.instance.removeClass(o,_r),n.proxied){var a=function(c,h){for(var d=0;d<c.length;d++){var p=c[d];e._expandConnection(p,h,n)}};a(n.connections.source,0),a(n.connections.target,1);var l=function u(c,h){if(h||c.collapsed){var d=function(v,y){for(var m=0;m<v.length;m++){var b=v[m];e._collapseConnection(b,y,c.collapseParent||c)}};d(c.connections.source,0),d(c.connections.target,1),X(c.connections.internal,function(p){return p.setVisible(!1)}),X(c.getGroups(),function(p){return u(p,!0)})}else e.expandGroup(c,!0)};X(n.getGroups(),l)}this.instance.revalidate(o),this.repaintGroup(n),r||this.instance.fire(Qy,{group:n})}else n.collapsed=!1,this.instance.addClass(o,Si),this.instance.removeClass(o,_r)}}},{key:"toggleGroup",value:function(i){i=this.getGroup(i),i!=null&&(i.collapsed?this.expandGroup(i):this.collapseGroup(i))}},{key:"repaintGroup",value:function(i){for(var r=this.getGroup(i),e=r.children,n=0;n<e.length;n++)this.instance.revalidate(e[n].el)}},{key:"addToGroup",value:function(i,r){var e=this,n=this.getGroup(i);if(n){for(var o=n.el,a=function(d){var p=d,v=p._isJsPlumbGroup!=null,y=p._jsPlumbGroup,m=p._jsPlumbParentGroup;if(m!==n){var b=e.instance.manage(d),C=e.instance.getOffset(d),E=n.collapsed?e.instance.getOffsetRelativeToRoot(o):e.instance.getOffset(e.instance.getGroupContentArea(n));b.group=n.elId,m!=null&&(m.remove(d,!1,r,!1,n),e._updateConnectionsForGroup(m)),v?n.addGroup(y):n.add(d,r);var S=function(T,q){var W=q===0?1:0;T.each(function(te){te.setVisible(!1),te.endpoints[W].element._jsPlumbGroup===n?(te.endpoints[W].setVisible(!1),e._expandConnection(te,W,n)):(te.endpoints[q].setVisible(!1),e._collapseConnection(te,q,n))})};n.collapsed&&(S(e.instance.select({source:d}),0),S(e.instance.select({target:d}),1)),e.instance.getId(d);var D={x:C.x-E.x,y:C.y-E.y};if(e.instance.setPosition(d,D),e._updateConnectionsForGroup(n),e.instance.revalidate(d),!r){var G={group:n,el:d,pos:D};m&&(G.sourceGroup=m),e.instance.fire(em,G)}}},l=arguments.length,u=new Array(l>2?l-2:0),c=2;c<l;c++)u[c-2]=arguments[c];X(u,a)}}},{key:"removeFromGroup",value:function(i,r){var e=this,n=this.getGroup(i);if(n){for(var o=function(h){if(n.collapsed){var d=function(y,m){for(var b=0;b<y.length;b++){var C=y[b];if(C.proxies){for(var E=0;E<C.proxies.length;E++)if(C.proxies[E]!=null){var S=C.proxies[E].originalEp.element;(S===h||e.isElementDescendant(S,h))&&e._expandConnection(C,m,n)}}}};d(n.connections.source.slice(),0),d(n.connections.target.slice(),1)}n.remove(h,null,r);var p=e.instance.getManagedElements()[e.instance.getId(h)];p&&delete p.group},a=arguments.length,l=new Array(a>2?a-2:0),u=2;u<a;u++)l[u-2]=arguments[u];X(l,o)}}},{key:"getAncestors",value:function(i){for(var r=[],e=i.group;e!=null;)r.push(e),e=e.group;return r}},{key:"isAncestor",value:function(i,r){return i==null||r==null?!1:this.getAncestors(i).indexOf(r)!==-1}},{key:"getDescendants",value:function(i){var r=[],e=function n(o){var a=o.getGroups();r.push.apply(r,ni(a)),X(a,n)};return e(i),r}},{key:"isDescendant",value:function(i,r){return i==null||r==null?!1:this.getDescendants(r).indexOf(i)!==-1}},{key:"reset",value:function(){this._connectionSourceMap={},this._connectionTargetMap={},this.groupMap={}}}]),t}(),Qh=function(){function t(s,i){H(this,t),this.instance=s,this.entries=i}return z(t,[{key:"length",get:function(){return this.entries.length}},{key:"each",value:function(i){return X(this.entries,function(r){return i(r)}),this}},{key:"get",value:function(i){return this.entries[i]}},{key:"addClass",value:function(i,r){return this.each(function(e){return e.addClass(i,r)}),this}},{key:"removeClass",value:function(i,r){return this.each(function(e){return e.removeClass(i,r)}),this}},{key:"removeAllOverlays",value:function(){return this.each(function(i){return i.removeAllOverlays()}),this}},{key:"setLabel",value:function(i){return this.each(function(r){return r.setLabel(i)}),this}},{key:"clear",value:function(){return this.entries.length=0,this}},{key:"map",value:function(i){var r=[];return this.each(function(e){return r.push(i(e))}),r}},{key:"addOverlay",value:function(i){return this.each(function(r){return r.addOverlay(i)}),this}},{key:"removeOverlay",value:function(i){return this.each(function(r){return r.removeOverlay(i)}),this}},{key:"removeOverlays",value:function(){return this.each(function(i){return i.removeOverlays()}),this}},{key:"showOverlay",value:function(i){return this.each(function(r){return r.showOverlay(i)}),this}},{key:"hideOverlay",value:function(i){return this.each(function(r){return r.hideOverlay(i)}),this}},{key:"setPaintStyle",value:function(i){return this.each(function(r){return r.setPaintStyle(i)}),this}},{key:"setHoverPaintStyle",value:function(i){return this.each(function(r){return r.setHoverPaintStyle(i)}),this}},{key:"setSuspendEvents",value:function(i){return this.each(function(r){return r.setSuspendEvents(i)}),this}},{key:"setParameter",value:function(i,r){return this.each(function(e){return e.parameters[i]=r}),this}},{key:"setParameters",value:function(i){return this.each(function(r){return r.parameters=i}),this}},{key:"setVisible",value:function(i){return this.each(function(r){return r.setVisible(i)}),this}},{key:"addType",value:function(i){return this.each(function(r){return r.addType(i)}),this}},{key:"toggleType",value:function(i){return this.each(function(r){return r.toggleType(i)}),this}},{key:"removeType",value:function(i){return this.each(function(r){return r.removeType(i)}),this}},{key:"bind",value:function(i,r){return this.each(function(e){return e.bind(i,r)}),this}},{key:"unbind",value:function(i,r){return this.each(function(e){return e.unbind(i,r)}),this}},{key:"setHover",value:function(i){var r=this;return this.each(function(e){return r.instance.setHover(e,i)}),this}}]),t}(),V0=function(t){oe(i,t);var s=ae(i);function i(){return H(this,i),s.apply(this,arguments)}return z(i,[{key:"setEnabled",value:function(e){return this.each(function(n){return n.enabled=e}),this}},{key:"setAnchor",value:function(e){return this.each(function(n){return n.setAnchor(e)}),this}},{key:"deleteEveryConnection",value:function(){return this.each(function(e){return e.deleteEveryConnection()}),this}},{key:"deleteAll",value:function(){var e=this;return this.each(function(n){return e.instance.deleteEndpoint(n)}),this.clear(),this}}]),i}(Qh),Y0=function(t){oe(i,t);var s=ae(i);function i(){return H(this,i),s.apply(this,arguments)}return z(i,[{key:"setDetachable",value:function(e){return this.each(function(n){return n.setDetachable(e)}),this}},{key:"setReattach",value:function(e){return this.each(function(n){return n.setReattach(e)}),this}},{key:"setConnector",value:function(e){return this.each(function(n){return n._setConnector(e)}),this}},{key:"deleteAll",value:function(){var e=this;this.each(function(n){return e.instance.deleteConnection(n)}),this.clear()}},{key:"repaint",value:function(){var e=this;return this.each(function(n){return e.instance._paintConnection(n)}),this}}]),i}(Qh),X0=function t(){H(this,t),f(this,"affectedElements",new Set)};function Eu(){return{x:0,y:0,w:0,h:0,r:0,c:{x:0,y:0},x2:0,y2:0,t:{x:0,y:0,c:{x:0,y:0},w:0,h:0,r:0,x2:0,y2:0,cr:0,sr:0},dirty:!0}}function $0(t,s,i,r,e){var n={x:t+i/2,y:s+r/2},o=Math.cos(e/360*Math.PI*2),a=Math.sin(e/360*Math.PI*2),l=function(E,S){return{x:n.x+Math.round((E-n.x)*o-(S-n.y)*a),y:n.y+Math.round((S-n.y)*o-(E-n.x)*a)}},u=l(t,s),c=l(t+i,s),h=l(t+i,s+r),d=l(t,s+r),p=l(t+i/2,s+r/2),v=Math.min(u.x,c.x,h.x,d.x),y=Math.max(u.x,c.x,h.x,d.x),m=Math.min(u.y,c.y,h.y,d.y),b=Math.max(u.y,c.y,h.y,d.y);return{x:v,y:m,w:y-v,h:b-m,c:p,r:e,x2:y,y2:b,cr:o,sr:a}}var fs=function(s,i){var r=0;return i[1]>s[1]?r=-1:i[1]<s[1]&&(r=1),r},bu=function(s,i){return fs(s,i)*-1};function xr(t,s,i,r){Ty([t,s],i,fs,r)}function Xt(t,s){var i=tn(s,function(r){return r[0]===t});i>-1&&s.splice(i,1)}var W0=function(t){oe(i,t);var s=ae(i);function i(r){var e;return H(this,i),e=s.call(this),e.instance=r,f(g(e),"_currentTransaction",null),f(g(e),"_sortedElements",{xmin:[],xmax:[],ymin:[],ymax:[]}),f(g(e),"_elementMap",new Map),f(g(e),"_transformedElementMap",new Map),f(g(e),"_bounds",{minx:0,maxx:0,miny:0,maxy:0}),e}return z(i,[{key:"_updateBounds",value:function(e,n,o){n!=null&&(Xt(e,this._sortedElements.xmin),Xt(e,this._sortedElements.xmax),Xt(e,this._sortedElements.ymin),Xt(e,this._sortedElements.ymax),xr(e,n.t.x,this._sortedElements.xmin,!1),xr(e,n.t.x+n.t.w,this._sortedElements.xmax,!0),xr(e,n.t.y,this._sortedElements.ymin,!1),xr(e,n.t.y+n.t.h,this._sortedElements.ymax,!0),o!==!0&&this._recalculateBounds())}},{key:"_recalculateBounds",value:function(){this._bounds.minx=this._sortedElements.xmin.length>0?this._sortedElements.xmin[0][1]:0,this._bounds.maxx=this._sortedElements.xmax.length>0?this._sortedElements.xmax[0][1]:0,this._bounds.miny=this._sortedElements.ymin.length>0?this._sortedElements.ymin[0][1]:0,this._bounds.maxy=this._sortedElements.ymax.length>0?this._sortedElements.ymax[0][1]:0}},{key:"recomputeBounds",value:function(){var e=this;this._sortedElements.xmin.length=0,this._sortedElements.xmax.length=0,this._sortedElements.ymin.length=0,this._sortedElements.ymax.length=0,this._elementMap.forEach(function(n,o){e._sortedElements.xmin.push([o,n.t.x]),e._sortedElements.xmax.push([o,n.t.x+n.t.w]),e._sortedElements.ymin.push([o,n.t.y]),e._sortedElements.ymax.push([o,n.t.y+n.t.h])}),this._sortedElements.xmin.sort(fs),this._sortedElements.ymin.sort(fs),this._sortedElements.xmax.sort(bu),this._sortedElements.ymax.sort(bu),this._recalculateBounds()}},{key:"_finaliseUpdate",value:function(e,n,o){n.t=$0(n.x,n.y,n.w,n.h,n.r),this._transformedElementMap.set(e,n.t),o!==!0&&this._updateBounds(e,n,o)}},{key:"shouldFireEvent",value:function(e,n,o){return!0}},{key:"startTransaction",value:function(){if(this._currentTransaction!=null)throw new Error("Viewport: cannot start transaction; a transaction is currently active.");this._currentTransaction=new X0}},{key:"endTransaction",value:function(){var e=this;this._currentTransaction!=null&&(this._currentTransaction.affectedElements.forEach(function(n){var o=e.getPosition(n);e._finaliseUpdate(n,o,!0)}),this.recomputeBounds(),this._currentTransaction=null)}},{key:"updateElements",value:function(e){var n=this;X(e,function(o){return n.updateElement(o.id,o.x,o.y,o.width,o.height,o.rotation)})}},{key:"updateElement",value:function(e,n,o,a,l,u,c){var h=jl(this._elementMap,e,Eu);return h.dirty=n==null&&h.x==null||o==null&&h.y==null||a==null&&h.w==null||l==null&&h.h==null,n!=null&&(h.x=n),o!=null&&(h.y=o),a!=null&&(h.w=a),l!=null&&(h.h=l),u!=null&&(h.r=u||0),h.c.x=h.x+h.w/2,h.c.y=h.y+h.h/2,h.x2=h.x+h.w,h.y2=h.y+h.h,this._currentTransaction==null?this._finaliseUpdate(e,h,c):this._currentTransaction.affectedElements.add(e),h}},{key:"refreshElement",value:function(e,n){var o=this.instance.getManagedElements(),a=o[e]?o[e].el:null;if(a!=null){var l=this.getSize(a),u=this.getOffset(a);return this.updateElement(e,u.x,u.y,l.w,l.h,null,n)}else return null}},{key:"getSize",value:function(e){return this.instance.getSize(e)}},{key:"getOffset",value:function(e){return this.instance.getOffset(e)}},{key:"registerElement",value:function(e,n){return this.updateElement(e,0,0,0,0,0,n)}},{key:"addElement",value:function(e,n,o,a,l,u){return this.updateElement(e,n,o,a,l,u)}},{key:"rotateElement",value:function(e,n){var o=jl(this._elementMap,e,Eu);return o.r=n||0,this._finaliseUpdate(e,o),o}},{key:"getBoundsWidth",value:function(){return this._bounds.maxx-this._bounds.minx}},{key:"getBoundsHeight",value:function(){return this._bounds.maxy-this._bounds.miny}},{key:"getX",value:function(){return this._bounds.minx}},{key:"getY",value:function(){return this._bounds.miny}},{key:"setSize",value:function(e,n,o){if(this._elementMap.has(e))return this.updateElement(e,null,null,n,o,null)}},{key:"setPosition",value:function(e,n,o){if(this._elementMap.has(e))return this.updateElement(e,n,o,null,null,null)}},{key:"reset",value:function(){this._sortedElements.xmin.length=0,this._sortedElements.xmax.length=0,this._sortedElements.ymin.length=0,this._sortedElements.ymax.length=0,this._elementMap.clear(),this._transformedElementMap.clear(),this._recalculateBounds()}},{key:"remove",value:function(e){Xt(e,this._sortedElements.xmin),Xt(e,this._sortedElements.xmax),Xt(e,this._sortedElements.ymin),Xt(e,this._sortedElements.ymax),this._elementMap.delete(e),this._transformedElementMap.delete(e),this._recalculateBounds()}},{key:"getPosition",value:function(e){return this._elementMap.get(e)}},{key:"getElements",value:function(){return this._elementMap}},{key:"isEmpty",value:function(){return this._elementMap.size===0}}]),i}(or),jn;function z0(t,s,i,r,e){for(var n=i?t.w:t.h,o=i?t.h:t.w,a=[],l=n/(s.length+1),u=0;u<s.length;u++){var c=(u+1)*l,h=r*o;e&&(c=n-c);var d=i?c:h,p=t.x+d,v=d/t.w,y=i?h:c,m=t.y+y,b=y/t.h;if(t.r!==0&&t.r!=null){var C=ts({x:p,y:m},t.c,t.r);p=C.x,m=C.y}a.push({x:p,y:m,xLoc:v,yLoc:b,c:s[u].c})}return a}function Cu(t,s){return s.theta-t.theta}function xu(t,s){var i=t.theta<0?-Math.PI-t.theta:Math.PI-t.theta,r=s.theta<0?-Math.PI-s.theta:Math.PI-s.theta;return i-r}var q0=(jn={},f(jn,Ce,xu),f(jn,Le,Cu),f(jn,He,Cu),f(jn,Fe,xu),jn);function $t(t){return t.isContinuous===!0}function Su(t){return t.isContinuous===!0}function K0(t){return t.locations.length>1}function Pu(t){return[t.currentLocation,t.locations[t.currentLocation]]}var J0=function(){function t(s){var i=this;H(this,t),this.instance=s,f(this,"anchorLists",new Map),f(this,"anchorLocations",new Map),s.bind(Ca,function(r){r.sourceEndpoint._anchor.isContinuous&&i._removeEndpointFromAnchorLists(r.sourceEndpoint),r.targetEndpoint._anchor.isContinuous&&i._removeEndpointFromAnchorLists(r.targetEndpoint)}),s.bind(xh,function(r){i._removeEndpointFromAnchorLists(r)})}return z(t,[{key:"getAnchorOrientation",value:function(i){var r=this.anchorLocations.get(i.id);return r?[r.ox,r.oy]:[0,0]}},{key:"_distance",value:function(i,r,e,n,o,a,l){var u=n.x+i.x*o.w,c=n.y+i.y*o.h,h=n.x+o.w/2,d=n.y+o.h/2;if(a!=null&&a.length>0){var p=this.instance._applyRotations([u,c,0,0],a);u=p.x,c=p.y}return Math.sqrt(Math.pow(r-u,2)+Math.pow(e-c,2))+Math.sqrt(Math.pow(h-u,2)+Math.pow(d-c,2))}},{key:"_anchorSelector",value:function(i,r,e,n,o,a,l){for(var u=e.x+n.w/2,c=e.y+n.h/2,h=-1,d=1/0,p=0;p<l.length;p++){var v=this._distance(l[p],u,c,i,r,o,a);v<d&&(h=p+0,d=v)}return[h,l[h]]}},{key:"_floatingAnchorCompute",value:function(i,r){var e=r.xy,n={curX:e.x+i.size.w/2,curY:e.y+i.size.h/2,x:0,y:0,ox:0,oy:0};return this._setComputedPosition(i,n)}},{key:"_setComputedPosition",value:function(i,r,e){return this.anchorLocations.set(i.id,r),i.computedPosition=r,e&&(i.timestamp=e),r}},{key:"_computeSingleLocation",value:function(i,r,e,n){var o,a=n.rotation,l={curX:r.x+i.x*e.w+i.offx,curY:r.y+i.y*e.h+i.offy,x:i.x,y:i.y,ox:0,oy:0};if(a!=null&&a.length>0){var u=[i.iox,i.ioy],c={x:l.curX,y:l.curY,cr:0,sr:0};X(a,function(h){c=ts(c,h.c,h.r);var d=[Math.round(u[0]*c.cr-u[1]*c.sr),Math.round(u[1]*c.cr+u[0]*c.sr)];u=d.slice()}),i.ox=u[0],i.oy=u[1],o={curX:c.x,curY:c.y,x:i.x,y:i.y,ox:u[0],oy:u[1]}}else i.ox=i.iox,i.oy=i.ioy,o=U({ox:i.iox,oy:i.ioy},l);return o}},{key:"_singleAnchorCompute",value:function(i,r){var e=r.xy,n=r.wh,o=r.timestamp,a=this.anchorLocations.get(i.id);if(a!=null&&o&&o===i.timestamp)return a;var l=Pu(i),u=Fr(l,2);u[0];var c=u[1];return a=this._computeSingleLocation(c,e,n,r),this._setComputedPosition(i,a,o)}},{key:"_defaultAnchorCompute",value:function(i,r){var e;if(i.locations.length===1)return this._singleAnchorCompute(i,r);var n=r.xy,o=r.wh,a=r.txy,l=r.twh,u=Pu(i),c=Fr(u,2),h=c[0],d=c[1];if(i.locked||a==null||l==null)e=this._computeSingleLocation(d,n,o,r);else{var p=this._anchorSelector(n,o,a,l,r.rotation,r.tRotation,i.locations),v=Fr(p,2),y=v[0],m=v[1];i.currentLocation=y,y!==h&&(i.cssClass=m.cls||i.cssClass,r.element._anchorLocationChanged(i)),e=this._computeSingleLocation(m,n,o,r)}return this._setComputedPosition(i,e,r.timestamp)}},{key:"_placeAnchors",value:function(i,r){var e=this,n=this.instance.viewport.getPosition(i),o=function(l,u,c,h,d,p){if(c.length>0)for(var v=c.sort(q0[l]),y=l===Le||l===Ce,m=z0(n,v,h,d,y),b=0;b<m.length;b++){var C=m[b].c,E=C.endpoints[0].elementId===i,S=E?C.endpoints[0]:C.endpoints[1];e._setComputedPosition(S._anchor,{curX:m[b].x,curY:m[b].y,x:m[b].xLoc,y:m[b].yLoc,ox:p[0],oy:p[1]})}};o(He,n,r.bottom,!0,1,[0,1]),o(Ce,n,r.top,!0,0,[0,-1]),o(Fe,n,r.left,!1,0,[-1,0]),o(Le,n,r.right,!1,1,[1,0])}},{key:"_updateAnchorList",value:function(i,r,e,n,o,a,l,u,c,h,d){var p=n.endpoints[l],v=p.id,y=[1,0][l],m={theta:r,order:e,c:n,b:o,elId:a,epId:v},b=i[c],C=p._continuousAnchorEdge?i[p._continuousAnchorEdge]:null,E;if(C){var S=tn(C,function(T){return T.epId===v});if(S!==-1){C.splice(S,1);for(var D=0;D<C.length;D++)E=C[D].c,E.placeholder!==!0&&h.add(E),d.add(C[D].c.endpoints[l]),d.add(C[D].c.endpoints[y])}}for(var G=0;G<b.length;G++)E=b[G].c,E.placeholder!==!0&&h.add(E),d.add(b[G].c.endpoints[l]),d.add(b[G].c.endpoints[y]);{var L=u?0:b.length;b.splice(L,0,m)}p._continuousAnchorEdge=c}},{key:"_removeEndpointFromAnchorLists",value:function(i){var r=this.anchorLists.get(i.elementId),e=0;(function(n,o){if(n){var a=function(u){return u.epId===o};we(n.top,a),we(n.left,a),we(n.bottom,a),we(n.right,a),e+=n.top.length,e+=n.left.length,e+=n.bottom.length,e+=n.right.length}})(r,i.id),e===0&&this.anchorLists.delete(i.elementId),this.anchorLocations.delete(i._anchor.id)}},{key:"computeAnchorLocation",value:function(i,r){var e;return $t(i)?e=this.anchorLocations.get(i.id)||{curX:0,curY:0,x:0,y:0,ox:0,oy:0}:Su(i)?e=this._floatingAnchorCompute(i,r):e=this._defaultAnchorCompute(i,r),i.timestamp=r.timestamp,e}},{key:"computePath",value:function(i,r){var e=this.instance.viewport.getPosition(i.sourceId),n=this.instance.viewport.getPosition(i.targetId),o=i.endpoints[0],a=i.endpoints[1],l=this.getEndpointLocation(o,{xy:e,wh:e,element:o,timestamp:r,rotation:this.instance._getRotations(i.sourceId)}),u=this.getEndpointLocation(a,{xy:n,wh:n,element:a,timestamp:r,rotation:this.instance._getRotations(i.targetId)});i.connector.resetBounds(),i.connector.compute({sourcePos:l,targetPos:u,sourceEndpoint:i.endpoints[0],targetEndpoint:i.endpoints[1],strokeWidth:i.paintStyleInUse.strokeWidth,sourceInfo:e,targetInfo:n})}},{key:"getEndpointLocation",value:function(i,r){r=r||{};var e=i._anchor,n=this.anchorLocations.get(e.id);return(n==null||r.timestamp!=null&&e.timestamp!==r.timestamp)&&(n=this.computeAnchorLocation(e,r),this._setComputedPosition(e,n,r.timestamp)),n}},{key:"getEndpointOrientation",value:function(i){return i._anchor?this.getAnchorOrientation(i._anchor):[0,0]}},{key:"setAnchorOrientation",value:function(i,r){var e=this.anchorLocations.get(i.id);e!=null&&(e.ox=r[0],e.oy=r[1])}},{key:"isDynamicAnchor",value:function(i){return i._anchor?!$t(i._anchor)&&i._anchor.locations.length>1:!1}},{key:"isFloating",value:function(i){return i._anchor?Su(i._anchor):!1}},{key:"prepareAnchor",value:function(i){return Ii(i)}},{key:"redraw",value:function(i,r,e){var n=this,o=new Set,a=new Set,l=new Set;if(!this.instance._suspendDrawing){var u=this.instance.endpointsByElement[i]||[];r=r||ke();for(var c={},h,d,p=0;p<u.length;p++)if(d=u[p],d.visible!==!1)if(a.add(d),h=d._anchor,d.connections.length===0)$t(h)&&(this.anchorLists.has(i)||this.anchorLists.set(i,{top:[],right:[],bottom:[],left:[]}),this._updateAnchorList(this.anchorLists.get(i),-Math.PI/2,0,{endpoints:[d,d],placeholder:!0},!1,i,0,!1,K_(h),o,a),l.add(i));else for(var v=0;v<d.connections.length;v++){var y=d.connections[v],m=y.sourceId,b=y.targetId,C=$t(y.endpoints[0]._anchor),E=$t(y.endpoints[1]._anchor);if(C||E){var S=(y.endpoints[0]._anchor.faces||[]).join("-"),D=(y.endpoints[1]._anchor.faces||[]).join("-"),G=[m,S,b,D].join("-"),L=c[G],T=y.sourceId===i?1:0;C&&!this.anchorLists.has(m)&&this.anchorLists.set(m,{top:[],right:[],bottom:[],left:[]}),E&&!this.anchorLists.has(b)&&this.anchorLists.set(b,{top:[],right:[],bottom:[],left:[]});var q=this.instance.viewport.getPosition(b),W=this.instance.viewport.getPosition(m);if(b===m&&(C||E))this._updateAnchorList(this.anchorLists.get(m),-Math.PI/2,0,y,!1,b,0,!1,Ce,o,a),this._updateAnchorList(this.anchorLists.get(b),-Math.PI/2,0,y,!1,m,1,!1,Ce,o,a);else{var te=this.instance._getRotations(m),R=this.instance._getRotations(b);L||(L=this._calculateOrientation(m,b,W,q,y.endpoints[0]._anchor,y.endpoints[1]._anchor,te,R),c[G]=L),C&&this._updateAnchorList(this.anchorLists.get(m),L.theta,0,y,!1,b,0,!1,L.a[0],o,a),E&&this._updateAnchorList(this.anchorLists.get(b),L.theta2,-1,y,!0,m,1,!0,L.a[1],o,a)}C&&l.add(m),E&&l.add(b),o.add(y),(C&&T===0||E&&T===1)&&a.add(y.endpoints[T])}else{var he=d.connections[v].endpoints[y.sourceId===i?1:0],gt=he._anchor;if(K0(gt)){this.instance._paintEndpoint(he,{elementWithPrecedence:i,timestamp:r}),o.add(d.connections[v]);for(var st=0;st<he.connections.length;st++)he.connections[st]!==d.connections[v]&&o.add(he.connections[st])}else o.add(d.connections[v])}}l.forEach(function(se){n._placeAnchors(se,n.anchorLists.get(se))}),a.forEach(function(se){var fe=n.instance.viewport.getPosition(se.elementId);n.instance._paintEndpoint(se,{timestamp:r,offset:fe})}),o.forEach(function(se){n.instance._paintConnection(se,{timestamp:r})})}return{c:o,e:a}}},{key:"reset",value:function(){this.anchorLocations.clear(),this.anchorLists.clear()}},{key:"setAnchor",value:function(i,r){r!=null&&(i._anchor=r)}},{key:"setConnectionAnchors",value:function(i,r){i.endpoints[0]._anchor=r[0],i.endpoints[1]._anchor=r[1]}},{key:"_calculateOrientation",value:function(i,r,e,n,o,a,l,u){var c=this,h={HORIZONTAL:"horizontal",VERTICAL:"vertical",DIAGONAL:"diagonal",IDENTITY:"identity"};if(i===r)return{orientation:h.IDENTITY,a:[Ce,Ce]};var d=Math.atan2(n.c.y-e.c.y,n.c.x-e.c.x),p=Math.atan2(e.c.y-n.c.y,e.c.x-n.c.x),v=[],y={};(function(G,L){for(var T=0;T<G.length;T++){var q;if(y[G[T]]=(q={},f(q,Fe,{x:L[T][0].x,y:L[T][0].c.y}),f(q,Le,{x:L[T][0].x+L[T][0].w,y:L[T][0].c.y}),f(q,Ce,{x:L[T][0].c.x,y:L[T][0].y}),f(q,He,{x:L[T][0].c.x,y:L[T][0].y+L[T][0].h}),q),L[T][1]!=null&&L[T][1].length>0)for(var W in y[G[T]])y[G[T]][W]=c.instance._applyRotationsXY(y[G[T]][W],L[T][1])}})([Do,gh],[[e,l],[n,u]]);for(var m=[Ce,Fe,Le,He],b=0;b<m.length;b++)for(var C=0;C<m.length;C++)v.push({source:m[b],target:m[C],dist:Ro(y.source[m[b]],y.target[m[C]])});v.sort(function(G,L){if(G.dist<L.dist)return-1;if(L.dist<G.dist)return 1;var T,q=(T={},f(T,Fe,0),f(T,Ce,1),f(T,Le,2),f(T,He,3),T),W=q[G.source],te=q[L.source],R=q[G.target],he=q[L.target];return W<te?-1:te<W?1:R<he?-1:he<R?1:0});for(var E=v[0].source,S=v[0].target,D=0;D<v.length&&($t(o)&&o.locked?E=o.currentFace:!o.isContinuous||nu(o,v[D].source)?E=v[D].source:E=null,a.isContinuous&&a.locked?S=a.currentFace:!a.isContinuous||nu(a,v[D].target)?S=v[D].target:S=null,!(E!=null&&S!=null));D++);return o.isContinuous&&this.setCurrentFace(o,E),a.isContinuous&&this.setCurrentFace(a,S),{a:[E,S],theta:d,theta2:p}}},{key:"setCurrentFace",value:function(i,r,e){i.currentFace=r,e&&i.lockedFace!=null&&(i.lockedFace=i.currentFace)}},{key:"lock",value:function(i){i.locked=!0,$t(i)&&(i.lockedFace=i.currentFace)}},{key:"unlock",value:function(i){i.locked=!1,$t(i)&&(i.lockedFace=null)}},{key:"selectAnchorLocation",value:function(i,r){var e=tn(i.locations,function(n){return n.x===r.x&&n.y===r.y});return e!==-1?(i.currentLocation=e,!0):!1}},{key:"lockCurrentAxis",value:function(i){i.currentFace!=null&&(i.lockedAxis=i.currentFace===Fe||i.currentFace===Le?W_:z_)}},{key:"unlockCurrentAxis",value:function(i){i.lockedAxis=null}},{key:"anchorsEqual",value:function(i,r){if(!i||!r)return!1;var e=i.locations[i.currentLocation],n=r.locations[r.currentLocation];return e.x===n.x&&e.y===n.y&&e.offx===n.offx&&e.offy===n.offy&&e.ox===n.ox&&e.oy===n.oy}}]),t}(),ku={},ar={get:function(s,i,r){var e=ku[i];if(e)return new e(s,r);throw{message:"jsPlumb: unknown connector type '"+i+"'"}},register:function(s,i){ku[s]=i}},bn=function(t){oe(i,t);var s=ae(i);function i(r){var e;return H(this,i),e=s.call(this,r),f(g(e),"length",void 0),f(g(e),"m",void 0),f(g(e),"m2",void 0),f(g(e),"type",i.segmentType),e._setCoordinates({x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2}),e}return z(i,[{key:"getPath",value:function(e){return(e?"M "+this.x1+" "+this.y1+" ":"")+"L "+this.x2+" "+this.y2}},{key:"_recalc",value:function(){this.length=Math.sqrt(Math.pow(this.x2-this.x1,2)+Math.pow(this.y2-this.y1,2)),this.m=oi({x:this.x1,y:this.y1},{x:this.x2,y:this.y2}),this.m2=-1/this.m,this.extents={xmin:Math.min(this.x1,this.x2),ymin:Math.min(this.y1,this.y2),xmax:Math.max(this.x1,this.x2),ymax:Math.max(this.y1,this.y2)}}},{key:"getLength",value:function(){return this.length}},{key:"getGradient",value:function(){return this.m}},{key:"_setCoordinates",value:function(e){this.x1=e.x1,this.y1=e.y1,this.x2=e.x2,this.y2=e.y2,this._recalc()}},{key:"pointOnPath",value:function(e,n){if(e===0&&!n)return{x:this.x1,y:this.y1};if(e===1&&!n)return{x:this.x2,y:this.y2};var o=n?e>0?e:this.length+e:e*this.length;return vn({x:this.x1,y:this.y1},{x:this.x2,y:this.y2},o)}},{key:"gradientAtPoint",value:function(e,n){return this.m}},{key:"pointAlongPathFrom",value:function(e,n,o){var a=this.pointOnPath(e,o),l=n<=0?{x:this.x1,y:this.y1}:{x:this.x2,y:this.y2};return n<=0&&Math.abs(n)>1&&(n*=-1),vn(a,l,n)}},{key:"within",value:function(e,n,o){return o>=Math.min(e,n)&&o<=Math.max(e,n)}},{key:"closest",value:function(e,n,o){return Math.abs(o-e)<Math.abs(o-n)?e:n}},{key:"findClosestPointOnPath",value:function(e,n){var o={d:1/0,x:null,y:null,l:null,x1:this.x1,x2:this.x2,y1:this.y1,y2:this.y2};if(this.m===0)o.y=this.y1,o.x=this.within(this.x1,this.x2,e)?e:this.closest(this.x1,this.x2,e);else if(this.m===1/0||this.m===-1/0)o.x=this.x1,o.y=this.within(this.y1,this.y2,n)?n:this.closest(this.y1,this.y2,n);else{var a=this.y1-this.m*this.x1,l=n-this.m2*e,u=(l-a)/(this.m-this.m2),c=this.m*u+a;o.x=this.within(this.x1,this.x2,u)?u:this.closest(this.x1,this.x2,u),o.y=this.within(this.y1,this.y2,c)?c:this.closest(this.y1,this.y2,c)}var h=Ro({x:o.x,y:o.y},{x:this.x1,y:this.y1});return o.d=Ro({x:e,y:n},o),o.l=h/length,o}},{key:"_pointLiesBetween",value:function(e,n,o){return o>n?n<=e&&e<=o:n>=e&&e>=o}},{key:"lineIntersection",value:function(e,n,o,a){var l=Math.abs(oi({x:e,y:n},{x:o,y:a})),u=Math.abs(this.m),c=u===1/0?this.x1:this.y1-u*this.x1,h=[],d=l===1/0?e:n-l*e;if(l!==u)if(l===1/0&&u===0)this._pointLiesBetween(e,this.x1,this.x2)&&this._pointLiesBetween(this.y1,n,a)&&h.push({x:e,y:this.y1});else if(l===0&&u===1/0)this._pointLiesBetween(n,this.y1,this.y2)&&this._pointLiesBetween(this.x1,e,o)&&h.push({x:this.x1,y:n});else{var p,v;l===1/0?(p=e,this._pointLiesBetween(p,this.x1,this.x2)&&(v=u*e+c,this._pointLiesBetween(v,n,a)&&h.push({x:p,y:v}))):l===0?(v=n,this._pointLiesBetween(v,this.y1,this.y2)&&(p=(n-c)/u,this._pointLiesBetween(p,e,o)&&h.push({x:p,y:v}))):(p=(d-c)/(u-l),v=u*p+c,this._pointLiesBetween(p,this.x1,this.x2)&&this._pointLiesBetween(v,this.y1,this.y2)&&h.push({x:p,y:v}))}return h}},{key:"boxIntersection",value:function(e,n,o,a){var l=[];return l.push.apply(l,this.lineIntersection(e,n,e+o,n)),l.push.apply(l,this.lineIntersection(e+o,n,e+o,n+a)),l.push.apply(l,this.lineIntersection(e+o,n+a,e,n+a)),l.push.apply(l,this.lineIntersection(e,n+a,e,n)),l}}]),i}(Pa);f(bn,"segmentType","Straight");var ds=function(t){oe(i,t);var s=ae(i);function i(){var r;H(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return r=s.call.apply(s,[this].concat(n)),f(g(r),"type",i.type),r}return z(i,[{key:"getDefaultStubs",value:function(){return[0,0]}},{key:"_compute",value:function(e,n){this._addSegment(bn,{x1:e.sx,y1:e.sy,x2:e.startStubX,y2:e.startStubY}),this._addSegment(bn,{x1:e.startStubX,y1:e.startStubY,x2:e.endStubX,y2:e.endStubY}),this._addSegment(bn,{x1:e.endStubX,y1:e.endStubY,x2:e.tx,y2:e.ty}),this.geometry={source:n.sourcePos,target:n.targetPos}}},{key:"transformGeometry",value:function(e,n,o){return{source:this.transformAnchorPlacement(e.source,n,o),target:this.transformAnchorPlacement(e.target,n,o)}}}]),i}(Hs);f(ds,"type","Straight");function Z0(t,s){for(var i=t.scope.split(/\s/),r=s.scope.split(/\s/),e=0;e<i.length;e++)for(var n=0;n<r.length;n++)if(r[n]===i[e])return!0;return!1}function cn(t,s,i){var r=[],e=function(a){return _e(a)?a:t.getId(a)};if(s)if(typeof s=="string"){if(s==="*")return s;r.push(s)}else if(i)r=s;else if(s.length!=null){var n;(n=r).push.apply(n,ni(ni(s).map(e)))}else r.push(e(s));return r}function Q0(t,s){t!=null&&t.endpoints.push(s)}function eE(t,s){t!=null&&we(t.endpoints,function(i){return i===s})}function Sr(t,s,i){s!=null&&(s.connections.push(t),s.connections.length===1&&t.instance.addClass(t.source,t.instance.connectedClass)),i!=null&&(s==null||t.sourceId!==t.targetId)&&(i.connections.push(t),i.connections.length===1&&t.instance.addClass(t.target,t.instance.connectedClass))}function Pr(t,s,i){if(s!=null){var r=s.connections.length;we(s.connections,function(n){return t.id===n.id}),r>0&&s.connections.length===0&&t.instance.removeClass(t.source,t.instance.connectedClass)}if(i!=null){var e=i.connections.length;(s==null||t.sourceId!==t.targetId)&&we(i.connections,function(n){return t.id===n.id}),e>0&&i.connections.length===0&&t.instance.removeClass(t.target,t.instance.connectedClass)}}var tE=function(t){oe(i,t);var s=ae(i);function i(r,e){var n;return H(this,i),n=s.call(this),n._instanceIndex=r,f(g(n),"defaults",void 0),f(g(n),"_initialDefaults",{}),f(g(n),"isConnectionBeingDragged",!1),f(g(n),"currentlyDragging",!1),f(g(n),"hoverSuspended",!1),f(g(n),"_suspendDrawing",!1),f(g(n),"_suspendedAt",null),f(g(n),"connectorClass",Ea),f(g(n),"connectorOutlineClass",By),f(g(n),"connectedClass",Hy),f(g(n),"endpointClass",Kn),f(g(n),"endpointConnectedClass",Uy),f(g(n),"endpointFullClass",Vy),f(g(n),"endpointFloatingClass",ba),f(g(n),"endpointDropAllowedClass",Yy),f(g(n),"endpointDropForbiddenClass",Xy),f(g(n),"endpointAnchorClassPrefix",$y),f(g(n),"overlayClass",js),f(g(n),"connections",[]),f(g(n),"endpointsByElement",{}),f(g(n),"endpointsByUUID",new Map),f(g(n),"sourceSelectors",[]),f(g(n),"targetSelectors",[]),f(g(n),"allowNestedGroups",void 0),f(g(n),"_curIdStamp",1),f(g(n),"viewport",new W0(g(n))),f(g(n),"router",void 0),f(g(n),"groupManager",void 0),f(g(n),"_connectionTypes",new Map),f(g(n),"_endpointTypes",new Map),f(g(n),"_container",void 0),f(g(n),"_managedElements",{}),f(g(n),"DEFAULT_SCOPE",void 0),f(g(n),"_zoom",1),n.defaults={anchor:Pt.Bottom,anchors:[null,null],connectionsDetachable:!0,connectionOverlays:[],connector:ds.type,container:null,endpoint:ui.type,endpointOverlays:[],endpoints:[null,null],endpointStyle:{fill:"#456"},endpointStyles:[null,null],endpointHoverStyle:null,endpointHoverStyles:[null,null],hoverPaintStyle:null,listStyle:{},maxConnections:1,paintStyle:{strokeWidth:2,stroke:"#456"},reattachConnections:!1,scope:"jsplumb_defaultscope",allowNestedGroups:!0},e&&U(n.defaults,e),U(n._initialDefaults,n.defaults),n._initialDefaults[Gn]!=null&&(n._initialDefaults[Gn].strokeWidth=n._initialDefaults[Gn].strokeWidth||2),n.DEFAULT_SCOPE=n.defaults[j0],n.allowNestedGroups=n._initialDefaults[G0]!==!1,n.router=new J0(g(n)),n.groupManager=new U0(g(n)),n.setContainer(n._initialDefaults.container),n}return z(i,[{key:"defaultScope",get:function(){return this.DEFAULT_SCOPE}},{key:"currentZoom",get:function(){return this._zoom}},{key:"areDefaultAnchorsSet",value:function(){return this.validAnchorsSpec(this.defaults.anchors)}},{key:"validAnchorsSpec",value:function(e){return e!=null&&e[0]!=null&&e[1]!=null}},{key:"getContainer",value:function(){return this._container}},{key:"setZoom",value:function(e,n){return this._zoom=e,this.fire(Th,this._zoom),n&&this.repaintEverything(),!0}},{key:"_idstamp",value:function(){return""+this._curIdStamp++}},{key:"checkCondition",value:function(e,n){var o=this.getListener(e),a=!0;if(o&&o.length>0){var l=Array.prototype.slice.call(arguments,1);try{for(var u=0,c=o.length;u<c;u++)a=a&&o[u].apply(o[u],l)}catch(h){Pe("cannot check condition ["+e+"]"+h)}}return a}},{key:"getId",value:function(e,n){if(e==null)return null;var o=this.getAttribute(e,zt);return(!o||o==="undefined")&&(arguments.length===2&&arguments[1]!==void 0?o=n:(arguments.length===1||arguments.length===3&&!arguments[2])&&(o="jsplumb-"+this._instanceIndex+"-"+this._idstamp()),this.setAttribute(e,zt,o)),o}},{key:"getConnections",value:function(e,n){e?e.constructor===String&&(e={scope:e}):e={};for(var o=e.scope||this.defaultScope,a=cn(this,o,!0),l=cn(this,e.source),u=cn(this,e.target),c=!n&&a.length>1?{}:[],h=function(C,E){if(!n&&a.length>1){var S=c[C];S==null&&(S=c[C]=[]),S.push(E)}else c.push(E)},d=0,p=this.connections.length;d<p;d++){var v=this.connections[d],y=v.proxies&&v.proxies[0]?v.proxies[0].originalEp.elementId:v.sourceId,m=v.proxies&&v.proxies[1]?v.proxies[1].originalEp.elementId:v.targetId;an(a,v.scope)&&an(l,y)&&an(u,m)&&h(v.scope,v)}return c}},{key:"select",value:function(e){return e=e||{},e.scope=e.scope||"*",new Y0(this,e.connections||this.getConnections(e,!0))}},{key:"selectEndpoints",value:function(e){e=e||{},e.scope=e.scope||mn;var n=!e.element&&!e.source&&!e.target,o=n?mn:cn(this,e.element),a=n?mn:cn(this,e.source),l=n?mn:cn(this,e.target),u=cn(this,e.scope,!0),c=[];for(var h in this.endpointsByElement){var d=an(o,h,!0),p=an(a,h,!0),v=a!=="*",y=an(l,h,!0),m=l!=="*";if(d||p||y)e:for(var b=0,C=this.endpointsByElement[h].length;b<C;b++){var E=this.endpointsByElement[h][b];if(an(u,E.scope,!0)){var S=v&&a.length>0&&!E.isSource,D=m&&l.length>0&&!E.isTarget;if(S||D)continue e;c.push(E)}}}return new V0(this,c)}},{key:"setContainer",value:function(e){this._container=e,this.fire(qy,this._container)}},{key:"_set",value:function(e,n,o){var a=[{el:"source",elId:"sourceId"},{el:"target",elId:"targetId"}],l,u=a[o],c=e[u.elId],h,d=e.endpoints[o],p={index:o,originalEndpoint:d,originalSourceId:o===0?c:e.sourceId,newSourceId:e.sourceId,originalTargetId:o===1?c:e.targetId,newTargetId:e.targetId,connection:e,newEndpoint:d};return n instanceof Yn?(l=n,l.addConnection(e)):(h=this.getId(n),h===e[u.elId]?l=null:l=e.makeEndpoint(o===0,n,h)),l!=null&&(p.newEndpoint=l,d.detachFromConnection(e),e.endpoints[o]=l,e[u.el]=l.element,e[u.elId]=l.elementId,p[o===0?"newSourceId":"newTargetId"]=l.elementId,this.fireMoveEvent(p),this._paintConnection(e)),p}},{key:"setSource",value:function(e,n){Pr(e,this._managedElements[e.sourceId]);var o=this._set(e,n,0);Sr(e,this._managedElements[o.newSourceId])}},{key:"setTarget",value:function(e,n){Pr(e,this._managedElements[e.targetId]);var o=this._set(e,n,1);Sr(e,this._managedElements[o.newTargetId])}},{key:"setConnectionType",value:function(e,n,o){e.setType(n,o),this._paintConnection(e)}},{key:"isHoverSuspended",value:function(){return this.hoverSuspended}},{key:"setSuspendDrawing",value:function(e,n){var o=this._suspendDrawing;return this._suspendDrawing=e,e?this._suspendedAt=""+new Date().getTime():(this._suspendedAt=null,this.viewport.recomputeBounds()),n&&this.repaintEverything(),o}},{key:"getSuspendedAt",value:function(){return this._suspendedAt}},{key:"batch",value:function(e,n){var o=this._suspendDrawing===!0;o||this.setSuspendDrawing(!0),e(),o||this.setSuspendDrawing(!1,!n)}},{key:"each",value:function(e,n){if(e!=null){if(e.length!=null)for(var o=0;o<e.length;o++)n(e[o]);else n(e);return this}}},{key:"updateOffset",value:function(e){var n=e.elId;return e.recalc?this.viewport.refreshElement(n):this.viewport.getPosition(n)}},{key:"deleteConnection",value:function(e,n){if(e!=null&&e.deleted!==!0&&(n=n||{},n.force||lh(!0,!1,[[e.endpoints[0],Jn,[e]],[e.endpoints[1],Jn,[e]],[e,Jn,[e]],[this,_h,[Oh,e]]]))){Pr(e,this._managedElements[e.sourceId],this._managedElements[e.targetId]),this.fireDetachEvent(e,!e.pending&&n.fireEvent!==!1,n.originalEvent);var o=e.endpoints[0],a=e.endpoints[1];return o!==n.endpointToIgnore&&o.detachFromConnection(e,null,!0),a!==n.endpointToIgnore&&a.detachFromConnection(e,null,!0),we(this.connections,function(l){return e.id===l.id}),e.destroy(),o!==n.endpointToIgnore&&o.deleteOnEmpty&&o.connections.length===0&&this.deleteEndpoint(o),a!==n.endpointToIgnore&&a.deleteOnEmpty&&a.connections.length===0&&this.deleteEndpoint(a),!0}return!1}},{key:"deleteEveryConnection",value:function(e){var n=this;e=e||{};var o=this.connections.length,a=0;return this.batch(function(){for(var l=0;l<o;l++)a+=n.deleteConnection(n.connections[0],e)?1:0}),a}},{key:"deleteConnectionsForElement",value:function(e,n){var o=this.getId(e),a=this._managedElements[o];if(a)for(var l=a.connections.length,u=0;u<l;u++)this.deleteConnection(a.connections[0],n);return this}},{key:"fireDetachEvent",value:function(e,n,o){var a=e.id!=null,l=a?{connection:e,source:e.source,target:e.target,sourceId:e.sourceId,targetId:e.targetId,sourceEndpoint:e.endpoints[0],targetEndpoint:e.endpoints[1]}:e;n&&this.fire(zy,l,o),this.fire(Ca,l,o)}},{key:"fireMoveEvent",value:function(e,n){this.fire(Ch,e,n)}},{key:"manageAll",value:function(e,n){for(var o=_e(e)?this.getSelector(this.getContainer(),e):e,a=0;a<o.length;a++)this.manage(o[a],null,n)}},{key:"manage",value:function(e,n,o){this.getAttribute(e,zt)==null&&(n=n||this.getAttribute(e,"id")||ke(),this.setAttribute(e,zt,n));var a=this.getId(e);if(this._managedElements[a])o&&(this._managedElements[a].viewportElement=this.updateOffset({elId:a,timestamp:null,recalc:!0}));else{var l={el:e,endpoints:[],connections:[],rotation:0,data:{}};this._managedElements[a]=l,this._suspendDrawing?l.viewportElement=this.viewport.registerElement(a,!0):l.viewportElement=this.updateOffset({elId:a,recalc:!0}),this.fire(Sh,{el:e})}return this._managedElements[a]}},{key:"getManagedData",value:function(e,n,o){if(this._managedElements[e]){var a=this._managedElements[e].data[n];return a!=null?a[o]:null}}},{key:"setManagedData",value:function(e,n,o,a){this._managedElements[e]&&(this._managedElements[e].data[n]=this._managedElements[e].data[n]||{},this._managedElements[e].data[n][o]=a)}},{key:"getManagedElement",value:function(e){return this._managedElements[e]?this._managedElements[e].el:null}},{key:"unmanage",value:function(e,n){var o=this;this.removeAllEndpoints(e,!0);var a=function(u){var c=o.getId(u);o.removeAttribute(u,zt),delete o._managedElements[c],o.viewport.remove(c),o.fire(kh,{el:u,id:c}),u&&n&&o._removeElement(u)};this._getAssociatedElements(e).map(a),a(e)}},{key:"rotate",value:function(e,n,o){var a=this.getId(e);return this._managedElements[a]&&(this._managedElements[a].rotation=n,this.viewport.rotateElement(a,n),o!==!0)?this.revalidate(e):{c:new Set,e:new Set}}},{key:"_getRotation",value:function(e){var n=this._managedElements[e];return n!=null&&n.rotation||0}},{key:"_getRotations",value:function(e){var n=this,o=[],a=this._managedElements[e],l=function u(c){if(c.group!=null){var h=n._managedElements[c.group];h!=null&&(o.push({r:h.viewportElement.r,c:h.viewportElement.c}),u(h))}};return a!=null&&(o.push({r:a.viewportElement.r||0,c:a.viewportElement.c}),l(a)),o}},{key:"_applyRotations",value:function(e,n){var o=e.slice(),a={x:o[0],y:o[1],cr:0,sr:0};return X(n,function(l){a=ts(a,l.c,l.r)}),a}},{key:"_applyRotationsXY",value:function(e,n){return X(n,function(o){e=ts(e,o.c,o.r)}),e}},{key:"_internal_newEndpoint",value:function(e){var n=U({},e),o=this.manage(n.element);n.elementId=this.getId(n.element),n.id="ep_"+this._idstamp();var a=new Yn(this,n);return Q0(o,a),e.uuid&&this.endpointsByUUID.set(e.uuid,a),ch(this.endpointsByElement,a.elementId,a),this._suspendDrawing||this._paintEndpoint(a,{timestamp:this._suspendedAt}),a}},{key:"_deriveEndpointAndAnchorSpec",value:function(e,n){for(var o=((n?"":"default ")+e).split(/[\s]/),a=null,l=null,u=null,c=null,h=0;h<o.length;h++){var d=this.getConnectionType(o[h]);d&&(d.endpoints&&(a=d.endpoints),d.endpoint&&(l=d.endpoint),d.anchors&&(c=d.anchors),d.anchor&&(u=d.anchor))}return{endpoints:a||[l,l],anchors:c||[u,u]}}},{key:"revalidate",value:function(e,n){var o=this.getId(e);return this.updateOffset({elId:o,recalc:!0,timestamp:n}),this.repaint(e)}},{key:"repaintEverything",value:function(){var e=ke(),n;for(n in this._managedElements)this.viewport.refreshElement(n,!0);this.viewport.recomputeBounds();for(n in this._managedElements)this.repaint(this._managedElements[n].el,e,!0);return this}},{key:"setElementPosition",value:function(e,n,o){var a=this.getId(e);return this.viewport.setPosition(a,n,o),this.repaint(e)}},{key:"repaint",value:function(e,n,o){var a={c:new Set,e:new Set},l=function(v){v.c.forEach(function(y){return a.c.add(y)}),v.e.forEach(function(y){return a.e.add(y)})};if(!this._suspendDrawing){var u=this.getId(e);if(e!=null){var c=this._getAssociatedElements(e);if(n==null&&(n=ke()),!o)for(var h=0;h<c.length;h++)this.updateOffset({elId:this.getId(c[h]),recalc:!0,timestamp:n});if(l(this.router.redraw(u,n,null)),c.length>0)for(var d=0;d<c.length;d++)l(this.router.redraw(this.getId(c[d]),n,null))}}return a}},{key:"unregisterEndpoint",value:function(e){var n=e.getUuid();n&&this.endpointsByUUID.delete(n),eE(this._managedElements[e.elementId],e);var o=this.endpointsByElement[e.elementId];o!=null&&(this.endpointsByElement[e.elementId]=o.filter(function(a){return a!==e})),this.fire(xh,e)}},{key:"_maybePruneEndpoint",value:function(e){return e.deleteOnEmpty&&e.connections.length===0?(this.deleteEndpoint(e),!0):!1}},{key:"deleteEndpoint",value:function(e){var n=this,o=typeof e=="string"?this.endpointsByUUID.get(e):e;if(o){var a=o.proxiedBy,l=o.connections.slice();X(l,function(u){o.detachFromConnection(u,null,!0)}),this.unregisterEndpoint(o),o.destroy(),X(l,function(u){n.deleteConnection(u,{force:!0,endpointToIgnore:o})}),a!=null&&this.deleteEndpoint(a)}return this}},{key:"addEndpoint",value:function(e,n,o){o=o||{};var a=U({},o);U(a,n||{});var l=U({element:e},a);return this._internal_newEndpoint(l)}},{key:"addEndpoints",value:function(e,n,o){for(var a=[],l=0,u=n.length;l<u;l++)a.push(this.addEndpoint(e,n[l],o));return a}},{key:"reset",value:function(){var e=this;this.silently(function(){e.endpointsByElement={},e._managedElements={},e.endpointsByUUID.clear(),e.viewport.reset(),e.router.reset(),e.groupManager.reset(),e.connections.length=0})}},{key:"destroy",value:function(){this.reset(),this.unbind(),this.sourceSelectors.length=0,this.targetSelectors.length=0,this._connectionTypes.clear(),this._endpointTypes.clear()}},{key:"getEndpoints",value:function(e){return this.endpointsByElement[this.getId(e)]||[]}},{key:"getEndpoint",value:function(e){return this.endpointsByUUID.get(e)}},{key:"setEndpointUuid",value:function(e,n){e.uuid&&this.endpointsByUUID.delete(e.uuid),e.uuid=n,this.endpointsByUUID.set(n,e)}},{key:"connect",value:function(e,n){try{var o=this._prepareConnectionParams(e,n),a=this._newConnection(o);return this._finaliseConnection(a,o),a}catch(l){Pe(l);return}}},{key:"_prepareConnectionParams",value:function(e,n){var o=U({},e);n&&U(o,n);var a=o;if(a.source&&a.source.endpoint&&(a.sourceEndpoint=a.source),a.target&&a.target.endpoint&&(a.targetEndpoint=a.target),e.uuids&&(a.sourceEndpoint=this.getEndpoint(e.uuids[0]),a.targetEndpoint=this.getEndpoint(e.uuids[1])),a.sourceEndpoint!=null){if(a.sourceEndpoint.isFull())throw am;if(a.type||(a.type=a.sourceEndpoint.edgeType),a.sourceEndpoint.connectorOverlays){a.overlays=a.overlays||[];for(var l=0,u=a.sourceEndpoint.connectorOverlays.length;l<u;l++)a.overlays.push(a.sourceEndpoint.connectorOverlays[l])}a.sourceEndpoint.scope&&(a.scope=a.sourceEndpoint.scope)}else if(a.source==null)throw um;if(a.targetEndpoint!=null){if(a.targetEndpoint.isFull())throw lm}else if(a.target==null)throw cm;if(a.sourceEndpoint&&a.targetEndpoint&&!Z0(a.sourceEndpoint,a.targetEndpoint))throw"Cannot establish connection: scopes do not match";return a}},{key:"_newConnection",value:function(e){e.id="con_"+this._idstamp();var n=new tr(this,e);return Sr(n,this._managedElements[n.sourceId],this._managedElements[n.targetId]),this._paintConnection(n),n}},{key:"_finaliseConnection",value:function(e,n,o){n=n||{},e.suspendedEndpoint||this.connections.push(e),e.pending=null,e.endpoints[0].isTemporarySource=!1,this.repaint(e.source);var a={connection:e,source:e.source,target:e.target,sourceId:e.sourceId,targetId:e.targetId,sourceEndpoint:e.endpoints[0],targetEndpoint:e.endpoints[1]};this.fire(bh,a,o),!n.doNotFireConnectionEvent&&n.fireEvent!==!1&&this.fire(Eh,a,o)}},{key:"removeAllEndpoints",value:function(e,n){var o=this,a=function(u){var c=o.getId(u),h=o.endpointsByElement[c],d,p;if(h)for(d=0,p=h.length;d<p;d++)o.deleteEndpoint(h[d]);delete o.endpointsByElement[c]};return n&&this._getAssociatedElements(e).map(a),a(e),this}},{key:"_createSourceDefinition",value:function(e,n){var o=U({},n);U(o,e),o.edgeType=o.edgeType||ss;var a=this._deriveEndpointAndAnchorSpec(o.edgeType);o.endpoint=o.endpoint||a.endpoints[0],o.anchor=o.anchor||a.anchors[0];var l=o.maxConnections||-1,u={def:U({},o),uniqueEndpoint:o.uniqueEndpoint,maxConnections:l,enabled:!0,endpoint:null};return u}},{key:"addSourceSelector",value:function(e,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=this._createSourceDefinition(n),l=new uu(e,a,o);return this.sourceSelectors.push(l),l}},{key:"removeSourceSelector",value:function(e){we(this.sourceSelectors,function(n){return n===e})}},{key:"removeTargetSelector",value:function(e){we(this.targetSelectors,function(n){return n===e})}},{key:"addTargetSelector",value:function(e,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=this._createTargetDefinition(n),l=new uu(e,a,o);return this.targetSelectors.push(l),l}},{key:"_createTargetDefinition",value:function(e,n){var o=U({},n);U(o,e),o.edgeType=o.edgeType||ss;var a=o.maxConnections||-1,l={def:U({},o),uniqueEndpoint:o.uniqueEndpoint,maxConnections:a,enabled:!0,endpoint:null};return l}},{key:"show",value:function(e,n){return this._setVisible(e,Mo,n)}},{key:"hide",value:function(e,n){return this._setVisible(e,ri,n)}},{key:"_setVisible",value:function(e,n,o){var a=n===Mo,l=null;o&&(l=function(h){h.setVisible(a,!0,!0)});var u=this.getId(e);return this._operation(e,function(c){if(a&&o){var h=c.sourceId===u?1:0;c.endpoints[h].isVisible()&&c.setVisible(!0)}else c.setVisible(a)},l),this}},{key:"toggleVisible",value:function(e,n){var o=null;n&&(o=function(l){var u=l.isVisible();l.setVisible(!u)}),this._operation(e,function(a){var l=a.isVisible();a.setVisible(!l)},o)}},{key:"_operation",value:function(e,n,o){var a=this.getId(e),l=this.endpointsByElement[a];if(l&&l.length)for(var u=0,c=l.length;u<c;u++){for(var h=0,d=l[u].connections.length;h<d;h++){var p=n(l[u].connections[h]);if(p)return}o&&o(l[u])}}},{key:"registerConnectionType",value:function(e,n){if(this._connectionTypes.set(e,U({},n)),n.overlays){for(var o={},a=0;a<n.overlays.length;a++){var l=Go(n.overlays[a]);o[l.options.id]=l}this._connectionTypes.get(e).overlays=o}}},{key:"registerConnectionTypes",value:function(e){for(var n in e)this.registerConnectionType(n,e[n])}},{key:"registerEndpointType",value:function(e,n){if(this._endpointTypes.set(e,U({},n)),n.overlays){for(var o={},a=0;a<n.overlays.length;a++){var l=Go(n.overlays[a]);o[l.options.id]=l}this._endpointTypes.get(e).overlays=o}}},{key:"registerEndpointTypes",value:function(e){for(var n in e)this.registerEndpointType(n,e[n])}},{key:"getType",value:function(e,n){return n==="connection"?this.getConnectionType(e):this.getEndpointType(e)}},{key:"getConnectionType",value:function(e){return this._connectionTypes.get(e)}},{key:"getEndpointType",value:function(e){return this._endpointTypes.get(e)}},{key:"importDefaults",value:function(e){for(var n in e)this.defaults[n]=e[n];return this.defaults[Gn]!=null&&(this.defaults[Gn].strokeWidth=this.defaults[Gn].strokeWidth||2),e.container&&this.setContainer(e.container),this}},{key:"restoreDefaults",value:function(){return this.defaults=U({},this._initialDefaults),this}},{key:"getManagedElements",value:function(){return this._managedElements}},{key:"proxyConnection",value:function(e,n,o,a,l){var u=e.proxies[n]!=null,c,h=u?e.proxies[n].originalEp.elementId:e.endpoints[n].elementId,d=u?e.proxies[n].originalEp:e.endpoints[n],p=this.getId(o);e.proxies[n]?e.proxies[n].ep.elementId===p?c=e.proxies[n].ep:(e.proxies[n].ep.detachFromConnection(e,n),c=this._internal_newEndpoint({element:o,endpoint:a(e,n),anchor:l(e,n),parameters:{isProxyEndpoint:!0}})):c=this._internal_newEndpoint({element:o,endpoint:a(e,n),anchor:l(e,n),parameters:{isProxyEndpoint:!0}}),c.deleteOnEmpty=!0,e.proxies[n]={ep:c,originalEp:d},this.sourceOrTargetChanged(h,p,e,o,n),d.detachFromConnection(e,null,!0),c.connections=[e],e.endpoints[n]=c,d.proxiedBy=c,d.setVisible(!1),e.setVisible(!0),this.revalidate(o)}},{key:"unproxyConnection",value:function(e,n){if(!(e.proxies==null||e.proxies[n]==null)){var o=e.proxies[n].originalEp.element,a=e.proxies[n].originalEp.elementId,l=e.proxies[n].ep.elementId;e.endpoints[n]=e.proxies[n].originalEp,delete e.proxies[n].originalEp.proxiedBy,this.sourceOrTargetChanged(l,a,e,o,n),e.proxies[n].ep.detachFromConnection(e,null),e.proxies[n].originalEp.addConnection(e),e.isVisible()&&e.proxies[n].originalEp.setVisible(!0),e.proxies[n]=null,tn(e.proxies,function(u){return u!=null})===-1&&(e.proxies.length=0)}}},{key:"sourceOrTargetChanged",value:function(e,n,o,a,l){e!==n&&(l===0?(o.sourceId=n,o.source=a):l===1&&(o.targetId=n,o.target=a),Pr(o,this._managedElements[e]),Sr(o,this._managedElements[n]))}},{key:"getGroup",value:function(e){return this.groupManager.getGroup(e)}},{key:"getGroupFor",value:function(e){return this.groupManager.getGroupFor(e)}},{key:"addGroup",value:function(e){return this.groupManager.addGroup(e)}},{key:"addToGroup",value:function(e){for(var n,o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return(n=this.groupManager).addToGroup.apply(n,[e,!1].concat(a))}},{key:"collapseGroup",value:function(e){this.groupManager.collapseGroup(e)}},{key:"expandGroup",value:function(e){this.groupManager.expandGroup(e)}},{key:"toggleGroup",value:function(e){this.groupManager.toggleGroup(e)}},{key:"removeGroup",value:function(e,n,o,a){return this.groupManager.removeGroup(e,n,o,a)}},{key:"removeAllGroups",value:function(e,n){this.groupManager.removeAllGroups(e,n,!1)}},{key:"removeFromGroup",value:function(e,n,o){this.groupManager.removeFromGroup(e,o,n),this._appendElement(n,this.getContainer()),this.updateOffset({recalc:!0,elId:this.getId(n)})}},{key:"_paintEndpoint",value:function(e,n){function o(E){var S=0;if(n.elementWithPrecedence!=null){for(var D=0;D<E.connections.length;D++)if(E.connections[D].sourceId===n.elementWithPrecedence||E.connections[D].targetId===n.elementWithPrecedence){S=D;break}}return E.connections[S]}n=n||{};var a=n.timestamp,l=n.recalc!==!1;if(!a||e.timestamp!==a){var u=this.viewport.getPosition(e.elementId),c=n.offset?{x:n.offset.x,y:n.offset.y}:{x:u.x,y:u.y};if(c!=null){var h=n.anchorLoc;if(h==null){var d={xy:c,wh:u,element:e,timestamp:a};if(l&&this.router.isDynamicAnchor(e)&&e.connections.length>0){var p=o(e),v=p.endpoints[0]===e?1:0,y=v===0?p.sourceId:p.targetId,m=this.viewport.getPosition(y);d.index=v===0?1:0,d.connection=p,d.txy=m,d.twh=m,d.tElement=p.endpoints[v],d.tRotation=this._getRotations(y)}else e.connections.length>0&&(d.connection=e.connections[0]);d.rotation=this._getRotations(e.elementId),h=this.router.computeAnchorLocation(e._anchor,d)}e.endpoint.compute(h,this.router.getEndpointOrientation(e),e.paintStyleInUse),this.renderEndpoint(e,e.paintStyleInUse),e.timestamp=a;for(var b in e.overlays)if(e.overlays.hasOwnProperty(b)){var C=e.overlays[b];C.isVisible()&&(e.overlayPlacements[b]=this.drawOverlay(C,e.endpoint,e.paintStyleInUse,e.getAbsoluteOverlayPosition(C)),this._paintOverlay(C,e.overlayPlacements[b],{xmin:0,ymin:0}))}}}}},{key:"_paintConnection",value:function(e,n){if(!this._suspendDrawing&&e.visible!==!1){n=n||{};var o=n.timestamp;if(o!=null&&o===e.lastPaintedAt)return;if(o==null||o!==e.lastPaintedAt){this.router.computePath(e,o);var a={xmin:1/0,ymin:1/0,xmax:-1/0,ymax:-1/0};for(var l in e.overlays)if(e.overlays.hasOwnProperty(l)){var u=e.overlays[l];u.isVisible()&&(e.overlayPlacements[l]=this.drawOverlay(u,e.connector,e.paintStyleInUse,e.getAbsoluteOverlayPosition(u)),a.xmin=Math.min(a.xmin,e.overlayPlacements[l].xmin),a.xmax=Math.max(a.xmax,e.overlayPlacements[l].xmax),a.ymin=Math.min(a.ymin,e.overlayPlacements[l].ymin),a.ymax=Math.max(a.ymax,e.overlayPlacements[l].ymax))}var c=parseFloat(""+e.paintStyleInUse.strokeWidth||"1")/2,h=parseFloat(""+e.paintStyleInUse.strokeWidth||"0"),d={xmin:Math.min(e.connector.bounds.xmin-(c+h),a.xmin),ymin:Math.min(e.connector.bounds.ymin-(c+h),a.ymin),xmax:Math.max(e.connector.bounds.xmax+(c+h),a.xmax),ymax:Math.max(e.connector.bounds.ymax+(c+h),a.ymax)};this.paintConnector(e.connector,e.paintStyleInUse,d);for(var p in e.overlays)if(e.overlays.hasOwnProperty(p)){var v=e.overlays[p];v.isVisible()&&this._paintOverlay(v,e.overlayPlacements[p],d)}}e.lastPaintedAt=o}}},{key:"_refreshEndpoint",value:function(e){e._anchor.isFloating||(e.connections.length>0?this.addEndpointClass(e,this.endpointConnectedClass):this.removeEndpointClass(e,this.endpointConnectedClass),e.isFull()?this.addEndpointClass(e,this.endpointFullClass):this.removeEndpointClass(e,this.endpointFullClass))}},{key:"_makeConnector",value:function(e,n,o){return ar.get(e,n,o)}},{key:"addOverlay",value:function(e,n,o){if(e.addOverlay(n),!o){var a=e instanceof Yn?e.element:e.source;this.revalidate(a)}}},{key:"removeOverlay",value:function(e,n){e.removeOverlay(n);var o=e instanceof Yn?e.element:e.source;this.revalidate(o)}},{key:"setOutlineColor",value:function(e,n){e.paintStyleInUse.outlineStroke=n,this._paintConnection(e)}},{key:"setOutlineWidth",value:function(e,n){e.paintStyleInUse.outlineWidth=n,this._paintConnection(e)}},{key:"setColor",value:function(e,n){e.paintStyleInUse.stroke=n,this._paintConnection(e)}},{key:"setLineWidth",value:function(e,n){e.paintStyleInUse.strokeWidth=n,this._paintConnection(e)}},{key:"setLineStyle",value:function(e,n){n.lineWidth!=null&&(e.paintStyleInUse.strokeWidth=n.lineWidth),n.outlineWidth!=null&&(e.paintStyleInUse.outlineWidth=n.outlineWidth),n.color!=null&&(e.paintStyleInUse.stroke=n.color),n.outlineColor!=null&&(e.paintStyleInUse.outlineStroke=n.outlineColor),this._paintConnection(e)}},{key:"getPathData",value:function(e){for(var n="",o=0;o<e.segments.length;o++)n+=e.segments[o].getPath(o===0),n+=" ";return n}}]),i}(or),ef={};function Ra(t,s){ef[t]=s}function Tu(t,s,i){var r=s,e=qn(s.getBoundingClientRect)!==Ih?s.getBoundingClientRect():{left:0,top:0,width:0,height:0},n=document.body,o=document.documentElement,a=window.pageYOffset||o.scrollTop||n.scrollTop,l=window.pageXOffset||o.scrollLeft||n.scrollLeft,u=o.clientTop||n.clientTop||0,c=o.clientLeft||n.clientLeft||0,h=0,d=0,p=e.top+a-u+h*i,v=e.left+l-c+d*i,y=os(t),m=e.width||r.offsetWidth*i,b=e.height||r.offsetHeight*i,C=(y.x-v)/m,E=(y.y-p)/b;return{x:C,y:E}}function Bn(t){return jo(t)||Bo(t)||Ho(t)}function Au(t,s){t.canvas&&(t.canvas.style.display=s?"block":"none")}function Ou(t){t.canvas&&t.canvas.parentNode.removeChild(t.canvas),delete t.canvas}function Ai(t){return t.canvas}function ut(t){return La.getElement(t)}function hn(t){return La.getElement(t,t.component,function(s){var i=t.create(s);return t.instance.addClass(i,t.instance.overlayClass),i})}function nE(t,s,i,r){var e=t.x,n=t.y;return s._jsPlumbParentGroup&&s._jsPlumbParentGroup.constrain&&(e=Math.max(t.x,0),n=Math.max(t.y,0),e=Math.min(e,i.w-r.w),n=Math.min(n,i.h-r.h)),{x:e,y:n}}var iE=function(t){oe(i,t);var s=ae(i);function i(r,e){var n;if(H(this,i),n=s.call(this,r,e),n._instanceIndex=r,f(g(n),"containerType",null),f(g(n),"dragSelection",void 0),f(g(n),"dragManager",void 0),f(g(n),"_connectorClick",void 0),f(g(n),"_connectorDblClick",void 0),f(g(n),"_connectorTap",void 0),f(g(n),"_connectorDblTap",void 0),f(g(n),"_endpointClick",void 0),f(g(n),"_endpointDblClick",void 0),f(g(n),"_overlayClick",void 0),f(g(n),"_overlayDblClick",void 0),f(g(n),"_overlayTap",void 0),f(g(n),"_overlayDblTap",void 0),f(g(n),"_connectorMouseover",void 0),f(g(n),"_connectorMouseout",void 0),f(g(n),"_endpointMouseover",void 0),f(g(n),"_endpointMouseout",void 0),f(g(n),"_connectorContextmenu",void 0),f(g(n),"_connectorMousedown",void 0),f(g(n),"_connectorMouseup",void 0),f(g(n),"_endpointMousedown",void 0),f(g(n),"_endpointMouseup",void 0),f(g(n),"_overlayMouseover",void 0),f(g(n),"_overlayMouseout",void 0),f(g(n),"_elementClick",void 0),f(g(n),"_elementTap",void 0),f(g(n),"_elementDblTap",void 0),f(g(n),"_elementMouseenter",void 0),f(g(n),"_elementMouseexit",void 0),f(g(n),"_elementMousemove",void 0),f(g(n),"_elementMouseup",void 0),f(g(n),"_elementMousedown",void 0),f(g(n),"_elementContextmenu",void 0),f(g(n),"_resizeObserver",void 0),f(g(n),"eventManager",void 0),f(g(n),"draggingClass","jtk-dragging"),f(g(n),"elementDraggingClass","jtk-element-dragging"),f(g(n),"hoverClass","jtk-hover"),f(g(n),"sourceElementDraggingClass","jtk-source-element-dragging"),f(g(n),"targetElementDraggingClass","jtk-target-element-dragging"),f(g(n),"hoverSourceClass","jtk-source-hover"),f(g(n),"hoverTargetClass","jtk-target-hover"),f(g(n),"dragSelectClass","jtk-drag-select"),f(g(n),"managedElementsSelector",void 0),f(g(n),"elementsDraggable",void 0),f(g(n),"elementDragHandler",void 0),f(g(n),"groupDragOptions",void 0),f(g(n),"elementDragOptions",void 0),f(g(n),"svg",{node:function(a,l){return Gt(a,l)},attr:function(a,l){return Ft(a,l)},pos:function(a){return Dh(a)}}),e=e||{},n.containerType=wo(n.getContainer()),n.elementsDraggable=e&&e.elementsDraggable!==!1,n.managedElementsSelector=e&&e.managedElementsSelector||ge,n.eventManager=new Ta,n.dragSelection=new F_(g(n)),n.dragManager=new V_(g(n),n.dragSelection),n.dragManager.addHandler(new hu(g(n))),n.groupDragOptions={constrainFunction:nE},n.dragManager.addHandler(new fu(g(n),n.dragSelection),n.groupDragOptions),n.elementDragHandler=new Fo(g(n),n.dragSelection),n.elementDragOptions=e&&e.dragOptions||{},n.dragManager.addHandler(n.elementDragHandler,n.elementDragOptions),e&&e.dragOptions&&e.dragOptions.filter&&n.dragManager.addFilter(e.dragOptions.filter),n._createEventListeners(),n._attachEventDelegates(),e.resizeObserver!==!1)try{n._resizeObserver=new ResizeObserver(function(o){var a=o.filter(function(l){var u=n.getAttribute(l.target,zt);if(u!=null){var c=n.viewport._elementMap.get(u);return c?c.w!==l.contentRect.width||c.h!==l.contentRect.height:!1}else return!1});a.forEach(function(l){return n.revalidate(l.target)})})}catch{Pe("WARN: ResizeObserver could not be attached.")}return n}return z(i,[{key:"fireOverlayMethod",value:function(e,n,o){var a=e.component instanceof tr?At:Bt,l=ce(a,n);o._jsPlumbOverlay=e,e.fire(n,{e:o,overlay:e}),this.fire(l,e.component,o)}},{key:"addDragFilter",value:function(e,n){this.dragManager.addFilter(e,n)}},{key:"removeDragFilter",value:function(e){this.dragManager.removeFilter(e)}},{key:"setDragGrid",value:function(e){this.dragManager.setOption(this.elementDragHandler,{grid:e})}},{key:"setDragConstrainFunction",value:function(e){this.dragManager.setOption(this.elementDragHandler,{constrainFunction:e})}},{key:"_removeElement",value:function(e){e.parentNode&&e.parentNode.removeChild(e)}},{key:"_appendElement",value:function(e,n){n&&n.appendChild(e)}},{key:"_appendElementToGroup",value:function(e,n){this.getGroupContentArea(e).appendChild(n)}},{key:"_appendElementToContainer",value:function(e){this._appendElement(e,this.getContainer())}},{key:"_getAssociatedElements",value:function(e){var n=[];if(e.nodeType!==3&&e.nodeType!==8){var o=e.querySelectorAll(ge);Array.prototype.push.apply(n,o)}return n.filter(function(a){return a.nodeType!==3&&a.nodeType!==8})}},{key:"shouldFireEvent",value:function(e,n,o){return!0}},{key:"getClass",value:function(e){return Oy(e)}},{key:"addClass",value:function(e,n){pn(e,n)}},{key:"hasClass",value:function(e,n){return wy(e,n)}},{key:"removeClass",value:function(e,n){Oo(e,n)}},{key:"toggleClass",value:function(e,n){Dy(e,n)}},{key:"setAttribute",value:function(e,n,o){e.setAttribute(n,o)}},{key:"getAttribute",value:function(e,n){return e.getAttribute(n)}},{key:"setAttributes",value:function(e,n){for(var o in n)e.setAttribute(o,n[o])}},{key:"removeAttribute",value:function(e,n){e.removeAttribute&&e.removeAttribute(n)}},{key:"on",value:function(e,n,o,a){var l=this,u=function(h){a==null?l.eventManager.on(h,n,o):l.eventManager.on(h,n,o,a)};return Ji(e)?X(e,function(c){return u(c)}):u(e),this}},{key:"off",value:function(e,n,o){var a=this;return Ji(e)?X(e,function(l){return a.eventManager.off(l,n,o)}):this.eventManager.off(e,n,o),this}},{key:"trigger",value:function(e,n,o,a,l){this.eventManager.trigger(e,n,o,a,l)}},{key:"getOffsetRelativeToRoot",value:function(e){return Un(e)}},{key:"getOffset",value:function(e){for(var n=e,o=this.getContainer(),a=this.getPosition(n),l=e!==o&&n.offsetParent!==o?n.offsetParent:null,u=function(p){p!=null&&p!==document.body&&(p.scrollTop>0||p.scrollLeft>0)&&(a.x-=p.scrollLeft,a.y-=p.scrollTop)};l!=null;)a.x+=l.offsetLeft,a.y+=l.offsetTop,u(l),l=l.offsetParent===o?null:l.offsetParent;if(o!=null&&(o.scrollTop>0||o.scrollLeft>0)){var c=n.offsetParent!=null?this.getStyle(n.offsetParent,ql):Fy,h=this.getStyle(n,ql);h!==Zi&&h!==Bl&&c!==Zi&&c!==Bl&&(a.x-=o.scrollLeft,a.y-=o.scrollTop)}return a}},{key:"getSize",value:function(e){var n=e;if(n.offsetWidth!=null)return My(e);if(n.width&&n.width.baseVal)return Iy(n)}},{key:"getPosition",value:function(e){var n=e;if(n.offsetLeft!=null)return{x:parseFloat(n.offsetLeft),y:parseFloat(n.offsetTop)};if(n.x&&n.x.baseVal)return Ly(n)}},{key:"getStyle",value:function(e,n){return qn(window.getComputedStyle)!==Ih?getComputedStyle(e,null).getPropertyValue(n):e.currentStyle[n]}},{key:"getGroupContentArea",value:function(e){var n=this.getSelector(e.el,zm);return n&&n.length>0?n[0]:e.el}},{key:"getSelector",value:function(e,n){var o=null;if(arguments.length===1){if(!_e(e)){var a=document.createDocumentFragment();return a.appendChild(e),gr(a.childNodes)}o=gr(document.querySelectorAll(e))}else o=gr(e.querySelectorAll(n));return o}},{key:"setPosition",value:function(e,n){var o=e;o.style.left=n.x+"px",o.style.top=n.y+"px"}},{key:"setDraggable",value:function(e,n){n?this.removeAttribute(e,Gr):this.setAttribute(e,Gr,Lh)}},{key:"isDraggable",value:function(e){var n=this.getAttribute(e,Gr);return n==null||n===Vn}},{key:"toggleDraggable",value:function(e){var n=this.isDraggable(e);return this.setDraggable(e,!n),!n}},{key:"_createEventListeners",value:function(){var e=function(b,C){if(!C.defaultPrevented&&C._jsPlumbOverlay==null){var E=Dt(ze(C),lt,this.getContainer(),!0);this.fire(b,E.jtk.connector.connection,C)}};this._connectorClick=e.bind(this,Gm),this._connectorDblClick=e.bind(this,jm),this._connectorTap=e.bind(this,$m),this._connectorDblTap=e.bind(this,Bm);var n=function(b,C){var E=ze(C).parentNode;if(E.jtk&&E.jtk.connector){var S=E.jtk.connector,D=S.connection;this.setConnectorHover(S,b),b?(this.addClass(D.source,this.hoverSourceClass),this.addClass(D.target,this.hoverTargetClass)):(this.removeClass(D.source,this.hoverSourceClass),this.removeClass(D.target,this.hoverTargetClass)),this.fire(b?Um:Hm,E.jtk.connector.connection,C)}};this._connectorMouseover=n.bind(this,!0),this._connectorMouseout=n.bind(this,!1);var o=function(b,C){var E=ze(C).parentNode;E.jtk&&E.jtk.connector&&this.fire(b?Vm:Ym,E.jtk.connector.connection,C)};this._connectorMouseup=o.bind(this,!0),this._connectorMousedown=o.bind(this,!1),this._connectorContextmenu=function(m){var b=ze(m).parentNode;b.jtk&&b.jtk.connector&&this.fire(Xm,b.jtk.connector.connection,m)}.bind(this);var a=function(b,C,E){!C.defaultPrevented&&C._jsPlumbOverlay==null&&this.fire(b,E.jtk.endpoint,C)};this._endpointClick=a.bind(this,Mm),this._endpointDblClick=a.bind(this,Im);var l=function(b,C){var E=ze(C);E.jtk&&E.jtk.endpoint&&(this.setEndpointHover(E.jtk.endpoint,b),this.fire(b?Nm:Lm,E.jtk.endpoint,C))};this._endpointMouseover=l.bind(this,!0),this._endpointMouseout=l.bind(this,!1);var u=function(b,C){var E=ze(C);E.jtk&&E.jtk.endpoint&&this.fire(b?Rm:Fm,E.jtk.endpoint,C)};this._endpointMouseup=u.bind(this,!0),this._endpointMousedown=u.bind(this,!1);var c=function(m,b){var C=Dt(ze(b),Ot,this.getContainer(),!0),E=C.jtk.overlay;E&&this.fireOverlayMethod(E,m,b)}.bind(this);this._overlayClick=c.bind(this,Be),this._overlayDblClick=c.bind(this,qe),this._overlayTap=c.bind(this,nt),this._overlayDblTap=c.bind(this,Qe);var h=function(b,C){var E=Dt(ze(C),Ot,this.getContainer(),!0),S=E.jtk.overlay;S&&this.setOverlayHover(S,b)};this._overlayMouseover=h.bind(this,!0),this._overlayMouseout=h.bind(this,!1);var d=function(b,C,E){C.defaultPrevented||this.fire(C.detail===1?$l:Pm,E,C)};this._elementClick=d.bind(this,$l);var p=function(b,C,E){C.defaultPrevented||this.fire(zl,E,C)};this._elementTap=p.bind(this,zl);var v=function(b,C,E){C.defaultPrevented||this.fire(Wl,E,C)};this._elementDblTap=v.bind(this,Wl);var y=function(b,C){this.fire(b?Tm:km,ze(C),C)};this._elementMouseenter=y.bind(this,!0),this._elementMouseexit=y.bind(this,!1),this._elementMousemove=function(m){this.fire(Am,ze(m),m)}.bind(this),this._elementMouseup=function(m){this.fire(Om,ze(m),m)}.bind(this),this._elementMousedown=function(m){this.fire(wm,ze(m),m)}.bind(this),this._elementContextmenu=function(m){this.fire(Dm,ze(m),m)}.bind(this)}},{key:"_attachEventDelegates",value:function(){var e=this.getContainer();this.eventManager.on(e,Be,Ot,this._overlayClick),this.eventManager.on(e,qe,Ot,this._overlayDblClick),this.eventManager.on(e,nt,Ot,this._overlayTap),this.eventManager.on(e,Qe,Ot,this._overlayDblTap),this.eventManager.on(e,Be,lt,this._connectorClick),this.eventManager.on(e,qe,lt,this._connectorDblClick),this.eventManager.on(e,nt,lt,this._connectorTap),this.eventManager.on(e,Qe,lt,this._connectorDblTap),this.eventManager.on(e,Be,ln,this._endpointClick),this.eventManager.on(e,qe,ln,this._endpointDblClick),this.eventManager.on(e,Be,this.managedElementsSelector,this._elementClick),this.eventManager.on(e,nt,this.managedElementsSelector,this._elementTap),this.eventManager.on(e,Qe,this.managedElementsSelector,this._elementDblTap),this.eventManager.on(e,tt,lt,this._connectorMouseover),this.eventManager.on(e,et,lt,this._connectorMouseout),this.eventManager.on(e,It,lt,this._connectorContextmenu),this.eventManager.on(e,ee,lt,this._connectorMouseup),this.eventManager.on(e,Q,lt,this._connectorMousedown),this.eventManager.on(e,tt,ln,this._endpointMouseover),this.eventManager.on(e,et,ln,this._endpointMouseout),this.eventManager.on(e,ee,ln,this._endpointMouseup),this.eventManager.on(e,Q,ln,this._endpointMousedown),this.eventManager.on(e,tt,Ot,this._overlayMouseover),this.eventManager.on(e,et,Ot,this._overlayMouseout),this.eventManager.on(e,tt,ge,this._elementMouseenter),this.eventManager.on(e,et,ge,this._elementMouseexit),this.eventManager.on(e,Oe,ge,this._elementMousemove),this.eventManager.on(e,ee,ge,this._elementMouseup),this.eventManager.on(e,Q,ge,this._elementMousedown),this.eventManager.on(e,It,ge,this._elementContextmenu)}},{key:"_detachEventDelegates",value:function(){var e=this.getContainer();e&&(this.eventManager.off(e,Be,this._connectorClick),this.eventManager.off(e,qe,this._connectorDblClick),this.eventManager.off(e,nt,this._connectorTap),this.eventManager.off(e,Qe,this._connectorDblTap),this.eventManager.off(e,Be,this._endpointClick),this.eventManager.off(e,qe,this._endpointDblClick),this.eventManager.off(e,Be,this._overlayClick),this.eventManager.off(e,qe,this._overlayDblClick),this.eventManager.off(e,nt,this._overlayTap),this.eventManager.off(e,Qe,this._overlayDblTap),this.eventManager.off(e,Be,this._elementClick),this.eventManager.off(e,nt,this._elementTap),this.eventManager.off(e,Qe,this._elementDblTap),this.eventManager.off(e,tt,this._connectorMouseover),this.eventManager.off(e,et,this._connectorMouseout),this.eventManager.off(e,It,this._connectorContextmenu),this.eventManager.off(e,ee,this._connectorMouseup),this.eventManager.off(e,Q,this._connectorMousedown),this.eventManager.off(e,tt,this._endpointMouseover),this.eventManager.off(e,et,this._endpointMouseout),this.eventManager.off(e,ee,this._endpointMouseup),this.eventManager.off(e,Q,this._endpointMousedown),this.eventManager.off(e,tt,this._overlayMouseover),this.eventManager.off(e,et,this._overlayMouseout),this.eventManager.off(e,xa,this._elementMouseenter),this.eventManager.off(e,Sa,this._elementMouseexit),this.eventManager.off(e,Oe,this._elementMousemove),this.eventManager.off(e,ee,this._elementMouseup),this.eventManager.off(e,Q,this._elementMousedown),this.eventManager.off(e,It,this._elementContextmenu))}},{key:"setContainer",value:function(e){var n=this;if(e===document||e===document.body)throw new Error("Cannot set document or document.body as container element");this._detachEventDelegates();var o;this.dragManager!=null&&(o=this.dragManager.reset()),this.setAttribute(e,Yl,ke().replace("-",""));var a=this.getContainer();if(a!=null){a.removeAttribute(Yl);var l=gr(a.childNodes).filter(function(u){return u!=null&&(n.hasClass(u,Ea)||n.hasClass(u,Kn)||n.hasClass(u,js)||u.getAttribute&&u.getAttribute(zt)!=null)});X(l,function(u){e.appendChild(u)})}me(ye(i.prototype),"setContainer",this).call(this,e),this.containerType=wo(e),this.eventManager!=null&&this._attachEventDelegates(),this.dragManager!=null&&(this.dragManager.addHandler(new hu(this)),this.dragManager.addHandler(new fu(this,this.dragSelection),this.groupDragOptions),this.elementDragHandler=new Fo(this,this.dragSelection),this.dragManager.addHandler(this.elementDragHandler,this.elementDragOptions),o!=null&&this.dragManager.setFilters(o))}},{key:"reset",value:function(){me(ye(i.prototype),"reset",this).call(this),this._resizeObserver&&this._resizeObserver.disconnect();var e=this.getContainer(),n=e.querySelectorAll([ge,ln,lt,Ot].join(","));X(n,function(o){return o.parentNode&&o.parentNode.removeChild(o)})}},{key:"destroy",value:function(){this._detachEventDelegates(),this.dragManager!=null&&this.dragManager.reset(),this.clearDragSelection(),me(ye(i.prototype),"destroy",this).call(this)}},{key:"unmanage",value:function(e,n){this._resizeObserver!=null&&this._resizeObserver.unobserve(e),this.removeFromDragSelection(e),me(ye(i.prototype),"unmanage",this).call(this,e,n)}},{key:"addToDragSelection",value:function(){for(var e=this,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];X(o,function(l){return e.dragSelection.add(l)})}},{key:"clearDragSelection",value:function(){this.dragSelection.clear()}},{key:"removeFromDragSelection",value:function(){for(var e=this,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];X(o,function(l){return e.dragSelection.remove(l)})}},{key:"toggleDragSelection",value:function(){for(var e=this,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];X(o,function(l){return e.dragSelection.toggle(l)})}},{key:"addToDragGroup",value:function(e){for(var n,o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];(n=this.elementDragHandler).addToDragGroup.apply(n,[e].concat(a))}},{key:"removeFromDragGroup",value:function(){var e;(e=this.elementDragHandler).removeFromDragGroup.apply(e,arguments)}},{key:"setDragGroupState",value:function(e){for(var n,o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];(n=this.elementDragHandler).setDragGroupState.apply(n,[e].concat(a))}},{key:"clearDragGroup",value:function(e){this.elementDragHandler.clearDragGroup(e)}},{key:"consume",value:function(e,n){Ki(e,n)}},{key:"rotate",value:function(e,n,o){var a=this.getId(e);return this._managedElements[a]?(this._managedElements[a].el.style.transform="rotate("+n+"deg)",this._managedElements[a].el.style.transformOrigin="center center",me(ye(i.prototype),"rotate",this).call(this,e,n,o)):{c:new Set,e:new Set}}},{key:"addOverlayClass",value:function(e,n){if(Vt(e))e.instance.addClass(ut(e),n);else if(Bn(e))e.instance.addClass(Ni(e),n);else if(Yt(e))e.instance.addClass(hn(e),n);else throw"Could not add class to overlay of type ["+e.type+"]"}},{key:"removeOverlayClass",value:function(e,n){if(Vt(e))e.instance.removeClass(ut(e),n);else if(Bn(e))e.instance.removeClass(Ni(e),n);else if(Yt(e))e.instance.removeClass(hn(e),n);else throw"Could not remove class from overlay of type ["+e.type+"]"}},{key:"_paintOverlay",value:function(e,n,o){if(Vt(e)){ut(e);var a=e.component.getXY();e.canvas.style.left=a.x+n.d.minx+"px",e.canvas.style.top=a.y+n.d.miny+"px"}else if(Bn(e)){var l=isNaN(n.d.cxy.x)||isNaN(n.d.cxy.y)?"M 0 0":"M"+n.d.hxy.x+","+n.d.hxy.y+" L"+n.d.tail[0].x+","+n.d.tail[0].y+" L"+n.d.cxy.x+","+n.d.cxy.y+" L"+n.d.tail[1].x+","+n.d.tail[1].y+" Z";D0(e,l,n,o)}else if(Yt(e)){hn(e);var u=e.component.getXY();e.canvas.style.left=u.x+n.d.minx+"px",e.canvas.style.top=u.y+n.d.miny+"px"}else throw"Could not paint overlay of type ["+e.type+"]"}},{key:"setOverlayVisible",value:function(e,n){var o=n?"block":"none";function a(l){l!=null&&(l.style.display=o)}Vt(e)?a(ut(e)):Yt(e)?a(hn(e)):Bn(e)&&a(e.path)}},{key:"reattachOverlay",value:function(e,n){Vt(e)?e.instance._appendElement(ut(e),this.getContainer()):Yt(e)?e.instance._appendElement(hn(e),this.getContainer()):Bn(e)&&this._appendElement(Ni(e),n.connector.canvas)}},{key:"setOverlayHover",value:function(e,n){var o;Vt(e)?o=ut(e):Yt(e)?o=hn(e):Bn(e)&&(o=Ni(e)),o!=null&&(this.hoverClass!=null&&(n?this.addClass(o,this.hoverClass):this.removeClass(o,this.hoverClass)),this.setHover(e.component,n))}},{key:"destroyOverlay",value:function(e){if(Vt(e)){var n=ut(e);n.parentNode.removeChild(n),delete e.canvas,delete e.cachedDimensions}else if(jo(e)||Bo(e)||Ho(e))M0(e);else if(Yt(e)){var o=hn(e);o.parentNode.removeChild(o),delete e.canvas,delete e.cachedDimensions}}},{key:"drawOverlay",value:function(e,n,o,a){if(Vt(e)||Yt(e)){var l=La._getDimensions(e);if(l!=null&&l.w!=null&&l.h!=null){var u={x:0,y:0};if(a)u={x:a.x,y:a.y};else if(n instanceof vi){var c=Array.isArray(e.location)?e.location:[e.location,e.location];u={x:c[0]*n.w,y:c[1]*n.h}}else{var h=e.location,d=!1;(_e(e.location)||e.location<0||e.location>1)&&(h=parseInt(""+e.location,10),d=!0),u=n.pointOnPath(h,d)}var p=u.x-l.w/2,v=u.y-l.h/2;return{component:e,d:{minx:p,miny:v,td:l,cxy:u},xmin:p,xmax:p+l.w,ymin:v,ymax:v+l.h}}else return{xmin:0,xmax:0,ymin:0,ymax:0}}else{if(jo(e)||Bo(e)||Ho(e))return e.draw(n,o,a);throw"Could not draw overlay of type ["+e.type+"]"}}},{key:"updateLabel",value:function(e){if(xn(e.label)){var n=e.label(this);n!=null?ut(e).innerText=n:ut(e).innerText=""}else e.labelText==null&&(e.labelText=e.label,e.labelText!=null?ut(e).innerText=e.labelText:ut(e).innerText="")}},{key:"setHover",value:function(e,n){e._hover=n,e instanceof Yn&&e.endpoint!=null?this.setEndpointHover(e,n,-1):e instanceof tr&&e.connector!=null&&this.setConnectorHover(e.connector,n)}},{key:"paintConnector",value:function(e,n,o){I0(this,e,n,o)}},{key:"setConnectorHover",value:function(e,n,o){if(n===!1||!this.currentlyDragging&&!this.isHoverSuspended()){var a=e.canvas;a!=null&&(e.hoverClass!=null&&(n?this.addClass(a,e.hoverClass):this.removeClass(a,e.hoverClass)),n?this.addClass(a,this.hoverClass):this.removeClass(a,this.hoverClass)),e.connection.hoverPaintStyle!=null&&(e.connection.paintStyleInUse=n?e.connection.hoverPaintStyle:e.connection.paintStyle,this._suspendDrawing||this._paintConnection(e.connection)),e.connection.endpoints[0]!==o&&this.setEndpointHover(e.connection.endpoints[0],n,0,!0),e.connection.endpoints[1]!==o&&this.setEndpointHover(e.connection.endpoints[1],n,1,!0)}}},{key:"destroyConnector",value:function(e){e.connector!=null&&Ou(e.connector)}},{key:"addConnectorClass",value:function(e,n){e.canvas&&this.addClass(e.canvas,n)}},{key:"removeConnectorClass",value:function(e,n){e.canvas&&this.removeClass(e.canvas,n)}},{key:"getConnectorClass",value:function(e){return e.canvas?e.canvas.className.baseVal:""}},{key:"setConnectorVisible",value:function(e,n){Au(e,n)}},{key:"applyConnectorType",value:function(e,n){if(e.canvas&&n.cssClass){var o=Array.isArray(n.cssClass)?n.cssClass:[n.cssClass];this.addClass(e.canvas,o.join(" "))}}},{key:"addEndpointClass",value:function(e,n){var o=Ai(e.endpoint);o!=null&&this.addClass(o,n)}},{key:"applyEndpointType",value:function(e,n){if(n.cssClass){var o=Ai(e.endpoint);if(o){var a=Array.isArray(n.cssClass)?n.cssClass:[n.cssClass];this.addClass(o,a.join(" "))}}}},{key:"destroyEndpoint",value:function(e){var n=this.endpointAnchorClassPrefix+(e.currentAnchorClass?"-"+e.currentAnchorClass:"");this.removeClass(e.element,n),Ou(e.endpoint)}},{key:"renderEndpoint",value:function(e,n){var o=ef[e.endpoint.type];o!=null?N0.paint(e.endpoint,o,n):Pe("jsPlumb: no endpoint renderer found for type ["+e.endpoint.type+"]")}},{key:"removeEndpointClass",value:function(e,n){var o=Ai(e.endpoint);o!=null&&this.removeClass(o,n)}},{key:"getEndpointClass",value:function(e){var n=Ai(e.endpoint);return n!=null?n.className:""}},{key:"setEndpointHover",value:function(e,n,o,a){if(e!=null&&(n===!1||!this.currentlyDragging&&!this.isHoverSuspended())){var l=Ai(e.endpoint);if(l!=null&&(e.hoverClass!=null&&(n?this.addClass(l,e.hoverClass):this.removeClass(l,e.hoverClass)),o===0||o===1)){var u=o===0?this.hoverSourceClass:this.hoverTargetClass;n?this.addClass(l,u):this.removeClass(l,u)}if(e.hoverPaintStyle!=null&&(e.paintStyleInUse=n?e.hoverPaintStyle:e.paintStyle,this._suspendDrawing||this.renderEndpoint(e,e.paintStyleInUse)),!a)for(var c=0;c<e.connections.length;c++)this.setConnectorHover(e.connections[c].connector,n,e)}}},{key:"setEndpointVisible",value:function(e,n){Au(e.endpoint,n)}},{key:"setGroupVisible",value:function(e,n){for(var o=e.el.querySelectorAll(ge),a=0;a<o.length;a++)n?this.show(o[a],!0):this.hide(o[a],!0)}},{key:"deleteConnection",value:function(e,n){return e!=null&&e.deleted!==!0?(e.endpoints[0].deleted!==!0&&this.setEndpointHover(e.endpoints[0],!1,0,!0),e.endpoints[1].deleted!==!0&&this.setEndpointHover(e.endpoints[1],!1,1,!0),me(ye(i.prototype),"deleteConnection",this).call(this,e,n)):!1}},{key:"addSourceSelector",value:function(e,n,o){return this.addDragFilter(e),me(ye(i.prototype),"addSourceSelector",this).call(this,e,n,o)}},{key:"removeSourceSelector",value:function(e){this.removeDragFilter(e.selector),me(ye(i.prototype),"removeSourceSelector",this).call(this,e)}},{key:"manage",value:function(e,n,o){if(this.containerType===Pn.SVG&&!Ny(e))throw new Error("ERROR: cannot manage non-svg element when container is an SVG element.");var a=me(ye(i.prototype),"manage",this).call(this,e,n,o);return a!=null&&this._resizeObserver!=null&&this._resizeObserver.observe(a.el),a}}]),i}(tE),rE="circle",sE=function(){Ra(ui.type,{makeNode:function(i,r){return Gt(rE,{cx:i.w/2,cy:i.h/2,r:i.radius})},updateNode:function(i,r){Ft(r,{cx:""+i.w/2,cy:""+i.h/2,r:""+i.radius})}})},ps=function(t){oe(i,t);var s=ae(i);function i(r,e){var n;return H(this,i),n=s.call(this,r,e),f(g(n),"width",void 0),f(g(n),"height",void 0),f(g(n),"type",i.type),e=e||{},n.width=e.width||10,n.height=e.height||10,n}return z(i,null,[{key:"_getParams",value:function(e){return{width:e.width,height:e.height}}}]),i}(vi);f(ps,"type","Rectangle");var oE={type:ps.type,cls:ps,compute:function(s,i,r,e){var n=e.width||s.width,o=e.height||s.height,a=i.curX-n/2,l=i.curY-o/2;return s.x=a,s.y=l,s.w=n,s.h=o,[a,l,n,o]},getParams:function(s){return{width:s.width,height:s.height}}},aE="rect",lE=function(){Ra(ps.type,{makeNode:function(i,r){return Gt(aE,{width:i.w,height:i.h})},updateNode:function(i,r){Ft(r,{width:i.w,height:i.h})}})},vs=function(t){oe(i,t);var s=ae(i);function i(r,e){var n;return H(this,i),n=s.call(this,r,e),f(g(n),"type",i.type),n}return i}(vi);f(vs,"type","Blank");var uE={type:vs.type,cls:vs,compute:function(s,i,r,e){return s.x=i.curX,s.y=i.curY,s.w=10,s.h=0,[i.curX,i.curY,10,0]},getParams:function(s){return{}}},wu={width:10,height:0,fill:"transparent",stroke:"transparent"},cE=function(){Ra(vs.type,{makeNode:function(i,r){return Gt("rect",wu)},updateNode:function(i,r){Ft(r,wu)}})};sE();cE();lE();var Et;(function(t){t[t.top=0]="top",t[t.bottom=1]="bottom"})(Et||(Et={}));var Fa=new Map;Fa.set(Et.top,[Pt.TopRight,Pt.TopLeft]);Fa.set(Et.bottom,[Pt.BottomRight,Pt.BottomLeft]);var hE={deriveAnchor:function(s,i,r,e){return Fa.get(s)[i]}},Ga="jtk-scrollable-list",fE=Gs(Ga),Du="scroll";(function(){function t(s,i){var r=this;H(this,t),this.instance=s,f(this,"options",void 0),f(this,"count",void 0),f(this,"lists",void 0),this.count=0,this.lists={},this.options=i||{},this.instance.bind(Sh,function(e){for(var n=r.instance.getSelector(e.el,fE),o=0;o<n.length;o++)r.addList(n[o])}),this.instance.bind(kh,function(e){r.removeList(e.el)}),this.instance.bind(Eh,function(e,n){if(n==null){var o=r.findParentList(e.target);o!=null&&o.newConnection(e.connection,e.target,1);var a=r.findParentList(e.source);a!=null&&a.newConnection(e.connection,e.source,0)}}),this.instance.bind(Ah,function(e){var n=e.dropEndpoint.element,o=r.findParentList(n);return o==null||n.offsetTop>=o.domElement.scrollTop&&n.offsetTop+n.offsetHeight<=o.domElement.scrollTop+o.domElement.offsetHeight})}return z(t,[{key:"addList",value:function(i,r){var e=U({},hE);U(e,this.options),r=U(e,r||{});var n=[this.instance._instanceIndex,this.count++].join("_");return this.lists[n]=new dE(this.instance,i,r,n),this.lists[n]}},{key:"getList",value:function(i){var r=this.instance.getAttribute(i,Ga);if(r!=null)return this.lists[r]}},{key:"removeList",value:function(i){var r=this.getList(i);r&&(r.destroy(),delete this.lists[r.id])}},{key:"findParentList",value:function(i){for(var r=i.parentNode,e=this.instance.getContainer(),n;r!=null&&r!==e&&r!==document;){if(n=this.getList(r),n!=null)return n;r=r.parentNode}}}]),t})();var dE=function(){function t(s,i,r,e){H(this,t),this.instance=s,this.el=i,this.options=r,this.id=e,f(this,"_scrollHandler",void 0),f(this,"domElement",void 0),f(this,"elId",void 0),this.domElement=i,this.elId=this.instance.getId(i),s.setAttribute(i,Ga,e),this._scrollHandler=this.scrollHandler.bind(this),this.domElement._jsPlumbScrollHandler=this._scrollHandler,s.on(i,Du,this._scrollHandler),this._scrollHandler()}return z(t,[{key:"deriveAnchor",value:function(i,r,e,n){return this.options.anchor?this.options.anchor:this.options.deriveAnchor(i,r,e,n)}},{key:"deriveEndpoint",value:function(i,r,e,n){return this.options.deriveEndpoint?this.options.deriveEndpoint(i,r,e,n):this.options.endpoint?this.options.endpoint:e.endpoint.type}},{key:"newConnection",value:function(i,r,e){r.offsetTop<this.el.scrollTop?this._proxyConnection(r,i,e,Et.top):r.offsetTop+r.offsetHeight>this.el.scrollTop+this.domElement.offsetHeight&&this._proxyConnection(r,i,e,Et.bottom)}},{key:"scrollHandler",value:function(){for(var i=this,r=this.instance.getSelector(this.el,ge),e=function(a){if(r[a].offsetTop<i.el.scrollTop)r[a]._jsPlumbProxies=r[a]._jsPlumbProxies||[],i.instance.select({source:r[a]}).each(function(u){i._proxyConnection(r[a],u,0,Et.top)}),i.instance.select({target:r[a]}).each(function(u){i._proxyConnection(r[a],u,1,Et.top)});else if(r[a].offsetTop+r[a].offsetHeight>i.el.scrollTop+i.domElement.offsetHeight)r[a]._jsPlumbProxies=r[a]._jsPlumbProxies||[],i.instance.select({source:r[a]}).each(function(u){i._proxyConnection(r[a],u,0,Et.bottom)}),i.instance.select({target:r[a]}).each(function(u){i._proxyConnection(r[a],u,1,Et.bottom)});else if(r[a]._jsPlumbProxies){for(var l=0;l<r[a]._jsPlumbProxies.length;l++)i.instance.unproxyConnection(r[a]._jsPlumbProxies[l][0],r[a]._jsPlumbProxies[l][1]);delete r[a]._jsPlumbProxies}i.instance.revalidate(r[a])},n=0;n<r.length;n++)e(n)}},{key:"_proxyConnection",value:function(i,r,e,n){var o=this;this.instance.proxyConnection(r,e,this.domElement,function(a,l){return o.deriveEndpoint(n,l,r.endpoints[l],r)},function(a,l){return o.deriveAnchor(n,l,r.endpoints[l],r)}),i._jsPlumbProxies=i._jsPlumbProxies||[],i._jsPlumbProxies.push([r,e])}},{key:"destroy",value:function(){this.instance.off(this.el,Du,this._scrollHandler),delete this.domElement._jsPlumbScrollHandler;for(var i=this.instance.getSelector(this.el,ge),r=0;r<i.length;r++)if(i[r]._jsPlumbProxies){for(var e=0;e<i[r]._jsPlumbProxies.length;e++)this.instance.unproxyConnection(i[r]._jsPlumbProxies[e][0],i[r]._jsPlumbProxies[e][1]);delete i[r]._jsPlumbProxies}}}]),t}(),Mu=1e-10;function Iu(t){var s=Math.floor(t),i=Math.ceil(t);return t-s<Mu?s:i-t<Mu?i:t}var ja=function(t){oe(i,t);var s=ae(i);function i(r){var e;H(this,i),e=s.call(this,r),f(g(e),"type",i.segmentType),f(g(e),"cx",void 0),f(g(e),"cy",void 0),f(g(e),"radius",void 0),f(g(e),"anticlockwise",void 0),f(g(e),"startAngle",void 0),f(g(e),"endAngle",void 0),f(g(e),"sweep",void 0),f(g(e),"length",void 0),f(g(e),"circumference",void 0),f(g(e),"frac",void 0),e.cx=r.cx,e.cy=r.cy,e.radius=r.r,e.anticlockwise=r.ac,r.startAngle&&r.endAngle?(e.startAngle=r.startAngle,e.endAngle=r.endAngle,e.x1=e.cx+e.radius*Math.cos(e.startAngle),e.y1=e.cy+e.radius*Math.sin(e.startAngle),e.x2=e.cx+e.radius*Math.cos(e.endAngle),e.y2=e.cy+e.radius*Math.sin(e.endAngle)):(e.startAngle=e._calcAngle(e.x1,e.y1),e.endAngle=e._calcAngle(e.x2,e.y2)),e.endAngle<0&&(e.endAngle+=un),e.startAngle<0&&(e.startAngle+=un);var n=e.endAngle<e.startAngle?e.endAngle+un:e.endAngle;return e.sweep=Math.abs(n-e.startAngle),e.anticlockwise&&(e.sweep=un-e.sweep),e.circumference=2*Math.PI*e.radius,e.frac=e.sweep/un,e.length=e.circumference*e.frac,e.extents={xmin:e.cx-e.radius,xmax:e.cx+e.radius,ymin:e.cy-e.radius,ymax:e.cy+e.radius},e}return z(i,[{key:"_calcAngle",value:function(e,n){return g_({x:this.cx,y:this.cy},{x:e,y:n})}},{key:"_calcAngleForLocation",value:function(e,n){if(e.anticlockwise){var o=e.startAngle<e.endAngle?e.startAngle+un:e.startAngle,a=Math.abs(o-e.endAngle);return o-a*n}else{var l=e.endAngle<e.startAngle?e.endAngle+un:e.endAngle,u=Math.abs(l-e.startAngle);return e.startAngle+u*n}}},{key:"getPath",value:function(e){var n=this.sweep>Math.PI?1:0,o=this.anticlockwise?0:1;return(e?"M"+this.x1+" "+this.y1+" ":"")+"A "+this.radius+" "+this.radius+" 0 "+n+","+o+" "+this.x2+" "+this.y2}},{key:"getLength",value:function(){return this.length}},{key:"pointOnPath",value:function(e,n){if(e===0)return{x:this.x1,y:this.y1,theta:this.startAngle};if(e===1)return{x:this.x2,y:this.y2,theta:this.endAngle};n&&(e=e/length);var o=this._calcAngleForLocation(this,e),a=this.cx+this.radius*Math.cos(o),l=this.cy+this.radius*Math.sin(o);return{x:Iu(a),y:Iu(l),theta:o}}},{key:"gradientAtPoint",value:function(e,n){var o=this.pointOnPath(e,n),a=v_({x:this.cx,y:this.cy},o);return!this.anticlockwise&&(a===1/0||a===-1/0)&&(a*=-1),a}},{key:"pointAlongPathFrom",value:function(e,n,o){var a=this.pointOnPath(e,o),l=n/this.circumference*2*Math.PI,u=this.anticlockwise?-1:1,c=a.theta+u*l,h=this.cx+this.radius*Math.cos(c),d=this.cy+this.radius*Math.sin(c);return{x:h,y:d}}}]),i}(Pa);f(ja,"segmentType","Arc");var tf=function(t){oe(i,t);var s=ae(i);function i(r,e){var n;return H(this,i),n=s.call(this,r,e),n.connection=r,f(g(n),"showLoopback",void 0),f(g(n),"curviness",void 0),f(g(n),"margin",void 0),f(g(n),"proximityLimit",void 0),f(g(n),"orientation",void 0),f(g(n),"loopbackRadius",void 0),f(g(n),"clockwise",void 0),f(g(n),"isLoopbackCurrently",void 0),f(g(n),"geometry",null),e=e||{},n.showLoopback=e.showLoopback!==!1,n.curviness=e.curviness||10,n.margin=e.margin||5,n.proximityLimit=e.proximityLimit||80,n.clockwise=e.orientation&&e.orientation==="clockwise",n.loopbackRadius=e.loopbackRadius||25,n.isLoopbackCurrently=!1,n}return z(i,[{key:"getDefaultStubs",value:function(){return[0,0]}},{key:"_compute",value:function(e,n){var o=n.sourcePos,a=n.targetPos,l=Math.abs(o.curX-a.curX),u=Math.abs(o.curY-a.curY);if(!this.showLoopback||n.sourceEndpoint.elementId!==n.targetEndpoint.elementId)this.isLoopbackCurrently=!1,this._computeBezier(e,n,o,a,l,u);else{this.isLoopbackCurrently=!0;var c=n.sourcePos.curX,h=n.sourcePos.curY-this.margin,d=c,p=h-this.loopbackRadius,v=d-this.loopbackRadius,y=p-this.loopbackRadius;l=2*this.loopbackRadius,u=2*this.loopbackRadius,e.points[0]=v,e.points[1]=y,e.points[2]=l,e.points[3]=u,this._addSegment(ja,{loopback:!0,x1:c-v+4,y1:h-y,startAngle:0,endAngle:2*Math.PI,r:this.loopbackRadius,ac:!this.clockwise,x2:c-v-4,y2:h-y,cx:d-v,cy:p-y})}}},{key:"exportGeometry",value:function(){return this.geometry==null?null:{controlPoints:[U({},this.geometry.controlPoints[0]),U({},this.geometry.controlPoints[1])],source:U({},this.geometry.source),target:U({},this.geometry.target)}}},{key:"transformGeometry",value:function(e,n,o){return{controlPoints:[{x:e.controlPoints[0].x+n,y:e.controlPoints[0].y+o},{x:e.controlPoints[1].x+n,y:e.controlPoints[1].y+o}],source:this.transformAnchorPlacement(e.source,n,o),target:this.transformAnchorPlacement(e.target,n,o)}}},{key:"importGeometry",value:function(e){return e!=null?e.controlPoints==null||e.controlPoints.length!=2?(Pe("jsPlumb Bezier: cannot import geometry; controlPoints missing or does not have length 2"),this.setGeometry(null,!0),!1):e.controlPoints[0].x==null||e.controlPoints[0].y==null||e.controlPoints[1].x==null||e.controlPoints[1].y==null?(Pe("jsPlumb Bezier: cannot import geometry; controlPoints malformed"),this.setGeometry(null,!0),!1):e.source==null||e.source.curX==null||e.source.curY==null?(Pe("jsPlumb Bezier: cannot import geometry; source missing or malformed"),this.setGeometry(null,!0),!1):e.target==null||e.target.curX==null||e.target.curY==null?(Pe("jsPlumb Bezier: cannot import geometry; target missing or malformed"),this.setGeometry(null,!0),!1):(this.setGeometry(e,!1),!0):!1}}]),i}(Hs),bt={subtract:function(s,i){return{x:s.x-i.x,y:s.y-i.y}},dotProduct:function(s,i){return s.x*i.x+s.y*i.y},square:function(s){return Math.sqrt(s.x*s.x+s.y*s.y)},scale:function(s,i){return{x:s.x*i,y:s.y*i}}},nf=64,pE=Math.pow(2,-nf-1);function vE(t,s){for(var i=[],r=yE(t,s),e=s.length-1,n=2*e-1,o=Uo(r,n,i,0),a=bt.subtract(t,s[0]),l=bt.square(a),u=0,c,h=0;h<o;h++)a=bt.subtract(t,Ba(s,e,i[h],null,null)),c=bt.square(a),c<l&&(l=c,u=i[h]);return a=bt.subtract(t,s[e]),c=bt.square(a),c<l&&(l=c,u=1),{location:u,distance:l}}function gE(t,s){var i=vE(t,s);return{point:Ba(s,s.length-1,i.location,null,null),location:i.location}}function yE(t,s){for(var i=s.length-1,r=2*i-1,e=[],n=[],o=[],a=[],l=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],u=0;u<=i;u++)e[u]=bt.subtract(s[u],t);for(var c=0;c<=i-1;c++)n[c]=bt.subtract(s[c+1],s[c]),n[c]=bt.scale(n[c],3);for(var h=0;h<=i-1;h++)for(var d=0;d<=i;d++)o[h]||(o[h]=[]),o[h][d]=bt.dotProduct(n[h],e[d]);for(var p=0;p<=r;p++)a[p]||(a[p]=[]),a[p].y=0,a[p].x=parseFloat(""+p)/r;for(var v=i,y=i-1,m=0;m<=v+y;m++)for(var b=Math.max(0,m-y),C=Math.min(m,v),E=b;E<=C;E++){var S=m-E;a[E+S].y+=o[S][E]*l[S][E]}return a}function Uo(t,s,i,r){var e=[],n=[],o,a,l=[],u=[];switch(mE(t,s)){case 0:return 0;case 1:{if(r>=nf)return i[0]=(t[0].x+t[s].x)/2,1;if(_E(t,s))return i[0]=EE(t,s),1;break}}Ba(t,s,.5,e,n),o=Uo(e,s,l,r+1),a=Uo(n,s,u,r+1);for(var c=0;c<o;c++)i[c]=l[c];for(var h=0;h<a;h++)i[h+o]=u[h];return o+a}function mE(t,s){var i=0,r,e;r=e=ns(t[0].y);for(var n=1;n<=s;n++)r=ns(t[n].y),r!=e&&i++,e=r;return i}function _E(t,s){var i,r,e,n,o,a,l,u,c,h,d,p,v,y,m,b;a=t[0].y-t[s].y,l=t[s].x-t[0].x,u=t[0].x*t[s].y-t[s].x*t[0].y;var C,E;C=E=0;for(var S=1;S<s;S++){var D=a*t[S].x+l*t[S].y+u;D>C?C=D:D<E&&(E=D)}return d=0,p=1,v=0,y=a,m=l,b=u-C,c=d*m-y*p,h=1/c,r=(p*b-m*v)*h,y=a,m=l,b=u-E,c=d*m-y*p,h=1/c,e=(p*b-m*v)*h,n=Math.min(r,e),o=Math.max(r,e),i=o-n,i<pE?1:0}function EE(t,s){var i=1,r=0,e=t[s].x-t[0].x,n=t[s].y-t[0].y,o=t[0].x-0,a=t[0].y-0,l=e*r-n*i,u=1/l,c=(e*a-n*o)*u;return 0+i*c}function Ba(t,s,i,r,e){for(var n=[[]],o=0;o<=s;o++)n[0][o]=t[o];for(var a=1;a<=s;a++)for(var l=0;l<=s-a;l++)n[a]||(n[a]=[]),n[a][l]||(n[a][l]={}),n[a][l].x=(1-i)*n[a-1][l].x+i*n[a-1][l+1].x,n[a][l].y=(1-i)*n[a-1][l].y+i*n[a-1][l+1].y;if(r!=null)for(var u=0;u<=s;u++)r[u]=n[u][0];if(e!=null)for(var c=0;c<=s;c++)e[c]=n[s-c][c];return n[s][0]}function bE(t,s){var i=[];t--;for(var r=0;r<=t;r++)i.push(CE(r/t,s));return i}function CE(t,s){var i={x:0,y:0};if(t===0)return s[0];var r=s.length-1;if(t===1)return s[r];var e=s,n=1-t;if(r===0)return s[0];if(r===1)return{x:n*e[0].x+t*e[1].x,y:n*e[0].y+t*e[1].y};if(4>r){var o=n*n,a=t*t,l=0,u,c,h;return r===2?(e=[e[0],e[1],e[2],i],u=o,c=2*(n*t),h=a):r===3&&(u=o*n,c=3*(o*t),h=3*(n*a),l=t*a),{x:u*e[0].x+c*e[1].x+h*e[2].x+l*e[3].x,y:u*e[0].y+c*e[1].y+h*e[2].y+l*e[3].y}}else return i}function xE(t){var s=0;if(!sf(t))for(var i=16,r=bE(i,t),e=0;e<i-1;e++){var n=r[e],o=r[e+1];s+=rf(n,o)}return s}var Lu=new Map;function SE(t){var s=Lu.get(t);if(!s){s=[];var i=function(){return function(p){return Math.pow(p,t)}},r=function(){return function(p){return Math.pow(1-p,t)}},e=function(p){return function(v){return p}},n=function(){return function(p){return p}},o=function(){return function(p){return 1-p}},a=function(p){return function(v){for(var y=1,m=0;m<p.length;m++)y=y*p[m](v);return y}};s.push(i());for(var l=1;l<t;l++){for(var u=[e(t)],c=0;c<t-l;c++)u.push(n());for(var h=0;h<l;h++)u.push(o());s.push(a(u))}s.push(r()),Lu.set(t,s)}return s}function nr(t,s){for(var i=SE(t.length-1),r=0,e=0,n=0;n<t.length;n++)r=r+t[n].x*i[n](s),e=e+t[n].y*i[n](s);return{x:r,y:e}}function rf(t,s){return Math.sqrt(Math.pow(t.x-s.x,2)+Math.pow(t.y-s.y,2))}function sf(t){return t[0].x===t[1].x&&t[0].y===t[1].y}function of(t,s,i){if(sf(t))return{point:t[0],location:s};for(var r=nr(t,s),e=0,n=s,o=i>0?1:-1,a=null;e<Math.abs(i);)n+=.005*o,a=nr(t,n),e+=rf(a,r),r=a;return{point:a,location:n}}function PE(t,s,i){return of(t,s,i).point}function kE(t,s,i){return of(t,s,i).location}function TE(t,s){var i=nr(t,s),r=nr(t.slice(0,t.length-1),s),e=r.y-i.y,n=r.x-i.x;return e===0?1/0:Math.atan(e/n)}function AE(t,s,i,r,e){var n=r-s,o=t-i,a=t*(s-r)+s*(i-t),l=OE(e),u=[n*l[0][0]+o*l[1][0],n*l[0][1]+o*l[1][1],n*l[0][2]+o*l[1][2],n*l[0][3]+o*l[1][3]+a],c=wE.apply(null,u),h=[];if(c!=null)for(var d=0;d<3;d++){var p=c[d],v=Math.pow(p,2),y=Math.pow(p,3),m={x:l[0][0]*y+l[0][1]*v+l[0][2]*p+l[0][3],y:l[1][0]*y+l[1][1]*v+l[1][2]*p+l[1][3]},b=void 0;i-t!==0?b=(m[0]-t)/(i-t):b=(m[1]-s)/(r-s),p>=0&&p<=1&&b>=0&&b<=1&&h.push(m)}return h}function Nu(t,s){return[-t[0][s]+3*t[1][s]+-3*t[2][s]+t[3][s],3*t[0][s]-6*t[1][s]+3*t[2][s],-3*t[0][s]+3*t[1][s],t[0][s]]}function OE(t){return[Nu(t,"x"),Nu(t,"y")]}function wE(t,s,i,r){var e=s/t,n=i/t,o=r/t,a=(3*n-Math.pow(e,2))/9,l=(9*e*n-27*o-2*Math.pow(e,3))/54,u=Math.pow(a,3)+Math.pow(l,2),c,h,d=[0,0,0];if(u>=0)c=ns(l+Math.sqrt(u))*Math.pow(Math.abs(l+Math.sqrt(u)),1/3),h=ns(l-Math.sqrt(u))*Math.pow(Math.abs(l-Math.sqrt(u)),1/3),d[0]=-e/3+(c+h),d[1]=-e/3-(c+h)/2,d[2]=-e/3-(c+h)/2,Math.abs(Math.sqrt(3)*(c-h)/2)!==0&&(d[1]=-1,d[2]=-1);else{var p=Math.acos(l/Math.sqrt(-Math.pow(a,3)));d[0]=2*Math.sqrt(-a)*Math.cos(p/3)-e/3,d[1]=2*Math.sqrt(-a)*Math.cos((p+2*Math.PI)/3)-e/3,d[2]=2*Math.sqrt(-a)*Math.cos((p+4*Math.PI)/3)-e/3}for(var v=0;v<3;v++)(d[v]<0||d[v]>1)&&(d[v]=-1);return d}var Ha=function(t){oe(i,t);var s=ae(i);function i(r){var e;return H(this,i),e=s.call(this,r),f(g(e),"curve",void 0),f(g(e),"cp1x",void 0),f(g(e),"cp1y",void 0),f(g(e),"cp2x",void 0),f(g(e),"cp2y",void 0),f(g(e),"length",0),f(g(e),"type",i.segmentType),e.cp1x=r.cp1x,e.cp1y=r.cp1y,e.cp2x=r.cp2x,e.cp2y=r.cp2y,e.x1=r.x1,e.x2=r.x2,e.y1=r.y1,e.y2=r.y2,e.curve=[{x:e.x1,y:e.y1},{x:e.cp1x,y:e.cp1y},{x:e.cp2x,y:e.cp2y},{x:e.x2,y:e.y2}],e.extents={xmin:Math.min(e.x1,e.x2,e.cp1x,e.cp2x),ymin:Math.min(e.y1,e.y2,e.cp1y,e.cp2y),xmax:Math.max(e.x1,e.x2,e.cp1x,e.cp2x),ymax:Math.max(e.y1,e.y2,e.cp1y,e.cp2y)},e}return z(i,[{key:"getPath",value:function(e){return(e?"M "+this.x2+" "+this.y2+" ":"")+"C "+this.cp2x+" "+this.cp2y+" "+this.cp1x+" "+this.cp1y+" "+this.x1+" "+this.y1}},{key:"pointOnPath",value:function(e,n){return e=i._translateLocation(this.curve,e,n),nr(this.curve,e)}},{key:"gradientAtPoint",value:function(e,n){return e=i._translateLocation(this.curve,e,n),TE(this.curve,e)}},{key:"pointAlongPathFrom",value:function(e,n,o){return e=i._translateLocation(this.curve,e,o),PE(this.curve,e,n)}},{key:"getLength",value:function(){return(this.length==null||this.length===0)&&(this.length=xE(this.curve)),this.length}},{key:"findClosestPointOnPath",value:function(e,n){var o=gE({x:e,y:n},this.curve);return{d:Math.sqrt(Math.pow(o.point.x-e,2)+Math.pow(o.point.y-n,2)),x:o.point.x,y:o.point.y,l:1-o.location,s:this,x1:null,y1:null,x2:null,y2:null}}},{key:"lineIntersection",value:function(e,n,o,a){return AE(e,n,o,a,this.curve)}}],[{key:"_translateLocation",value:function(e,n,o){return o&&(n=kE(e,n>0?0:1,n)),n}}]),i}(Pa);f(Ha,"segmentType","Bezier");var Vo=function(t){oe(i,t);var s=ae(i);function i(r,e){var n;return H(this,i),n=s.call(this,r,e),n.connection=r,f(g(n),"type",i.type),f(g(n),"majorAnchor",void 0),f(g(n),"minorAnchor",void 0),e=e||{},n.majorAnchor=e.curviness||150,n.minorAnchor=10,n}return z(i,[{key:"getCurviness",value:function(){return this.majorAnchor}},{key:"_findControlPoint",value:function(e,n,o,a,l){var u=a[0]!==l[0]||a[1]===l[1],c={x:0,y:0};return u?(l[0]===0?c.x=o.curX<n.curX?e.x+this.minorAnchor:e.x-this.minorAnchor:c.x=e.x+this.majorAnchor*l[0],l[1]===0?c.y=o.curY<n.curY?e.y+this.minorAnchor:e.y-this.minorAnchor:c.y=e.y+this.majorAnchor*a[1]):(a[0]===0?c.x=n.curX<o.curX?e.x+this.minorAnchor:e.x-this.minorAnchor:c.x=e.x-this.majorAnchor*a[0],a[1]===0?c.y=n.curY<o.curY?e.y+this.minorAnchor:e.y-this.minorAnchor:c.y=e.y+this.majorAnchor*l[1]),c}},{key:"_computeBezier",value:function(e,n,o,a,l,u){var c,h,d=o.curX<a.curX?l:0,p=o.curY<a.curY?u:0,v=o.curX<a.curX?0:l,y=o.curY<a.curY?0:u;this.edited!==!0?(c=this._findControlPoint({x:d,y:p},o,a,e.so,e.to),h=this._findControlPoint({x:v,y},a,o,e.to,e.so)):(c=this.geometry.controlPoints[0],h=this.geometry.controlPoints[1]),this.geometry={controlPoints:[c,h],source:n.sourcePos,target:n.targetPos},this._addSegment(Ha,{x1:d,y1:p,x2:v,y2:y,cp1x:c.x,cp1y:c.y,cp2x:h.x,cp2y:h.y})}}]),i}(tf);f(Vo,"type","Bezier");function DE(t,s,i,r){return t<=i&&r<=s?1:t<=i&&s<=r?2:i<=t&&r>=s?3:4}function ME(t,s,i,r,e,n,o,a,l){if(a<=l)return{x:t,y:s};if(i===1)return r.curY<=0&&e.curY>=1?{x:t+(r.x<.5?-1*n:n),y:s}:r.curX>=1&&e.curX<=0?{x:t,y:s+(r.y<.5?-1*o:o)}:{x:t+-1*n,y:s+-1*o};if(i===2)return r.curY>=1&&e.curY<=0?{x:t+(r.x<.5?-1*n:n),y:s}:r.curX>=1&&e.curX<=0?{x:t,y:s+(r.y<.5?-1*o:o)}:{x:t+n,y:s+-1*o};if(i===3)return r.curY>=1&&e.curY<=0?{x:t+(r.x<.5?-1*n:n),y:s}:r.curX<=0&&e.curX>=1?{x:t,y:s+(r.y<.5?-1*o:o)}:{x:t+-1*n,y:s+-1*o};if(i===4)return r.curY<=0&&e.curY>=1?{x:t+(r.x<.5?-1*n:n),y:s}:r.curX<=0&&e.curX>=1?{x:t,y:s+(r.y<.5?-1*o:o)}:{x:t+n,y:s+-1*o}}var Yo=function(t){oe(i,t);var s=ae(i);function i(r,e){var n;return H(this,i),n=s.call(this,r,e),n.connection=r,f(g(n),"type",i.type),f(g(n),"_controlPoint",void 0),n.curviness=e.curviness||10,n.margin=e.margin||5,n.proximityLimit=e.proximityLimit||80,n.clockwise=e.orientation&&e.orientation==="clockwise",n}return z(i,[{key:"_computeBezier",value:function(e,n,o,a,l,u){var c=o.curX<a.curX?0:l,h=o.curY<a.curY?0:u,d=o.curX<a.curX?l:0,p=o.curY<a.curY?u:0;if(o.x===0&&(c-=this.margin),o.x===1&&(c+=this.margin),o.y===0&&(h-=this.margin),o.y===1&&(h+=this.margin),a.x===0&&(d-=this.margin),a.x===1&&(d+=this.margin),a.y===0&&(p-=this.margin),a.y===1&&(p+=this.margin),this.edited!==!0){var v=(c+d)/2,y=(h+p)/2,m=DE(c,h,d,p),b=Math.sqrt(Math.pow(d-c,2)+Math.pow(p-h,2));this._controlPoint=ME(v,y,m,n.sourcePos,n.targetPos,this.curviness,this.curviness,b,this.proximityLimit)}else this._controlPoint=this.geometry.controlPoints[0];var C,E,S,D;C=this._controlPoint.x,E=this._controlPoint.x,S=this._controlPoint.y,D=this._controlPoint.y,this.geometry={controlPoints:[this._controlPoint,this._controlPoint],source:n.sourcePos,target:n.targetPos},this._addSegment(Ha,{x1:d,y1:p,x2:c,y2:h,cp1x:C,cp1y:S,cp2x:E,cp2y:D})}}]),i}(tf);f(Yo,"type","StateMachine");ar.register(Vo.type,Vo);ar.register(Yo.type,Yo);function Ru(t){return t<0?-1:t===0?0:1}function Fu(t){return[Ru(t[2]-t[0]),Ru(t[3]-t[1])]}function Gu(t){return Math.sqrt(Math.pow(t[0]-t[2],2)+Math.pow(t[1]-t[3],2))}function ju(t){var s=[];return s.push.apply(s,t),s}var Xo=function(t){oe(i,t);var s=ae(i);function i(r,e){var n;return H(this,i),n=s.call(this,r,e),n.connection=r,f(g(n),"type",i.type),f(g(n),"internalSegments",[]),f(g(n),"midpoint",void 0),f(g(n),"alwaysRespectStubs",void 0),f(g(n),"cornerRadius",void 0),f(g(n),"lastx",void 0),f(g(n),"lasty",void 0),f(g(n),"lastOrientation",void 0),f(g(n),"loopbackRadius",void 0),f(g(n),"isLoopbackCurrently",void 0),n.midpoint=e.midpoint==null||isNaN(e.midpoint)?.5:e.midpoint,n.cornerRadius=e.cornerRadius!=null?e.cornerRadius:0,n.alwaysRespectStubs=e.alwaysRespectStubs===!0,n.lastx=null,n.lasty=null,n.lastOrientation=null,n.loopbackRadius=e.loopbackRadius||25,n.isLoopbackCurrently=!1,n}return z(i,[{key:"getDefaultStubs",value:function(){return[30,30]}},{key:"addASegment",value:function(e,n,o){if(!(this.lastx===e&&this.lasty===n)){var a=this.lastx==null?o.sx:this.lastx,l=this.lasty==null?o.sy:this.lasty,u=a===e?"v":"h";this.lastx=e,this.lasty=n,this.internalSegments.push([a,l,e,n,u])}}},{key:"writeSegments",value:function(e){for(var n=null,o,a,l,u=0;u<this.internalSegments.length-1;u++){if(n=n||ju(this.internalSegments[u]),o=ju(this.internalSegments[u+1]),a=Fu(n),l=Fu(o),this.cornerRadius>0&&n[4]!==o[4]){var c=Math.min(Gu(n),Gu(o)),h=Math.min(this.cornerRadius,c/2);n[2]-=a[0]*h,n[3]-=a[1]*h,o[0]+=l[0]*h,o[1]+=l[1]*h;var d=a[1]===l[0]&&l[0]===1||a[1]===l[0]&&l[0]===0&&a[0]!==l[1]||a[1]===l[0]&&l[0]===-1,p=o[1]>n[3]?1:-1,v=o[0]>n[2]?1:-1,y=p===v,m=y&&d||!y&&!d?o[0]:n[2],b=y&&d||!y&&!d?n[3]:o[1];this._addSegment(bn,{x1:n[0],y1:n[1],x2:n[2],y2:n[3]}),this._addSegment(ja,{r:h,x1:n[2],y1:n[3],x2:o[0],y2:o[1],cx:m,cy:b,ac:d})}else this._addSegment(bn,{x1:n[0],y1:n[1],x2:n[2],y2:n[3]});n=o}o!=null&&this._addSegment(bn,{x1:o[0],y1:o[1],x2:o[2],y2:o[3]})}},{key:"_compute",value:function(e,n){var o=this;this.internalSegments.length=0,this.lastx=null,this.lasty=null,this.lastOrientation=null;var a=function(L){return[e.startStubX,e.startStubY,e.endStubX,e.endStubY]},l={perpendicular:a,orthogonal:a,opposite:function(L){var T=e,q=L==="x"?0:1,W={x:function(){return T.so[q]===1&&(T.startStubX>T.endStubX&&T.tx>T.startStubX||T.sx>T.endStubX&&T.tx>T.sx)||T.so[q]===-1&&(T.startStubX<T.endStubX&&T.tx<T.startStubX||T.sx<T.endStubX&&T.tx<T.sx)},y:function(){return T.so[q]===1&&(T.startStubY>T.endStubY&&T.ty>T.startStubY||T.sy>T.endStubY&&T.ty>T.sy)||T.so[q]===-1&&(T.startStubY<T.endStubY&&T.ty<T.startStubY||T.sy<T.endStubY&&T.ty<T.sy)}};return!o.alwaysRespectStubs&&W[L]()?{x:[(e.sx+e.tx)/2,e.startStubY,(e.sx+e.tx)/2,e.endStubY],y:[e.startStubX,(e.sy+e.ty)/2,e.endStubX,(e.sy+e.ty)/2]}[L]:[e.startStubX,e.startStubY,e.endStubX,e.endStubY]}},u=l[e.anchorOrientation](e.sourceAxis),c=e.sourceAxis==="x"?0:1,h=e.sourceAxis==="x"?1:0,d=u[c],p=u[h],v=u[c+2],y=u[h+2];this.addASegment(u[0],u[1],e);var m=e.startStubX+(e.endStubX-e.startStubX)*this.midpoint,b=e.startStubY+(e.endStubY-e.startStubY)*this.midpoint,C={x:[0,1],y:[1,0]},E={perpendicular:function(L,T,q,W,te){var R=e,he={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]},gt={x:[[R.startStubX,R.endStubX],null,[R.endStubX,R.startStubX]],y:[[R.startStubY,R.endStubY],null,[R.endStubY,R.startStubY]]},st={x:[[m,R.startStubY],[m,R.endStubY]],y:[[R.startStubX,b],[R.endStubX,b]]},se={x:[[R.endStubX,R.startStubY]],y:[[R.startStubX,R.endStubY]]},fe={x:[[R.startStubX,R.endStubY],[R.endStubX,R.endStubY]],y:[[R.endStubX,R.startStubY],[R.endStubX,R.endStubY]]},le={x:[[R.startStubX,b],[R.endStubX,b],[R.endStubX,R.endStubY]],y:[[m,R.startStubY],[m,R.endStubY],[R.endStubX,R.endStubY]]},Ke={x:[R.startStubY,R.endStubY],y:[R.startStubX,R.endStubX]},On=C[L][0],ot=C[L][1],Ue=R.so[On]+1,lr=R.to[ot]+1,gi=R.to[ot]===-1&&Ke[L][1]<Ke[L][0]||R.to[ot]===1&&Ke[L][1]>Ke[L][0],ur=gt[L][Ue][0],Je=gt[L][Ue][1],Ze=he[L][Ue][lr];if(R.segment===Ze[3]||R.segment===Ze[2]&&gi)return st[L];if(R.segment===Ze[2]&&Je<ur)return se[L];if(R.segment===Ze[2]&&Je>=ur||R.segment===Ze[1]&&!gi)return le[L];if(R.segment===Ze[0]||R.segment===Ze[1]&&gi)return fe[L]},orthogonal:function(L,T,q,W,te){var R=e,he={x:R.so[0]===-1?Math.min(T,W):Math.max(T,W),y:R.so[1]===-1?Math.min(T,W):Math.max(T,W)}[L];return{x:[[he,q],[he,te],[W,te]],y:[[q,he],[te,he],[te,W]]}[L]},opposite:function(L,T,q,W,te){var R=e,he={x:"y",y:"x"}[L],gt={x:"h",y:"w"}[L],st=R["is"+L.toUpperCase()+"GreaterThanStubTimes2"];if(n.sourceEndpoint.elementId===n.targetEndpoint.elementId){var se=q+(1-n.sourceEndpoint._anchor.computedPosition[he])*n.sourceInfo[gt]+o.maxStub;return{x:[[T,se],[W,se]],y:[[se,T],[se,W]]}[L]}else{if(!st||R.so[c]===1&&T>W||R.so[c]===-1&&T<W)return{x:[[T,b],[W,b]],y:[[m,T],[m,W]]}[L];if(R.so[c]===1&&T<W||R.so[c]===-1&&T>W)return{x:[[m,R.sy],[m,R.ty]],y:[[R.sx,b],[R.tx,b]]}[L]}}},S=E[e.anchorOrientation](e.sourceAxis,d,p,v,y);if(S)for(var D=0;D<S.length;D++)this.addASegment(S[D][0],S[D][1],e);this.addASegment(u[2],u[3],e),this.addASegment(e.tx,e.ty,e),this.writeSegments(e)}},{key:"transformGeometry",value:function(e,n,o){return e}}]),i}(Hs);f(Xo,"type","Flowchart");ar.register(Xo.type,Xo);Qt.registerHandler(B0);Qt.registerHandler(oE);Qt.registerHandler(uE);ar.register(ds.type,ds);function IE(){var t=Math.floor(Math.random()*2e3),s=Math.floor(Math.random()*2e3);return{clientX:t,clientY:s,screenX:t,screenY:s,pageX:t,pageY:s}}var Hn={clientX:5e4,clientY:5e4,screenX:5e4,screenY:5e4,pageX:5e4,pageY:5e4};for(var kr=0;kr<256;kr++)(kr<16?"0":"")+kr.toString(16);var LE=1e-11;(function(){function t(s,i,r){H(this,t),this._jsPlumb=s,this.ok=i,this.equal=r,f(this,"_divs",[]),f(this,"mottle",void 0),this.mottle=new Ta}return z(t,[{key:"_t",value:function(i,r,e,n){this.mottle.trigger(i,r,{pageX:e,pageY:n,screenX:e,screenY:n,clientX:e,clientY:n})}},{key:"addDiv",value:function(i,r,e,n,o,a,l){var u=document.createElement("div");return u.style.position="absolute",u.innerHTML=i,r?r.appendChild(u):this._jsPlumb.getContainer().appendChild(u),u.setAttribute("id",i),u.style.left=(n??Math.floor(Math.random()*1e3))+"px",u.style.top=(o??Math.floor(Math.random()*1e3))+"px",e&&(u.className=e),a&&(u.style.width=a+"px"),l&&(u.style.height=l+"px"),this._divs.push(i),u}},{key:"addDivs",value:function(i,r){for(var e=0;e<i.length;e++)this.addDiv(i[e],r)}},{key:"assertEndpointCount",value:function(i,r){var e=this._jsPlumb.getEndpoints(i),n=e?e.length:0;this.equal(n,r,i.getAttribute("data-jtk-managed")+" has "+r+(r>1||r==0?" endpoints":" endpoint"))}},{key:"_assertManagedEndpointCount",value:function(i,r){var e=this._jsPlumb.getId(i),n=this._jsPlumb._managedElements[e];this.equal(n.endpoints.length,r,e+" has "+r+" endpoints in managed record")}},{key:"_assertManagedConnectionCount",value:function(i,r){var e=this._jsPlumb.getId(i),n=this._jsPlumb._managedElements[e];this.equal(n.connections.length,r,e+" has "+r+" connections in managed record")}},{key:"_registerDiv",value:function(i){this._divs.push(i)}},{key:"makeDragStartEvt",value:function(i){var r=this.makeEvent(i),e=this._jsPlumb.getContainer();return r.clientX+=e.offsetLeft,r.screenX+=e.offsetLeft,r.pageX+=e.offsetLeft,r.clientY+=e.offsetTop,r.screenY+=e.offsetTop,r.pageY+=e.offsetTop,r}},{key:"getAttribute",value:function(i,r){return i.getAttribute(r)}},{key:"dragNodeBy",value:function(i,r,e,n){n=n||{},n.before&&n.before();var o=this.makeEvent(i);this._jsPlumb.trigger(i,Q,o),n.beforeMouseMove&&n.beforeMouseMove(),this._t(document,Oe,o.pageX+r,o.pageY+e),n.beforeMouseUp&&n.beforeMouseUp(),this.mottle.trigger(document,ee,null),n.after&&n.after()}},{key:"dragNodeTo",value:function(i,r,e,n){n=n||{};var o=this._jsPlumb.viewport.getPosition(this._jsPlumb.getId(i));n.before&&n.before();var a=this.makeEvent(i);this._jsPlumb.trigger(i,Q,a);var l=this._jsPlumb.getContainer().getBoundingClientRect();n.beforeMouseMove&&n.beforeMouseMove(),this._t(document,Oe,l.x+r+o.w/2,l.y+e+o.h/2),n.beforeMouseUp&&n.beforeMouseUp(),this.mottle.trigger(document,ee,null),n.after&&n.after()}},{key:"dragToGroup",value:function(i,r,e){var n=this._jsPlumb.getGroup(r),o=this._jsPlumb.viewport.getPosition(n.elId),a=o.x+o.w/2,l=o.y+o.h/2;this.dragNodeTo(i,a,l,e)}},{key:"aSyncDragNodeBy",value:function(i,r,e,n){var o=this;n=n||{},n.before&&n.before();var a=this.makeEvent(i);this._jsPlumb.trigger(i,Q,a),n.beforeMouseMove&&n.beforeMouseMove(),setTimeout(function(){o._t(document,Oe,a.pageX+r,a.pageY+e),n.beforeMouseUp&&n.beforeMouseUp(),setTimeout(function(){o.mottle.trigger(document,ee,null),n.after&&n.after()},45)},45)}},{key:"dragANodeAround",value:function(i,r,e){this._jsPlumb.trigger(i,Q,this.makeEvent(i));for(var n=Math.random()*50,o=0;o<n;o++){var a=IE();i.style.left=a.screenX+"px",i.style.top=a.screenY+"px",this._jsPlumb.trigger(document,Oe,a)}r&&this.ok(r(),e||"while dragging assert"),this._jsPlumb.trigger(document,ee,Hn)}},{key:"dragConnection",value:function(i,r,e,n){var o=this.getCanvas(i),a=this.getCanvas(r),l=this.makeEvent(o),u=this.makeEvent(a);n=n||{};var c=this._jsPlumb.select().length;return this._jsPlumb.trigger(o,Q,l),n.beforeMouseMove&&n.beforeMouseMove(),this._jsPlumb.trigger(e?a:document,Oe,u),n.beforeMouseUp&&n.beforeMouseUp(),this._jsPlumb.trigger(e?a:document,ee,u),this._jsPlumb.select().get(c)}},{key:"aSyncDragConnection",value:function(i,r,e){var n=this;e=e||{};var o=this.getCanvas(i),a=this.getCanvas(r),l=this.makeEvent(o),u=this.makeEvent(a),c=this._jsPlumb.select().length;this._jsPlumb.trigger(o,Q,l),setTimeout(function(){e.beforeMouseMove&&e.beforeMouseMove(),n._jsPlumb.trigger(document,Oe,u),setTimeout(function(){e.beforeMouseUp&&e.beforeMouseUp(),n._jsPlumb.trigger(a,ee,u),e.after&&e.after(n._jsPlumb.select().get(c))},5)},5)}},{key:"dragAndAbortConnection",value:function(i){var r=this.getCanvas(i),e=this.makeEvent(r);this._jsPlumb.trigger(r,Q,e),this._jsPlumb.trigger(document,Oe,Hn),this._jsPlumb.trigger(document,ee,Hn)}},{key:"detachConnection",value:function(i,r){r=r||{};var e=this.getEndpointCanvas(i),n=this.makeEvent(e);r.before&&r.before(),this._jsPlumb.trigger(e,Q,n),r.beforeMouseMove&&r.beforeMouseMove(),this._jsPlumb.trigger(document,Oe,Hn),r.beforeMouseUp&&r.beforeMouseUp(),this._jsPlumb.trigger(document,ee,Hn),r.after&&r.after()}},{key:"detachAndReattachConnection",value:function(i,r){r=r||{};var e=this.getEndpointCanvas(i),n=this.makeEvent(e);r.before&&r.before(),this._jsPlumb.trigger(e,Q,n),r.beforeMouseMove&&r.beforeMouseMove(),this._jsPlumb.trigger(document,Oe,Hn),this._jsPlumb.trigger(document,Oe,n),r.beforeMouseUp&&r.beforeMouseUp(),this._jsPlumb.trigger(document,ee,n),r.after&&r.after()}},{key:"detachConnectionByTarget",value:function(i,r){this.detachConnection(i.endpoints[1],r)}},{key:"relocateTarget",value:function(i,r,e){this.relocate(i,1,r,e)}},{key:"relocate",value:function(i,r,e,n){n=n||{},e=this.getCanvas(e);var o=this.getEndpointCanvas(i.endpoints[r]),a=this.makeEvent(o),l=this.makeEvent(e);n.before&&n.before(),this._jsPlumb.trigger(o,Q,a),n.beforeMouseMove&&n.beforeMouseMove(),this._jsPlumb.trigger(document,Oe,l),n.beforeMouseUp&&n.beforeMouseUp(),this._jsPlumb.trigger(e,ee,l),n.after&&n.after()}},{key:"relocateSource",value:function(i,r,e){this.relocate(i,0,r,e)}},{key:"makeEvent",value:function(i){var r=i.getBoundingClientRect(),e=r.x+r.width/2,n=r.y+r.height/2;return{clientX:e,clientY:n,screenX:e,screenY:n,pageX:e,pageY:n}}},{key:"getCanvas",value:function(i){return i.endpoint?this.getEndpointCanvas(i):i}},{key:"getEndpointCanvas",value:function(i){return i.endpoint.canvas}},{key:"getConnectionCanvas",value:function(i){return i.connector.canvas}},{key:"getEndpointCanvasPosition",value:function(i){var r=this.getEndpointCanvas(i);return{x:parseInt(r.style.left,10),y:parseInt(r.style.top,10),w:r.getAttribute("width"),h:r.getAttribute("height")}}},{key:"within",value:function(i,r,e){this.ok(Math.abs(i-r)<LE,e+"[expected: "+r+" got "+i+"] [diff:"+Math.abs(i-r)+"]")}},{key:"assertManagedEndpointCount",value:function(i,r){var e=this._jsPlumb.getId(i),n=this._jsPlumb._managedElements[e];this.equal(n.endpoints.length,r,e+" has "+r+" endpoints in managed record")}},{key:"assertManagedConnectionCount",value:function(i,r){var e=this._jsPlumb.getId(i),n=this._jsPlumb._managedElements[e];this.equal(n.connections.length,r,e+" has "+r+" connections in managed record")}},{key:"fireEventOnEndpoint",value:function(i){for(var r=this.getEndpointCanvas(i),e=0;e<(arguments.length<=1?0:arguments.length-1);e++)this._jsPlumb.trigger(r,e+1<1||arguments.length<=e+1?void 0:arguments[e+1])}},{key:"fireEventOnElement",value:function(i){for(var r=0;r<(arguments.length<=1?0:arguments.length-1);r++)this._jsPlumb.trigger(i,r+1<1||arguments.length<=r+1?void 0:arguments[r+1])}},{key:"fireEventOnConnection",value:function(i){for(var r=this.getConnectionCanvas(i),e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];this.fireEventOnElement.apply(this,[r].concat(n))}},{key:"clickOnConnection",value:function(i){this.fireEventOnConnection(i,Be)}},{key:"dblClickOnConnection",value:function(i){this.fireEventOnConnection(i,qe)}},{key:"tapOnConnection",value:function(i){this.fireEventOnConnection(i,Q),this.fireEventOnConnection(i,ee)}},{key:"dblTapOnConnection",value:function(i){this.fireEventOnConnection(i,Q),this.fireEventOnConnection(i,ee),this.fireEventOnConnection(i,Q),this.fireEventOnConnection(i,ee)}},{key:"clickOnElement",value:function(i,r){this._jsPlumb.trigger(i,Be,null,null,r??1)}},{key:"dblClickOnElement",value:function(i){this._jsPlumb.trigger(i,qe)}},{key:"tapOnElement",value:function(i){this._jsPlumb.trigger(i,Q),this._jsPlumb.trigger(i,ee)}},{key:"dblTapOnElement",value:function(i){this._jsPlumb.trigger(i,Q),this._jsPlumb.trigger(i,ee),this._jsPlumb.trigger(i,Q),this._jsPlumb.trigger(i,ee)}},{key:"getOverlayCanvas",value:function(i){return i.canvas||i.path}},{key:"fireEventOnOverlay",value:function(i,r,e){var n=i.getOverlay(r),o=this.getOverlayCanvas(n);this._jsPlumb.trigger(o,e)}},{key:"clickOnOverlay",value:function(i,r){this.fireEventOnOverlay(i,r,Be)}},{key:"dblClickOnOverlay",value:function(i,r){this.fireEventOnOverlay(i,r,qe)}},{key:"tapOnOverlay",value:function(i,r){this.fireEventOnOverlay(i,r,Q),this.fireEventOnOverlay(i,r,ee)}},{key:"dblTapOnOverlay",value:function(i,r){this.fireEventOnOverlay(i,r,Q),this.fireEventOnOverlay(i,r,ee),this.fireEventOnOverlay(i,r,Q),this.fireEventOnOverlay(i,r,ee)}},{key:"cleanup",value:function(){var i=this._jsPlumb.getContainer();this._jsPlumb.destroy();for(var r in this._divs){var e=document.getElementById(this._divs[r]);e&&e.parentNode.removeChild(e)}this._divs.length=0;var n=this._jsPlumb.select().length,o=this._jsPlumb.selectEndpoints().length,a=i.querySelectorAll(".jtk-endpoint").length,l=i.querySelectorAll(".jtk-connector").length;for(var u in i.__ta)for(var c in i.__ta[u])throw"Container event bindings not empty for key "+u;if(n>0)throw"there are connections in the data model!";if(o>0)throw"there are endpoints in the data model!";if(a>0)throw"there are "+a+" endpoints left in the dom!";if(l>0)throw"there are "+l+" connections left in the dom!"}},{key:"makeContent",value:function(i){var r=document.createElement("div");return r.innerHTML=i,r.firstChild}},{key:"length",value:function(i){var r=0;for(var e in i)i.hasOwnProperty(e)&&r++;return r}},{key:"head",value:function(i){for(var r in i)return i[r]}},{key:"uuid",value:function(){return ke()}}]),t})();var Bu=0;function NE(){var t=Bu+1;return Bu++,t}function RE(t){return new iE(NE(),t)}const FE=B("span",{class:"toggle-icons"},"export",-1),GE=[FE],jE=["id"],BE={__name:"workspace",setup(t){const s=Ye([]);let i=null;const r=Ye(null),e=Ye([]);var n={jsplumbElements:e};const o=Ye({});Ec(()=>{r.value.focus(),console.log(e.value),i=RE({container:r.value,maxConnections:-1,connectionOverlays:[{type:"Arrow",options:{location:1}}]})});function a(p){return i.addEndpoint(p,{source:!0,anchor:"Bottom",endpoint:{type:"Dot"}})}function l(p){return i.addEndpoint(p,{target:!0,anchor:"Top",endpoint:{type:"Dot"}})}async function u(p,v){if(console.log("entered addJSEndpoints"),console.log(p),console.log(v),p){var y={},m={};v.type==="material"?v.name==="Eingangsmaterial"?(y=a(p),m={id:""}):v.name==="Zwischenprodukt"?(y=a(p),m=l(p)):v.name==="Endprodukt"?(y={id:""},m=l(p)):console.error("unknown material type: "+v.name):v.type==="process"?(y=a(p),m=l(p)):console.error("unknown type: "+v.type),v&&(v.sourceEndpointId=y.id,v.targetEndpointId=m.id)}}async function c(p){console.debug("workspace_items updated, watcher triggered"),await hc(),p.forEach(v=>{const y=e.value.find(m=>m.id===v.id);o.value[v.id]||(u(y,v),y.style.left=v.x+"px",y.style.top=v.y+"px",o.value[v.id]=!0)})}Or(s,c,{deep:!0});function h(){var p=document.implementation.createDocument(null,"BatchML"),v=p.documentElement,y=i.getConnections();y.forEach(function(D){console.log(D);var G=D.sourceId,L=D.targetId,T=s.value.find(he=>he.id===G),q=s.value.find(he=>he.id===L);if(T&&q){var W=T.id,te=q.id,R=p.createElement("Connection");R.setAttribute("sourceId",W),R.setAttribute("targetId",te),v.appendChild(R)}}),s.value.forEach(function(D){var G=p.createElement("Element");G.setAttribute("id",D.id),G.setAttribute("name",D.name),G.setAttribute("type",D.type),G.setAttribute("x",D.x),G.setAttribute("y",D.y),v.appendChild(G)});var m=new XMLSerializer,b=m.serializeToString(p);console.log(b);var C="Verfahrensrezept.xml",E=document.createElement("a"),S=new Blob([b],{type:"text/plain"});E.setAttribute("href",window.URL.createObjectURL(S)),E.setAttribute("download",C),E.dataset.downloadurl=["text/plain",E.download,E.href].join(":"),E.draggable=!0,E.classList.add("dragout"),E.click()}const d=p=>{console.log("Drop"),p.preventDefault(),p.dataTransfer.getData("itemID");var v=p.dataTransfer.getData("itemName"),y=p.dataTransfer.getData("itemClasses"),m;y.includes("material_element")?m="material":y.includes("process_element")?m="process":console.log("neither material nor process");var b=p.target.getBoundingClientRect(),C=p.clientX-b.left,E=p.clientY-b.top;if(y.includes("sidebar_element")){var S=Date.now().toString(36)+Math.random().toString(36).substring(2);s.value.push({id:S,name:v,type:m,x:C,y:E}),console.log("dragged from sidebar, dropped in workspace at absolute position: "+p.clientX.toString()+" "+p.clientY.toString()),console.log(s)}};return(p,v)=>(be(),Se("div",{id:"workspace",ref_key:"workspace",ref:r,onDrop:v[0]||(v[0]=y=>d(y)),onDragenter:v[1]||(v[1]=zi(()=>{},["prevent"])),onDragover:v[2]||(v[2]=zi(()=>{},["prevent"]))},[B("button",{onClick:h},GE),(be(!0),Se(Xe,null,Wr(s.value,y=>(be(),Se("div",{class:hi("workspace_element "+y.type),key:y.id,ref_for:!0,ref:Mt(n).jsplumbElements,id:y.id},gn(y.name),11,jE))),128))],544))}};const HE={id:"editor"},UE={__name:"App",setup(t){return(s,i)=>(be(),Se("main",null,[Ge(Bp,{id:"top_bar"}),B("div",HE,[Ge(hy),Ge(BE)])]))}},VE=Np(UE);VE.mount("#app");
