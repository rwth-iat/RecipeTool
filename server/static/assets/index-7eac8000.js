(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(e){if(e.ep)return;e.ep=!0;const n=r(e);fetch(e.href,n)}})();function $o(t,s){const r=Object.create(null),i=t.split(",");for(let e=0;e<i.length;e++)r[i[e]]=!0;return s?e=>!!r[e.toLowerCase()]:e=>!!r[e]}const pe={},$n=[],dt=()=>{},af=()=>!1,lf=/^on[^a-z]/,gs=t=>lf.test(t),Wo=t=>t.startsWith("onUpdate:"),Me=Object.assign,zo=(t,s)=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)},uf=Object.prototype.hasOwnProperty,ne=(t,s)=>uf.call(t,s),$=Array.isArray,Wn=t=>ri(t)==="[object Map]",ys=t=>ri(t)==="[object Set]",$a=t=>ri(t)==="[object Date]",J=t=>typeof t=="function",Te=t=>typeof t=="string",Ur=t=>typeof t=="symbol",ve=t=>t!==null&&typeof t=="object",Hu=t=>ve(t)&&J(t.then)&&J(t.catch),Uu=Object.prototype.toString,ri=t=>Uu.call(t),cf=t=>ri(t).slice(8,-1),Vu=t=>ri(t)==="[object Object]",qo=t=>Te(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ti=$o(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ms=t=>{const s=Object.create(null);return r=>s[r]||(s[r]=t(r))},hf=/-(\w)/g,Pt=ms(t=>t.replace(hf,(s,r)=>r?r.toUpperCase():"")),ff=/\B([A-Z])/g,fr=ms(t=>t.replace(ff,"-$1").toLowerCase()),_s=ms(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ys=ms(t=>t?`on${_s(t)}`:""),Vr=(t,s)=>!Object.is(t,s),Ai=(t,s)=>{for(let r=0;r<t.length;r++)t[r](s)},Vi=(t,s,r)=>{Object.defineProperty(t,s,{configurable:!0,enumerable:!1,value:r})},Yu=t=>{const s=parseFloat(t);return isNaN(s)?t:s};let Wa;const uo=()=>Wa||(Wa=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Es(t){if($(t)){const s={};for(let r=0;r<t.length;r++){const i=t[r],e=Te(i)?gf(i):Es(i);if(e)for(const n in e)s[n]=e[n]}return s}else{if(Te(t))return t;if(ve(t))return t}}const df=/;(?![^(]*\))/g,pf=/:([^]+)/,vf=/\/\*[^]*?\*\//g;function gf(t){const s={};return t.replace(vf,"").split(df).forEach(r=>{if(r){const i=r.split(pf);i.length>1&&(s[i[0].trim()]=i[1].trim())}}),s}function On(t){let s="";if(Te(t))s=t;else if($(t))for(let r=0;r<t.length;r++){const i=On(t[r]);i&&(s+=i+" ")}else if(ve(t))for(const r in t)t[r]&&(s+=r+" ");return s.trim()}const yf="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",mf=$o(yf);function Xu(t){return!!t||t===""}function _f(t,s){if(t.length!==s.length)return!1;let r=!0;for(let i=0;r&&i<t.length;i++)r=bs(t[i],s[i]);return r}function bs(t,s){if(t===s)return!0;let r=$a(t),i=$a(s);if(r||i)return r&&i?t.getTime()===s.getTime():!1;if(r=Ur(t),i=Ur(s),r||i)return t===s;if(r=$(t),i=$(s),r||i)return r&&i?_f(t,s):!1;if(r=ve(t),i=ve(s),r||i){if(!r||!i)return!1;const e=Object.keys(t).length,n=Object.keys(s).length;if(e!==n)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=s.hasOwnProperty(o);if(a&&!l||!a&&l||!bs(t[o],s[o]))return!1}}return String(t)===String(s)}function Ef(t,s){return t.findIndex(r=>bs(r,s))}const gn=t=>Te(t)?t:t==null?"":$(t)||ve(t)&&(t.toString===Uu||!J(t.toString))?JSON.stringify(t,$u,2):String(t),$u=(t,s)=>s&&s.__v_isRef?$u(t,s.value):Wn(s)?{[`Map(${s.size})`]:[...s.entries()].reduce((r,[i,e])=>(r[`${i} =>`]=e,r),{})}:ys(s)?{[`Set(${s.size})`]:[...s.values()]}:ve(s)&&!$(s)&&!Vu(s)?String(s):s;let ct;class bf{constructor(s=!1){this.detached=s,this._active=!0,this.effects=[],this.cleanups=[],this.parent=ct,!s&&ct&&(this.index=(ct.scopes||(ct.scopes=[])).push(this)-1)}get active(){return this._active}run(s){if(this._active){const r=ct;try{return ct=this,s()}finally{ct=r}}}on(){ct=this}off(){ct=this.parent}stop(s){if(this._active){let r,i;for(r=0,i=this.effects.length;r<i;r++)this.effects[r].stop();for(r=0,i=this.cleanups.length;r<i;r++)this.cleanups[r]();if(this.scopes)for(r=0,i=this.scopes.length;r<i;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!s){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0,this._active=!1}}}function Cf(t,s=ct){s&&s.active&&s.effects.push(t)}function xf(){return ct}const Ko=t=>{const s=new Set(t);return s.w=0,s.n=0,s},Wu=t=>(t.w&en)>0,zu=t=>(t.n&en)>0,Sf=({deps:t})=>{if(t.length)for(let s=0;s<t.length;s++)t[s].w|=en},Pf=t=>{const{deps:s}=t;if(s.length){let r=0;for(let i=0;i<s.length;i++){const e=s[i];Wu(e)&&!zu(e)?e.delete(t):s[r++]=e,e.w&=~en,e.n&=~en}s.length=r}},Yi=new WeakMap;let wr=0,en=1;const co=30;let ht;const _n=Symbol(""),ho=Symbol("");class Jo{constructor(s,r=null,i){this.fn=s,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,Cf(this,i)}run(){if(!this.active)return this.fn();let s=ht,r=Kt;for(;s;){if(s===this)return;s=s.parent}try{return this.parent=ht,ht=this,Kt=!0,en=1<<++wr,wr<=co?Sf(this):za(this),this.fn()}finally{wr<=co&&Pf(this),en=1<<--wr,ht=this.parent,Kt=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){ht===this?this.deferStop=!0:this.active&&(za(this),this.onStop&&this.onStop(),this.active=!1)}}function za(t){const{deps:s}=t;if(s.length){for(let r=0;r<s.length;r++)s[r].delete(t);s.length=0}}let Kt=!0;const qu=[];function dr(){qu.push(Kt),Kt=!1}function pr(){const t=qu.pop();Kt=t===void 0?!0:t}function $e(t,s,r){if(Kt&&ht){let i=Yi.get(t);i||Yi.set(t,i=new Map);let e=i.get(r);e||i.set(r,e=Ko()),Ku(e)}}function Ku(t,s){let r=!1;wr<=co?zu(t)||(t.n|=en,r=!Wu(t)):r=!t.has(ht),r&&(t.add(ht),ht.deps.push(t))}function Rt(t,s,r,i,e,n){const o=Yi.get(t);if(!o)return;let a=[];if(s==="clear")a=[...o.values()];else if(r==="length"&&$(t)){const l=Number(i);o.forEach((u,c)=>{(c==="length"||c>=l)&&a.push(u)})}else switch(r!==void 0&&a.push(o.get(r)),s){case"add":$(t)?qo(r)&&a.push(o.get("length")):(a.push(o.get(_n)),Wn(t)&&a.push(o.get(ho)));break;case"delete":$(t)||(a.push(o.get(_n)),Wn(t)&&a.push(o.get(ho)));break;case"set":Wn(t)&&a.push(o.get(_n));break}if(a.length===1)a[0]&&fo(a[0]);else{const l=[];for(const u of a)u&&l.push(...u);fo(Ko(l))}}function fo(t,s){const r=$(t)?t:[...t];for(const i of r)i.computed&&qa(i);for(const i of r)i.computed||qa(i)}function qa(t,s){(t!==ht||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}function kf(t,s){var r;return(r=Yi.get(t))==null?void 0:r.get(s)}const Tf=$o("__proto__,__v_isRef,__isVue"),Ju=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Ur)),Af=Zo(),Of=Zo(!1,!0),wf=Zo(!0),Ka=Df();function Df(){const t={};return["includes","indexOf","lastIndexOf"].forEach(s=>{t[s]=function(...r){const i=ie(this);for(let n=0,o=this.length;n<o;n++)$e(i,"get",n+"");const e=i[s](...r);return e===-1||e===!1?i[s](...r.map(ie)):e}}),["push","pop","shift","unshift","splice"].forEach(s=>{t[s]=function(...r){dr();const i=ie(this)[s].apply(this,r);return pr(),i}}),t}function Mf(t){const s=ie(this);return $e(s,"has",t),s.hasOwnProperty(t)}function Zo(t=!1,s=!1){return function(i,e,n){if(e==="__v_isReactive")return!t;if(e==="__v_isReadonly")return t;if(e==="__v_isShallow")return s;if(e==="__v_raw"&&n===(t?s?zf:nc:s?tc:ec).get(i))return i;const o=$(i);if(!t){if(o&&ne(Ka,e))return Reflect.get(Ka,e,n);if(e==="hasOwnProperty")return Mf}const a=Reflect.get(i,e,n);return(Ur(e)?Ju.has(e):Tf(e))||(t||$e(i,"get",e),s)?a:De(a)?o&&qo(e)?a:a.value:ve(a)?t?rc(a):xs(a):a}}const If=Zu(),Lf=Zu(!0);function Zu(t=!1){return function(r,i,e,n){let o=r[i];if(Qn(o)&&De(o)&&!De(e))return!1;if(!t&&(!Xi(e)&&!Qn(e)&&(o=ie(o),e=ie(e)),!$(r)&&De(o)&&!De(e)))return o.value=e,!0;const a=$(r)&&qo(i)?Number(i)<r.length:ne(r,i),l=Reflect.set(r,i,e,n);return r===ie(n)&&(a?Vr(e,o)&&Rt(r,"set",i,e):Rt(r,"add",i,e)),l}}function Nf(t,s){const r=ne(t,s);t[s];const i=Reflect.deleteProperty(t,s);return i&&r&&Rt(t,"delete",s,void 0),i}function Rf(t,s){const r=Reflect.has(t,s);return(!Ur(s)||!Ju.has(s))&&$e(t,"has",s),r}function Ff(t){return $e(t,"iterate",$(t)?"length":_n),Reflect.ownKeys(t)}const Qu={get:Af,set:If,deleteProperty:Nf,has:Rf,ownKeys:Ff},Gf={get:wf,set(t,s){return!0},deleteProperty(t,s){return!0}},jf=Me({},Qu,{get:Of,set:Lf}),Qo=t=>t,Cs=t=>Reflect.getPrototypeOf(t);function ci(t,s,r=!1,i=!1){t=t.__v_raw;const e=ie(t),n=ie(s);r||(s!==n&&$e(e,"get",s),$e(e,"get",n));const{has:o}=Cs(e),a=i?Qo:r?na:Yr;if(o.call(e,s))return a(t.get(s));if(o.call(e,n))return a(t.get(n));t!==e&&t.get(s)}function hi(t,s=!1){const r=this.__v_raw,i=ie(r),e=ie(t);return s||(t!==e&&$e(i,"has",t),$e(i,"has",e)),t===e?r.has(t):r.has(t)||r.has(e)}function fi(t,s=!1){return t=t.__v_raw,!s&&$e(ie(t),"iterate",_n),Reflect.get(t,"size",t)}function Ja(t){t=ie(t);const s=ie(this);return Cs(s).has.call(s,t)||(s.add(t),Rt(s,"add",t,t)),this}function Za(t,s){s=ie(s);const r=ie(this),{has:i,get:e}=Cs(r);let n=i.call(r,t);n||(t=ie(t),n=i.call(r,t));const o=e.call(r,t);return r.set(t,s),n?Vr(s,o)&&Rt(r,"set",t,s):Rt(r,"add",t,s),this}function Qa(t){const s=ie(this),{has:r,get:i}=Cs(s);let e=r.call(s,t);e||(t=ie(t),e=r.call(s,t)),i&&i.call(s,t);const n=s.delete(t);return e&&Rt(s,"delete",t,void 0),n}function el(){const t=ie(this),s=t.size!==0,r=t.clear();return s&&Rt(t,"clear",void 0,void 0),r}function di(t,s){return function(i,e){const n=this,o=n.__v_raw,a=ie(o),l=s?Qo:t?na:Yr;return!t&&$e(a,"iterate",_n),o.forEach((u,c)=>i.call(e,l(u),l(c),n))}}function pi(t,s,r){return function(...i){const e=this.__v_raw,n=ie(e),o=Wn(n),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=e[t](...i),c=r?Qo:s?na:Yr;return!s&&$e(n,"iterate",l?ho:_n),{next(){const{value:h,done:d}=u.next();return d?{value:h,done:d}:{value:a?[c(h[0]),c(h[1])]:c(h),done:d}},[Symbol.iterator](){return this}}}}function Ht(t){return function(...s){return t==="delete"?!1:this}}function Bf(){const t={get(n){return ci(this,n)},get size(){return fi(this)},has:hi,add:Ja,set:Za,delete:Qa,clear:el,forEach:di(!1,!1)},s={get(n){return ci(this,n,!1,!0)},get size(){return fi(this)},has:hi,add:Ja,set:Za,delete:Qa,clear:el,forEach:di(!1,!0)},r={get(n){return ci(this,n,!0)},get size(){return fi(this,!0)},has(n){return hi.call(this,n,!0)},add:Ht("add"),set:Ht("set"),delete:Ht("delete"),clear:Ht("clear"),forEach:di(!0,!1)},i={get(n){return ci(this,n,!0,!0)},get size(){return fi(this,!0)},has(n){return hi.call(this,n,!0)},add:Ht("add"),set:Ht("set"),delete:Ht("delete"),clear:Ht("clear"),forEach:di(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(n=>{t[n]=pi(n,!1,!1),r[n]=pi(n,!0,!1),s[n]=pi(n,!1,!0),i[n]=pi(n,!0,!0)}),[t,r,s,i]}const[Hf,Uf,Vf,Yf]=Bf();function ea(t,s){const r=s?t?Yf:Vf:t?Uf:Hf;return(i,e,n)=>e==="__v_isReactive"?!t:e==="__v_isReadonly"?t:e==="__v_raw"?i:Reflect.get(ne(r,e)&&e in i?r:i,e,n)}const Xf={get:ea(!1,!1)},$f={get:ea(!1,!0)},Wf={get:ea(!0,!1)},ec=new WeakMap,tc=new WeakMap,nc=new WeakMap,zf=new WeakMap;function qf(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Kf(t){return t.__v_skip||!Object.isExtensible(t)?0:qf(cf(t))}function xs(t){return Qn(t)?t:ta(t,!1,Qu,Xf,ec)}function Jf(t){return ta(t,!1,jf,$f,tc)}function rc(t){return ta(t,!0,Gf,Wf,nc)}function ta(t,s,r,i,e){if(!ve(t)||t.__v_raw&&!(s&&t.__v_isReactive))return t;const n=e.get(t);if(n)return n;const o=Kf(t);if(o===0)return t;const a=new Proxy(t,o===2?i:r);return e.set(t,a),a}function zn(t){return Qn(t)?zn(t.__v_raw):!!(t&&t.__v_isReactive)}function Qn(t){return!!(t&&t.__v_isReadonly)}function Xi(t){return!!(t&&t.__v_isShallow)}function ic(t){return zn(t)||Qn(t)}function ie(t){const s=t&&t.__v_raw;return s?ie(s):t}function sc(t){return Vi(t,"__v_skip",!0),t}const Yr=t=>ve(t)?xs(t):t,na=t=>ve(t)?rc(t):t;function oc(t){Kt&&ht&&(t=ie(t),Ku(t.dep||(t.dep=Ko())))}function ac(t,s){t=ie(t);const r=t.dep;r&&fo(r)}function De(t){return!!(t&&t.__v_isRef===!0)}function Ye(t){return Zf(t,!1)}function Zf(t,s){return De(t)?t:new Qf(t,s)}class Qf{constructor(s,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?s:ie(s),this._value=r?s:Yr(s)}get value(){return oc(this),this._value}set value(s){const r=this.__v_isShallow||Xi(s)||Qn(s);s=r?s:ie(s),Vr(s,this._rawValue)&&(this._rawValue=s,this._value=r?s:Yr(s),ac(this))}}function Ct(t){return De(t)?t.value:t}const ed={get:(t,s,r)=>Ct(Reflect.get(t,s,r)),set:(t,s,r,i)=>{const e=t[s];return De(e)&&!De(r)?(e.value=r,!0):Reflect.set(t,s,r,i)}};function lc(t){return zn(t)?t:new Proxy(t,ed)}function uc(t){const s=$(t)?new Array(t.length):{};for(const r in t)s[r]=nd(t,r);return s}class td{constructor(s,r,i){this._object=s,this._key=r,this._defaultValue=i,this.__v_isRef=!0}get value(){const s=this._object[this._key];return s===void 0?this._defaultValue:s}set value(s){this._object[this._key]=s}get dep(){return kf(ie(this._object),this._key)}}function nd(t,s,r){const i=t[s];return De(i)?i:new td(t,s,r)}class rd{constructor(s,r,i,e){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Jo(s,()=>{this._dirty||(this._dirty=!0,ac(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!e,this.__v_isReadonly=i}get value(){const s=ie(this);return oc(s),(s._dirty||!s._cacheable)&&(s._dirty=!1,s._value=s.effect.run()),s._value}set value(s){this._setter(s)}}function id(t,s,r=!1){let i,e;const n=J(t);return n?(i=t,e=dt):(i=t.get,e=t.set),new rd(i,e,n||!e,r)}function Jt(t,s,r,i){let e;try{e=i?t(...i):t()}catch(n){Ss(n,s,r)}return e}function pt(t,s,r,i){if(J(t)){const n=Jt(t,s,r,i);return n&&Hu(n)&&n.catch(o=>{Ss(o,s,r)}),n}const e=[];for(let n=0;n<t.length;n++)e.push(pt(t[n],s,r,i));return e}function Ss(t,s,r,i=!0){const e=s?s.vnode:null;if(s){let n=s.parent;const o=s.proxy,a=r;for(;n;){const u=n.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](t,o,a)===!1)return}n=n.parent}const l=s.appContext.config.errorHandler;if(l){Jt(l,null,10,[t,o,a]);return}}sd(t,r,e,i)}function sd(t,s,r,i=!0){console.error(t)}let Xr=!1,po=!1;const Re=[];let xt=0;const qn=[];let Dt=null,fn=0;const cc=Promise.resolve();let ra=null;function hc(t){const s=ra||cc;return t?s.then(this?t.bind(this):t):s}function od(t){let s=xt+1,r=Re.length;for(;s<r;){const i=s+r>>>1;$r(Re[i])<t?s=i+1:r=i}return s}function ia(t){(!Re.length||!Re.includes(t,Xr&&t.allowRecurse?xt+1:xt))&&(t.id==null?Re.push(t):Re.splice(od(t.id),0,t),fc())}function fc(){!Xr&&!po&&(po=!0,ra=cc.then(pc))}function ad(t){const s=Re.indexOf(t);s>xt&&Re.splice(s,1)}function ld(t){$(t)?qn.push(...t):(!Dt||!Dt.includes(t,t.allowRecurse?fn+1:fn))&&qn.push(t),fc()}function tl(t,s=Xr?xt+1:0){for(;s<Re.length;s++){const r=Re[s];r&&r.pre&&(Re.splice(s,1),s--,r())}}function dc(t){if(qn.length){const s=[...new Set(qn)];if(qn.length=0,Dt){Dt.push(...s);return}for(Dt=s,Dt.sort((r,i)=>$r(r)-$r(i)),fn=0;fn<Dt.length;fn++)Dt[fn]();Dt=null,fn=0}}const $r=t=>t.id==null?1/0:t.id,ud=(t,s)=>{const r=$r(t)-$r(s);if(r===0){if(t.pre&&!s.pre)return-1;if(s.pre&&!t.pre)return 1}return r};function pc(t){po=!1,Xr=!0,Re.sort(ud);const s=dt;try{for(xt=0;xt<Re.length;xt++){const r=Re[xt];r&&r.active!==!1&&Jt(r,null,14)}}finally{xt=0,Re.length=0,dc(),Xr=!1,ra=null,(Re.length||qn.length)&&pc()}}function cd(t,s,...r){if(t.isUnmounted)return;const i=t.vnode.props||pe;let e=r;const n=s.startsWith("update:"),o=n&&s.slice(7);if(o&&o in i){const c=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=i[c]||pe;d&&(e=r.map(p=>Te(p)?p.trim():p)),h&&(e=r.map(Yu))}let a,l=i[a=Ys(s)]||i[a=Ys(Pt(s))];!l&&n&&(l=i[a=Ys(fr(s))]),l&&pt(l,t,6,e);const u=i[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,pt(u,t,6,e)}}function vc(t,s,r=!1){const i=s.emitsCache,e=i.get(t);if(e!==void 0)return e;const n=t.emits;let o={},a=!1;if(!J(t)){const l=u=>{const c=vc(u,s,!0);c&&(a=!0,Me(o,c))};!r&&s.mixins.length&&s.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!n&&!a?(ve(t)&&i.set(t,null),null):($(n)?n.forEach(l=>o[l]=null):Me(o,n),ve(t)&&i.set(t,o),o)}function Ps(t,s){return!t||!gs(s)?!1:(s=s.slice(2).replace(/Once$/,""),ne(t,s[0].toLowerCase()+s.slice(1))||ne(t,fr(s))||ne(t,s))}let rt=null,ks=null;function $i(t){const s=rt;return rt=t,ks=t&&t.type.__scopeId||null,s}function sa(t){ks=t}function oa(){ks=null}function vo(t,s=rt,r){if(!s||t._n)return t;const i=(...e)=>{i._d&&fl(-1);const n=$i(s);let o;try{o=t(...e)}finally{$i(n),i._d&&fl(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function Xs(t){const{type:s,vnode:r,proxy:i,withProxy:e,props:n,propsOptions:[o],slots:a,attrs:l,emit:u,render:c,renderCache:h,data:d,setupState:p,ctx:v,inheritAttrs:y}=t;let m,b;const C=$i(t);try{if(r.shapeFlag&4){const S=e||i;m=_t(c.call(S,S,h,n,p,d,v)),b=l}else{const S=s;m=_t(S.length>1?S(n,{attrs:l,slots:a,emit:u}):S(n,null)),b=s.props?l:hd(l)}}catch(S){jr.length=0,Ss(S,t,1),m=Ge(Cn)}let E=m;if(b&&y!==!1){const S=Object.keys(b),{shapeFlag:D}=E;S.length&&D&7&&(o&&S.some(Wo)&&(b=fd(b,o)),E=er(E,b))}return r.dirs&&(E=er(E),E.dirs=E.dirs?E.dirs.concat(r.dirs):r.dirs),r.transition&&(E.transition=r.transition),m=E,$i(C),m}const hd=t=>{let s;for(const r in t)(r==="class"||r==="style"||gs(r))&&((s||(s={}))[r]=t[r]);return s},fd=(t,s)=>{const r={};for(const i in t)(!Wo(i)||!(i.slice(9)in s))&&(r[i]=t[i]);return r};function dd(t,s,r){const{props:i,children:e,component:n}=t,{props:o,children:a,patchFlag:l}=s,u=n.emitsOptions;if(s.dirs||s.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return i?nl(i,o,u):!!o;if(l&8){const c=s.dynamicProps;for(let h=0;h<c.length;h++){const d=c[h];if(o[d]!==i[d]&&!Ps(u,d))return!0}}}else return(e||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?nl(i,o,u):!0:!!o;return!1}function nl(t,s,r){const i=Object.keys(s);if(i.length!==Object.keys(t).length)return!0;for(let e=0;e<i.length;e++){const n=i[e];if(s[n]!==t[n]&&!Ps(r,n))return!0}return!1}function pd({vnode:t,parent:s},r){for(;s&&s.subTree===t;)(t=s.vnode).el=r,s=s.parent}const vd=t=>t.__isSuspense;function gd(t,s){s&&s.pendingBranch?$(t)?s.effects.push(...t):s.effects.push(t):ld(t)}const vi={};function Oi(t,s,r){return gc(t,s,r)}function gc(t,s,{immediate:r,deep:i,flush:e,onTrack:n,onTrigger:o}=pe){var a;const l=xf()===((a=Ne)==null?void 0:a.scope)?Ne:null;let u,c=!1,h=!1;if(De(t)?(u=()=>t.value,c=Xi(t)):zn(t)?(u=()=>t,i=!0):$(t)?(h=!0,c=t.some(S=>zn(S)||Xi(S)),u=()=>t.map(S=>{if(De(S))return S.value;if(zn(S))return yn(S);if(J(S))return Jt(S,l,2)})):J(t)?s?u=()=>Jt(t,l,2):u=()=>{if(!(l&&l.isUnmounted))return d&&d(),pt(t,l,3,[p])}:u=dt,s&&i){const S=u;u=()=>yn(S())}let d,p=S=>{d=C.onStop=()=>{Jt(S,l,4)}},v;if(zr)if(p=dt,s?r&&pt(s,l,3,[u(),h?[]:void 0,p]):u(),e==="sync"){const S=dp();v=S.__watcherHandles||(S.__watcherHandles=[])}else return dt;let y=h?new Array(t.length).fill(vi):vi;const m=()=>{if(C.active)if(s){const S=C.run();(i||c||(h?S.some((D,G)=>Vr(D,y[G])):Vr(S,y)))&&(d&&d(),pt(s,l,3,[S,y===vi?void 0:h&&y[0]===vi?[]:y,p]),y=S)}else C.run()};m.allowRecurse=!!s;let b;e==="sync"?b=m:e==="post"?b=()=>Ve(m,l&&l.suspense):(m.pre=!0,l&&(m.id=l.uid),b=()=>ia(m));const C=new Jo(u,b);s?r?m():y=C.run():e==="post"?Ve(C.run.bind(C),l&&l.suspense):C.run();const E=()=>{C.stop(),l&&l.scope&&zo(l.scope.effects,C)};return v&&v.push(E),E}function yd(t,s,r){const i=this.proxy,e=Te(t)?t.includes(".")?yc(i,t):()=>i[t]:t.bind(i,i);let n;J(s)?n=s:(n=s.handler,r=s);const o=Ne;tr(this);const a=gc(e,n.bind(i),r);return o?tr(o):En(),a}function yc(t,s){const r=s.split(".");return()=>{let i=t;for(let e=0;e<r.length&&i;e++)i=i[r[e]];return i}}function yn(t,s){if(!ve(t)||t.__v_skip||(s=s||new Set,s.has(t)))return t;if(s.add(t),De(t))yn(t.value,s);else if($(t))for(let r=0;r<t.length;r++)yn(t[r],s);else if(ys(t)||Wn(t))t.forEach(r=>{yn(r,s)});else if(Vu(t))for(const r in t)yn(t[r],s);return t}function Fr(t,s){const r=rt;if(r===null)return t;const i=ws(r)||r.proxy,e=t.dirs||(t.dirs=[]);for(let n=0;n<s.length;n++){let[o,a,l,u=pe]=s[n];o&&(J(o)&&(o={mounted:o,updated:o}),o.deep&&yn(a),e.push({dir:o,instance:i,value:a,oldValue:void 0,arg:l,modifiers:u}))}return t}function sn(t,s,r,i){const e=t.dirs,n=s&&s.dirs;for(let o=0;o<e.length;o++){const a=e[o];n&&(a.oldValue=n[o].value);let l=a.dir[i];l&&(dr(),pt(l,r,8,[t.el,a,t,s]),pr())}}function md(t,s){return J(t)?(()=>Me({name:t.name},s,{setup:t}))():t}const wi=t=>!!t.type.__asyncLoader,mc=t=>t.type.__isKeepAlive;function _d(t,s){_c(t,"a",s)}function Ed(t,s){_c(t,"da",s)}function _c(t,s,r=Ne){const i=t.__wdc||(t.__wdc=()=>{let e=r;for(;e;){if(e.isDeactivated)return;e=e.parent}return t()});if(Ts(s,i,r),r){let e=r.parent;for(;e&&e.parent;)mc(e.parent.vnode)&&bd(i,s,r,e),e=e.parent}}function bd(t,s,r,i){const e=Ts(s,t,i,!0);bc(()=>{zo(i[s],e)},r)}function Ts(t,s,r=Ne,i=!1){if(r){const e=r[t]||(r[t]=[]),n=s.__weh||(s.__weh=(...o)=>{if(r.isUnmounted)return;dr(),tr(r);const a=pt(s,r,t,o);return En(),pr(),a});return i?e.unshift(n):e.push(n),n}}const jt=t=>(s,r=Ne)=>(!zr||t==="sp")&&Ts(t,(...i)=>s(...i),r),Cd=jt("bm"),Ec=jt("m"),xd=jt("bu"),Sd=jt("u"),Pd=jt("bum"),bc=jt("um"),kd=jt("sp"),Td=jt("rtg"),Ad=jt("rtc");function Od(t,s=Ne){Ts("ec",t,s)}const Cc="components";function wd(t,s){return Md(Cc,t,!0,s)||t}const Dd=Symbol.for("v-ndc");function Md(t,s,r=!0,i=!1){const e=rt||Ne;if(e){const n=e.type;if(t===Cc){const a=up(n,!1);if(a&&(a===s||a===Pt(s)||a===_s(Pt(s))))return n}const o=rl(e[t]||n[t],s)||rl(e.appContext[t],s);return!o&&i?n:o}}function rl(t,s){return t&&(t[s]||t[Pt(s)]||t[_s(Pt(s))])}function Wi(t,s,r,i){let e;const n=r&&r[i];if($(t)||Te(t)){e=new Array(t.length);for(let o=0,a=t.length;o<a;o++)e[o]=s(t[o],o,void 0,n&&n[o])}else if(typeof t=="number"){e=new Array(t);for(let o=0;o<t;o++)e[o]=s(o+1,o,void 0,n&&n[o])}else if(ve(t))if(t[Symbol.iterator])e=Array.from(t,(o,a)=>s(o,a,void 0,n&&n[a]));else{const o=Object.keys(t);e=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const u=o[a];e[a]=s(t[u],u,a,n&&n[a])}}else e=[];return r&&(r[i]=e),e}const go=t=>t?Nc(t)?ws(t)||t.proxy:go(t.parent):null,Gr=Me(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>go(t.parent),$root:t=>go(t.root),$emit:t=>t.emit,$options:t=>aa(t),$forceUpdate:t=>t.f||(t.f=()=>ia(t.update)),$nextTick:t=>t.n||(t.n=hc.bind(t.proxy)),$watch:t=>yd.bind(t)}),$s=(t,s)=>t!==pe&&!t.__isScriptSetup&&ne(t,s),Id={get({_:t},s){const{ctx:r,setupState:i,data:e,props:n,accessCache:o,type:a,appContext:l}=t;let u;if(s[0]!=="$"){const p=o[s];if(p!==void 0)switch(p){case 1:return i[s];case 2:return e[s];case 4:return r[s];case 3:return n[s]}else{if($s(i,s))return o[s]=1,i[s];if(e!==pe&&ne(e,s))return o[s]=2,e[s];if((u=t.propsOptions[0])&&ne(u,s))return o[s]=3,n[s];if(r!==pe&&ne(r,s))return o[s]=4,r[s];yo&&(o[s]=0)}}const c=Gr[s];let h,d;if(c)return s==="$attrs"&&$e(t,"get",s),c(t);if((h=a.__cssModules)&&(h=h[s]))return h;if(r!==pe&&ne(r,s))return o[s]=4,r[s];if(d=l.config.globalProperties,ne(d,s))return d[s]},set({_:t},s,r){const{data:i,setupState:e,ctx:n}=t;return $s(e,s)?(e[s]=r,!0):i!==pe&&ne(i,s)?(i[s]=r,!0):ne(t.props,s)||s[0]==="$"&&s.slice(1)in t?!1:(n[s]=r,!0)},has({_:{data:t,setupState:s,accessCache:r,ctx:i,appContext:e,propsOptions:n}},o){let a;return!!r[o]||t!==pe&&ne(t,o)||$s(s,o)||(a=n[0])&&ne(a,o)||ne(i,o)||ne(Gr,o)||ne(e.config.globalProperties,o)},defineProperty(t,s,r){return r.get!=null?t._.accessCache[s]=0:ne(r,"value")&&this.set(t,s,r.value,null),Reflect.defineProperty(t,s,r)}};function il(t){return $(t)?t.reduce((s,r)=>(s[r]=null,s),{}):t}let yo=!0;function Ld(t){const s=aa(t),r=t.proxy,i=t.ctx;yo=!1,s.beforeCreate&&sl(s.beforeCreate,t,"bc");const{data:e,computed:n,methods:o,watch:a,provide:l,inject:u,created:c,beforeMount:h,mounted:d,beforeUpdate:p,updated:v,activated:y,deactivated:m,beforeDestroy:b,beforeUnmount:C,destroyed:E,unmounted:S,render:D,renderTracked:G,renderTriggered:L,errorCaptured:T,serverPrefetch:q,expose:W,inheritAttrs:te,components:R,directives:he,filters:gt}=s;if(u&&Nd(u,i,null),o)for(const fe in o){const le=o[fe];J(le)&&(i[fe]=le.bind(r))}if(e){const fe=e.call(r,r);ve(fe)&&(t.data=xs(fe))}if(yo=!0,n)for(const fe in n){const le=n[fe],Ke=J(le)?le.bind(r,r):J(le.get)?le.get.bind(r,r):dt,wn=!J(le)&&J(le.set)?le.set.bind(r):dt,ot=hp({get:Ke,set:wn});Object.defineProperty(i,fe,{enumerable:!0,configurable:!0,get:()=>ot.value,set:Ue=>ot.value=Ue})}if(a)for(const fe in a)xc(a[fe],i,r,fe);if(l){const fe=J(l)?l.call(r):l;Reflect.ownKeys(fe).forEach(le=>{Hd(le,fe[le])})}c&&sl(c,t,"c");function se(fe,le){$(le)?le.forEach(Ke=>fe(Ke.bind(r))):le&&fe(le.bind(r))}if(se(Cd,h),se(Ec,d),se(xd,p),se(Sd,v),se(_d,y),se(Ed,m),se(Od,T),se(Ad,G),se(Td,L),se(Pd,C),se(bc,S),se(kd,q),$(W))if(W.length){const fe=t.exposed||(t.exposed={});W.forEach(le=>{Object.defineProperty(fe,le,{get:()=>r[le],set:Ke=>r[le]=Ke})})}else t.exposed||(t.exposed={});D&&t.render===dt&&(t.render=D),te!=null&&(t.inheritAttrs=te),R&&(t.components=R),he&&(t.directives=he)}function Nd(t,s,r=dt){$(t)&&(t=mo(t));for(const i in t){const e=t[i];let n;ve(e)?"default"in e?n=Di(e.from||i,e.default,!0):n=Di(e.from||i):n=Di(e),De(n)?Object.defineProperty(s,i,{enumerable:!0,configurable:!0,get:()=>n.value,set:o=>n.value=o}):s[i]=n}}function sl(t,s,r){pt($(t)?t.map(i=>i.bind(s.proxy)):t.bind(s.proxy),s,r)}function xc(t,s,r,i){const e=i.includes(".")?yc(r,i):()=>r[i];if(Te(t)){const n=s[t];J(n)&&Oi(e,n)}else if(J(t))Oi(e,t.bind(r));else if(ve(t))if($(t))t.forEach(n=>xc(n,s,r,i));else{const n=J(t.handler)?t.handler.bind(r):s[t.handler];J(n)&&Oi(e,n,t)}}function aa(t){const s=t.type,{mixins:r,extends:i}=s,{mixins:e,optionsCache:n,config:{optionMergeStrategies:o}}=t.appContext,a=n.get(s);let l;return a?l=a:!e.length&&!r&&!i?l=s:(l={},e.length&&e.forEach(u=>zi(l,u,o,!0)),zi(l,s,o)),ve(s)&&n.set(s,l),l}function zi(t,s,r,i=!1){const{mixins:e,extends:n}=s;n&&zi(t,n,r,!0),e&&e.forEach(o=>zi(t,o,r,!0));for(const o in s)if(!(i&&o==="expose")){const a=Rd[o]||r&&r[o];t[o]=a?a(t[o],s[o]):s[o]}return t}const Rd={data:ol,props:al,emits:al,methods:Dr,computed:Dr,beforeCreate:je,created:je,beforeMount:je,mounted:je,beforeUpdate:je,updated:je,beforeDestroy:je,beforeUnmount:je,destroyed:je,unmounted:je,activated:je,deactivated:je,errorCaptured:je,serverPrefetch:je,components:Dr,directives:Dr,watch:Gd,provide:ol,inject:Fd};function ol(t,s){return s?t?function(){return Me(J(t)?t.call(this,this):t,J(s)?s.call(this,this):s)}:s:t}function Fd(t,s){return Dr(mo(t),mo(s))}function mo(t){if($(t)){const s={};for(let r=0;r<t.length;r++)s[t[r]]=t[r];return s}return t}function je(t,s){return t?[...new Set([].concat(t,s))]:s}function Dr(t,s){return t?Me(Object.create(null),t,s):s}function al(t,s){return t?$(t)&&$(s)?[...new Set([...t,...s])]:Me(Object.create(null),il(t),il(s??{})):s}function Gd(t,s){if(!t)return s;if(!s)return t;const r=Me(Object.create(null),t);for(const i in s)r[i]=je(t[i],s[i]);return r}function Sc(){return{app:null,config:{isNativeTag:af,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let jd=0;function Bd(t,s){return function(i,e=null){J(i)||(i=Me({},i)),e!=null&&!ve(e)&&(e=null);const n=Sc(),o=new Set;let a=!1;const l=n.app={_uid:jd++,_component:i,_props:e,_container:null,_context:n,_instance:null,version:pp,get config(){return n.config},set config(u){},use(u,...c){return o.has(u)||(u&&J(u.install)?(o.add(u),u.install(l,...c)):J(u)&&(o.add(u),u(l,...c))),l},mixin(u){return n.mixins.includes(u)||n.mixins.push(u),l},component(u,c){return c?(n.components[u]=c,l):n.components[u]},directive(u,c){return c?(n.directives[u]=c,l):n.directives[u]},mount(u,c,h){if(!a){const d=Ge(i,e);return d.appContext=n,c&&s?s(d,u):t(d,u,h),a=!0,l._container=u,u.__vue_app__=l,ws(d.component)||d.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(u,c){return n.provides[u]=c,l},runWithContext(u){qi=l;try{return u()}finally{qi=null}}};return l}}let qi=null;function Hd(t,s){if(Ne){let r=Ne.provides;const i=Ne.parent&&Ne.parent.provides;i===r&&(r=Ne.provides=Object.create(i)),r[t]=s}}function Di(t,s,r=!1){const i=Ne||rt;if(i||qi){const e=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:qi._context.provides;if(e&&t in e)return e[t];if(arguments.length>1)return r&&J(s)?s.call(i&&i.proxy):s}}function Ud(t,s,r,i=!1){const e={},n={};Vi(n,Os,1),t.propsDefaults=Object.create(null),Pc(t,s,e,n);for(const o in t.propsOptions[0])o in e||(e[o]=void 0);r?t.props=i?e:Jf(e):t.type.props?t.props=e:t.props=n,t.attrs=n}function Vd(t,s,r,i){const{props:e,attrs:n,vnode:{patchFlag:o}}=t,a=ie(e),[l]=t.propsOptions;let u=!1;if((i||o>0)&&!(o&16)){if(o&8){const c=t.vnode.dynamicProps;for(let h=0;h<c.length;h++){let d=c[h];if(Ps(t.emitsOptions,d))continue;const p=s[d];if(l)if(ne(n,d))p!==n[d]&&(n[d]=p,u=!0);else{const v=Pt(d);e[v]=_o(l,a,v,p,t,!1)}else p!==n[d]&&(n[d]=p,u=!0)}}}else{Pc(t,s,e,n)&&(u=!0);let c;for(const h in a)(!s||!ne(s,h)&&((c=fr(h))===h||!ne(s,c)))&&(l?r&&(r[h]!==void 0||r[c]!==void 0)&&(e[h]=_o(l,a,h,void 0,t,!0)):delete e[h]);if(n!==a)for(const h in n)(!s||!ne(s,h))&&(delete n[h],u=!0)}u&&Rt(t,"set","$attrs")}function Pc(t,s,r,i){const[e,n]=t.propsOptions;let o=!1,a;if(s)for(let l in s){if(Ti(l))continue;const u=s[l];let c;e&&ne(e,c=Pt(l))?!n||!n.includes(c)?r[c]=u:(a||(a={}))[c]=u:Ps(t.emitsOptions,l)||(!(l in i)||u!==i[l])&&(i[l]=u,o=!0)}if(n){const l=ie(r),u=a||pe;for(let c=0;c<n.length;c++){const h=n[c];r[h]=_o(e,l,h,u[h],t,!ne(u,h))}}return o}function _o(t,s,r,i,e,n){const o=t[r];if(o!=null){const a=ne(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&J(l)){const{propsDefaults:u}=e;r in u?i=u[r]:(tr(e),i=u[r]=l.call(null,s),En())}else i=l}o[0]&&(n&&!a?i=!1:o[1]&&(i===""||i===fr(r))&&(i=!0))}return i}function kc(t,s,r=!1){const i=s.propsCache,e=i.get(t);if(e)return e;const n=t.props,o={},a=[];let l=!1;if(!J(t)){const c=h=>{l=!0;const[d,p]=kc(h,s,!0);Me(o,d),p&&a.push(...p)};!r&&s.mixins.length&&s.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!n&&!l)return ve(t)&&i.set(t,$n),$n;if($(n))for(let c=0;c<n.length;c++){const h=Pt(n[c]);ll(h)&&(o[h]=pe)}else if(n)for(const c in n){const h=Pt(c);if(ll(h)){const d=n[c],p=o[h]=$(d)||J(d)?{type:d}:Me({},d);if(p){const v=hl(Boolean,p.type),y=hl(String,p.type);p[0]=v>-1,p[1]=y<0||v<y,(v>-1||ne(p,"default"))&&a.push(h)}}}const u=[o,a];return ve(t)&&i.set(t,u),u}function ll(t){return t[0]!=="$"}function ul(t){const s=t&&t.toString().match(/^\s*(function|class) (\w+)/);return s?s[2]:t===null?"null":""}function cl(t,s){return ul(t)===ul(s)}function hl(t,s){return $(s)?s.findIndex(r=>cl(r,t)):J(s)&&cl(s,t)?0:-1}const Tc=t=>t[0]==="_"||t==="$stable",la=t=>$(t)?t.map(_t):[_t(t)],Yd=(t,s,r)=>{if(s._n)return s;const i=vo((...e)=>la(s(...e)),r);return i._c=!1,i},Ac=(t,s,r)=>{const i=t._ctx;for(const e in t){if(Tc(e))continue;const n=t[e];if(J(n))s[e]=Yd(e,n,i);else if(n!=null){const o=la(n);s[e]=()=>o}}},Oc=(t,s)=>{const r=la(s);t.slots.default=()=>r},Xd=(t,s)=>{if(t.vnode.shapeFlag&32){const r=s._;r?(t.slots=ie(s),Vi(s,"_",r)):Ac(s,t.slots={})}else t.slots={},s&&Oc(t,s);Vi(t.slots,Os,1)},$d=(t,s,r)=>{const{vnode:i,slots:e}=t;let n=!0,o=pe;if(i.shapeFlag&32){const a=s._;a?r&&a===1?n=!1:(Me(e,s),!r&&a===1&&delete e._):(n=!s.$stable,Ac(s,e)),o=s}else s&&(Oc(t,s),o={default:1});if(n)for(const a in e)!Tc(a)&&!(a in o)&&delete e[a]};function Eo(t,s,r,i,e=!1){if($(t)){t.forEach((d,p)=>Eo(d,s&&($(s)?s[p]:s),r,i,e));return}if(wi(i)&&!e)return;const n=i.shapeFlag&4?ws(i.component)||i.component.proxy:i.el,o=e?null:n,{i:a,r:l}=t,u=s&&s.r,c=a.refs===pe?a.refs={}:a.refs,h=a.setupState;if(u!=null&&u!==l&&(Te(u)?(c[u]=null,ne(h,u)&&(h[u]=null)):De(u)&&(u.value=null)),J(l))Jt(l,a,12,[o,c]);else{const d=Te(l),p=De(l);if(d||p){const v=()=>{if(t.f){const y=d?ne(h,l)?h[l]:c[l]:l.value;e?$(y)&&zo(y,n):$(y)?y.includes(n)||y.push(n):d?(c[l]=[n],ne(h,l)&&(h[l]=c[l])):(l.value=[n],t.k&&(c[t.k]=l.value))}else d?(c[l]=o,ne(h,l)&&(h[l]=o)):p&&(l.value=o,t.k&&(c[t.k]=o))};o?(v.id=-1,Ve(v,r)):v()}}}const Ve=gd;function Wd(t){return zd(t)}function zd(t,s){const r=uo();r.__VUE__=!0;const{insert:i,remove:e,patchProp:n,createElement:o,createText:a,createComment:l,setText:u,setElementText:c,parentNode:h,nextSibling:d,setScopeId:p=dt,insertStaticContent:v}=t,y=(_,x,P,O=null,A=null,I=null,F=!1,M=null,N=!!x.dynamicChildren)=>{if(_===x)return;_&&!_r(_,x)&&(O=Ze(_),Ue(_,A,I,!0),_=null),x.patchFlag===-2&&(N=!1,x.dynamicChildren=null);const{type:w,ref:V,shapeFlag:j}=x;switch(w){case As:m(_,x,P,O);break;case Cn:b(_,x,P,O);break;case Ws:_==null&&C(x,P,O,F);break;case Xe:R(_,x,P,O,A,I,F,M,N);break;default:j&1?D(_,x,P,O,A,I,F,M,N):j&6?he(_,x,P,O,A,I,F,M,N):(j&64||j&128)&&w.process(_,x,P,O,A,I,F,M,N,Dn)}V!=null&&A&&Eo(V,_&&_.ref,I,x||_,!x)},m=(_,x,P,O)=>{if(_==null)i(x.el=a(x.children),P,O);else{const A=x.el=_.el;x.children!==_.children&&u(A,x.children)}},b=(_,x,P,O)=>{_==null?i(x.el=l(x.children||""),P,O):x.el=_.el},C=(_,x,P,O)=>{[_.el,_.anchor]=v(_.children,x,P,O,_.el,_.anchor)},E=({el:_,anchor:x},P,O)=>{let A;for(;_&&_!==x;)A=d(_),i(_,P,O),_=A;i(x,P,O)},S=({el:_,anchor:x})=>{let P;for(;_&&_!==x;)P=d(_),e(_),_=P;e(x)},D=(_,x,P,O,A,I,F,M,N)=>{F=F||x.type==="svg",_==null?G(x,P,O,A,I,F,M,N):q(_,x,A,I,F,M,N)},G=(_,x,P,O,A,I,F,M)=>{let N,w;const{type:V,props:j,shapeFlag:Y,transition:K,dirs:Z}=_;if(N=_.el=o(_.type,I,j&&j.is,j),Y&8?c(N,_.children):Y&16&&T(_.children,N,null,O,A,I&&V!=="foreignObject",F,M),Z&&sn(_,null,O,"created"),L(N,_,_.scopeId,F,O),j){for(const ue in j)ue!=="value"&&!Ti(ue)&&n(N,ue,null,j[ue],I,_.children,O,A,Je);"value"in j&&n(N,"value",null,j.value),(w=j.onVnodeBeforeMount)&&mt(w,O,_)}Z&&sn(_,null,O,"beforeMount");const de=(!A||A&&!A.pendingBranch)&&K&&!K.persisted;de&&K.beforeEnter(N),i(N,x,P),((w=j&&j.onVnodeMounted)||de||Z)&&Ve(()=>{w&&mt(w,O,_),de&&K.enter(N),Z&&sn(_,null,O,"mounted")},A)},L=(_,x,P,O,A)=>{if(P&&p(_,P),O)for(let I=0;I<O.length;I++)p(_,O[I]);if(A){let I=A.subTree;if(x===I){const F=A.vnode;L(_,F,F.scopeId,F.slotScopeIds,A.parent)}}},T=(_,x,P,O,A,I,F,M,N=0)=>{for(let w=N;w<_.length;w++){const V=_[w]=M?Wt(_[w]):_t(_[w]);y(null,V,x,P,O,A,I,F,M)}},q=(_,x,P,O,A,I,F)=>{const M=x.el=_.el;let{patchFlag:N,dynamicChildren:w,dirs:V}=x;N|=_.patchFlag&16;const j=_.props||pe,Y=x.props||pe;let K;P&&on(P,!1),(K=Y.onVnodeBeforeUpdate)&&mt(K,P,x,_),V&&sn(x,_,P,"beforeUpdate"),P&&on(P,!0);const Z=A&&x.type!=="foreignObject";if(w?W(_.dynamicChildren,w,M,P,O,Z,I):F||le(_,x,M,null,P,O,Z,I,!1),N>0){if(N&16)te(M,x,j,Y,P,O,A);else if(N&2&&j.class!==Y.class&&n(M,"class",null,Y.class,A),N&4&&n(M,"style",j.style,Y.style,A),N&8){const de=x.dynamicProps;for(let ue=0;ue<de.length;ue++){const xe=de[ue],at=j[xe],Mn=Y[xe];(Mn!==at||xe==="value")&&n(M,xe,at,Mn,A,_.children,P,O,Je)}}N&1&&_.children!==x.children&&c(M,x.children)}else!F&&w==null&&te(M,x,j,Y,P,O,A);((K=Y.onVnodeUpdated)||V)&&Ve(()=>{K&&mt(K,P,x,_),V&&sn(x,_,P,"updated")},O)},W=(_,x,P,O,A,I,F)=>{for(let M=0;M<x.length;M++){const N=_[M],w=x[M],V=N.el&&(N.type===Xe||!_r(N,w)||N.shapeFlag&70)?h(N.el):P;y(N,w,V,null,O,A,I,F,!0)}},te=(_,x,P,O,A,I,F)=>{if(P!==O){if(P!==pe)for(const M in P)!Ti(M)&&!(M in O)&&n(_,M,P[M],null,F,x.children,A,I,Je);for(const M in O){if(Ti(M))continue;const N=O[M],w=P[M];N!==w&&M!=="value"&&n(_,M,w,N,F,x.children,A,I,Je)}"value"in O&&n(_,"value",P.value,O.value)}},R=(_,x,P,O,A,I,F,M,N)=>{const w=x.el=_?_.el:a(""),V=x.anchor=_?_.anchor:a("");let{patchFlag:j,dynamicChildren:Y,slotScopeIds:K}=x;K&&(M=M?M.concat(K):K),_==null?(i(w,P,O),i(V,P,O),T(x.children,P,V,A,I,F,M,N)):j>0&&j&64&&Y&&_.dynamicChildren?(W(_.dynamicChildren,Y,P,A,I,F,M),(x.key!=null||A&&x===A.subTree)&&wc(_,x,!0)):le(_,x,P,V,A,I,F,M,N)},he=(_,x,P,O,A,I,F,M,N)=>{x.slotScopeIds=M,_==null?x.shapeFlag&512?A.ctx.activate(x,P,O,F,N):gt(x,P,O,A,I,F,N):st(_,x,N)},gt=(_,x,P,O,A,I,F)=>{const M=_.component=ip(_,O,A);if(mc(_)&&(M.ctx.renderer=Dn),sp(M),M.asyncDep){if(A&&A.registerDep(M,se),!_.el){const N=M.subTree=Ge(Cn);b(null,N,x,P)}return}se(M,_,x,P,A,I,F)},st=(_,x,P)=>{const O=x.component=_.component;if(dd(_,x,P))if(O.asyncDep&&!O.asyncResolved){fe(O,x,P);return}else O.next=x,ad(O.update),O.update();else x.el=_.el,O.vnode=x},se=(_,x,P,O,A,I,F)=>{const M=()=>{if(_.isMounted){let{next:V,bu:j,u:Y,parent:K,vnode:Z}=_,de=V,ue;on(_,!1),V?(V.el=Z.el,fe(_,V,F)):V=Z,j&&Ai(j),(ue=V.props&&V.props.onVnodeBeforeUpdate)&&mt(ue,K,V,Z),on(_,!0);const xe=Xs(_),at=_.subTree;_.subTree=xe,y(at,xe,h(at.el),Ze(at),_,A,I),V.el=xe.el,de===null&&pd(_,xe.el),Y&&Ve(Y,A),(ue=V.props&&V.props.onVnodeUpdated)&&Ve(()=>mt(ue,K,V,Z),A)}else{let V;const{el:j,props:Y}=x,{bm:K,m:Z,parent:de}=_,ue=wi(x);if(on(_,!1),K&&Ai(K),!ue&&(V=Y&&Y.onVnodeBeforeMount)&&mt(V,de,x),on(_,!0),j&&Vs){const xe=()=>{_.subTree=Xs(_),Vs(j,_.subTree,_,A,null)};ue?x.type.__asyncLoader().then(()=>!_.isUnmounted&&xe()):xe()}else{const xe=_.subTree=Xs(_);y(null,xe,P,O,_,A,I),x.el=xe.el}if(Z&&Ve(Z,A),!ue&&(V=Y&&Y.onVnodeMounted)){const xe=x;Ve(()=>mt(V,de,xe),A)}(x.shapeFlag&256||de&&wi(de.vnode)&&de.vnode.shapeFlag&256)&&_.a&&Ve(_.a,A),_.isMounted=!0,x=P=O=null}},N=_.effect=new Jo(M,()=>ia(w),_.scope),w=_.update=()=>N.run();w.id=_.uid,on(_,!0),w()},fe=(_,x,P)=>{x.component=_;const O=_.vnode.props;_.vnode=x,_.next=null,Vd(_,x.props,O,P),$d(_,x.children,P),dr(),tl(),pr()},le=(_,x,P,O,A,I,F,M,N=!1)=>{const w=_&&_.children,V=_?_.shapeFlag:0,j=x.children,{patchFlag:Y,shapeFlag:K}=x;if(Y>0){if(Y&128){wn(w,j,P,O,A,I,F,M,N);return}else if(Y&256){Ke(w,j,P,O,A,I,F,M,N);return}}K&8?(V&16&&Je(w,A,I),j!==w&&c(P,j)):V&16?K&16?wn(w,j,P,O,A,I,F,M,N):Je(w,A,I,!0):(V&8&&c(P,""),K&16&&T(j,P,O,A,I,F,M,N))},Ke=(_,x,P,O,A,I,F,M,N)=>{_=_||$n,x=x||$n;const w=_.length,V=x.length,j=Math.min(w,V);let Y;for(Y=0;Y<j;Y++){const K=x[Y]=N?Wt(x[Y]):_t(x[Y]);y(_[Y],K,P,null,A,I,F,M,N)}w>V?Je(_,A,I,!0,!1,j):T(x,P,O,A,I,F,M,N,j)},wn=(_,x,P,O,A,I,F,M,N)=>{let w=0;const V=x.length;let j=_.length-1,Y=V-1;for(;w<=j&&w<=Y;){const K=_[w],Z=x[w]=N?Wt(x[w]):_t(x[w]);if(_r(K,Z))y(K,Z,P,null,A,I,F,M,N);else break;w++}for(;w<=j&&w<=Y;){const K=_[j],Z=x[Y]=N?Wt(x[Y]):_t(x[Y]);if(_r(K,Z))y(K,Z,P,null,A,I,F,M,N);else break;j--,Y--}if(w>j){if(w<=Y){const K=Y+1,Z=K<V?x[K].el:O;for(;w<=Y;)y(null,x[w]=N?Wt(x[w]):_t(x[w]),P,Z,A,I,F,M,N),w++}}else if(w>Y)for(;w<=j;)Ue(_[w],A,I,!0),w++;else{const K=w,Z=w,de=new Map;for(w=Z;w<=Y;w++){const We=x[w]=N?Wt(x[w]):_t(x[w]);We.key!=null&&de.set(We.key,w)}let ue,xe=0;const at=Y-Z+1;let Mn=!1,Va=0;const mr=new Array(at);for(w=0;w<at;w++)mr[w]=0;for(w=K;w<=j;w++){const We=_[w];if(xe>=at){Ue(We,A,I,!0);continue}let yt;if(We.key!=null)yt=de.get(We.key);else for(ue=Z;ue<=Y;ue++)if(mr[ue-Z]===0&&_r(We,x[ue])){yt=ue;break}yt===void 0?Ue(We,A,I,!0):(mr[yt-Z]=w+1,yt>=Va?Va=yt:Mn=!0,y(We,x[yt],P,null,A,I,F,M,N),xe++)}const Ya=Mn?qd(mr):$n;for(ue=Ya.length-1,w=at-1;w>=0;w--){const We=Z+w,yt=x[We],Xa=We+1<V?x[We+1].el:O;mr[w]===0?y(null,yt,P,Xa,A,I,F,M,N):Mn&&(ue<0||w!==Ya[ue]?ot(yt,P,Xa,2):ue--)}}},ot=(_,x,P,O,A=null)=>{const{el:I,type:F,transition:M,children:N,shapeFlag:w}=_;if(w&6){ot(_.component.subTree,x,P,O);return}if(w&128){_.suspense.move(x,P,O);return}if(w&64){F.move(_,x,P,Dn);return}if(F===Xe){i(I,x,P);for(let j=0;j<N.length;j++)ot(N[j],x,P,O);i(_.anchor,x,P);return}if(F===Ws){E(_,x,P);return}if(O!==2&&w&1&&M)if(O===0)M.beforeEnter(I),i(I,x,P),Ve(()=>M.enter(I),A);else{const{leave:j,delayLeave:Y,afterLeave:K}=M,Z=()=>i(I,x,P),de=()=>{j(I,()=>{Z(),K&&K()})};Y?Y(I,Z,de):de()}else i(I,x,P)},Ue=(_,x,P,O=!1,A=!1)=>{const{type:I,props:F,ref:M,children:N,dynamicChildren:w,shapeFlag:V,patchFlag:j,dirs:Y}=_;if(M!=null&&Eo(M,null,P,_,!0),V&256){x.ctx.deactivate(_);return}const K=V&1&&Y,Z=!wi(_);let de;if(Z&&(de=F&&F.onVnodeBeforeUnmount)&&mt(de,x,_),V&6)ui(_.component,P,O);else{if(V&128){_.suspense.unmount(P,O);return}K&&sn(_,null,x,"beforeUnmount"),V&64?_.type.remove(_,x,P,A,Dn,O):w&&(I!==Xe||j>0&&j&64)?Je(w,x,P,!1,!0):(I===Xe&&j&384||!A&&V&16)&&Je(N,x,P),O&&li(_)}(Z&&(de=F&&F.onVnodeUnmounted)||K)&&Ve(()=>{de&&mt(de,x,_),K&&sn(_,null,x,"unmounted")},P)},li=_=>{const{type:x,el:P,anchor:O,transition:A}=_;if(x===Xe){yr(P,O);return}if(x===Ws){S(_);return}const I=()=>{e(P),A&&!A.persisted&&A.afterLeave&&A.afterLeave()};if(_.shapeFlag&1&&A&&!A.persisted){const{leave:F,delayLeave:M}=A,N=()=>F(P,I);M?M(_.el,I,N):N()}else I()},yr=(_,x)=>{let P;for(;_!==x;)P=d(_),e(_),_=P;e(x)},ui=(_,x,P)=>{const{bum:O,scope:A,update:I,subTree:F,um:M}=_;O&&Ai(O),A.stop(),I&&(I.active=!1,Ue(F,_,x,P)),M&&Ve(M,x),Ve(()=>{_.isUnmounted=!0},x),x&&x.pendingBranch&&!x.isUnmounted&&_.asyncDep&&!_.asyncResolved&&_.suspenseId===x.pendingId&&(x.deps--,x.deps===0&&x.resolve())},Je=(_,x,P,O=!1,A=!1,I=0)=>{for(let F=I;F<_.length;F++)Ue(_[F],x,P,O,A)},Ze=_=>_.shapeFlag&6?Ze(_.component.subTree):_.shapeFlag&128?_.suspense.next():d(_.anchor||_.el),Ua=(_,x,P)=>{_==null?x._vnode&&Ue(x._vnode,null,null,!0):y(x._vnode||null,_,x,null,null,null,P),tl(),dc(),x._vnode=_},Dn={p:y,um:Ue,m:ot,r:li,mt:gt,mc:T,pc:le,pbc:W,n:Ze,o:t};let Us,Vs;return s&&([Us,Vs]=s(Dn)),{render:Ua,hydrate:Us,createApp:Bd(Ua,Us)}}function on({effect:t,update:s},r){t.allowRecurse=s.allowRecurse=r}function wc(t,s,r=!1){const i=t.children,e=s.children;if($(i)&&$(e))for(let n=0;n<i.length;n++){const o=i[n];let a=e[n];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=e[n]=Wt(e[n]),a.el=o.el),r||wc(o,a)),a.type===As&&(a.el=o.el)}}function qd(t){const s=t.slice(),r=[0];let i,e,n,o,a;const l=t.length;for(i=0;i<l;i++){const u=t[i];if(u!==0){if(e=r[r.length-1],t[e]<u){s[i]=e,r.push(i);continue}for(n=0,o=r.length-1;n<o;)a=n+o>>1,t[r[a]]<u?n=a+1:o=a;u<t[r[n]]&&(n>0&&(s[i]=r[n-1]),r[n]=i)}}for(n=r.length,o=r[n-1];n-- >0;)r[n]=o,o=s[o];return r}const Kd=t=>t.__isTeleport,Xe=Symbol.for("v-fgt"),As=Symbol.for("v-txt"),Cn=Symbol.for("v-cmt"),Ws=Symbol.for("v-stc"),jr=[];let ft=null;function be(t=!1){jr.push(ft=t?null:[])}function Jd(){jr.pop(),ft=jr[jr.length-1]||null}let Wr=1;function fl(t){Wr+=t}function Dc(t){return t.dynamicChildren=Wr>0?ft||$n:null,Jd(),Wr>0&&ft&&ft.push(t),t}function Se(t,s,r,i,e,n){return Dc(B(t,s,r,i,e,n,!0))}function Mc(t,s,r,i,e){return Dc(Ge(t,s,r,i,e,!0))}function Zd(t){return t?t.__v_isVNode===!0:!1}function _r(t,s){return t.type===s.type&&t.key===s.key}const Os="__vInternal",Ic=({key:t})=>t??null,Mi=({ref:t,ref_key:s,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?Te(t)||De(t)||J(t)?{i:rt,r:t,k:s,f:!!r}:t:null);function B(t,s=null,r=null,i=0,e=null,n=t===Xe?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:s,key:s&&Ic(s),ref:s&&Mi(s),scopeId:ks,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:n,patchFlag:i,dynamicProps:e,dynamicChildren:null,appContext:null,ctx:rt};return a?(ua(l,r),n&128&&t.normalize(l)):r&&(l.shapeFlag|=Te(r)?8:16),Wr>0&&!o&&ft&&(l.patchFlag>0||n&6)&&l.patchFlag!==32&&ft.push(l),l}const Ge=Qd;function Qd(t,s=null,r=null,i=0,e=null,n=!1){if((!t||t===Dd)&&(t=Cn),Zd(t)){const a=er(t,s,!0);return r&&ua(a,r),Wr>0&&!n&&ft&&(a.shapeFlag&6?ft[ft.indexOf(t)]=a:ft.push(a)),a.patchFlag|=-2,a}if(cp(t)&&(t=t.__vccOpts),s){s=ep(s);let{class:a,style:l}=s;a&&!Te(a)&&(s.class=On(a)),ve(l)&&(ic(l)&&!$(l)&&(l=Me({},l)),s.style=Es(l))}const o=Te(t)?1:vd(t)?128:Kd(t)?64:ve(t)?4:J(t)?2:0;return B(t,s,r,i,e,o,n,!0)}function ep(t){return t?ic(t)||Os in t?Me({},t):t:null}function er(t,s,r=!1){const{props:i,ref:e,patchFlag:n,children:o}=t,a=s?tp(i||{},s):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&Ic(a),ref:s&&s.ref?r&&e?$(e)?e.concat(Mi(s)):[e,Mi(s)]:Mi(s):e,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:s&&t.type!==Xe?n===-1?16:n|16:n,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&er(t.ssContent),ssFallback:t.ssFallback&&er(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Ki(t=" ",s=0){return Ge(As,null,t,s)}function Lc(t="",s=!1){return s?(be(),Mc(Cn,null,t)):Ge(Cn,null,t)}function _t(t){return t==null||typeof t=="boolean"?Ge(Cn):$(t)?Ge(Xe,null,t.slice()):typeof t=="object"?Wt(t):Ge(As,null,String(t))}function Wt(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:er(t)}function ua(t,s){let r=0;const{shapeFlag:i}=t;if(s==null)s=null;else if($(s))r=16;else if(typeof s=="object")if(i&65){const e=s.default;e&&(e._c&&(e._d=!1),ua(t,e()),e._c&&(e._d=!0));return}else{r=32;const e=s._;!e&&!(Os in s)?s._ctx=rt:e===3&&rt&&(rt.slots._===1?s._=1:(s._=2,t.patchFlag|=1024))}else J(s)?(s={default:s,_ctx:rt},r=32):(s=String(s),i&64?(r=16,s=[Ki(s)]):r=8);t.children=s,t.shapeFlag|=r}function tp(...t){const s={};for(let r=0;r<t.length;r++){const i=t[r];for(const e in i)if(e==="class")s.class!==i.class&&(s.class=On([s.class,i.class]));else if(e==="style")s.style=Es([s.style,i.style]);else if(gs(e)){const n=s[e],o=i[e];o&&n!==o&&!($(n)&&n.includes(o))&&(s[e]=n?[].concat(n,o):o)}else e!==""&&(s[e]=i[e])}return s}function mt(t,s,r,i=null){pt(t,s,7,[r,i])}const np=Sc();let rp=0;function ip(t,s,r){const i=t.type,e=(s?s.appContext:t.appContext)||np,n={uid:rp++,vnode:t,type:i,parent:s,appContext:e,root:null,next:null,subTree:null,effect:null,update:null,scope:new bf(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:s?s.provides:Object.create(e.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:kc(i,e),emitsOptions:vc(i,e),emit:null,emitted:null,propsDefaults:pe,inheritAttrs:i.inheritAttrs,ctx:pe,data:pe,props:pe,attrs:pe,slots:pe,refs:pe,setupState:pe,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return n.ctx={_:n},n.root=s?s.root:n,n.emit=cd.bind(null,n),t.ce&&t.ce(n),n}let Ne=null,ca,In,dl="__VUE_INSTANCE_SETTERS__";(In=uo()[dl])||(In=uo()[dl]=[]),In.push(t=>Ne=t),ca=t=>{In.length>1?In.forEach(s=>s(t)):In[0](t)};const tr=t=>{ca(t),t.scope.on()},En=()=>{Ne&&Ne.scope.off(),ca(null)};function Nc(t){return t.vnode.shapeFlag&4}let zr=!1;function sp(t,s=!1){zr=s;const{props:r,children:i}=t.vnode,e=Nc(t);Ud(t,r,e,s),Xd(t,i);const n=e?op(t,s):void 0;return zr=!1,n}function op(t,s){const r=t.type;t.accessCache=Object.create(null),t.proxy=sc(new Proxy(t.ctx,Id));const{setup:i}=r;if(i){const e=t.setupContext=i.length>1?lp(t):null;tr(t),dr();const n=Jt(i,t,0,[t.props,e]);if(pr(),En(),Hu(n)){if(n.then(En,En),s)return n.then(o=>{pl(t,o,s)}).catch(o=>{Ss(o,t,0)});t.asyncDep=n}else pl(t,n,s)}else Rc(t,s)}function pl(t,s,r){J(s)?t.type.__ssrInlineRender?t.ssrRender=s:t.render=s:ve(s)&&(t.setupState=lc(s)),Rc(t,r)}let vl;function Rc(t,s,r){const i=t.type;if(!t.render){if(!s&&vl&&!i.render){const e=i.template||aa(t).template;if(e){const{isCustomElement:n,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=i,u=Me(Me({isCustomElement:n,delimiters:a},o),l);i.render=vl(e,u)}}t.render=i.render||dt}tr(t),dr(),Ld(t),pr(),En()}function ap(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(s,r){return $e(t,"get","$attrs"),s[r]}}))}function lp(t){const s=r=>{t.exposed=r||{}};return{get attrs(){return ap(t)},slots:t.slots,emit:t.emit,expose:s}}function ws(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(lc(sc(t.exposed)),{get(s,r){if(r in s)return s[r];if(r in Gr)return Gr[r](t)},has(s,r){return r in s||r in Gr}}))}function up(t,s=!0){return J(t)?t.displayName||t.name:t.name||s&&t.__name}function cp(t){return J(t)&&"__vccOpts"in t}const hp=(t,s)=>id(t,s,zr),fp=Symbol.for("v-scx"),dp=()=>Di(fp),pp="3.3.4",vp="http://www.w3.org/2000/svg",dn=typeof document<"u"?document:null,gl=dn&&dn.createElement("template"),gp={insert:(t,s,r)=>{s.insertBefore(t,r||null)},remove:t=>{const s=t.parentNode;s&&s.removeChild(t)},createElement:(t,s,r,i)=>{const e=s?dn.createElementNS(vp,t):dn.createElement(t,r?{is:r}:void 0);return t==="select"&&i&&i.multiple!=null&&e.setAttribute("multiple",i.multiple),e},createText:t=>dn.createTextNode(t),createComment:t=>dn.createComment(t),setText:(t,s)=>{t.nodeValue=s},setElementText:(t,s)=>{t.textContent=s},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>dn.querySelector(t),setScopeId(t,s){t.setAttribute(s,"")},insertStaticContent(t,s,r,i,e,n){const o=r?r.previousSibling:s.lastChild;if(e&&(e===n||e.nextSibling))for(;s.insertBefore(e.cloneNode(!0),r),!(e===n||!(e=e.nextSibling)););else{gl.innerHTML=i?`<svg>${t}</svg>`:t;const a=gl.content;if(i){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}s.insertBefore(a,r)}return[o?o.nextSibling:s.firstChild,r?r.previousSibling:s.lastChild]}};function yp(t,s,r){const i=t._vtc;i&&(s=(s?[s,...i]:[...i]).join(" ")),s==null?t.removeAttribute("class"):r?t.setAttribute("class",s):t.className=s}function mp(t,s,r){const i=t.style,e=Te(r);if(r&&!e){if(s&&!Te(s))for(const n in s)r[n]==null&&bo(i,n,"");for(const n in r)bo(i,n,r[n])}else{const n=i.display;e?s!==r&&(i.cssText=r):s&&t.removeAttribute("style"),"_vod"in t&&(i.display=n)}}const yl=/\s*!important$/;function bo(t,s,r){if($(r))r.forEach(i=>bo(t,s,i));else if(r==null&&(r=""),s.startsWith("--"))t.setProperty(s,r);else{const i=_p(t,s);yl.test(r)?t.setProperty(fr(i),r.replace(yl,""),"important"):t[i]=r}}const ml=["Webkit","Moz","ms"],zs={};function _p(t,s){const r=zs[s];if(r)return r;let i=Pt(s);if(i!=="filter"&&i in t)return zs[s]=i;i=_s(i);for(let e=0;e<ml.length;e++){const n=ml[e]+i;if(n in t)return zs[s]=n}return s}const _l="http://www.w3.org/1999/xlink";function Ep(t,s,r,i,e){if(i&&s.startsWith("xlink:"))r==null?t.removeAttributeNS(_l,s.slice(6,s.length)):t.setAttributeNS(_l,s,r);else{const n=mf(s);r==null||n&&!Xu(r)?t.removeAttribute(s):t.setAttribute(s,n?"":r)}}function bp(t,s,r,i,e,n,o){if(s==="innerHTML"||s==="textContent"){i&&o(i,e,n),t[s]=r??"";return}const a=t.tagName;if(s==="value"&&a!=="PROGRESS"&&!a.includes("-")){t._value=r;const u=a==="OPTION"?t.getAttribute("value"):t.value,c=r??"";u!==c&&(t.value=c),r==null&&t.removeAttribute(s);return}let l=!1;if(r===""||r==null){const u=typeof t[s];u==="boolean"?r=Xu(r):r==null&&u==="string"?(r="",l=!0):u==="number"&&(r=0,l=!0)}try{t[s]=r}catch{}l&&t.removeAttribute(s)}function Fc(t,s,r,i){t.addEventListener(s,r,i)}function Cp(t,s,r,i){t.removeEventListener(s,r,i)}function xp(t,s,r,i,e=null){const n=t._vei||(t._vei={}),o=n[s];if(i&&o)o.value=i;else{const[a,l]=Sp(s);if(i){const u=n[s]=Tp(i,e);Fc(t,a,u,l)}else o&&(Cp(t,a,o,l),n[s]=void 0)}}const El=/(?:Once|Passive|Capture)$/;function Sp(t){let s;if(El.test(t)){s={};let i;for(;i=t.match(El);)t=t.slice(0,t.length-i[0].length),s[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):fr(t.slice(2)),s]}let qs=0;const Pp=Promise.resolve(),kp=()=>qs||(Pp.then(()=>qs=0),qs=Date.now());function Tp(t,s){const r=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=r.attached)return;pt(Ap(i,r.value),s,5,[i])};return r.value=t,r.attached=kp(),r}function Ap(t,s){if($(s)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},s.map(i=>e=>!e._stopped&&i&&i(e))}else return s}const bl=/^on[a-z]/,Op=(t,s,r,i,e=!1,n,o,a,l)=>{s==="class"?yp(t,i,e):s==="style"?mp(t,r,i):gs(s)?Wo(s)||xp(t,s,r,i,o):(s[0]==="."?(s=s.slice(1),!0):s[0]==="^"?(s=s.slice(1),!1):wp(t,s,i,e))?bp(t,s,i,n,o,a,l):(s==="true-value"?t._trueValue=i:s==="false-value"&&(t._falseValue=i),Ep(t,s,i,e))};function wp(t,s,r,i){return i?!!(s==="innerHTML"||s==="textContent"||s in t&&bl.test(s)&&J(r)):s==="spellcheck"||s==="draggable"||s==="translate"||s==="form"||s==="list"&&t.tagName==="INPUT"||s==="type"&&t.tagName==="TEXTAREA"||bl.test(s)&&Te(r)?!1:s in t}const Cl=t=>{const s=t.props["onUpdate:modelValue"]||!1;return $(s)?r=>Ai(s,r):s},Ks={deep:!0,created(t,{value:s,modifiers:{number:r}},i){const e=ys(s);Fc(t,"change",()=>{const n=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>r?Yu(Ji(o)):Ji(o));t._assign(t.multiple?e?new Set(n):n:n[0])}),t._assign=Cl(i)},mounted(t,{value:s}){xl(t,s)},beforeUpdate(t,s,r){t._assign=Cl(r)},updated(t,{value:s}){xl(t,s)}};function xl(t,s){const r=t.multiple;if(!(r&&!$(s)&&!ys(s))){for(let i=0,e=t.options.length;i<e;i++){const n=t.options[i],o=Ji(n);if(r)$(s)?n.selected=Ef(s,o)>-1:n.selected=s.has(o);else if(bs(Ji(n),s)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!r&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Ji(t){return"_value"in t?t._value:t.value}const Dp=["ctrl","shift","alt","meta"],Mp={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,s)=>Dp.some(r=>t[`${r}Key`]&&!s.includes(r))},nr=(t,s)=>(r,...i)=>{for(let e=0;e<s.length;e++){const n=Mp[s[e]];if(n&&n(r,s))return}return t(r,...i)},Gc={beforeMount(t,{value:s},{transition:r}){t._vod=t.style.display==="none"?"":t.style.display,r&&s?r.beforeEnter(t):Er(t,s)},mounted(t,{value:s},{transition:r}){r&&s&&r.enter(t)},updated(t,{value:s,oldValue:r},{transition:i}){!s!=!r&&(i?s?(i.beforeEnter(t),Er(t,!0),i.enter(t)):i.leave(t,()=>{Er(t,!1)}):Er(t,s))},beforeUnmount(t,{value:s}){Er(t,s)}};function Er(t,s){t.style.display=s?t._vod:"none"}const Ip=Me({patchProp:Op},gp);let Sl;function Lp(){return Sl||(Sl=Wd(Ip))}const Np=(...t)=>{const s=Lp().createApp(...t),{mount:r}=s;return s.mount=i=>{const e=Rp(i);if(!e)return;const n=s._component;!J(n)&&!n.render&&!n.template&&(n.template=e.innerHTML),e.innerHTML="";const o=r(e,!1,e instanceof SVGElement);return e instanceof Element&&(e.removeAttribute("v-cloak"),e.setAttribute("data-v-app","")),o},s};function Rp(t){return Te(t)?document.querySelector(t):t}const Fp={id:"topbar"},Gp=B("h3",null,"Verfahrensrezept-Editor",-1),jp=[Gp],Bp={__name:"Topbar",setup(t){return(s,r)=>(be(),Se("div",Fp,jp))}},Hp="/assets/logo-03d6d6da.png";function jc(t,s){return function(){return t.apply(s,arguments)}}const{toString:Up}=Object.prototype,{getPrototypeOf:ha}=Object,Ds=(t=>s=>{const r=Up.call(s);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Tt=t=>(t=t.toLowerCase(),s=>Ds(s)===t),Ms=t=>s=>typeof s===t,{isArray:vr}=Array,qr=Ms("undefined");function Vp(t){return t!==null&&!qr(t)&&t.constructor!==null&&!qr(t.constructor)&&it(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Bc=Tt("ArrayBuffer");function Yp(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&Bc(t.buffer),s}const Xp=Ms("string"),it=Ms("function"),Hc=Ms("number"),Is=t=>t!==null&&typeof t=="object",$p=t=>t===!0||t===!1,Ii=t=>{if(Ds(t)!=="object")return!1;const s=ha(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Wp=Tt("Date"),zp=Tt("File"),qp=Tt("Blob"),Kp=Tt("FileList"),Jp=t=>Is(t)&&it(t.pipe),Zp=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||it(t.append)&&((s=Ds(t))==="formdata"||s==="object"&&it(t.toString)&&t.toString()==="[object FormData]"))},Qp=Tt("URLSearchParams"),ev=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ii(t,s,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let i,e;if(typeof t!="object"&&(t=[t]),vr(t))for(i=0,e=t.length;i<e;i++)s.call(null,t[i],i,t);else{const n=r?Object.getOwnPropertyNames(t):Object.keys(t),o=n.length;let a;for(i=0;i<o;i++)a=n[i],s.call(null,t[a],a,t)}}function Uc(t,s){s=s.toLowerCase();const r=Object.keys(t);let i=r.length,e;for(;i-- >0;)if(e=r[i],s===e.toLowerCase())return e;return null}const Vc=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Yc=t=>!qr(t)&&t!==Vc;function Co(){const{caseless:t}=Yc(this)&&this||{},s={},r=(i,e)=>{const n=t&&Uc(s,e)||e;Ii(s[n])&&Ii(i)?s[n]=Co(s[n],i):Ii(i)?s[n]=Co({},i):vr(i)?s[n]=i.slice():s[n]=i};for(let i=0,e=arguments.length;i<e;i++)arguments[i]&&ii(arguments[i],r);return s}const tv=(t,s,r,{allOwnKeys:i}={})=>(ii(s,(e,n)=>{r&&it(e)?t[n]=jc(e,r):t[n]=e},{allOwnKeys:i}),t),nv=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),rv=(t,s,r,i)=>{t.prototype=Object.create(s.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),r&&Object.assign(t.prototype,r)},iv=(t,s,r,i)=>{let e,n,o;const a={};if(s=s||{},t==null)return s;do{for(e=Object.getOwnPropertyNames(t),n=e.length;n-- >0;)o=e[n],(!i||i(o,t,s))&&!a[o]&&(s[o]=t[o],a[o]=!0);t=r!==!1&&ha(t)}while(t&&(!r||r(t,s))&&t!==Object.prototype);return s},sv=(t,s,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=s.length;const i=t.indexOf(s,r);return i!==-1&&i===r},ov=t=>{if(!t)return null;if(vr(t))return t;let s=t.length;if(!Hc(s))return null;const r=new Array(s);for(;s-- >0;)r[s]=t[s];return r},av=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&ha(Uint8Array)),lv=(t,s)=>{const i=(t&&t[Symbol.iterator]).call(t);let e;for(;(e=i.next())&&!e.done;){const n=e.value;s.call(t,n[0],n[1])}},uv=(t,s)=>{let r;const i=[];for(;(r=t.exec(s))!==null;)i.push(r);return i},cv=Tt("HTMLFormElement"),hv=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,i,e){return i.toUpperCase()+e}),Pl=(({hasOwnProperty:t})=>(s,r)=>t.call(s,r))(Object.prototype),fv=Tt("RegExp"),Xc=(t,s)=>{const r=Object.getOwnPropertyDescriptors(t),i={};ii(r,(e,n)=>{s(e,n,t)!==!1&&(i[n]=e)}),Object.defineProperties(t,i)},dv=t=>{Xc(t,(s,r)=>{if(it(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const i=t[r];if(it(i)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},pv=(t,s)=>{const r={},i=e=>{e.forEach(n=>{r[n]=!0})};return vr(t)?i(t):i(String(t).split(s)),r},vv=()=>{},gv=(t,s)=>(t=+t,Number.isFinite(t)?t:s),Js="abcdefghijklmnopqrstuvwxyz",kl="0123456789",$c={DIGIT:kl,ALPHA:Js,ALPHA_DIGIT:Js+Js.toUpperCase()+kl},yv=(t=16,s=$c.ALPHA_DIGIT)=>{let r="";const{length:i}=s;for(;t--;)r+=s[Math.random()*i|0];return r};function mv(t){return!!(t&&it(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const _v=t=>{const s=new Array(10),r=(i,e)=>{if(Is(i)){if(s.indexOf(i)>=0)return;if(!("toJSON"in i)){s[e]=i;const n=vr(i)?[]:{};return ii(i,(o,a)=>{const l=r(o,e+1);!qr(l)&&(n[a]=l)}),s[e]=void 0,n}}return i};return r(t,0)},Ev=Tt("AsyncFunction"),bv=t=>t&&(Is(t)||it(t))&&it(t.then)&&it(t.catch),k={isArray:vr,isArrayBuffer:Bc,isBuffer:Vp,isFormData:Zp,isArrayBufferView:Yp,isString:Xp,isNumber:Hc,isBoolean:$p,isObject:Is,isPlainObject:Ii,isUndefined:qr,isDate:Wp,isFile:zp,isBlob:qp,isRegExp:fv,isFunction:it,isStream:Jp,isURLSearchParams:Qp,isTypedArray:av,isFileList:Kp,forEach:ii,merge:Co,extend:tv,trim:ev,stripBOM:nv,inherits:rv,toFlatObject:iv,kindOf:Ds,kindOfTest:Tt,endsWith:sv,toArray:ov,forEachEntry:lv,matchAll:uv,isHTMLForm:cv,hasOwnProperty:Pl,hasOwnProp:Pl,reduceDescriptors:Xc,freezeMethods:dv,toObjectSet:pv,toCamelCase:hv,noop:vv,toFiniteNumber:gv,findKey:Uc,global:Vc,isContextDefined:Yc,ALPHABET:$c,generateString:yv,isSpecCompliantForm:mv,toJSONObject:_v,isAsyncFn:Ev,isThenable:bv};function re(t,s,r,i,e){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),r&&(this.config=r),i&&(this.request=i),e&&(this.response=e)}k.inherits(re,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:k.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Wc=re.prototype,zc={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{zc[t]={value:t}});Object.defineProperties(re,zc);Object.defineProperty(Wc,"isAxiosError",{value:!0});re.from=(t,s,r,i,e,n)=>{const o=Object.create(Wc);return k.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),re.call(o,t.message,s,r,i,e),o.cause=t,o.name=t.name,n&&Object.assign(o,n),o};const Cv=null;function xo(t){return k.isPlainObject(t)||k.isArray(t)}function qc(t){return k.endsWith(t,"[]")?t.slice(0,-2):t}function Tl(t,s,r){return t?t.concat(s).map(function(e,n){return e=qc(e),!r&&n?"["+e+"]":e}).join(r?".":""):s}function xv(t){return k.isArray(t)&&!t.some(xo)}const Sv=k.toFlatObject(k,{},null,function(s){return/^is[A-Z]/.test(s)});function Ls(t,s,r){if(!k.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,r=k.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,m){return!k.isUndefined(m[y])});const i=r.metaTokens,e=r.visitor||c,n=r.dots,o=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&k.isSpecCompliantForm(s);if(!k.isFunction(e))throw new TypeError("visitor must be a function");function u(v){if(v===null)return"";if(k.isDate(v))return v.toISOString();if(!l&&k.isBlob(v))throw new re("Blob is not supported. Use a Buffer instead.");return k.isArrayBuffer(v)||k.isTypedArray(v)?l&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function c(v,y,m){let b=v;if(v&&!m&&typeof v=="object"){if(k.endsWith(y,"{}"))y=i?y:y.slice(0,-2),v=JSON.stringify(v);else if(k.isArray(v)&&xv(v)||(k.isFileList(v)||k.endsWith(y,"[]"))&&(b=k.toArray(v)))return y=qc(y),b.forEach(function(E,S){!(k.isUndefined(E)||E===null)&&s.append(o===!0?Tl([y],S,n):o===null?y:y+"[]",u(E))}),!1}return xo(v)?!0:(s.append(Tl(m,y,n),u(v)),!1)}const h=[],d=Object.assign(Sv,{defaultVisitor:c,convertValue:u,isVisitable:xo});function p(v,y){if(!k.isUndefined(v)){if(h.indexOf(v)!==-1)throw Error("Circular reference detected in "+y.join("."));h.push(v),k.forEach(v,function(b,C){(!(k.isUndefined(b)||b===null)&&e.call(s,b,k.isString(C)?C.trim():C,y,d))===!0&&p(b,y?y.concat(C):[C])}),h.pop()}}if(!k.isObject(t))throw new TypeError("data must be an object");return p(t),s}function Al(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return s[i]})}function fa(t,s){this._pairs=[],t&&Ls(t,this,s)}const Kc=fa.prototype;Kc.append=function(s,r){this._pairs.push([s,r])};Kc.toString=function(s){const r=s?function(i){return s.call(this,i,Al)}:Al;return this._pairs.map(function(e){return r(e[0])+"="+r(e[1])},"").join("&")};function Pv(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Jc(t,s,r){if(!s)return t;const i=r&&r.encode||Pv,e=r&&r.serialize;let n;if(e?n=e(s,r):n=k.isURLSearchParams(s)?s.toString():new fa(s,r).toString(i),n){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+n}return t}class kv{constructor(){this.handlers=[]}use(s,r,i){return this.handlers.push({fulfilled:s,rejected:r,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){k.forEach(this.handlers,function(i){i!==null&&s(i)})}}const Ol=kv,Zc={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Tv=typeof URLSearchParams<"u"?URLSearchParams:fa,Av=typeof FormData<"u"?FormData:null,Ov=typeof Blob<"u"?Blob:null,wv=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),Dv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),St={isBrowser:!0,classes:{URLSearchParams:Tv,FormData:Av,Blob:Ov},isStandardBrowserEnv:wv,isStandardBrowserWebWorkerEnv:Dv,protocols:["http","https","file","blob","url","data"]};function Mv(t,s){return Ls(t,new St.classes.URLSearchParams,Object.assign({visitor:function(r,i,e,n){return St.isNode&&k.isBuffer(r)?(this.append(i,r.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},s))}function Iv(t){return k.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function Lv(t){const s={},r=Object.keys(t);let i;const e=r.length;let n;for(i=0;i<e;i++)n=r[i],s[n]=t[n];return s}function Qc(t){function s(r,i,e,n){let o=r[n++];const a=Number.isFinite(+o),l=n>=r.length;return o=!o&&k.isArray(e)?e.length:o,l?(k.hasOwnProp(e,o)?e[o]=[e[o],i]:e[o]=i,!a):((!e[o]||!k.isObject(e[o]))&&(e[o]=[]),s(r,i,e[o],n)&&k.isArray(e[o])&&(e[o]=Lv(e[o])),!a)}if(k.isFormData(t)&&k.isFunction(t.entries)){const r={};return k.forEachEntry(t,(i,e)=>{s(Iv(i),e,r,0)}),r}return null}const Nv={"Content-Type":void 0};function Rv(t,s,r){if(k.isString(t))try{return(s||JSON.parse)(t),k.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(r||JSON.stringify)(t)}const Ns={transitional:Zc,adapter:["xhr","http"],transformRequest:[function(s,r){const i=r.getContentType()||"",e=i.indexOf("application/json")>-1,n=k.isObject(s);if(n&&k.isHTMLForm(s)&&(s=new FormData(s)),k.isFormData(s))return e&&e?JSON.stringify(Qc(s)):s;if(k.isArrayBuffer(s)||k.isBuffer(s)||k.isStream(s)||k.isFile(s)||k.isBlob(s))return s;if(k.isArrayBufferView(s))return s.buffer;if(k.isURLSearchParams(s))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let a;if(n){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Mv(s,this.formSerializer).toString();if((a=k.isFileList(s))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Ls(a?{"files[]":s}:s,l&&new l,this.formSerializer)}}return n||e?(r.setContentType("application/json",!1),Rv(s)):s}],transformResponse:[function(s){const r=this.transitional||Ns.transitional,i=r&&r.forcedJSONParsing,e=this.responseType==="json";if(s&&k.isString(s)&&(i&&!this.responseType||e)){const o=!(r&&r.silentJSONParsing)&&e;try{return JSON.parse(s)}catch(a){if(o)throw a.name==="SyntaxError"?re.from(a,re.ERR_BAD_RESPONSE,this,null,this.response):a}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:St.classes.FormData,Blob:St.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};k.forEach(["delete","get","head"],function(s){Ns.headers[s]={}});k.forEach(["post","put","patch"],function(s){Ns.headers[s]=k.merge(Nv)});const da=Ns,Fv=k.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Gv=t=>{const s={};let r,i,e;return t&&t.split(`
`).forEach(function(o){e=o.indexOf(":"),r=o.substring(0,e).trim().toLowerCase(),i=o.substring(e+1).trim(),!(!r||s[r]&&Fv[r])&&(r==="set-cookie"?s[r]?s[r].push(i):s[r]=[i]:s[r]=s[r]?s[r]+", "+i:i)}),s},wl=Symbol("internals");function br(t){return t&&String(t).trim().toLowerCase()}function Li(t){return t===!1||t==null?t:k.isArray(t)?t.map(Li):String(t)}function jv(t){const s=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=r.exec(t);)s[i[1]]=i[2];return s}const Bv=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Zs(t,s,r,i,e){if(k.isFunction(i))return i.call(this,s,r);if(e&&(s=r),!!k.isString(s)){if(k.isString(i))return s.indexOf(i)!==-1;if(k.isRegExp(i))return i.test(s)}}function Hv(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,r,i)=>r.toUpperCase()+i)}function Uv(t,s){const r=k.toCamelCase(" "+s);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+r,{value:function(e,n,o){return this[i].call(this,s,e,n,o)},configurable:!0})})}class Rs{constructor(s){s&&this.set(s)}set(s,r,i){const e=this;function n(a,l,u){const c=br(l);if(!c)throw new Error("header name must be a non-empty string");const h=k.findKey(e,c);(!h||e[h]===void 0||u===!0||u===void 0&&e[h]!==!1)&&(e[h||l]=Li(a))}const o=(a,l)=>k.forEach(a,(u,c)=>n(u,c,l));return k.isPlainObject(s)||s instanceof this.constructor?o(s,r):k.isString(s)&&(s=s.trim())&&!Bv(s)?o(Gv(s),r):s!=null&&n(r,s,i),this}get(s,r){if(s=br(s),s){const i=k.findKey(this,s);if(i){const e=this[i];if(!r)return e;if(r===!0)return jv(e);if(k.isFunction(r))return r.call(this,e,i);if(k.isRegExp(r))return r.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,r){if(s=br(s),s){const i=k.findKey(this,s);return!!(i&&this[i]!==void 0&&(!r||Zs(this,this[i],i,r)))}return!1}delete(s,r){const i=this;let e=!1;function n(o){if(o=br(o),o){const a=k.findKey(i,o);a&&(!r||Zs(i,i[a],a,r))&&(delete i[a],e=!0)}}return k.isArray(s)?s.forEach(n):n(s),e}clear(s){const r=Object.keys(this);let i=r.length,e=!1;for(;i--;){const n=r[i];(!s||Zs(this,this[n],n,s,!0))&&(delete this[n],e=!0)}return e}normalize(s){const r=this,i={};return k.forEach(this,(e,n)=>{const o=k.findKey(i,n);if(o){r[o]=Li(e),delete r[n];return}const a=s?Hv(n):String(n).trim();a!==n&&delete r[n],r[a]=Li(e),i[a]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const r=Object.create(null);return k.forEach(this,(i,e)=>{i!=null&&i!==!1&&(r[e]=s&&k.isArray(i)?i.join(", "):i)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,r])=>s+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...r){const i=new this(s);return r.forEach(e=>i.set(e)),i}static accessor(s){const i=(this[wl]=this[wl]={accessors:{}}).accessors,e=this.prototype;function n(o){const a=br(o);i[a]||(Uv(e,o),i[a]=!0)}return k.isArray(s)?s.forEach(n):n(s),this}}Rs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);k.freezeMethods(Rs.prototype);k.freezeMethods(Rs);const Nt=Rs;function Qs(t,s){const r=this||da,i=s||r,e=Nt.from(i.headers);let n=i.data;return k.forEach(t,function(a){n=a.call(r,n,e.normalize(),s?s.status:void 0)}),e.normalize(),n}function eh(t){return!!(t&&t.__CANCEL__)}function si(t,s,r){re.call(this,t??"canceled",re.ERR_CANCELED,s,r),this.name="CanceledError"}k.inherits(si,re,{__CANCEL__:!0});function Vv(t,s,r){const i=r.config.validateStatus;!r.status||!i||i(r.status)?t(r):s(new re("Request failed with status code "+r.status,[re.ERR_BAD_REQUEST,re.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}const Yv=St.isStandardBrowserEnv?function(){return{write:function(r,i,e,n,o,a){const l=[];l.push(r+"="+encodeURIComponent(i)),k.isNumber(e)&&l.push("expires="+new Date(e).toGMTString()),k.isString(n)&&l.push("path="+n),k.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(r){const i=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Xv(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function $v(t,s){return s?t.replace(/\/+$/,"")+"/"+s.replace(/^\/+/,""):t}function th(t,s){return t&&!Xv(s)?$v(t,s):s}const Wv=St.isStandardBrowserEnv?function(){const s=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let i;function e(n){let o=n;return s&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return i=e(window.location.href),function(o){const a=k.isString(o)?e(o):o;return a.protocol===i.protocol&&a.host===i.host}}():function(){return function(){return!0}}();function zv(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function qv(t,s){t=t||10;const r=new Array(t),i=new Array(t);let e=0,n=0,o;return s=s!==void 0?s:1e3,function(l){const u=Date.now(),c=i[n];o||(o=u),r[e]=l,i[e]=u;let h=n,d=0;for(;h!==e;)d+=r[h++],h=h%t;if(e=(e+1)%t,e===n&&(n=(n+1)%t),u-o<s)return;const p=c&&u-c;return p?Math.round(d*1e3/p):void 0}}function Dl(t,s){let r=0;const i=qv(50,250);return e=>{const n=e.loaded,o=e.lengthComputable?e.total:void 0,a=n-r,l=i(a),u=n<=o;r=n;const c={loaded:n,total:o,progress:o?n/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&u?(o-n)/l:void 0,event:e};c[s?"download":"upload"]=!0,t(c)}}const Kv=typeof XMLHttpRequest<"u",Jv=Kv&&function(t){return new Promise(function(r,i){let e=t.data;const n=Nt.from(t.headers).normalize(),o=t.responseType;let a;function l(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}k.isFormData(e)&&(St.isStandardBrowserEnv||St.isStandardBrowserWebWorkerEnv?n.setContentType(!1):n.setContentType("multipart/form-data;",!1));let u=new XMLHttpRequest;if(t.auth){const p=t.auth.username||"",v=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";n.set("Authorization","Basic "+btoa(p+":"+v))}const c=th(t.baseURL,t.url);u.open(t.method.toUpperCase(),Jc(c,t.params,t.paramsSerializer),!0),u.timeout=t.timeout;function h(){if(!u)return;const p=Nt.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),y={data:!o||o==="text"||o==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:p,config:t,request:u};Vv(function(b){r(b),l()},function(b){i(b),l()},y),u=null}if("onloadend"in u?u.onloadend=h:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(h)},u.onabort=function(){u&&(i(new re("Request aborted",re.ECONNABORTED,t,u)),u=null)},u.onerror=function(){i(new re("Network Error",re.ERR_NETWORK,t,u)),u=null},u.ontimeout=function(){let v=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const y=t.transitional||Zc;t.timeoutErrorMessage&&(v=t.timeoutErrorMessage),i(new re(v,y.clarifyTimeoutError?re.ETIMEDOUT:re.ECONNABORTED,t,u)),u=null},St.isStandardBrowserEnv){const p=(t.withCredentials||Wv(c))&&t.xsrfCookieName&&Yv.read(t.xsrfCookieName);p&&n.set(t.xsrfHeaderName,p)}e===void 0&&n.setContentType(null),"setRequestHeader"in u&&k.forEach(n.toJSON(),function(v,y){u.setRequestHeader(y,v)}),k.isUndefined(t.withCredentials)||(u.withCredentials=!!t.withCredentials),o&&o!=="json"&&(u.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&u.addEventListener("progress",Dl(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",Dl(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=p=>{u&&(i(!p||p.type?new si(null,t,u):p),u.abort(),u=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const d=zv(c);if(d&&St.protocols.indexOf(d)===-1){i(new re("Unsupported protocol "+d+":",re.ERR_BAD_REQUEST,t));return}u.send(e||null)})},Ni={http:Cv,xhr:Jv};k.forEach(Ni,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const Zv={getAdapter:t=>{t=k.isArray(t)?t:[t];const{length:s}=t;let r,i;for(let e=0;e<s&&(r=t[e],!(i=k.isString(r)?Ni[r.toLowerCase()]:r));e++);if(!i)throw i===!1?new re(`Adapter ${r} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(k.hasOwnProp(Ni,r)?`Adapter '${r}' is not available in the build`:`Unknown adapter '${r}'`);if(!k.isFunction(i))throw new TypeError("adapter is not a function");return i},adapters:Ni};function eo(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new si(null,t)}function Ml(t){return eo(t),t.headers=Nt.from(t.headers),t.data=Qs.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Zv.getAdapter(t.adapter||da.adapter)(t).then(function(i){return eo(t),i.data=Qs.call(t,t.transformResponse,i),i.headers=Nt.from(i.headers),i},function(i){return eh(i)||(eo(t),i&&i.response&&(i.response.data=Qs.call(t,t.transformResponse,i.response),i.response.headers=Nt.from(i.response.headers))),Promise.reject(i)})}const Il=t=>t instanceof Nt?t.toJSON():t;function rr(t,s){s=s||{};const r={};function i(u,c,h){return k.isPlainObject(u)&&k.isPlainObject(c)?k.merge.call({caseless:h},u,c):k.isPlainObject(c)?k.merge({},c):k.isArray(c)?c.slice():c}function e(u,c,h){if(k.isUndefined(c)){if(!k.isUndefined(u))return i(void 0,u,h)}else return i(u,c,h)}function n(u,c){if(!k.isUndefined(c))return i(void 0,c)}function o(u,c){if(k.isUndefined(c)){if(!k.isUndefined(u))return i(void 0,u)}else return i(void 0,c)}function a(u,c,h){if(h in s)return i(u,c);if(h in t)return i(void 0,u)}const l={url:n,method:n,data:n,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,c)=>e(Il(u),Il(c),!0)};return k.forEach(Object.keys(Object.assign({},t,s)),function(c){const h=l[c]||e,d=h(t[c],s[c],c);k.isUndefined(d)&&h!==a||(r[c]=d)}),r}const nh="1.4.0",pa={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{pa[t]=function(i){return typeof i===t||"a"+(s<1?"n ":" ")+t}});const Ll={};pa.transitional=function(s,r,i){function e(n,o){return"[Axios v"+nh+"] Transitional option '"+n+"'"+o+(i?". "+i:"")}return(n,o,a)=>{if(s===!1)throw new re(e(o," has been removed"+(r?" in "+r:"")),re.ERR_DEPRECATED);return r&&!Ll[o]&&(Ll[o]=!0,console.warn(e(o," has been deprecated since v"+r+" and will be removed in the near future"))),s?s(n,o,a):!0}};function Qv(t,s,r){if(typeof t!="object")throw new re("options must be an object",re.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let e=i.length;for(;e-- >0;){const n=i[e],o=s[n];if(o){const a=t[n],l=a===void 0||o(a,n,t);if(l!==!0)throw new re("option "+n+" must be "+l,re.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new re("Unknown option "+n,re.ERR_BAD_OPTION)}}const So={assertOptions:Qv,validators:pa},Ut=So.validators;class Zi{constructor(s){this.defaults=s,this.interceptors={request:new Ol,response:new Ol}}request(s,r){typeof s=="string"?(r=r||{},r.url=s):r=s||{},r=rr(this.defaults,r);const{transitional:i,paramsSerializer:e,headers:n}=r;i!==void 0&&So.assertOptions(i,{silentJSONParsing:Ut.transitional(Ut.boolean),forcedJSONParsing:Ut.transitional(Ut.boolean),clarifyTimeoutError:Ut.transitional(Ut.boolean)},!1),e!=null&&(k.isFunction(e)?r.paramsSerializer={serialize:e}:So.assertOptions(e,{encode:Ut.function,serialize:Ut.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o;o=n&&k.merge(n.common,n[r.method]),o&&k.forEach(["delete","get","head","post","put","patch","common"],v=>{delete n[v]}),r.headers=Nt.concat(o,n);const a=[];let l=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(r)===!1||(l=l&&y.synchronous,a.unshift(y.fulfilled,y.rejected))});const u=[];this.interceptors.response.forEach(function(y){u.push(y.fulfilled,y.rejected)});let c,h=0,d;if(!l){const v=[Ml.bind(this),void 0];for(v.unshift.apply(v,a),v.push.apply(v,u),d=v.length,c=Promise.resolve(r);h<d;)c=c.then(v[h++],v[h++]);return c}d=a.length;let p=r;for(h=0;h<d;){const v=a[h++],y=a[h++];try{p=v(p)}catch(m){y.call(this,m);break}}try{c=Ml.call(this,p)}catch(v){return Promise.reject(v)}for(h=0,d=u.length;h<d;)c=c.then(u[h++],u[h++]);return c}getUri(s){s=rr(this.defaults,s);const r=th(s.baseURL,s.url);return Jc(r,s.params,s.paramsSerializer)}}k.forEach(["delete","get","head","options"],function(s){Zi.prototype[s]=function(r,i){return this.request(rr(i||{},{method:s,url:r,data:(i||{}).data}))}});k.forEach(["post","put","patch"],function(s){function r(i){return function(n,o,a){return this.request(rr(a||{},{method:s,headers:i?{"Content-Type":"multipart/form-data"}:{},url:n,data:o}))}}Zi.prototype[s]=r(),Zi.prototype[s+"Form"]=r(!0)});const Ri=Zi;class va{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(n){r=n});const i=this;this.promise.then(e=>{if(!i._listeners)return;let n=i._listeners.length;for(;n-- >0;)i._listeners[n](e);i._listeners=null}),this.promise.then=e=>{let n;const o=new Promise(a=>{i.subscribe(a),n=a}).then(e);return o.cancel=function(){i.unsubscribe(n)},o},s(function(n,o,a){i.reason||(i.reason=new si(n,o,a),r(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const r=this._listeners.indexOf(s);r!==-1&&this._listeners.splice(r,1)}static source(){let s;return{token:new va(function(e){s=e}),cancel:s}}}const eg=va;function tg(t){return function(r){return t.apply(null,r)}}function ng(t){return k.isObject(t)&&t.isAxiosError===!0}const Po={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Po).forEach(([t,s])=>{Po[s]=t});const rg=Po;function rh(t){const s=new Ri(t),r=jc(Ri.prototype.request,s);return k.extend(r,Ri.prototype,s,{allOwnKeys:!0}),k.extend(r,s,null,{allOwnKeys:!0}),r.create=function(e){return rh(rr(t,e))},r}const Ae=rh(da);Ae.Axios=Ri;Ae.CanceledError=si;Ae.CancelToken=eg;Ae.isCancel=eh;Ae.VERSION=nh;Ae.toFormData=Ls;Ae.AxiosError=re;Ae.Cancel=Ae.CanceledError;Ae.all=function(s){return Promise.all(s)};Ae.spread=tg;Ae.isAxiosError=ng;Ae.mergeConfig=rr;Ae.AxiosHeaders=Nt;Ae.formToJSON=t=>Qc(k.isHTMLForm(t)?new FormData(t):t);Ae.HttpStatusCode=rg;Ae.default=Ae;const ig=Ae;const Fs=(t,s)=>{const r=t.__vccOpts||t;for(const[i,e]of s)r[i]=e;return r},Ee=t=>(sa("data-v-5229ae4c"),t=t(),oa(),t),sg={id:"addElements",class:"settings"},og={style:{display:"flex"}},ag={style:{float:"left"}},lg=Ee(()=>B("span",{class:"close-icons"},"X",-1)),ug=[lg],cg=Ee(()=>B("br",null,null,-1)),hg=Ee(()=>B("span",null,"Select Ontology: ",-1)),fg=["value"],dg=Ee(()=>B("option",{value:"new"},"add new to server",-1)),pg=Ee(()=>B("span",{class:"reload"},"↻",-1)),vg=[pg],gg={key:0},yg=Ee(()=>B("span",null,"Choose a File or URL",-1)),mg=Ee(()=>B("option",{value:"file"},"File",-1)),_g=Ee(()=>B("option",{value:"url"},"URL",-1)),Eg=[mg,_g],bg=Ee(()=>B("br",null,null,-1)),Cg={key:0},xg=Ee(()=>B("label",{for:"url_input"},"Select URL: ",-1)),Sg=Ee(()=>B("input",{type:"url",id:"url_input"},null,-1)),Pg=[xg,Sg],kg={key:1},Tg=Ee(()=>B("label",{for:"file_input"},"Select File: ",-1)),Ag=Ee(()=>B("br",null,null,-1)),Og=Ee(()=>B("label",{for:"add_to_server_btt"},"Add Ontology to Server: ",-1)),wg=Ee(()=>B("h5",null,"ADD Ontology to Server",-1)),Dg=[wg],Mg={key:1},Ig=Ee(()=>B("br",null,null,-1)),Lg=Ee(()=>B("label",{for:"super_class_select"},"Select Name of Superclass: ",-1)),Ng=["value"],Rg=Ee(()=>B("br",null,null,-1)),Fg=Ee(()=>B("label",{for:"relation_input"},"Name of Relation: ",-1)),Gg=Ee(()=>B("input",{id:"relation_input",type:"text",value:"subclass_of"},null,-1)),jg=Ee(()=>B("br",null,null,-1)),Bg=Ee(()=>B("br",null,null,-1)),Hg={__name:"addDialog",props:{element_type:String},emits:["close","add"],setup(t,{emit:s}){const r=t,{element_type:i}=uc(r),e=Ye(""),n=Ye(""),o=Ye(""),a=Ye([""]),l=Ye([]);Ye({});const u=Ye({}),c=ig.create({baseURL:""});function h(){c.get("/onto").then(C=>{console.log(C.data),console.log("test"),a.value=C.data,console.log(a.value),console.log("test2")}).catch(C=>{console.log(C.response)})}function d(){s("close")}function p(C,E){console.log("adding started"),console.log(C+E);let S=y(C,E);console.log(S),s("add",S)}function v(C){C!=="new"&&c.get("/onto/"+C+"/classes").then(E=>{console.log(E.data),console.log("test"),l.value=E.data,console.log(a.value),console.log("test2")}).catch(E=>{console.log(E.response)})}function y(C,E){c.get("/onto/"+C+"/"+E+"/subclasses").then(S=>{console.log(S.data),S.data,s("add",S.data)}).catch(S=>{console.log(S.response)})}function m(C){const E=C.target;E&&E.files&&(u.value=E.files[0])}function b(C,E){var S=new FormData;S.append("file",E),console.log("test"),c.post("/onto",S,{headers:{"Content-Type":"multipart/form-data"}}).then(D=>{console.log(D.data),console.log("test")}).catch(D=>{console.log(D.response)})}return h(),(C,E)=>(be(),Se("div",sg,[B("div",og,[B("h3",ag,"Add "+gn(Ct(i)),1),B("button",{onClick:d},ug)]),cg,B("form",null,[hg,Fr(B("select",{"onUpdate:modelValue":E[0]||(E[0]=S=>e.value=S),name:"Ontology",id:"ontoSelect",onChange:E[1]||(E[1]=S=>v(e.value))},[(be(!0),Se(Xe,null,Wi(a.value,S=>(be(),Se("option",{value:S},gn(S),9,fg))),256)),dg],544),[[Ks,e.value]]),B("button",{type:"button",onClick:h},vg),e.value==="new"?(be(),Se("div",gg,[yg,Fr(B("select",{"onUpdate:modelValue":E[2]||(E[2]=S=>n.value=S),id:"addOption"},Eg,512),[[Ks,n.value]]),bg,n.value==="url"?(be(),Se("div",Cg,Pg)):n.value==="file"?(be(),Se("div",kg,[Tg,B("input",{onChange:E[3]||(E[3]=S=>m(S)),type:"file",id:"file_input",enctype:"multipart/form-data/"},null,32)])):Lc("",!0),Ag,Og,B("button",{class:"button",type:"button",onClick:E[4]||(E[4]=S=>b("test.owl",u.value))},Dg)])):(be(),Se("div",Mg,[Ig,Lg,Fr(B("select",{id:"super_class_select","onUpdate:modelValue":E[5]||(E[5]=S=>o.value=S),name:"super-class"},[(be(!0),Se(Xe,null,Wi(l.value,S=>(be(),Se("option",{value:S},gn(S),9,Ng))),256))],512),[[Ks,o.value]]),Rg,Fg,Gg,jg,Bg,B("button",{class:"button",type:"button",onClick:E[6]||(E[6]=S=>p(e.value,o.value))},[B("h5",null,"ADD "+gn(Ct(i))+" to Sidebar",1)])]))])]))}},Ug=Fs(Hg,[["__scopeId","data-v-5229ae4c"]]),Vg="modulepreload",Yg=function(t){return"/"+t},Nl={},Xg=function(s,r,i){if(!r||r.length===0)return s();const e=document.getElementsByTagName("link");return Promise.all(r.map(n=>{if(n=Yg(n),n in Nl)return;Nl[n]=!0;const o=n.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!i)for(let c=e.length-1;c>=0;c--){const h=e[c];if(h.href===n&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":Vg,o||(u.as="script",u.crossOrigin=""),u.href=n,document.head.appendChild(u),o)return new Promise((c,h)=>{u.addEventListener("load",c),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>s())};const $g=md({name:"RecursiveComponent",props:{items:{type:Object,required:!0},indentationLevel:{type:Number,default:0},classes:{type:String,default:"process_element sidebar_element"}},components:{RecursiveComponent:()=>Xg(()=>Promise.resolve().then(()=>qg),void 0)},setup(t){const s=xs({toggleItem(r){r.expanded=!r.expanded},hasChildItems(r){return r.children&&r.children.length>0},handleItemClick(r,i){console.log("Clicked:",r.name),s.toggleItem(r),i.stopPropagation()}});return{...s}},methods:{getIndentationStyle(t){return{paddingLeft:`${t*20}px`}},dragstart(t,s,r,i){console.log("dragstart"),t.dataTransfer.dropEffect="copy",t.dataTransfer.effectAllowed="copy",t.dataTransfer.setData("itemID",s),t.dataTransfer.setData("itemName",r),t.dataTransfer.setData("itemClasses",i)}}}),Wg=["onClick","onDragstart"];function zg(t,s,r,i,e,n){const o=wd("recursive-component",!0);return be(),Se("ul",null,[(be(!0),Se(Xe,null,Wi(t.items,a=>(be(),Se("li",{key:a.name,onClick:nr(l=>t.handleItemClick(a,l),["stop"]),onDragstart:nr(l=>t.dragstart(l,"testId",a.name,t.classes),["stop"]),draggable:"true"},[B("span",{style:Es(t.getIndentationStyle(t.indentationLevel)),class:On({expandable:t.hasChildItems(a)})},null,6),Ki(" "+gn(a.name)+" ",1),a.expanded&&t.hasChildItems(a)?(be(),Mc(o,{key:0,items:a.children,indentationLevel:t.indentationLevel+1,classes:t.classes},null,8,["items","indentationLevel","classes"])):Lc("",!0)],40,Wg))),128))])}const ih=Fs($g,[["render",zg],["__scopeId","data-v-7b9f675f"]]),qg=Object.freeze(Object.defineProperty({__proto__:null,default:ih},Symbol.toStringTag,{value:"Module"}));const sh=t=>(sa("data-v-44656068"),t=t(),oa(),t),Kg={id:"elements_window"},Jg={id:"elements_heading"},Zg={style:{float:"left"}},Qg=sh(()=>B("span",{class:"toggle-icons"},"+",-1)),ey=[Qg],ty=sh(()=>B("div",{class:"element_spacer"},null,-1)),ny={id:"elements"},ry={__name:"elementWindow",props:{element_type:String},setup(t){const s=t,{element_type:r}=uc(s);let i=Ye({});var e="";r.value==="Processes"?(e="process_element sidebar_element",i.value=[{name:"GeneralCapabilityEffecting",type:"process",children:[{name:"Draining",type:"process",children:[{type:"process",name:"test1",children:[{name:"test2",type:"process"}]}]},{type:"process",name:"Pumping"}]}]):r.value==="Materials"?(e="material_element sidebar_element",i.value=[{name:"Grundmaterialien",type:"material",children:[{type:"material",name:"Eingangsmaterial"},{type:"material",name:"Zwischenprodukt"},{type:"material",name:"Endprodukt"}]}]):console.log("unknown element type: "+r),console.log(i.value);let n=Ye(!1);function o(l){console.log("materials in sidebar"),i.value=l}const a=()=>{n.value=!n.value};return(l,u)=>(be(),Se(Xe,null,[B("div",Kg,[B("div",Jg,[B("div",Zg,[B("h4",null,gn(Ct(r)),1)]),B("button",{onClick:a},ey)]),ty,B("div",ny,[Ge(ih,{items:Ct(i),indentationLevel:0,class:On({element_class:Ct(e)})},null,8,["items","class"])])]),Fr(Ge(Ug,{element_type:Ct(r),onClose:u[0]||(u[0]=c=>De(n)?n.value=!1:n=!1),onAdd:o},null,8,["element_type"]),[[Gc,Ct(n)]])],64))}},Rl=Fs(ry,[["__scopeId","data-v-44656068"]]);const ga=t=>(sa("data-v-33058346"),t=t(),oa(),t),iy={class:"logo"},sy=["src"],oy=ga(()=>B("span",{class:"material-icons"},">>",-1)),ay=[oy],ly=ga(()=>B("div",{class:"element_spacer"},null,-1)),uy=ga(()=>B("div",{class:"element_spacer"},null,-1)),cy={__name:"Sidebar",setup(t){const s=Ye(localStorage.getItem("is_expanded")==="true"),r=()=>{s.value=!s.value,localStorage.setItem("is_expanded",s.value)};return(i,e)=>(be(),Se("aside",{class:On(`${s.value?"is-expanded":""}`),onDrop:e[0]||(e[0]=n=>i.onDrop(n)),onDragenter:e[1]||(e[1]=nr(()=>{},["prevent"])),onDragover:e[2]||(e[2]=nr(()=>{},["prevent"]))},[B("div",iy,[B("img",{src:Ct(Hp),alt:"Vue"},null,8,sy)]),B("div",{class:"menu-toggle-wrap"},[B("button",{class:"menu-toggle",onClick:r},ay)]),Fr(B("div",null,[ly,Ge(Rl,{element_type:"Materials"},{default:vo(()=>[Ki(" Test ")]),_:1}),uy,Ge(Rl,{element_type:"Processes"},{default:vo(()=>[Ki(" Test ")]),_:1})],512),[[Gc,s.value]])],34))}},hy=Fs(cy,[["__scopeId","data-v-33058346"]]);function Kn(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Kn=function(s){return typeof s}:Kn=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Kn(t)}function H(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Fl(t,s){for(var r=0;r<s.length;r++){var i=s[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function z(t,s,r){return s&&Fl(t.prototype,s),r&&Fl(t,r),t}function f(t,s,r){return s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function oe(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),s&&ko(t,s)}function ye(t){return ye=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},ye(t)}function ko(t,s){return ko=Object.setPrototypeOf||function(i,e){return i.__proto__=e,i},ko(t,s)}function fy(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function g(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dy(t,s){return s&&(typeof s=="object"||typeof s=="function")?s:g(t)}function ae(t){var s=fy();return function(){var i=ye(t),e;if(s){var n=ye(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return dy(this,e)}}function py(t,s){for(;!Object.prototype.hasOwnProperty.call(t,s)&&(t=ye(t),t!==null););return t}function me(t,s,r){return typeof Reflect<"u"&&Reflect.get?me=Reflect.get:me=function(e,n,o){var a=py(e,n);if(a){var l=Object.getOwnPropertyDescriptor(a,n);return l.get?l.get.call(o):l.value}},me(t,s,r||t)}function Fi(t,s){return gy(t)||my(t,s)||oh(t,s)||Ey()}function ir(t){return vy(t)||yy(t)||oh(t)||_y()}function vy(t){if(Array.isArray(t))return To(t)}function gy(t){if(Array.isArray(t))return t}function yy(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function my(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var i=[],e=!0,n=!1,o,a;try{for(r=r.call(t);!(e=(o=r.next()).done)&&(i.push(o.value),!(s&&i.length===s));e=!0);}catch(l){n=!0,a=l}finally{try{!e&&r.return!=null&&r.return()}finally{if(n)throw a}}return i}}function oh(t,s){if(t){if(typeof t=="string")return To(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return To(t,s)}}function To(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,i=new Array(s);r<s;r++)i[r]=t[r];return i}function _y(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ey(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function an(t,s,r){return t==="*"?!0:t.length>0?t.indexOf(s)!==-1:!r}function U(t,s,r){var i;t=t||{},s=s||{};var e=t,n=s;if(r)for(i=0;i<r.length;i++)e[r[i]]=n[r[i]];else for(i in n)e[i]=n[i];return t}function Ao(t){return Object.prototype.toString.call(t)==="[object Number]"}function _e(t){return typeof t=="string"}function ah(t){return typeof t=="boolean"}function sr(t){return t==null?!1:Object.prototype.toString.call(t)==="[object Object]"}function by(t){return Object.prototype.toString.call(t)==="[object Date]"}function xn(t){return Object.prototype.toString.call(t)==="[object Function]"}function Qi(t){if(_e(t))return""+t;if(ah(t))return!!t;if(by(t))return new Date(t.getTime());if(xn(t))return t;if(Array.isArray(t)){for(var s=[],r=0;r<t.length;r++)s.push(Qi(t[r]));return s}else if(sr(t)){var i={};for(var e in t)i[e]=Qi(t[e]);return i}else return t}function es(t,s,r,i){var e={},n,o,a={};for(r=r||[],i=i||[],o=0;o<r.length;o++)e[r[o]]=!0;for(o=0;o<i.length;o++)a[i[o]]=!0;var l=Qi(t);for(o in s)if(l[o]==null||a[o])l[o]=s[o];else if(e[o])n=[],n.push.apply(n,Array.isArray(l[o])?l[o]:[l[o]]),n.push(s[o]),l[o]=n;else if(_e(s[o])||ah(s[o])||xn(s[o])||Ao(s[o]))l[o]=s[o];else if(Array.isArray(s[o]))n=[],Array.isArray(l[o])&&n.push.apply(n,l[o]),n.push.apply(n,s[o]),l[o]=n;else if(sr(s[o])){sr(l[o])||(l[o]={});for(var u in s[o])l[o][u]=s[o][u]}return l}function lh(t,s,r){for(var i=0;i<r.length;i++){var e=r[i][0][r[i][1]].apply(r[i][0],r[i][2]);if(e===s)return e}return t}function Cy(t,s,r,i){var e=function(a){var l=a.match(/(\${.*?})/g);if(l!=null)for(var u=0;u<l.length;u++){var c=s[l[u].substring(2,l[u].length-1)]||"";c!=null&&(a=a.replace(l[u],c))}if(l=a.match(/({{.*?}})/g),l!=null)for(var h=0;h<l.length;h++){var d=s[l[h].substring(2,l[h].length-2)]||"";d!=null&&(a=a.replace(l[h],d))}return a},n=function o(a){if(a!=null){if(_e(a))return e(a);if(xn(a)&&!i&&(r==null||(a.name||"").indexOf(r)===0))return a(s);if(Array.isArray(a)){for(var l=[],u=0;u<a.length;u++)l.push(o(a[u]));return l}else if(sr(a)){var c={};for(var h in a)c[h]=o(a[h]);return c}else return a}};return n(t)}function X(t,s){if(t)for(var r=0;r<t.length;r++)s(t[r]);else return null}function tn(t,s){if(t){for(var r=0;r<t.length;r++)if(s(t[r]))return r}return-1}function xy(t,s){var r=[];if(t)for(var i=0;i<t.length;i++)s(t[i])&&r.push(i);return r}function ya(t,s){var r=tn(t,s);return r===-1?null:t[r]}function Sy(t,s){var r=xy(t,s);return r.map(function(i){return t[i]})}function uh(t,s){var r=null;return t.forEach(function(i){s(i)&&(r=i)}),r}function Py(t){var s=[];return t.forEach(function(r){s.push(r)}),s}function we(t,s){var r=tn(t,s);return r>-1&&t.splice(r,1),r!==-1}function gi(t){if(Array.fromArray!=null)return Array.from(t);var s=[];return Array.prototype.push.apply(s,t),s}function Gl(t,s){var r=t.indexOf(s);return r>-1&&t.splice(r,1),r!==-1}function ch(t,s,r,i){var e=t[s];return e==null&&(e=[],t[s]=e),e[i?"unshift":"push"](r),e}function Cr(t,s,r){return t.indexOf(s)===-1?(r?t.unshift(s):t.push(s),!0):!1}var Ie=[];for(var xr=0;xr<256;xr++)Ie[xr]=(xr<16?"0":"")+xr.toString(16);function ke(){var t=Math.random()*4294967295|0,s=Math.random()*4294967295|0,r=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return Ie[t&255]+Ie[t>>8&255]+Ie[t>>16&255]+Ie[t>>24&255]+"-"+Ie[s&255]+Ie[s>>8&255]+"-"+Ie[s>>16&15|64]+Ie[s>>24&255]+"-"+Ie[r&63|128]+Ie[r>>8&255]+"-"+Ie[r>>16&255]+Ie[r>>24&255]+Ie[i&255]+Ie[i>>8&255]+Ie[i>>16&255]+Ie[i>>24&255]}function ts(t,s,r){var i={x:t.x-s.x,y:t.y-s.y},e=Math.cos(r/360*Math.PI*2),n=Math.sin(r/360*Math.PI*2);return{x:i.x*e-i.y*n+s.x,y:i.y*e+i.x*n+s.y,cr:e,sr:n}}function ma(t){if(t==null)return null;for(var s=t.replace(/^\s\s*/,""),r=/\s/,i=s.length;r.test(s.charAt(--i)););return s.slice(0,i+1)}function ky(t,s){t=t.length==null||typeof t=="string"?[t]:t;for(var r=0;r<t.length;r++)s(t[r])}function hh(t,s){for(var r=[],i=0;i<t.length;i++)r.push(s(t[i]));return r}function Pe(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];if(typeof console<"u")try{var i=arguments[arguments.length-1];console.log(i)}catch{}}function ns(t){return t<0?-1:t>0?1:0}function yi(t,s,r){return function(){var i=null;try{s!=null&&(i=s.apply(this,arguments))}catch(e){Pe("jsPlumb function failed : "+e)}if(t!=null&&(r==null||i!==r))try{i=t.apply(this,arguments)}catch(e){Pe("wrapped function failed : "+e)}return i}}function jl(t,s,r){return t.has(s)||t.set(s,r()),t.get(s)}function fh(t,s){for(var r=t.__proto__;r!=null;){if(r instanceof s)return!0;r=r.__proto__}return!1}function Ty(t,s,r,i){if(s.length===0)s.push(t);else{for(var e=i?-1:1,n=0,o=s.length,a=Math.floor((n+o)/2);o>n;){var l=r(t,s[a])*e;l<0?o=a:n=a+1,a=Math.floor((n+o)/2)}s.splice(a,0,t)}}function Sn(t,s,r){r=r||t.parentNode;for(var i=r.querySelectorAll(s),e=0;e<i.length;e++)if(i[e]===t)return!0;return!1}function Kr(t,s){t.stopPropagation?t.stopPropagation():t.returnValue=!1,!s&&t.preventDefault&&t.preventDefault()}function Mt(t,s,r,i){if(i&&Sn(t,s,r))return t;for(t=t.parentNode;t!=null&&t!==r;){if(Sn(t,s))return t;t=t.parentNode}}function ze(t){return t.srcElement||t.target}function Ay(t,s,r){s=ma(s),typeof t.className.baseVal<"u"?t.className.baseVal=s:t.className=s;try{var i=t.classList;if(i!=null){for(;i.length>0;)i.remove(i.item(0));for(var e=0;e<r.length;e++)r[e]&&i.add(r[e])}}catch(n){Pe("WARN: cannot set class list",n)}}function _a(t){return t.className!=null?typeof t.className.baseVal>"u"?t.className:t.className.baseVal:""}function dh(t,s,r){var i=s==null?[]:Array.isArray(s)?s:s.split(/\s+/),e=r==null?[]:Array.isArray(r)?r:r.split(/\s+/),n=_a(t),o=n.split(/\s+/),a=function(u,c){for(var h=0;h<c.length;h++)if(u)o.indexOf(c[h])===-1&&o.push(c[h]);else{var d=o.indexOf(c[h]);d!==-1&&o.splice(d,1)}};a(!0,i),a(!1,e),Ay(t,o.join(" "),o)}function Jr(t){return!_e(t)&&!Array.isArray(t)&&t.length!=null&&t.documentElement==null&&t.nodeType==null}function Oy(t){return _a(t)}function pn(t,s){var r=function(e,n){if(e!=null&&n!=null&&n.length>0)if(e.classList){var o=ma(n).split(/\s+/);X(o,function(a){e.classList.add(a)})}else dh(e,n)};Jr(t)?X(t,function(i){return r(i,s)}):r(t,s)}function wy(t,s){return t.classList?t.classList.contains(s):_a(t).indexOf(s)!==-1}function Oo(t,s){var r=function(e,n){if(e!=null&&n!=null&&n.length>0)if(e.classList){var o=ma(n).split(/\s+/);o.forEach(function(a){e.classList.remove(a)})}else dh(e,null,n)};Jr(t)?X(t,function(i){return r(i,s)}):r(t,s)}function Dy(t,s){var r=this,i=function(n,o){n!=null&&o!=null&&o.length>0&&(n.classList?n.classList.toggle(o):r.hasClass(n,o)?r.removeClass(n,o):r.addClass(n,o))};Jr(t)?X(t,function(e){return i(e,s)}):i(t,s)}function ph(t,s,r,i){return vh(null,t,s,r,i)}function vh(t,s,r,i,e){var n=t==null?document.createElement(s):document.createElementNS(t,s),o;r=r||{};for(o in r)n.style[o]=r[o];i&&(n.className=i),e=e||{};for(o in e)n.setAttribute(o,""+e[o]);return n}function Vn(t){var s=t.getBoundingClientRect(),r=document.body,i=document.documentElement,e=window.pageYOffset||i.scrollTop||r.scrollTop,n=window.pageXOffset||i.scrollLeft||r.scrollLeft,o=i.clientTop||r.clientTop||0,a=i.clientLeft||r.clientLeft||0,l=s.top+e-o,u=s.left+n-a;return{x:Math.round(u),y:Math.round(l)}}function My(t){return{w:t.offsetWidth,h:t.offsetHeight}}function Iy(t){try{return{w:parseFloat(t.width.baseVal.value),h:parseFloat(t.height.baseVal.value)}}catch{return{w:0,h:0}}}function Ly(t){try{return{x:parseFloat(t.x.baseVal.value),y:parseFloat(t.y.baseVal.value)}}catch{return{x:0,y:0}}}function mi(t,s){var r=s.getContainer().getBoundingClientRect(),i=t.getBoundingClientRect(),e=s.currentZoom;return{x:(i.left-r.left)/e,y:(i.top-r.top)/e}}function Sr(t,s){var r=t.getBoundingClientRect(),i=s.currentZoom;return{w:r.width/i,h:r.height/i}}var Pn;(function(t){t.SVG="SVG",t.HTML="HTML"})(Pn||(Pn={}));function wo(t){return t instanceof SVGElement?Pn.SVG:Pn.HTML}function Ny(t){return wo(t)===Pn.SVG}function kn(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return s.map(function(i){return"."+i}).join(",")}function Ry(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return s.join(" ")}function Gs(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return s.map(function(i){return"["+i+"]"}).join(",")}var Do="source",gh="target",Mo="block",or="none",Zr="absolute",Bl="fixed",Fy="static",yh="data-jtk-group",zt="data-jtk-managed",Gi="data-jtk-not-draggable",Hl="tabindex",Gy="data-jtk-scope",mh=Gy+"-",_h="checkCondition",jy="checkDropAllowed",Ea="jtk-connector",By="jtk-connector-outline",Hy="jtk-connected",Jn="jtk-endpoint",Uy="jtk-endpoint-connected",Vy="jtk-endpoint-full",ba="jtk-floating-endpoint",Yy="jtk-endpoint-drop-allowed",Xy="jtk-endpoint-drop-forbidden",$y="jtk-endpoint-anchor",_i="jtk-group-collapsed",Pr="jtk-group-expanded",js="jtk-overlay",Wy="anchor:changed",Eh="connection",bh="internal.connection",zy="connection:detach",Ch="connection:move",qy="container:change",Ky="endpoint:replaced",xh="internal.endpoint:unregistered",Ca="internal.connection:detached",Sh="element:manage",Jy="group:added",Zy="group:collapse",Qy="group:expand",em="group:member:added",tm="group:member:removed",nm="group:removed",Ph="maxConnections",rm="group:nested:added",im="group:nested:removed",kh="element:unmanage",Th="zoom",Zn="isDetachAllowed",sm="beforeDrag",Ah="beforeDrop",Oh="beforeDetach",om="beforeStartDetach",ge=Gs(zt),am="Cannot establish connection: source endpoint is full",lm="Cannot establish connection: target endpoint is full",um="Cannot establish connection: source does not exist",cm="Cannot establish connection: target does not exist",hm="connectionOverlays",Ul={"stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},kr="stroke-dasharray",to="dashstyle",fm="fill",dm="stroke",pm="stroke-width",vm="strokeWidth",wh="svg",Io="path",Vl={svg:"http://www.w3.org/2000/svg"};function Ft(t,s){for(var r in s)t.setAttribute(r,""+s[r])}function Gt(t,s){return s=s||{},s.version="1.1",s.xmlns=Vl.svg,vh(Vl.svg,t,null,null,s)}function Dh(t){return"position:absolute;left:"+t[0]+"px;top:"+t[1]+"px"}function Lo(t,s,r){if(s.setAttribute(fm,r.fill?r.fill:or),s.setAttribute(dm,r.stroke?r.stroke:or),r.strokeWidth&&s.setAttribute(pm,r.strokeWidth),r[to]&&r[vm]&&!r[kr]){var i=r[to].indexOf(",")===-1?" ":",",e=r[to].split(i),n="";X(e,function(a){n+=Math.floor(a*r.strokeWidth)+i}),s.setAttribute(kr,n)}else r[kr]&&s.setAttribute(kr,r[kr]);for(var o in Ul)r[o]&&s.setAttribute(Ul[o],r[o])}function ji(t,s,r){t.childNodes.length>r?t.insertBefore(s,t.childNodes[r]):t.appendChild(s)}function ce(t,s,r){var i=[t,s];return r&&i.push(r),i.join(":")}var Yl="data-jtk-container",gm="data-jtk-group-content",Ei="data-jtk-enabled",no="data-jtk-scope",Bt="endpoint",At="element",Ot="connection",Mh="div",Be="click",It="contextmenu",qe="dblclick",Qe="dbltap",ym="focus",Q="mousedown",xa="mouseenter",Sa="mouseexit",Oe="mousemove",ee="mouseup",et="mouseout",tt="mouseover",nt="tap",mm="touchstart",_m="touchend",Em="touchmove",bm="drag:move",Cm="drag:stop",xm="drag:start",rs="revert",Sm="connection:abort",Xl="connection:drag",$l=ce(At,Be),Pm=ce(At,qe),Wl=ce(At,Qe),km=ce(At,et),Tm=ce(At,tt),Am=ce(At,Oe),Om=ce(At,ee),wm=ce(At,Q),Dm=ce(At,It),zl=ce(At,nt),Mm=ce(Bt,Be),Im=ce(Bt,qe);ce(Bt,Qe);var Lm=ce(Bt,et),Nm=ce(Bt,tt),Rm=ce(Bt,ee),Fm=ce(Bt,Q);ce(Bt,nt);var Gm=ce(Ot,Be),jm=ce(Ot,qe),Bm=ce(Ot,Qe),Hm=ce(Ot,et),Um=ce(Ot,tt),Vm=ce(Ot,ee),Ym=ce(Ot,Q),Xm=ce(Ot,It),$m=ce(Ot,nt),ql="position",lt=kn(Ea),ln=kn(Jn),Wm=Gs(yh),zm=Gs(gm),wt=kn(js),nn;(function(t){t.Circle="Circle",t.Ellipse="Ellipse",t.Triangle="Triangle",t.Diamond="Diamond",t.Rectangle="Rectangle",t.Square="Square"})(nn||(nn={}));var kt;(function(t){t.Assign="Assign",t.AutoDefault="AutoDefault",t.Bottom="Bottom",t.BottomLeft="BottomLeft",t.BottomRight="BottomRight",t.Center="Center",t.Continuous="Continuous",t.ContinuousBottom="ContinuousBottom",t.ContinuousLeft="ContinuousLeft",t.ContinuousRight="ContinuousRight",t.ContinuousTop="ContinuousTop",t.ContinuousLeftRight="ContinuousLeftRight",t.ContinuousTopBottom="ContinuousTopBottom",t.Left="Left",t.Perimeter="Perimeter",t.Right="Right",t.Top="Top",t.TopLeft="TopLeft",t.TopRight="TopRight"})(kt||(kt={}));function qm(){return{d:1/0,x:null,y:null,l:null,x1:null,y1:null,x2:null,y2:null}}function is(){return{xmin:1/0,xmax:-1/0,ymin:1/0,ymax:-1/0}}var Pa=function(){function t(s){H(this,t),this.params=s,f(this,"x1",void 0),f(this,"x2",void 0),f(this,"y1",void 0),f(this,"y2",void 0),f(this,"extents",is()),f(this,"type",void 0),this.x1=s.x1,this.y1=s.y1,this.x2=s.x2,this.y2=s.y2}return z(t,[{key:"findClosestPointOnPath",value:function(r,i){return qm()}},{key:"lineIntersection",value:function(r,i,e,n){return[]}},{key:"boxIntersection",value:function(r,i,e,n){var o=[];return o.push.apply(o,this.lineIntersection(r,i,r+e,i)),o.push.apply(o,this.lineIntersection(r+e,i,r+e,i+n)),o.push.apply(o,this.lineIntersection(r+e,i+n,r,i+n)),o.push.apply(o,this.lineIntersection(r,i+n,r,i)),o}},{key:"boundingBoxIntersection",value:function(r){return this.boxIntersection(r.x,r.y,r.w,r.h)}}]),t}(),Ih="undefined",ss="default",Lh="true",Yn="false",mn="*",Tr,Ar;function Km(t,s,r,i,e,n,o){return new Touch({target:t,identifier:ke(),pageX:s,pageY:r,screenX:i,screenY:e,clientX:n||i,clientY:o||e})}function Jm(){var t=[];return t.push.apply(t,arguments),t.item=function(s){return this[s]},t}function Zm(t,s,r,i,e,n,o){return Jm(Km(t,s,r,i,e,n,o))}function ar(t,s,r){r=r||t.parentNode;for(var i=r.querySelectorAll(s),e=0;e<i.length;e++)if(i[e]===t)return!0;return!1}function Qr(t){return t.srcElement||t.target}function No(t,s,r,i){if(i){var e=t.composedPath?t.composedPath():t.path;if(typeof e<"u"&&e.indexOf)return{path:e,end:e.indexOf(r)};var n={path:[],end:-1},o=function a(l){n.path.push(l),l===r?n.end=n.path.length-1:l.parentNode!=null&&a(l.parentNode)};return o(s),n}else return{path:[s],end:1}}function Qm(t,s){var r=0,i;for(r=0,i=t.length;r<i&&t[r][0]!==s;r++);r<t.length&&t.splice(r,1)}var e_=1;function Br(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints!=null&&navigator.maxTouchPoints>0}function Bi(){return"onmousedown"in document.documentElement}var Lt=(Tr={},f(Tr,Q,mm),f(Tr,ee,_m),f(Tr,Oe,Em),Tr),t_="page",n_="screen",r_="client";function ka(t,s){if(t==null)return{x:0,y:0};var r=Nh(t),i=o_(r,0);return{x:i[s+"X"],y:i[s+"Y"]}}function os(t){return ka(t,t_)}function i_(t){return ka(t,n_)}function s_(t){return ka(t,r_)}function o_(t,s){return t.item?t.item(s):t[s]}function Nh(t){return t.touches&&t.touches.length>0?t.touches:t.changedTouches&&t.changedTouches.length>0?t.changedTouches:t.targetTouches&&t.targetTouches.length>0?t.targetTouches:[t]}function a_(t){return Nh(t).length}function as(t,s,r,i,e){if(Fh(t,s,r),i.__tauid=r.__tauid,t.addEventListener)t.addEventListener(s,r,!1,e);else if(t.attachEvent){var n=s+r.__tauid;t["e"+n]=r,t[n]=function(){t["e"+n]&&t["e"+n](window.event)},t.attachEvent("on"+s,t[n])}}function ei(t,s,r){var i=this;r!=null&&Rh(t,function(e){if(l_(e,s,r),r.__tauid!=null){if(e.removeEventListener)e.removeEventListener(s,r,!1),Br()&&Lt[s]&&e.removeEventListener(Lt[s],r,!1);else if(i.detachEvent){var n=s+r.__tauid;e[n]&&e.detachEvent("on"+s,e[n]),e[n]=null,e["e"+n]=null}}r.__taTouchProxy&&ei(t,r.__taTouchProxy[1],r.__taTouchProxy[0])})}function Rh(t,s){if(t!=null)for(var r=typeof t=="string"?document.querySelectorAll(t):t.length!=null?t:[t],i=0;i<r.length;i++)s(r[i])}function Fh(t,s,r){var i=e_++;return t.__ta=t.__ta||{},t.__ta[s]=t.__ta[s]||{},t.__ta[s][i]=r,r.__tauid=i,i}function l_(t,s,r){if(t.__ta&&t.__ta[s]&&delete t.__ta[s][r.__tauid],r.__taExtra){for(var i=0;i<r.__taExtra.length;i++)ei(t,r.__taExtra[i][0],r.__taExtra[i][1]);r.__taExtra.length=0}r.__taUnstore&&r.__taUnstore()}var u_=/:not\(([^)]+)\)/;function ls(t,s,r,i){if(t==null)return r;var e=t.split(","),n=[],o=[];X(e,function(l){var u=l.match(u_);u!=null?o.push(u[1]):n.push(l)}),o.length>0&&n.length===0&&n.push(mn);var a=function l(u){l.__tauid=r.__tauid;var c=Qr(u),h=!1,d=c,p=No(u,c,s,t!=null);if(p.end!=-1)for(var v=0;!h&&v<p.end;v++){d=p.path[v];for(var y=0;y<o.length;y++)if(ar(d,o[y],s))return;for(var m=0;!h&&m<n.length;m++)if(ar(d,n[m],s)){r.apply(d,[u,d]),h=!0;break}}};return c_(r,i,a),a}function c_(t,s,r){t.__taExtra=t.__taExtra||[],t.__taExtra.push([s,r])}var Hi=function(s,r,i,e,n){if(Br()&&Lt[r]){var o=ls(e,s,i,Lt[r]);as(s,Lt[r],o,i,n)}r===ym&&s.getAttribute(Hl)==null&&s.setAttribute(Hl,"1"),as(s,r,ls(e,s,i,r),i,n)},ro=(Ar={},f(Ar,nt,{touches:1,taps:1}),f(Ar,Qe,{touches:1,taps:2}),f(Ar,It,{touches:2,taps:1}),Ar);function Kl(t,s,r,i){for(var e in r.__tamee[t])r.__tamee[t].hasOwnProperty(e)&&r.__tamee[t][e].apply(i,[s])}var h_=function(){function t(){H(this,t)}return z(t,null,[{key:"generate",value:function(r,i){return function(e,n,o,a){if(n==It&&Bi())Hi(e,n,o,a);else{if(e.__taTapHandler==null){var l=e.__taTapHandler={tap:[],dbltap:[],down:!1,taps:0,downSelectors:[]},u=function(v){for(var y=Qr(v),m=No(v,y,e,a!=null),b=!1,C=0;C<m.end;C++){if(b)return;y=m.path[C];for(var E=0;E<l.downSelectors.length;E++)if(l.downSelectors[E]==null||ar(y,l.downSelectors[E],e)){l.down=!0,setTimeout(h,r),setTimeout(d,i),b=!0;break}}},c=function(v){if(l.down){var y=Qr(v),m,b;l.taps++;var C=a_(v);for(var E in ro)if(ro.hasOwnProperty(E)){var S=ro[E];if(S.touches===C&&(S.taps===1||S.taps===l.taps))for(var D=0;D<l[E].length;D++){b=No(v,y,e,l[E][D][1]!=null);for(var G=0;G<b.end;G++)if(m=b.path[G],l[E][D][1]==null||ar(m,l[E][D][1],e)){l[E][D][0].apply(m,[v,m]);break}}}}},h=function(){l.down=!1},d=function(){l.taps=0};e.__taTapHandler.downHandler=u,e.__taTapHandler.upHandler=c,Hi(e,Q,u),Hi(e,ee,c)}e.__taTapHandler.downSelectors.push(a),e.__taTapHandler[n].push([o,a]),o.__taUnstore=function(){e.__taTapHandler!=null&&(we(e.__taTapHandler.downSelectors,function(p){return p===a}),Qm(e.__taTapHandler[n],o),e.__taTapHandler.downSelectors.length===0&&(ei(e,Q,e.__taTapHandler.downHandler),ei(e,ee,e.__taTapHandler.upHandler),delete e.__taTapHandler))}}}}}]),t}(),f_=function(){function t(){H(this,t)}return z(t,null,[{key:"generate",value:function(){var r=[];return function(i,e,n,o){if(!i.__tamee){i.__tamee={over:!1,mouseenter:[],mouseexit:[]};var a=function(c){var h=Qr(c);(o==null&&h==i&&!i.__tamee.over||ar(h,o,i)&&(h.__tamee==null||!h.__tamee.over))&&(Kl(xa,c,i,h),h.__tamee=h.__tamee||{},h.__tamee.over=!0,r.push(h))},l=function(c){for(var h=Qr(c),d=0;d<r.length;d++)h==r[d]&&!ar(c.relatedTarget||c.toElement,"*",h)&&(h.__tamee.over=!1,r.splice(d,1),Kl(Sa,c,i,h))};as(i,tt,ls(o,i,a,tt),a),as(i,et,ls(o,i,l,et),l)}n.__taUnstore=function(){delete i.__tamee[e][n.__tauid]},Fh(i,e,n),i.__tamee[e][n.__tauid]=n}}}]),t}(),Ta=function(){function t(s){H(this,t),f(this,"clickThreshold",void 0),f(this,"dblClickThreshold",void 0),f(this,"tapHandler",void 0),f(this,"mouseEnterExitHandler",void 0),s=s||{},this.clickThreshold=s.clickThreshold||250,this.dblClickThreshold=s.dblClickThreshold||450,this.mouseEnterExitHandler=f_.generate(),this.tapHandler=h_.generate(this.clickThreshold,this.dblClickThreshold)}return z(t,[{key:"_doBind",value:function(r,i,e,n,o){if(e!=null){var a=r;i===nt||i===Qe||i===It?this.tapHandler(a,i,e,n,o):i===xa||i==Sa?this.mouseEnterExitHandler(a,i,e,n,o):Hi(a,i,e,n,o)}}},{key:"on",value:function(r,i,e,n,o){var a=n==null?null:e,l=n??e;return this._doBind(r,i,l,a,o),this}},{key:"off",value:function(r,i,e){return ei(r,i,e),this}},{key:"trigger",value:function(r,i,e,n,o){var a=Bi()&&(typeof MouseEvent>"u"||e==null||e.constructor===MouseEvent),l=Br()&&!Bi()&&Lt[i]?Lt[i]:i,u=!(Br()&&!Bi()&&Lt[i]),c=os(e),h=i_(e),d=s_(e);return Rh(r,function(p){var v;e=e||{screenX:h.x,screenY:h.y,clientX:d.x,clientY:d.y};var y=function(S){n&&(S.payload=n)},m={TouchEvent:function(S){var D=Zm(p,c.x,c.y,h.x,h.y,d.x,d.y),G=S.initTouchEvent||S.initEvent;G(l,!0,!0,window,null,h.x,h.y,d.x,d.y,!1,!1,!1,!1,D,D,D,1,0)},MouseEvents:function(S){S.initMouseEvent(l,!0,!0,window,o??1,h.x,h.y,d.x,d.y,!1,!1,!1,!1,1,p)}},b=!u&&!a&&Br()&&Lt[i],C=b?"TouchEvent":"MouseEvents";v=document.createEvent(C),m[C](v),y(v),p.dispatchEvent(v)}),this}}]),t}(),d_=[null,[1,-1],[1,1],[-1,1],[-1,-1]],p_=[null,[-1,-1],[-1,1],[1,1],[1,-1]],un=2*Math.PI;function lr(t,s){return s.x===t.x?s.y>t.y?1/0:-1/0:s.y===t.y?s.x>t.x?0:-0:(s.y-t.y)/(s.x-t.x)}function v_(t,s){return-1/lr(t,s)}function Ro(t,s){return Math.sqrt(Math.pow(s.y-t.y,2)+Math.pow(s.x-t.x,2))}function Aa(t,s){return s.x>t.x||s.x==t.x?s.y>t.y?2:1:s.y>t.y?3:4}function g_(t,s){var r=lr(t,s),i=Math.atan(r),e=Aa(t,s);return(e==4||e==3)&&(i+=Math.PI),i<0&&(i+=2*Math.PI),i}function Gh(t,s){var r=t.x,i=t.x+t.w,e=t.y,n=t.y+t.h,o=s.x,a=s.x+s.w,l=s.y,u=s.y+s.h;return r<=o&&o<=i&&e<=l&&l<=n||r<=a&&a<=i&&e<=l&&l<=n||r<=o&&o<=i&&e<=u&&u<=n||r<=a&&o<=i&&e<=u&&u<=n||o<=r&&r<=a&&l<=e&&e<=u||o<=i&&i<=a&&l<=e&&e<=u||o<=r&&r<=a&&l<=n&&n<=u||o<=i&&r<=a&&l<=n&&n<=u}function vn(t,s,r){var i=lr(t,s),e=Aa(t,s),n=r>0?d_[e]:p_[e],o=Math.atan(i),a=Math.abs(r*Math.sin(o))*n[1],l=Math.abs(r*Math.cos(o))*n[0];return{x:t.x+l,y:t.y+a}}function y_(t,s,r){var i=lr(t,s),e=Math.atan(-1/i),n=r/2*Math.sin(e),o=r/2*Math.cos(e);return[{x:s.x+o,y:s.y+n},{x:s.x-o,y:s.y-n}]}function m_(t,s,r,i){r=r??(s.thresholdX==null?s.w/2:s.thresholdX),i=i??(s.thresholdY==null?s.h/2:s.thresholdY);var e=Math.floor(t.x/s.w),n=s.w*e,o=n+s.w,a=Math.abs(t.x-n)<=r?n:Math.abs(o-t.x)<=r?o:t.x,l=Math.floor(t.y/s.h),u=s.h*l,c=u+s.h,h=Math.abs(t.y-u)<=i?u:Math.abs(c-t.y)<=i?c:t.y;return{x:a,y:h}}function __(t,s,r){if(Sn(s,r,t))return s;for(var i=s.parentNode;i!=null&&i!==t;){if(Sn(i,r,t))return i;i=i.parentNode}}function E_(t){return typeof t=="function"?(t._katavorioId=ke(),t._katavorioId):t}function Jl(t,s,r){var i=s.parentNode,e=t.getSize(i),n=t.getSize(s),o=r.x,a=o+n.w,l=r.y,u=l+n.h;return a>0&&o<e.w&&u>0&&l<e.h}function b_(t,s,r){for(var i=null,e=s.getAttribute("katavorio-draggable"),n=e!=null?"[katavorio-draggable='"+e+"'] ":"",o=0;o<t.length;o++)if(i=__(s,r,n+t[o].selector),i!=null){if(t[o].filter){var a=Sn(r,t[o].filter,i),l=t[o].filterExclude===!0;if(l&&!a||a)return null}return[t[o],i]}return null}var jh="start",Bh="beforeStart",Hh="drag",C_="drop",x_="over",S_="out",Uh="stop",Vh="katavorio-draggable",P_=Vh,k_=10,T_=10,io=function(){return!0},A_=function(){return!1},Mr={delegatedDraggable:"katavorio-delegated-draggable",draggable:P_,drag:"katavorio-drag",selected:"katavorio-drag-selected",noSelect:"katavorio-drag-no-select",ghostProxy:"katavorio-ghost-proxy",clonedDrag:"katavorio-clone-drag"},vt;(function(t){t.absolutePosition="absolutePosition",t.transform="transform",t.xyAttributes="xyAttributes"})(vt||(vt={}));var Oa=new Map;Oa.set(vt.absolutePosition,function(t,s){t.style.left="".concat(s.x,"px"),t.style.top="".concat(s.y,"px")});Oa.set(vt.xyAttributes,function(t,s){t.setAttribute("x","".concat(s.x)),t.setAttribute("y","".concat(s.y))});var wa=new Map;wa.set(vt.absolutePosition,function(t){return{x:t.offsetLeft,y:t.offsetTop}});wa.set(vt.xyAttributes,function(t){return{x:parseFloat(t.getAttribute("x")),y:parseFloat(t.getAttribute("y"))}});var Da=new Map;Da.set(vt.absolutePosition,function(t,s){t.style.width="".concat(s.w,"px"),t.style.height="".concat(s.h,"px")});Da.set(vt.xyAttributes,function(t,s){t.setAttribute("width","".concat(s.w)),t.setAttribute("height","".concat(s.h))});var Ma=new Map;Ma.set(vt.absolutePosition,function(t){return{w:t.offsetWidth,h:t.offsetHeight}});Ma.set(vt.xyAttributes,function(t){return{w:parseFloat(t.getAttribute("width")),h:parseFloat(t.getAttribute("height"))}});var so=[Uh,jh,Hh,C_,x_,S_,Bh],O_=function(){},Ln=function(s,r){if(s!=null){s=!_e(s)&&s.tagName==null&&s.length!=null?s:[s];for(var i=0;i<s.length;i++)r.apply(s[i],[s[i]])}},w_=function(s,r,i){var e=s.srcElement||s.target;return!Sn(e,i.getInputFilterSelector(),r)},D_=function(){function t(s,r){H(this,t),this.el=s,this.manager=r,f(this,"_class",void 0),f(this,"uuid",ke()),f(this,"enabled",!0),f(this,"scopes",[]),f(this,"eventManager",void 0),this.eventManager=r.eventManager}return z(t,[{key:"setEnabled",value:function(r){this.enabled=r}},{key:"isEnabled",value:function(){return this.enabled}},{key:"toggleEnabled",value:function(){this.enabled=!this.enabled}},{key:"addScope",value:function(r){var i={};Ln(this.scopes,function(n){i[n]=!0}),Ln(r?r.split(/\s+/):[],function(n){i[n]=!0}),this.scopes.length=0;for(var e in i)this.scopes.push(e)}},{key:"removeScope",value:function(r){var i={};Ln(this.scopes,function(n){i[n]=!0}),Ln(r?r.split(/\s+/):[],function(n){delete i[n]}),this.scopes.length=0;for(var e in i)this.scopes.push(e)}},{key:"toggleScope",value:function(r){var i={};Ln(this.scopes,function(n){i[n]=!0}),Ln(r?r.split(/\s+/):[],function(n){i[n]?delete i[n]:i[n]=!0}),this.scopes.length=0;for(var e in i)this.scopes.push(e)}}]),t}();function M_(t){return{w:t.parentNode.offsetWidth+t.parentNode.scrollLeft,h:t.parentNode.offsetHeight+t.parentNode.scrollTop}}var Hr;(function(t){t.notNegative="notNegative",t.parent="parent",t.parentEnclosed="parentEnclosed"})(Hr||(Hr={}));var I_=function(t){oe(r,t);var s=ae(r);function r(i,e,n){var o;if(H(this,r),o=s.call(this,i,n),f(g(o),"_class",void 0),f(g(o),"rightButtonCanDrag",void 0),f(g(o),"consumeStartEvent",void 0),f(g(o),"clone",void 0),f(g(o),"scroll",void 0),f(g(o),"trackScroll",void 0),f(g(o),"_downAt",void 0),f(g(o),"_posAtDown",void 0),f(g(o),"_pagePosAtDown",void 0),f(g(o),"_pageDelta",{x:0,y:0}),f(g(o),"_moving",void 0),f(g(o),"_lastPosition",void 0),f(g(o),"_lastScrollValues",{x:0,y:0}),f(g(o),"_initialScroll",{x:0,y:0}),f(g(o),"_size",void 0),f(g(o),"_currentParentPosition",void 0),f(g(o),"_ghostParentPosition",void 0),f(g(o),"_dragEl",void 0),f(g(o),"_multipleDrop",void 0),f(g(o),"_ghostProxyOffsets",void 0),f(g(o),"_ghostDx",void 0),f(g(o),"_ghostDy",void 0),f(g(o),"_isConstrained",!1),f(g(o),"_ghostProxyParent",void 0),f(g(o),"_useGhostProxy",void 0),f(g(o),"_ghostProxyFunction",void 0),f(g(o),"_activeSelectorParams",void 0),f(g(o),"_availableSelectors",[]),f(g(o),"_canDrag",void 0),f(g(o),"_consumeFilteredEvents",void 0),f(g(o),"_parent",void 0),f(g(o),"_ignoreZoom",void 0),f(g(o),"_filters",{}),f(g(o),"_constrainRect",void 0),f(g(o),"_elementToDrag",void 0),f(g(o),"downListener",void 0),f(g(o),"moveListener",void 0),f(g(o),"upListener",void 0),f(g(o),"scrollTracker",void 0),f(g(o),"listeners",{start:[],drag:[],stop:[],over:[],out:[],beforeStart:[],revert:[]}),o._class=o.manager.css.draggable,pn(o.el,o._class),o.downListener=o._downListener.bind(g(o)),o.upListener=o._upListener.bind(g(o)),o.moveListener=o._moveListener.bind(g(o)),o.rightButtonCanDrag=e.rightButtonCanDrag===!0,o.consumeStartEvent=e.consumeStartEvent!==!1,o._dragEl=o.el,o.clone=e.clone===!0,o.scroll=e.scroll===!0,o.trackScroll=e.trackScroll!==!1,o._multipleDrop=e.multipleDrop!==!1,o._canDrag=e.canDrag||io,o._consumeFilteredEvents=e.consumeFilteredEvents,o._parent=e.parent,o._ignoreZoom=e.ignoreZoom===!0,o._ghostProxyParent=e.ghostProxyParent,o.trackScroll&&(o.scrollTracker=o._trackScroll.bind(g(o)),document.addEventListener("scroll",o.scrollTracker)),e.ghostProxy===!0?o._useGhostProxy=io:e.ghostProxy&&typeof e.ghostProxy=="function"?o._useGhostProxy=e.ghostProxy:o._useGhostProxy=function(l,u){return o._activeSelectorParams&&o._activeSelectorParams.useGhostProxy?o._activeSelectorParams.useGhostProxy(l,u):!1},e.makeGhostProxy?o._ghostProxyFunction=e.makeGhostProxy:o._ghostProxyFunction=function(l){return o._activeSelectorParams&&o._activeSelectorParams.makeGhostProxy?o._activeSelectorParams.makeGhostProxy(l):l.cloneNode(!0)},e.selector){var a=o.el.getAttribute(Vh);a==null&&(a=""+new Date().getTime(),o.el.setAttribute("katavorio-draggable",a)),o._availableSelectors.push(e)}return o.eventManager.on(o.el,Q,o.downListener),o}return z(r,[{key:"_trackScroll",value:function(e){if(this._moving){var n={x:document.documentElement.scrollLeft,y:document.documentElement.scrollTop},o=n.x-this._lastScrollValues.x,a=n.y-this._lastScrollValues.y,l={x:o+this._lastPosition.x,y:a+this._lastPosition.y},u=l.x-this._downAt.x,c=l.y-this._downAt.y,h=this._ignoreZoom?1:this.manager.getZoom();this._dragEl&&this._dragEl.parentNode&&(u+=this._dragEl.parentNode.scrollLeft-this._initialScroll.x,c+=this._dragEl.parentNode.scrollTop-this._initialScroll.y),u/=h,c/=h,this.moveBy(u,c,e),this._lastPosition=l,this._lastScrollValues=n}}},{key:"on",value:function(e,n){this.listeners[e]&&this.listeners[e].push(n)}},{key:"off",value:function(e,n){if(this.listeners[e]){for(var o=[],a=0;a<this.listeners[e].length;a++)this.listeners[e][a]!==n&&o.push(this.listeners[e][a]);this.listeners[e]=o}}},{key:"_upListener",value:function(e){this._downAt&&(this._downAt=null,this.eventManager.off(document,Oe,this.moveListener),this.eventManager.off(document,ee,this.upListener),Oo(document.body,Mr.noSelect),this.unmark(e),this.stop(e),this._moving=!1,this.clone?(this._dragEl&&this._dragEl.parentNode&&this._dragEl.parentNode.removeChild(this._dragEl),this._dragEl=null):this._activeSelectorParams&&this._activeSelectorParams.revertFunction&&this._activeSelectorParams.revertFunction(this._dragEl,this.manager.getPosition(this._dragEl))===!0&&(this.manager.setPosition(this._dragEl,this._posAtDown),this._dispatch(rs,this._dragEl)))}},{key:"_downListener",value:function(e){if(!e.defaultPrevented){var n=this.rightButtonCanDrag||e.which!==3&&e.button!==2;if(n&&this.isEnabled()&&this._canDrag()){var o=this._testFilter(e)&&w_(e,this.el,this.manager);if(o){this._activeSelectorParams=null,this._elementToDrag=null,this._availableSelectors.length===0&&console.log("JSPLUMB: no available drag selectors");var a=e.target||e.srcElement,l=b_(this._availableSelectors,this.el,a);if(l!=null&&(this._activeSelectorParams=l[0],this._elementToDrag=l[1]),this._activeSelectorParams==null||this._elementToDrag==null)return;var u=this._activeSelectorParams.dragInit?this._activeSelectorParams.dragInit(this._elementToDrag,e):null;if(u!=null&&(this._elementToDrag=u),this.clone)if(this._dragEl=this._elementToDrag.cloneNode(!0),pn(this._dragEl,Mr.clonedDrag),this._dragEl.setAttribute("id",null),this._dragEl.style.position="absolute",this._parent!=null){var c=this.manager.getPosition(this.el);this._dragEl.style.left=c.x+"px",this._dragEl.style.top=c.y+"px",this._parent.appendChild(this._dragEl)}else{var h=Vn(this._elementToDrag);this._dragEl.style.left=h.x+"px",this._dragEl.style.top=h.y+"px",document.body.appendChild(this._dragEl)}else this._dragEl=this._elementToDrag;this.consumeStartEvent&&Kr(e),this._downAt=os(e),this._dragEl&&this._dragEl.parentNode&&(this._initialScroll={x:this._dragEl.parentNode.scrollLeft,y:this._dragEl.parentNode.scrollTop}),this._posAtDown=this.manager.getPosition(this._dragEl),this._pagePosAtDown=Vn(this._dragEl),this._pageDelta={x:this._pagePosAtDown.x-this._posAtDown.x,y:this._pagePosAtDown.y-this._posAtDown.y},this._size=this.manager.getSize(this._dragEl),this.eventManager.on(document,Oe,this.moveListener),this.eventManager.on(document,ee,this.upListener),pn(document.body,Mr.noSelect),this._dispatch(Bh,{el:this.el,pos:this._posAtDown,e,drag:this,size:this._size})}else this._consumeFilteredEvents&&Kr(e)}}}},{key:"_moveListener",value:function(e){if(this._downAt){if(!this._moving){var n=this._dispatch(jh,{el:this.el,pos:this._posAtDown,e,drag:this,size:this._size});if(n!==!1){if(!this._downAt)return;this.mark(n),this._moving=!0}else this.abort()}if(this._downAt){var o=os(e),a=o.x-this._downAt.x,l=o.y-this._downAt.y,u=this._ignoreZoom?1:this.manager.getZoom();this._lastPosition={x:o.x,y:o.y},this._lastScrollValues={x:document.documentElement.scrollLeft,y:document.documentElement.scrollTop},this._dragEl&&this._dragEl.parentNode&&(a+=this._dragEl.parentNode.scrollLeft-this._initialScroll.x,l+=this._dragEl.parentNode.scrollTop-this._initialScroll.y),a/=u,l/=u,this.moveBy(a,l,e)}}}},{key:"getDragDelta",value:function(){return this._posAtDown!=null&&this._downAt!=null?{x:this._downAt.x-this._posAtDown.x,y:this._downAt.y-this._posAtDown.y}:{x:0,y:0}}},{key:"mark",value:function(e){this._posAtDown=this.manager.getPosition(this._dragEl),this._pagePosAtDown=Vn(this._dragEl),this._pageDelta={x:this._pagePosAtDown.x-this._posAtDown.x,y:this._pagePosAtDown.y-this._posAtDown.y},this._size=this.manager.getSize(this._dragEl),pn(this._dragEl,this.manager.css.drag),this._constrainRect=M_(this._dragEl),this._ghostDx=0,this._ghostDy=0}},{key:"unmark",value:function(e){this._isConstrained&&this._useGhostProxy(this._elementToDrag,this._dragEl)?(this._ghostProxyOffsets={x:this._dragEl.offsetLeft-this._ghostDx,y:this._dragEl.offsetTop-this._ghostDy},this._dragEl.parentNode.removeChild(this._dragEl),this._dragEl=this._elementToDrag):this._ghostProxyOffsets=null,Oo(this._dragEl,this.manager.css.drag),this._isConstrained=!1}},{key:"moveBy",value:function(e,n,o){var a=this.toGrid({x:this._posAtDown.x+e,y:this._posAtDown.y+n}),l=this._doConstrain(a,this._dragEl,this._constrainRect,this._size,o);if(l!=null){if(this._useGhostProxy(this.el,this._dragEl))if(a.x!==l.x||a.y!==l.y){if(!this._isConstrained){var u=this._ghostProxyFunction(this._elementToDrag);pn(u,Mr.ghostProxy),this._ghostProxyParent?(this._ghostProxyParent.appendChild(u),this._currentParentPosition=Vn(this._elementToDrag.parentNode),this._ghostParentPosition=Vn(this._ghostProxyParent),this._ghostDx=this._currentParentPosition.x-this._ghostParentPosition.x,this._ghostDy=this._currentParentPosition.y-this._ghostParentPosition.y):this._elementToDrag.parentNode.appendChild(u),this._dragEl=u,this._isConstrained=!0}l=a}else this._isConstrained&&(this._dragEl.parentNode.removeChild(this._dragEl),this._dragEl=this._elementToDrag,this._isConstrained=!1,this._currentParentPosition=null,this._ghostParentPosition=null,this._ghostDx=0,this._ghostDy=0);this.manager.setPosition(this._dragEl,{x:l.x+this._ghostDx,y:l.y+this._ghostDy}),this._dispatch(Hh,{el:this.el,pos:l,e:o,drag:this,size:this._size,originalPos:this._posAtDown})}}},{key:"abort",value:function(){this._downAt!=null&&this._upListener()}},{key:"getDragElement",value:function(e){return e?this._elementToDrag||this.el:this._dragEl||this.el}},{key:"stop",value:function(e,n){if(n||this._moving){var o=[],a=this.manager.getPosition(this._dragEl);o.push([this._dragEl,a,this,this._size]),this._dispatch(Uh,{el:this._dragEl,pos:this._ghostProxyOffsets||a,finalPos:a,e,drag:this,selection:o,size:this._size,originalPos:{x:this._posAtDown.x,y:this._posAtDown.y}})}else this._moving||this._activeSelectorParams.dragAbort&&this._activeSelectorParams.dragAbort(this._elementToDrag)}},{key:"_dispatch",value:function(e,n){var o=null;if(this._activeSelectorParams&&this._activeSelectorParams[e])o=this._activeSelectorParams[e](n);else if(this.listeners[e])for(var a=0;a<this.listeners[e].length;a++)try{var l=this.listeners[e][a](n);l!=null&&(o=l)}catch{}return o}},{key:"resolveGrid",value:function(){var e={grid:null,thresholdX:k_/2,thresholdY:T_/2};return this._activeSelectorParams!=null&&this._activeSelectorParams.grid!=null&&(e.grid=this._activeSelectorParams.grid,this._activeSelectorParams.snapThreshold!=null&&(e.thresholdX=this._activeSelectorParams.snapThreshold,e.thresholdY=this._activeSelectorParams.snapThreshold)),e}},{key:"toGrid",value:function(e){var n=this.resolveGrid(),o=n.grid,a=n.thresholdX,l=n.thresholdY;if(o==null)return e;var u=o?o.w/2:a,c=o?o.h/2:l;return m_(e,o,u,c)}},{key:"setUseGhostProxy",value:function(e){this._useGhostProxy=e?io:A_}},{key:"_doConstrain",value:function(e,n,o,a,l){return this._activeSelectorParams!=null&&this._activeSelectorParams.constrainFunction&&typeof this._activeSelectorParams.constrainFunction=="function"?this._activeSelectorParams.constrainFunction(e,n,o,a,l):e}},{key:"_testFilter",value:function(e){for(var n in this._filters){var o=this._filters[n],a=o[0](e);if(o[1]&&(a=!a),!a)return!1}return!0}},{key:"addFilter",value:function(e,n){var o=this;if(e){var a=E_(e);this._filters[a]=[function(l){var u=l.srcElement||l.target,c;return _e(e)?c=Sn(u,e,o.el):typeof e=="function"&&(c=e(l,o.el)),c},n!==!1]}}},{key:"removeFilter",value:function(e){var n=typeof e=="function"?e._katavorioId:e;delete this._filters[n]}},{key:"clearAllFilters",value:function(){this._filters={}}},{key:"addSelector",value:function(e,n){e.selector&&(n?this._availableSelectors.unshift(e):this._availableSelectors.push(e))}},{key:"destroy",value:function(){this.eventManager.off(this.el,Q,this.downListener),this.eventManager.off(document,Oe,this.moveListener),this.eventManager.off(document,ee,this.upListener),this.downListener=null,this.upListener=null,this.moveListener=null,this.scrollTracker!=null&&document.removeEventListener("scroll",this.scrollTracker)}}]),r}(D_),L_=["input","textarea","select","button","option"],N_=L_.join(","),R_=function(){function t(s){H(this,t),f(this,"eventManager",void 0),f(this,"zoom",1),f(this,"css",{}),f(this,"inputFilterSelector",void 0),f(this,"positioningStrategy",void 0),f(this,"_positionSetter",void 0),f(this,"_positionGetter",void 0),f(this,"_sizeSetter",void 0),f(this,"_sizeGetter",void 0),s=s||{},this.inputFilterSelector=s.inputFilterSelector||N_,this.eventManager=new Ta,this.zoom=s.zoom||1,this.positioningStrategy=s.positioningStrategy||vt.absolutePosition,this._positionGetter=wa.get(this.positioningStrategy),this._positionSetter=Oa.get(this.positioningStrategy),this._sizeGetter=Ma.get(this.positioningStrategy),this._sizeSetter=Da.get(this.positioningStrategy);var r=s.css||{};U(this.css,r)}return z(t,[{key:"getPosition",value:function(r){return this._positionGetter(r)}},{key:"setPosition",value:function(r,i){this._positionSetter(r,i)}},{key:"getSize",value:function(r){return this._sizeGetter(r)}},{key:"getZoom",value:function(){return this.zoom}},{key:"setZoom",value:function(r){this.zoom=r}},{key:"_prepareParams",value:function(r){r=r||{};var i={events:{}},e;for(e in r)i[e]=r[e];for(e=0;e<so.length;e++)i.events[so[e]]=r[so[e]]||O_;return i}},{key:"getInputFilterSelector",value:function(){return this.inputFilterSelector}},{key:"setInputFilterSelector",value:function(r){return this.inputFilterSelector=r,this}},{key:"draggable",value:function(r,i){if(r._katavorioDrag==null){var e=this._prepareParams(i),n=new I_(r,e,this);return pn(r,Mr.delegatedDraggable),r._katavorioDrag=n,n}else return r._katavorioDrag}},{key:"destroyDraggable",value:function(r){r._katavorioDrag&&(r._katavorioDrag.destroy(),delete r._katavorioDrag)}}]),t}(),Ui="jtk-drag-selected",F_=function(){function t(s){H(this,t),this.instance=s,f(this,"_dragSelection",[]),f(this,"_dragSizes",new Map),f(this,"_dragElements",new Map),f(this,"_dragElementStartPositions",new Map),f(this,"_dragElementPositions",new Map),f(this,"__activeSet",void 0)}return z(t,[{key:"_activeSet",get:function(){return this.__activeSet==null?this._dragSelection:this.__activeSet}},{key:"length",get:function(){return this._dragSelection.length}},{key:"filterActiveSet",value:function(r){var i=this;this.__activeSet=[],X(this._dragSelection,function(e){r(e)&&i.__activeSet.push(e)})}},{key:"clear",value:function(){var r=this;this.reset(),X(this._dragSelection,function(i){return r.instance.removeClass(i.jel,Ui)}),this._dragSelection.length=0}},{key:"reset",value:function(){this._dragElementStartPositions.clear(),this._dragElementPositions.clear(),this._dragSizes.clear(),this._dragElements.clear(),this.__activeSet=null}},{key:"initialisePositions",value:function(){var r=this;X(this._activeSet,function(i){var e=r.instance.viewport.getPosition(i.id),n={x:parseInt(""+i.jel.offsetLeft,10),y:parseInt(""+i.jel.offsetTop,10)};r._dragElementStartPositions.set(i.id,n),r._dragElementPositions.set(i.id,n),r._dragSizes.set(i.id,{w:e.w,h:e.h})})}},{key:"updatePositions",value:function(r,i,e){var n=this,o=r.x-i.x,a=r.y-i.y;X(this._activeSet,function(l){var u=n._dragElementStartPositions.get(l.id);if(u){var c=u.x+o,h=u.y+a,d=n._dragSizes.get(l.id),p={x:c,y:h,w:d.w,h:d.h};if(l.jel._jsPlumbParentGroup&&l.jel._jsPlumbParentGroup.constrain){var v={w:l.jel.parentNode.offsetWidth+l.jel.parentNode.scrollLeft,h:l.jel.parentNode.offsetHeight+l.jel.parentNode.scrollTop};p.x=Math.max(p.x,0),p.y=Math.max(p.y,0),p.x=Math.min(p.x,v.w-d.w),p.y=Math.min(p.y,v.h-d.h)}n._dragElementPositions.set(l.id,{x:c,y:h}),l.jel.style.left=p.x+"px",l.jel.style.top=p.y+"px",e(l.jel,l.id,d,p)}})}},{key:"each",value:function(r){var i=this;X(this._activeSet,function(e){var n=i._dragSizes.get(e.id),o=i._dragElementPositions.get(e.id),a=i._dragElementStartPositions.get(e.id);r(e.jel,e.id,o,n,a)})}},{key:"add",value:function(r,i){var e=r;i=i||this.instance.getId(e);var n=tn(this._dragSelection,function(o){return o.id===i});n===-1&&(this.instance.addClass(r,Ui),this._dragSelection.push({id:i,jel:e}))}},{key:"remove",value:function(r){var i=this,e=r;this._dragSelection=this._dragSelection.filter(function(n){var o=n.jel!==e;return o||i.instance.removeClass(n.jel,Ui),o})}},{key:"toggle",value:function(r){var i=r,e=tn(this._dragSelection,function(n){return n.jel===i});e!==-1?this.remove(i):this.add(r)}}]),t}(),G_="jtk-delegated-draggable",j_="jtk-draggable",B_="jtk-drag",H_="jtk-ghost-proxy",qt="jtk-drag-active",U_="jtk-dragged",Zt="jtk-drag-hover",V_=function(){function t(s,r,i){var e=this;H(this,t),this.instance=s,this.dragSelection=r,f(this,"collicat",void 0),f(this,"drag",void 0),f(this,"_draggables",{}),f(this,"_dlist",[]),f(this,"_elementsWithEndpoints",{}),f(this,"_draggablesForElements",{}),f(this,"handlers",[]),f(this,"_trackScroll",void 0),f(this,"_filtersToAdd",[]),this.collicat=new R_({zoom:this.instance.currentZoom,css:{noSelect:this.instance.dragSelectClass,delegatedDraggable:G_,draggable:j_,drag:B_,selected:Ui,active:qt,hover:Zt,ghostProxy:H_}}),this.instance.bind(Th,function(n){e.collicat.setZoom(n)}),i=i||{},this._trackScroll=i.trackScroll!==!1}return z(t,[{key:"addHandler",value:function(r,i){var e=this,n=U({selector:r.selector},i||{});n.start=yi(n.start,function(l){return r.onStart(l)},!1),n.drag=yi(n.drag,function(l){return r.onDrag(l)}),n.stop=yi(n.stop,function(l){return r.onStop(l)});var o=(r.onBeforeStart||function(l){}).bind(r);if(n.beforeStart=yi(n.beforeStart,function(l){return o(l)}),n.dragInit=function(l,u){return r.onDragInit(l,u)},n.dragAbort=function(l){return r.onDragAbort(l)},r.useGhostProxy&&(n.useGhostProxy=r.useGhostProxy,n.makeGhostProxy=r.makeGhostProxy),n.constrainFunction==null&&n.containment!=null)switch(n.containment){case Hr.notNegative:{n.constrainFunction=function(l,u,c,h){return{x:Math.max(0,Math.min(l.x)),y:Math.max(0,Math.min(l.y))}};break}case Hr.parent:{var a=n.containmentPadding||5;n.constrainFunction=function(l,u,c,h){var d=l.x<0?0:l.x>c.w-a?c.w-a:l.x,p=l.y<0?0:l.y>c.h-a?c.h-a:l.y;return{x:d,y:p}};break}case Hr.parentEnclosed:{n.constrainFunction=function(l,u,c,h){var d=l.x<0?0:l.x+h.w>c.w?c.w-h.w:l.x,p=l.y<0?0:l.y+h.h>c.h?c.h-h.h:l.y;return{x:d,y:p}};break}}this.drag==null?(n.trackScroll=this._trackScroll,this.drag=this.collicat.draggable(this.instance.getContainer(),n),X(this._filtersToAdd,function(l){return e.drag.addFilter(l[0],l[1])}),this.drag.on(rs,function(l){e.instance.revalidate(l)})):this.drag.addSelector(n),this.handlers.push({handler:r,options:n}),r.init(this.drag)}},{key:"addSelector",value:function(r,i){this.drag&&this.drag.addSelector(r,i)}},{key:"addFilter",value:function(r,i){this.drag==null?this._filtersToAdd.push([r,i===!0]):this.drag.addFilter(r,i)}},{key:"removeFilter",value:function(r){this.drag!=null&&this.drag.removeFilter(r)}},{key:"setFilters",value:function(r){var i=this;X(r,function(e){i.drag.addFilter(e[0],e[1])})}},{key:"reset",value:function(){var r=[];if(X(this.handlers,function(n){n.handler.reset()}),this.handlers.length=0,this.drag!=null){var i=this.drag._filters;for(var e in i)r.push([e,i[e][1]]);this.collicat.destroyDraggable(this.instance.getContainer())}return delete this.drag,r}},{key:"setOption",value:function(r,i){var e=ya(this.handlers,function(n){return n.handler===r});e!=null&&U(e.options,i||{})}}]),t}();function Y_(t,s){return _e(s)?{id:s,active:!0}:{id:s.id,active:s.active}}function X_(t,s){var r=uh(t.members,function(i){return i.el===s});return r!==null?r.active===!0:!1}function $_(t){for(var s=[],r=t._jsPlumbParentGroup;r!=null;)s.push(r.el),r=r.group;return s}var Fo=function(){function t(s,r){H(this,t),this.instance=s,this._dragSelection=r,f(this,"selector","> "+ge+":not("+kn(js)+")"),f(this,"_dragOffset",null),f(this,"_groupLocations",[]),f(this,"_intersectingGroups",[]),f(this,"_currentDragParentGroup",null),f(this,"_dragGroupByElementIdMap",{}),f(this,"_dragGroupMap",{}),f(this,"_currentDragGroup",null),f(this,"_currentDragGroupOffsets",new Map),f(this,"_currentDragGroupSizes",new Map),f(this,"_currentDragGroupOriginalPositions",new Map),f(this,"_dragPayload",null),f(this,"drag",void 0),f(this,"originalPosition",void 0)}return z(t,[{key:"onDragInit",value:function(r){return null}},{key:"onDragAbort",value:function(r){return null}},{key:"getDropGroup",value:function(){var r=null;if(this._intersectingGroups.length>0){var i=this._intersectingGroups[0].groupLoc.group,e=this._intersectingGroups[0].intersectingElement,n=e._jsPlumbParentGroup;n!==i&&(n==null||!n.overrideDrop(e,i))&&(r=this._intersectingGroups[0])}return r}},{key:"onStop",value:function(r){var i,e=this,n=r.drag.getDragElement(),o=this.getDropGroup(),a=[];a.push({el:n,id:this.instance.getId(n),pos:r.finalPos,originalGroup:n._jsPlumbParentGroup,redrawResult:null,originalPos:r.originalPos,reverted:!1,dropGroup:o!=null?o.groupLoc.group:null});function l(v,y,m,b,C){var E=m.x,S=m.y;if(v._jsPlumbParentGroup&&v._jsPlumbParentGroup.constrain){var D={w:v.parentNode.offsetWidth+v.parentNode.scrollLeft,h:v.parentNode.offsetHeight+v.parentNode.scrollTop};E=Math.max(E,0),S=Math.max(S,0),E=Math.min(E,D.w-b.w),S=Math.min(S,D.h-b.h),m.x=E,m.y=S}a.push({el:v,id:y,pos:m,originalPos:C,originalGroup:v._jsPlumbParentGroup,redrawResult:null,reverted:!1,dropGroup:o==null?void 0:o.groupLoc.group})}if(this._dragSelection.each(function(v,y,m,b,C){v!==r.el&&l(v,y,{x:m.x,y:m.y},b,C)}),(i=this._currentDragGroup)===null||i===void 0||i.members.forEach(function(v){if(v.el!==r.el){var y=e._currentDragGroupOffsets.get(v.elId),m=e._currentDragGroupSizes.get(v.elId),b={x:r.finalPos.x+y[0].x,y:r.finalPos.y+y[0].y};l(v.el,v.elId,b,m,e._currentDragGroupOriginalPositions.get(v.elId))}}),X(a,function(v){var y=v.originalGroup!=null,m=y&&Jl(e.instance,v.el,v.pos),b={x:0,y:0};if(y&&!m){if(o==null){var C=e._pruneOrOrphan(v,!0,!0);C.pos!=null?v.pos=C.pos.pos:!C.pruned&&v.originalGroup.revert&&(v.pos=v.originalPos,v.reverted=!0)}}else y&&m&&(b=e._computeOffsetByParentGroup(v.originalGroup));o!=null&&!m?e.instance.groupManager.addToGroup(o.groupLoc.group,!1,v.el):v.dropGroup=null,v.reverted&&e.instance.setPosition(v.el,v.pos),v.redrawResult=e.instance.setElementPosition(v.el,v.pos.x+b.x,v.pos.y+b.y),e.instance.removeClass(v.el,U_),e.instance.select({source:v.el}).removeClass(e.instance.elementDraggingClass+" "+e.instance.sourceElementDraggingClass,!0),e.instance.select({target:v.el}).removeClass(e.instance.elementDraggingClass+" "+e.instance.targetElementDraggingClass,!0)}),a[0].originalGroup!=null){var u=n._jsPlumbParentGroup;if(u!==a[0].originalGroup){var c=r.drag.getDragElement(!0);if(a[0].originalGroup.ghost){var h=this.instance.getPosition(this.instance.getGroupContentArea(u)),d=this.instance.getPosition(this.instance.getGroupContentArea(a[0].originalGroup)),p={x:d.x+r.pos.x-h.x,y:d.y+r.pos.y-h.y};c.style.left=p.x+"px",c.style.top=p.y+"px",this.instance.revalidate(c)}}}this.instance.fire(Cm,{elements:a,e:r.e,el:n,payload:this._dragPayload}),this._cleanup()}},{key:"_cleanup",value:function(){var r=this;X(this._groupLocations,function(i){r.instance.removeClass(i.el,qt),r.instance.removeClass(i.el,Zt)}),this._currentDragParentGroup=null,this._groupLocations.length=0,this.instance.hoverSuspended=!1,this._dragOffset=null,this._dragSelection.reset(),this._dragPayload=null,this._currentDragGroupOffsets.clear(),this._currentDragGroupSizes.clear(),this._currentDragGroupOriginalPositions.clear(),this._currentDragGroup=null}},{key:"reset",value:function(){}},{key:"init",value:function(r){this.drag=r}},{key:"onDrag",value:function(r){var i=this,e=r.drag.getDragElement(),n=this.instance.getId(e),o=r.pos,a=this.instance.viewport.getPosition(n),l={x:o.x,y:o.y};this._intersectingGroups.length=0,this._dragOffset!=null&&(l.x+=this._dragOffset.x,l.y+=this._dragOffset.y);var u=function(d,p,v){if(v){var y=new Set;X(i._groupLocations,function(m){!y.has(m.group.id)&&Gh(p,m.r)?(m.group!==i._currentDragParentGroup&&i.instance.addClass(m.el,Zt),i._intersectingGroups.push({groupLoc:m,intersectingElement:r.drag.getDragElement(!0),d:0}),X(i.instance.groupManager.getAncestors(m.group),function(b){return y.add(b.id)})):i.instance.removeClass(m.el,Zt)})}i.instance.setElementPosition(d,p.x,p.y),i.instance.fire(bm,{el:d,e:r.e,pos:{x:p.x,y:p.y},originalPosition:i.originalPosition,payload:i._dragPayload})},c={x:l.x,y:l.y,w:a.w,h:a.h};u(e,c,!0),this._dragSelection.updatePositions(o,this.originalPosition,function(h,d,p,v){u(h,v,!1)}),this._currentDragGroupOffsets.forEach(function(h,d){var p=i._currentDragGroupSizes.get(d),v={x:c.x+h[0].x,y:c.y+h[0].y,w:p.w,h:p.h};h[1].style.left=v.x+"px",h[1].style.top=v.y+"px",u(h[1],v,!1)})}},{key:"_computeOffsetByParentGroup",value:function(r){var i=this.instance.getPosition(r.el),e=r.contentArea;if(e!==r.el){var n=this.instance.getPosition(e);i.x+=n.x,i.y+=n.y}if(r.el._jsPlumbParentGroup){var o=this._computeOffsetByParentGroup(r.el._jsPlumbParentGroup);i.x+=o.x,i.y+=o.y}return i}},{key:"onStart",value:function(r){var i=this,e=r.drag.getDragElement(),n=this.instance.getPosition(e);this.originalPosition={x:r.pos.x,y:r.pos.y},e._jsPlumbParentGroup&&(this._dragOffset=this._computeOffsetByParentGroup(e._jsPlumbParentGroup),this._currentDragParentGroup=e._jsPlumbParentGroup);var o=!0,a=e.getAttribute(Gi);if((this.instance.elementsDraggable===!1||a!=null&&a!==Yn)&&(o=!1),o){this._groupLocations.length=0,this._intersectingGroups.length=0,this.instance.hoverSuspended=!0;var l=r.drag.getDragElement(!0),u=l.querySelectorAll(ge),c=$_(l),h=[];Array.prototype.push.apply(h,u),Array.prototype.push.apply(h,c),this._dragSelection.filterActiveSet(function(y){return h.indexOf(y.jel)===-1}),this._dragSelection.initialisePositions();var d=function(m,b,C){if(!m._isJsPlumbGroup||i.instance.allowNestedGroups){var E=!m._jsPlumbParentGroup,S=E||m._jsPlumbParentGroup.dropOverride!==!0,D=!E&&(m._jsPlumbParentGroup.ghost||m._jsPlumbParentGroup.constrain!==!0);(E||S&&D)&&(X(i.instance.groupManager.getGroups(),function(G){var L=m._jsPlumbGroup;if(G.droppable!==!1&&G.enabled!==!1&&m._jsPlumbGroup!==G&&!i.instance.groupManager.isDescendant(G,L)){var T=G.el,q=i.instance.getId(T),W=i.instance.viewport.getPosition(q),te={x:W.x,y:W.y,w:W.w,h:W.h},R={el:T,r:te,group:G};i._groupLocations.push(R),G!==i._currentDragParentGroup&&i.instance.addClass(T,qt)}}),i._groupLocations.sort(function(G,L){return i.instance.groupManager.isDescendant(G.group,L.group)?-1:i.instance.groupManager.isAncestor(L.group,G.group)?1:0}))}return i.instance.select({source:m}).addClass(i.instance.elementDraggingClass+" "+i.instance.sourceElementDraggingClass,!0),i.instance.select({target:m}).addClass(i.instance.elementDraggingClass+" "+i.instance.targetElementDraggingClass,!0),i.instance.fire(xm,{el:m,e:r.e,originalPosition:i.originalPosition,pos:i.originalPosition,dragGroup:b,dragGroupMemberSpec:C})},p=this.instance.getId(e);this._currentDragGroup=this._dragGroupByElementIdMap[p],this._currentDragGroup&&!X_(this._currentDragGroup,e)&&(this._currentDragGroup=null);var v=d(e);if(v===!1)return this._cleanup(),!1;this._dragPayload=v,this._currentDragGroup!=null&&(this._currentDragGroupOffsets.clear(),this._currentDragGroupSizes.clear(),this._currentDragGroup.members.forEach(function(y){var m=i.instance.viewport.getPosition(y.elId);i._currentDragGroupOffsets.set(y.elId,[{x:m.x-n.x,y:m.y-n.y},y.el]),i._currentDragGroupSizes.set(y.elId,m),i._currentDragGroupOriginalPositions.set(y.elId,{x:m.x,y:m.y}),d(y.el,i._currentDragGroup,y)}))}return o}},{key:"addToDragGroup",value:function(r){var i=this,e=Y_(this.instance,r),n=this._dragGroupMap[e.id];n==null&&(n={id:e.id,members:new Set},this._dragGroupMap[e.id]=n);for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];this.removeFromDragGroup.apply(this,a),X(a,function(u){var c=i.instance.getId(u);n.members.add({elId:c,el:u,active:e.active}),i._dragGroupByElementIdMap[c]=n})}},{key:"removeFromDragGroup",value:function(){for(var r=this,i=arguments.length,e=new Array(i),n=0;n<i;n++)e[n]=arguments[n];X(e,function(o){var a=r.instance.getId(o),l=r._dragGroupByElementIdMap[a];if(l!=null){var u=new Set;l.members.forEach(function(c){c.el!==o&&u.add(c)}),l.members=u,delete r._dragGroupByElementIdMap[a]}})}},{key:"setDragGroupState",value:function(r){for(var i=this,e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];var a=n.map(function(l){return i.instance.getId(l)});X(a,function(l){var u=i._dragGroupByElementIdMap[l];if(u!=null){var c=uh(u.members,function(h){return h.elId===l});c!=null&&(c.active=r)}})}},{key:"clearDragGroup",value:function(r){var i=this,e=this._dragGroupMap[r];e!=null&&(e.members.forEach(function(n){delete i._dragGroupByElementIdMap[n.elId]}),e.members.clear())}},{key:"_pruneOrOrphan",value:function(r,i,e){var n=r.el,o={pruned:!1,pos:null};if(e||!Jl(this.instance,n,r.pos)){var a=n._jsPlumbParentGroup;a.prune?(n._isJsPlumbGroup?this.instance.removeGroup(n._jsPlumbGroup):a.remove(r.el,!0),o.pruned=!0):a.orphan&&(o.pos=this.instance.groupManager.orphan(r.el,i),n._isJsPlumbGroup?a.removeGroup(n._jsPlumbGroup):a.remove(r.el))}return o}}]),t}(),Zl={},Ql={},eu={},Qt={get:function(s,r,i){var e=Zl[r];if(e)return new e(s,i);throw{message:"jsPlumb: unknown endpoint type '"+r+"'"}},clone:function(s){var r=eu[s.type];return Qt.get(s.endpoint,s.type,r.getParams(s))},compute:function(s,r,i,e){var n=Ql[s.type];if(n!=null)return n(s,r,i,e);Pe("jsPlumb: cannot find endpoint calculator for endpoint of type ",s.type)},registerHandler:function(s){eu[s.type]=s,Zl[s.type]=s.cls,Ql[s.type]=s.compute}},gr=function(){function t(s,r){H(this,t),this.endpoint=s,f(this,"typeId",void 0),f(this,"x",void 0),f(this,"y",void 0),f(this,"w",void 0),f(this,"h",void 0),f(this,"computedValue",void 0),f(this,"bounds",is()),f(this,"classes",[]),f(this,"instance",void 0),f(this,"type",void 0),r=r||{},this.instance=s.instance,s.cssClass&&this.classes.push(s.cssClass),r.cssClass&&this.classes.push(r.cssClass)}return z(t,[{key:"addClass",value:function(r){this.classes.push(r),this.instance.addEndpointClass(this.endpoint,r)}},{key:"removeClass",value:function(r){this.classes=this.classes.filter(function(i){return i!==r}),this.instance.removeEndpointClass(this.endpoint,r)}},{key:"compute",value:function(r,i,e){this.computedValue=Qt.compute(this,r,i,e),this.bounds.xmin=this.x,this.bounds.ymin=this.y,this.bounds.xmax=this.x+this.w,this.bounds.ymax=this.y+this.h}},{key:"setVisible",value:function(r){this.instance.setEndpointVisible(this.endpoint,r)}}]),t}(),Nn,Rn,Fn,ur;(function(t){t.top="top",t.left="left",t.right="right",t.bottom="bottom"})(ur||(ur={}));var Ce=ur.top,Fe=ur.left,Le=ur.right,He=ur.bottom,W_=[Fe,Le],z_=[Ce,He],q_=function(){function t(s,r,i){H(this,t),this.instance=s,this.element=r,f(this,"isFloating",!0),f(this,"isContinuous",void 0),f(this,"isDynamic",void 0),f(this,"locations",[]),f(this,"currentLocation",0),f(this,"locked",!1),f(this,"cssClass",""),f(this,"timestamp",null),f(this,"type","Floating"),f(this,"id",ke()),f(this,"orientation",[0,0]),f(this,"size",void 0),this.size=s.viewport.getPosition(i),this.locations.push({x:.5,y:.5,ox:this.orientation[0],oy:this.orientation[1],offx:0,offy:0,iox:this.orientation[0],ioy:this.orientation[1],cls:""})}return z(t,[{key:"_updateOrientationInRouter",value:function(){this.instance.router.setAnchorOrientation(this,[this.locations[0].ox,this.locations[0].oy])}},{key:"over",value:function(r){this.orientation=this.instance.router.getEndpointOrientation(r),this.locations[0].ox=this.orientation[0],this.locations[0].oy=this.orientation[1],this._updateOrientationInRouter()}},{key:"out",value:function(){this.orientation=null,this.locations[0].ox=this.locations[0].iox,this.locations[0].oy=this.locations[0].ioy,this._updateOrientationInRouter()}}]),t}(),tu=(Nn={},f(Nn,Ce,He),f(Nn,Le,Fe),f(Nn,Fe,Le),f(Nn,He,Ce),Nn),Yh=(Rn={},f(Rn,Ce,Le),f(Rn,Le,He),f(Rn,Fe,Ce),f(Rn,He,Fe),Rn),Xh=(Fn={},f(Fn,Ce,Fe),f(Fn,Le,Ce),f(Fn,Fe,He),f(Fn,He,Le),Fn);function K_(t){return t.faces.length===0?Ce:t.faces[0]}function Ir(t,s){return t.faces.indexOf(s)!==-1}function J_(t,s){return(t.clockwise?Yh:Xh)[s]}function Z_(t,s){return(t.clockwise?Xh:Yh)[s]}function nu(t,s){return t.lockedAxis==null?t.lockedFace==null?Ir(t,s)===!0:t.lockedFace===s:t.lockedAxis.indexOf(s)!==-1}function Q_(t,s){if(Ir(t,s))return s;if(Ir(t,tu[s]))return tu[s];var r=J_(t,s);if(Ir(t,r))return r;var i=Z_(t,s);return Ir(t,i)?i:s}var ru={x:.5,y:0,ox:0,oy:-1,offx:0,offy:0},iu={x:.5,y:1,ox:0,oy:1,offx:0,offy:0},su={x:0,y:.5,ox:-1,oy:0,offx:0,offy:0},ou={x:1,y:.5,ox:1,oy:0,offx:0,offy:0},e0={x:0,y:0,ox:0,oy:-1,offx:0,offy:0},t0={x:1,y:0,ox:1,oy:-1,offx:0,offy:0},n0={x:0,y:1,ox:0,oy:1,offx:0,offy:0},r0={x:1,y:1,ox:0,oy:1,offx:0,offy:0},i0={x:.5,y:.5,ox:0,oy:0,offx:0,offy:0},$h={Top:[ru],Bottom:[iu],Left:[su],Right:[ou],TopLeft:[e0],TopRight:[t0],BottomLeft:[n0],BottomRight:[r0],Center:[i0],AutoDefault:[ru,su,iu,ou]},s0={Continuous:{faces:[Ce,Fe,He,Le]},ContinuousTop:{faces:[Ce]},ContinuousRight:{faces:[Le]},ContinuousBottom:{faces:[He]},ContinuousLeft:{faces:[Fe]},ContinuousLeftRight:{faces:[Fe,Le]},ContinuousTopBottom:{faces:[Ce,He]}};function au(t,s){if(s=s||{},t===kt.Perimeter)return d0(s);var r=$h[t];if(r!=null)return us(t,hh(r,function(i){return U({iox:i.ox,ioy:i.oy},i)}),s);if(r=s0[t],r!=null)return l0(t,r.faces,s);throw{message:"jsPlumb: unknown anchor type '"+t+"'"}}function us(t,s,r){return{type:t,locations:s,currentLocation:0,locked:!1,id:ke(),isFloating:!1,isContinuous:!1,isDynamic:s.length>1,timestamp:null,cssClass:r.cssClass||""}}function o0(t,s,r){return new q_(t,s,r)}var a0="currentFace";function l0(t,s,r){var i={type:t,locations:[],currentLocation:0,locked:!1,id:ke(),cssClass:r.cssClass||"",isFloating:!1,isContinuous:!0,timestamp:null,faces:r.faces||s,lockedFace:null,lockedAxis:null,clockwise:r.clockwise!==!1,__currentFace:null};return Object.defineProperty(i,a0,{get:function(){return this.__currentFace},set:function(n){this.__currentFace=Q_(this,n)}}),i}function lu(t){return t.length<7&&t.every(Ao)||t.length===7&&t.slice(0,5).every(Ao)&&_e(t[6])}function Lr(t){if(_e(t))return au(t,null);if(Array.isArray(t))if(lu(t)){var s=t;return us(null,[{x:s[0],y:s[1],ox:s[2],oy:s[3],offx:s[4]==null?0:s[4],offy:s[5]==null?0:s[5],iox:s[2],ioy:s[3],cls:s[6]||""}],{cssClass:s[6]||""})}else{var r=hh(t,function(e){if(_e(e)){var n=$h[e];return n!=null?U({iox:n[0].ox,ioy:n[0].oy,cls:""},n[0]):null}else if(lu(e))return{x:e[0],y:e[1],ox:e[2],oy:e[3],offx:e[4]==null?0:e[4],offy:e[5]==null?0:e[5],iox:e[2],ioy:e[3],cls:e[6]||""}}).filter(function(e){return e!=null});return us("Dynamic",r,{})}else{var i=t;return au(i.type,i.options)}}function Wh(t){for(var s=.5,r=Math.PI*2/t,i=[],e=0,n=0;n<t;n++){var o=s+s*Math.sin(e),a=s+s*Math.cos(e);i.push({x:o,y:a,ox:0,oy:0,offx:0,offy:0,iox:0,ioy:0,cls:""}),e+=r}return i}function u0(t,s){for(var r=s/t.length,i=[],e=function(a,l,u,c,h,d,p){r=s*h;for(var v=(u-a)/r,y=(c-l)/r,m=0;m<r;m++)i.push({x:a+v*m,y:l+y*m,ox:d??0,oy:p??0,offx:0,offy:0,iox:0,ioy:0,cls:""})},n=0;n<t.length;n++)e.apply(null,t[n]);return i}function Ia(t,s){for(var r=[],i=0;i<t.length;i++)r.push([t[i][0],t[i][1],t[i][2],t[i][3],1/t.length,t[i][4],t[i][5]]);return u0(r,s)}function zh(t){return Ia([[0,0,1,0,0,-1],[1,0,1,1,1,0],[1,1,0,1,0,1],[0,1,0,0,-1,0]],t)}function c0(t){return Ia([[.5,0,1,.5],[1,.5,.5,1],[.5,1,0,.5],[0,.5,.5,0]],t)}function h0(t){return Ia([[.5,0,1,1],[1,1,0,1],[0,1,.5,0]],t)}function f0(t,s){for(var r=[],i=s/180*Math.PI,e=0;e<t.length;e++){var n=t[e].x-.5,o=t[e].y-.5;r.push({x:.5+(n*Math.cos(i)-o*Math.sin(i)),y:.5+(n*Math.sin(i)+o*Math.cos(i)),ox:t[e].ox,oy:t[e].oy,offx:0,offy:0,iox:0,ioy:0,cls:""})}return r}var rn=new Map;rn.set(nn.Circle,Wh);rn.set(nn.Ellipse,Wh);rn.set(nn.Rectangle,zh);rn.set(nn.Square,zh);rn.set(nn.Diamond,c0);rn.set(nn.Triangle,h0);function d0(t){t=t||{};var s=t.anchorCount||60,r=t.shape;if(!r)throw new Error("no shape supplied to Perimeter Anchor type");if(!rn.has(r))throw new Error("Shape ["+r+"] is unknown by Perimeter Anchor type");var i=rn.get(r)(s);t.rotation&&(i=f0(i,t.rotation));var e=us(kt.Perimeter,i,t),n=U(e,{shape:r});return n}var uu=function(){function t(s,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;H(this,t),this.selector=s,this.def=r,this.exclude=i,f(this,"id",void 0),f(this,"redrop",void 0),this.id=ke(),this.redrop=r.def.redrop||qh}return z(t,[{key:"setEnabled",value:function(r){this.def.enabled=r}},{key:"isEnabled",value:function(){return this.def.enabled!==!1}}]),t}(),qh="strict",p0="any",v0="anySource",g0="anyTarget",y0="anySourceOrTarget";function m0(t,s,r,i,e,n){var o=o0(n,i,e),a={paintStyle:t.getPaintStyle(),preparedAnchor:o,element:i,scope:t.scope,cssClass:[ba,t.cssClass].join(" ")};s!=null&&(fh(s,gr)?a.existingEndpoint=s:a.endpoint=s);var l=n._internal_newEndpoint(a);return n._paintEndpoint(l,{}),l}function _0(t,s,r,i,e){for(var n=t.target||t.srcElement,o=!1,a=i.getSelector(s,r),l=0;l<a.length;l++)if(a[l]===n){o=!0;break}return e?!o:o}var E0=kn(qt,Zt),cu="sourceSelectorEndpoint",hu=function(){function t(s){H(this,t),this.instance=s,f(this,"jpc",void 0),f(this,"existingJpc",void 0),f(this,"_originalAnchorSpec",void 0),f(this,"ep",void 0),f(this,"endpointRepresentation",void 0),f(this,"canvasElement",void 0),f(this,"_activeDefinition",void 0),f(this,"placeholderInfo",{id:null,element:null}),f(this,"floatingIndex",void 0),f(this,"floatingId",void 0),f(this,"floatingElement",void 0),f(this,"floatingEndpoint",void 0),f(this,"floatingAnchor",void 0),f(this,"_stopped",void 0),f(this,"inPlaceCopy",void 0),f(this,"endpointDropTargets",[]),f(this,"currentDropTarget",null),f(this,"payload",void 0),f(this,"floatingConnections",{}),f(this,"_forceReattach",void 0),f(this,"_forceDetach",void 0),f(this,"mousedownHandler",void 0),f(this,"mouseupHandler",void 0),f(this,"selector",kn(Jn));var r=s.getContainer();this.mousedownHandler=this._mousedownHandler.bind(this),this.mouseupHandler=this._mouseupHandler.bind(this),s.on(r,Q,ge,this.mousedownHandler),s.on(r,ee,[ge,kn(Jn)].join(","),this.mouseupHandler)}return z(t,[{key:"_resolveDragParent",value:function(r,i){var e=this.instance.getContainer(),n=Mt(i,ge,e,!0);if(r.parentSelector!=null){var o=Mt(i,r.parentSelector,e,!0);return o!=null&&(n=Mt(o.parentNode,ge,e,!1)),o||n}else return n}},{key:"_mousedownHandler",value:function(r){var i,e;if(!(r.which===3||r.button===2)){var n=r.target||r.srcElement;if(e=this._getSourceDefinition(r),!(e!=null&&(i=this._resolveDragParent(e.def.def,n),i==null||i.getAttribute(Ei)===Yn))&&e){var o=r.currentTarget,a;if(n.getAttribute(Ei)!==Yn){if(Kr(r),this._activeDefinition=e,a=e.def.def,a.canAcceptNewConnection!=null&&!a.canAcceptNewConnection(i,r))return!1;var l=Tu(r,i,this.instance.currentZoom),u={element:i};if(U(u,a),u.isTemporarySource=!0,a.scope)u.scope=a.scope;else{var c=n.getAttribute(no);c!=null&&(u.scope=c)}var h=a.parameterExtractor?a.parameterExtractor(i,n,r):{};if(u=es(u,h),u.maxConnections!=null&&u.maxConnections>=0){var d=this.instance.select({source:i}).length;if(d>=u.maxConnections)return Kr(r),a.onMaxConnections&&a.onMaxConnections({element:i,maxConnections:u.maxConnections},r),r.stopImmediatePropagation&&r.stopImmediatePropagation(),!1}if(a.anchorPositionFinder){var p=a.anchorPositionFinder(i,l,a,r);p!=null&&(u.anchor=p)}this._originalAnchorSpec=u.anchor||(this.instance.areDefaultAnchorsSet()?this.instance.defaults.anchors[0]:this.instance.defaults.anchor);var v=this.instance.router.prepareAnchor(this._originalAnchorSpec),y=[l.x,l.y,0,0];if(v.locations.length>0)y[2]=v.locations[0].ox,y[3]=v.locations[0].oy;else if(v.isContinuous){var m=l.x<.5?l.x:1-l.x,b=l.y<.5?l.y:1-l.y;y[2]=m<b?l.x<.5?-1:1:0,y[3]=b<m?l.y<.5?-1:1:0}u.anchor=y,u.deleteOnEmpty=!0,this.ep=this.instance._internal_newEndpoint(u);var C={};if(a.extract){for(var E in a.extract){var S=n.getAttribute(E);S&&(C[a.extract[E]]=S)}this.ep.mergeParameters(C)}if(u.uniqueEndpoint){var D=this.ep.elementId,G=this.instance.getManagedData(D,cu,e.id);G==null?(this.instance.setManagedData(D,cu,e.id,this.ep),this.ep.deleteOnEmpty=!1):this.ep.finalEndpoint=G}o._jsPlumbOrphanedEndpoints=o._jsPlumbOrphanedEndpoints||[],o._jsPlumbOrphanedEndpoints.push(this.ep),this.instance.trigger(this.ep.endpoint.canvas,Q,r,C)}}}}},{key:"_mouseupHandler",value:function(r){var i=r.currentTarget||r.srcElement;i._jsPlumbOrphanedEndpoints&&(ky(i._jsPlumbOrphanedEndpoints,this.instance._maybePruneEndpoint.bind(this.instance)),i._jsPlumbOrphanedEndpoints.length=0),this._activeDefinition=null}},{key:"onDragInit",value:function(r){var i=mi(r,this.instance),e=Sr(r,this.instance);return this._makeDraggablePlaceholder(i,e),this.placeholderInfo.element.jtk=r.jtk,this.placeholderInfo.element}},{key:"onDragAbort",value:function(r){this._cleanupDraggablePlaceholder()}},{key:"_makeDraggablePlaceholder",value:function(r,i){this.placeholderInfo=this.placeholderInfo||{};var e=ph(Mh,{position:"absolute"});this.instance._appendElementToContainer(e);var n=this.instance.getId(e);return this.instance.setPosition(e,r),e.style.width=i.w+"px",e.style.height=i.h+"px",this.instance.manage(e),this.placeholderInfo.id=n,this.placeholderInfo.element=e,e}},{key:"_cleanupDraggablePlaceholder",value:function(){this.placeholderInfo.element&&(this.instance.unmanage(this.placeholderInfo.element,!0),delete this.placeholderInfo.element,delete this.placeholderInfo.id)}},{key:"reset",value:function(){var r=this.instance.getContainer();this.instance.off(r,ee,this.mouseupHandler),this.instance.off(r,Q,this.mousedownHandler)}},{key:"init",value:function(r){}},{key:"startNewConnectionDrag",value:function(r,i){this.jpc=this.instance._newConnection({sourceEndpoint:this.ep,targetEndpoint:this.floatingEndpoint,source:this.ep.element,target:this.placeholderInfo.element,paintStyle:this.ep.connectorStyle,hoverPaintStyle:this.ep.connectorHoverStyle,connector:this.ep.connector,overlays:this.ep.connectorOverlays,type:this.ep.edgeType,cssClass:this.ep.connectorClass,hoverClass:this.ep.connectorHoverClass,scope:r,data:i}),this.jpc.pending=!0,this.jpc.addClass(this.instance.draggingClass),this.ep.addClass(this.instance.draggingClass),this.instance.fire(Xl,this.jpc)}},{key:"startExistingConnectionDrag",value:function(){this.existingJpc=!0,this.instance.setHover(this.jpc,!1);var r=this.jpc.endpoints[0].id===this.ep.id?0:1;this.ep.detachFromConnection(this.jpc,null,!0),this.floatingEndpoint.addConnection(this.jpc),this.instance.fire(Xl,this.jpc),this.instance.sourceOrTargetChanged(this.jpc.endpoints[r].elementId,this.placeholderInfo.id,this.jpc,this.placeholderInfo.element,r),this.jpc.suspendedEndpoint=this.jpc.endpoints[r],this.jpc.suspendedElement=this.jpc.endpoints[r].element,this.jpc.suspendedElementId=this.jpc.endpoints[r].elementId,this.jpc.suspendedElementType=r===0?Do:gh,this.instance.setHover(this.jpc.suspendedEndpoint,!1),this.floatingEndpoint.referenceEndpoint=this.jpc.suspendedEndpoint,this.floatingEndpoint.mergeParameters(this.jpc.suspendedEndpoint.parameters),this.jpc.endpoints[r]=this.floatingEndpoint,this.jpc.addClass(this.instance.draggingClass),this.floatingId=this.placeholderInfo.id,this.floatingIndex=r,this.instance._refreshEndpoint(this.ep)}},{key:"_shouldStartDrag",value:function(){var r=!0;this.ep.enabled||(r=!1),this.jpc==null&&!this.ep.isSource&&!this.ep.isTemporarySource&&(r=!1),this.ep.isSource&&this.ep.isFull()&&!(this.jpc!=null&&this.ep.dragAllowedWhenFull)&&(r=!1),this.jpc!=null&&!this.jpc.isDetachable(this.ep)&&(this.ep.isFull()?r=!1:this.jpc=null);var i={},e=this.instance.checkCondition(this.jpc==null?sm:om,{endpoint:this.ep,source:this.ep.element,sourceId:this.ep.elementId,connection:this.jpc});return e===!1?r=!1:Kn(e)==="object"?(i=e,U(i,this.payload||{})):i=this.payload||{},[r,i]}},{key:"_createFloatingEndpoint",value:function(r){var i=this.ep.endpoint;if(this.ep.edgeType!=null){var e=this.instance._deriveEndpointAndAnchorSpec(this.ep.edgeType);i=e.endpoints[1]}this.floatingEndpoint=m0(this.ep,i,r,this.placeholderInfo.element,this.placeholderInfo.id,this.instance),this.floatingAnchor=this.floatingEndpoint._anchor,this.floatingEndpoint.deleteOnEmpty=!0,this.floatingElement=this.floatingEndpoint.endpoint.canvas,this.floatingId=this.instance.getId(this.floatingElement)}},{key:"_populateTargets",value:function(r,i){var e=this,n=this.jpc&&this.jpc.endpoints[0]===this.ep,o,a=this.instance.getContainer().querySelectorAll([".",Jn,"[",mh,this.ep.scope,"]:not(.",ba,")"].join(""));if(X(a,function(h){if((e.jpc!=null||h!==r)&&h!==e.floatingElement&&(e.jpc!=null||!h.jtk.endpoint.isFull())&&(n&&h.jtk.endpoint.isSource||!n&&h.jtk.endpoint.isTarget)){var d=mi(h,e.instance),p=Sr(h,e.instance);o={x:d.x,y:d.y,w:p.w,h:p.h},e.endpointDropTargets.push({el:h,targetEl:h,r:o,endpoint:h.jtk.endpoint,def:null}),e.instance.addClass(h,qt)}}),n){var l=ya(this.instance.sourceSelectors,function(h){return h.isEnabled()&&(h.def.def.scope==null||h.def.def.scope===e.ep.scope)});if(l!=null){var u=this._findTargetZones(l);X(u,function(h){if(h.getAttribute(Ei)!==Yn){var d=h.getAttribute(no);if(d!=null&&d!==e.ep.scope)return;var p={r:null,el:h};p.targetEl=Mt(h,ge,e.instance.getContainer(),!0);var v=mi(p.el,e.instance),y=Sr(p.el,e.instance);p.r={x:v.x,y:v.y,w:y.w,h:y.h},l.def.def.rank!=null&&(p.rank=l.def.def.rank),p.def=l.def,e.endpointDropTargets.push(p),e.instance.addClass(p.targetEl,qt)}})}}else{var c=Sy(this.instance.targetSelectors,function(h){return h.isEnabled()});c.forEach(function(h){var d=e._findTargetZones(h);X(d,function(p){if(p.getAttribute(Ei)!==Yn){var v=p.getAttribute(no);if(v!=null&&v!==e.ep.scope)return;var y={r:null,el:p};if(h.def.def.parentSelector!=null&&(y.targetEl=Mt(p,h.def.def.parentSelector,e.instance.getContainer(),!0)),y.targetEl==null&&(y.targetEl=Mt(p,ge,e.instance.getContainer(),!0)),(h.def.def.allowLoopback===!1||e._activeDefinition&&e._activeDefinition.def.def.allowLoopback===!1)&&y.targetEl===e.ep.element||h.def.def.canAcceptNewConnection!=null&&!h.def.def.canAcceptNewConnection(y.targetEl,i))return;var m=h.def.def.maxConnections;if(m!=null&&m!==-1&&e.instance.select({target:y.targetEl}).length>=m)return;var b=mi(p,e.instance),C=Sr(p,e.instance);y.r={x:b.x,y:b.y,w:C.w,h:C.h},y.def=h.def,h.def.def.rank!=null&&(y.rank=h.def.def.rank),e.endpointDropTargets.push(y),e.instance.addClass(y.targetEl,qt)}})})}this.endpointDropTargets.sort(function(h,d){if(h.targetEl._isJsPlumbGroup&&!d.targetEl._isJsPlumbGroup)return 1;if(!h.targetEl._isJsPlumbGroup&&d.targetEl._isJsPlumbGroup)return-1;if(h.targetEl._isJsPlumbGroup&&d.targetEl._isJsPlumbGroup){if(e.instance.groupManager.isAncestor(h.targetEl._jsPlumbGroup,d.targetEl._jsPlumbGroup))return-1;if(e.instance.groupManager.isAncestor(d.targetEl._jsPlumbGroup,h.targetEl._jsPlumbGroup))return 1}else if(h.rank!=null&&d.rank!=null){if(h.rank>d.rank)return-1;if(h.rank<d.rank)return 1}else return 0})}},{key:"_findTargetZones",value:function(r){var i;if(r.redrop===p0){var e=this.instance.targetSelectors.map(function(o){return o.selector});e.push.apply(e,ir(this.instance.sourceSelectors.map(function(o){return o.selector}))),e.push(ge),i=e.join(",")}else if(r.redrop===qh)i=r.selector;else if(r.redrop===v0)i=this.instance.sourceSelectors.map(function(o){return o.selector}).join(",");else if(r.redrop===g0)i=this.instance.targetSelectors.map(function(o){return o.selector}).join(",");else if(r.redrop===y0){var n=this.instance.targetSelectors.map(function(o){return o.selector});n.push.apply(n,ir(this.instance.sourceSelectors.map(function(o){return o.selector}))),i=n.join(",")}return this.instance.getContainer().querySelectorAll(i)}},{key:"onStart",value:function(r){this.endpointDropTargets.length=0,this.currentDropTarget=null,this._stopped=!1;var i=r.drag.getDragElement();if(this.ep=i.jtk.endpoint,!this.ep)return!1;this.endpointRepresentation=this.ep.endpoint,this.canvasElement=this.endpointRepresentation.canvas,this.jpc=this.ep.connectorSelector();var e=this._shouldStartDrag(),n=Fi(e,2),o=n[0],a=n[1];if(o===!1)return this._stopped=!0,!1;this.instance.setHover(this.ep,!1),this.instance.isConnectionBeingDragged=!0,this.jpc&&!this.ep.isFull()&&this.ep.isSource&&(this.jpc=null),this._createFloatingEndpoint(this.canvasElement),this._populateTargets(this.canvasElement,r.e),this.jpc==null?this.startNewConnectionDrag(this.ep.scope,a):this.startExistingConnectionDrag(),this._registerFloatingConnection(this.placeholderInfo,this.jpc),this.instance.currentlyDragging=!0}},{key:"onBeforeStart",value:function(r){this.payload=r.e.payload||{}}},{key:"onDrag",value:function(r){if(this._stopped)return!0;if(this.placeholderInfo.element){var i=Sr(this.floatingElement,this.instance);this.instance.setElementPosition(this.placeholderInfo.element,r.pos.x,r.pos.y);for(var e={x:r.pos.x,y:r.pos.y,w:i.w,h:i.h},n,o,a,l=0;l<this.endpointDropTargets.length;l++)if(Gh(e,this.endpointDropTargets[l].r)){n=this.endpointDropTargets[l];break}if(n!==this.currentDropTarget&&this.currentDropTarget!=null&&(o=this._getFloatingAnchorIndex(),this.instance.removeClass(this.currentDropTarget.el,Zt),this.currentDropTarget.endpoint&&(this.currentDropTarget.endpoint.endpoint.removeClass(this.instance.endpointDropAllowedClass),this.currentDropTarget.endpoint.endpoint.removeClass(this.instance.endpointDropForbiddenClass)),this.floatingAnchor.out()),n!=null&&(this.instance.addClass(n.el,Zt),o=this._getFloatingAnchorIndex(),n.endpoint!=null))if(a=n.endpoint.isSource&&o===0||n.endpoint.isTarget&&o!==0||this.jpc.suspendedEndpoint&&n.endpoint.referenceEndpoint&&n.endpoint.referenceEndpoint.id===this.jpc.suspendedEndpoint.id,a){var u=this.instance.checkCondition(jy,{sourceEndpoint:this.jpc.endpoints[o],targetEndpoint:n.endpoint.endpoint,connection:this.jpc});u?(n.endpoint.endpoint.addClass(this.instance.endpointDropAllowedClass),n.endpoint.endpoint.removeClass(this.instance.endpointDropForbiddenClass)):(n.endpoint.endpoint.removeClass(this.instance.endpointDropAllowedClass),n.endpoint.endpoint.addClass(this.instance.endpointDropForbiddenClass)),this.floatingAnchor.over(n.endpoint),this.instance._paintConnection(this.jpc)}else n=null;this.currentDropTarget=n}}},{key:"_maybeCleanup",value:function(r){r._mtNew&&r.connections.length===0?this.instance.deleteEndpoint(r):delete r._mtNew}},{key:"_reattachOrDiscard",value:function(r){var i=this.jpc.suspendedEndpoint!=null,e=this._getFloatingAnchorIndex();return i&&this._shouldReattach()?(e===0?(this.jpc.source=this.jpc.suspendedElement,this.jpc.sourceId=this.jpc.suspendedElementId):(this.jpc.target=this.jpc.suspendedElement,this.jpc.targetId=this.jpc.suspendedElementId),this._doForceReattach(e),!0):(this._discard(e,r),!1)}},{key:"onStop",value:function(r){var i=this,e=r.e;this.instance.isConnectionBeingDragged=!1,this.instance.currentlyDragging=!1;var n=Ry(Zt,qt),o=this.instance.getContainer().querySelectorAll(E0);if(X(o,function(d){i.instance.removeClass(d,n)}),this.jpc&&this.jpc.endpoints!=null){var a=this.jpc.suspendedEndpoint!=null,l=this._getFloatingAnchorIndex(),u=this.jpc.suspendedEndpoint,c;if(this.currentDropTarget!=null)if(c=this._getDropEndpoint(r,this.jpc),c==null)this._reattachOrDiscard(r.e);else if(u&&u.id===c.id)this._doForceReattach(l);else if(!c.enabled)this._reattachOrDiscard(r.e);else if(c.isFull())c.fire(Ph,{endpoint:this,connection:this.jpc,maxConnections:this.instance.defaults.maxConnections},e),this._reattachOrDiscard(r.e);else{l===0?(this.jpc.source=c.element,this.jpc.sourceId=c.elementId):(this.jpc.target=c.element,this.jpc.targetId=c.elementId);var h=!0;a&&this.jpc.suspendedEndpoint.id!==c.id&&(!this.jpc.isDetachAllowed(this.jpc)||!this.jpc.endpoints[l].isDetachAllowed(this.jpc)||!this.jpc.suspendedEndpoint.isDetachAllowed(this.jpc)||!this.instance.checkCondition("beforeDetach",this.jpc))&&(h=!1),h=h&&c.isDropAllowed(this.jpc.sourceId,this.jpc.targetId,this.jpc.scope,this.jpc,c),h?this._drop(c,l,e,h):this._reattachOrDiscard(r.e)}else this._reattachOrDiscard(r.e);this.instance._refreshEndpoint(this.ep),this.ep.removeClass(this.instance.draggingClass),this._cleanupDraggablePlaceholder(),this.jpc.removeClass(this.instance.draggingClass),delete this.jpc.suspendedEndpoint,delete this.jpc.suspendedElement,delete this.jpc.suspendedElementType,delete this.jpc.suspendedElementId,delete this.jpc.suspendedIndex,delete this.floatingId,delete this.floatingIndex,delete this.floatingElement,delete this.floatingEndpoint,delete this.floatingAnchor,delete this.jpc.pending,c!=null&&this._maybeCleanup(c)}}},{key:"_getSourceDefinition",value:function(r){for(var i,e=this.instance.getContainer(),n=0;n<this.instance.sourceSelectors.length;n++)if(i=this.instance.sourceSelectors[n],i.isEnabled()){var o=_0(r,e,i.selector,this.instance,i.exclude);if(o!==!1)return i}}},{key:"_getDropEndpoint",value:function(r,i){var e;if(this.currentDropTarget.endpoint==null){var n=this.currentDropTarget.def,o=r.e.target||r.e.srcElement;if(n==null)return null;var a=this.currentDropTarget.targetEl,l=Tu(r.e,a,this.instance.currentZoom),u=this.instance._deriveEndpointAndAnchorSpec(i.getType().join(" "),!0),c=u.endpoints?U(r,{endpoint:n.def.endpoint||u.endpoints[1],cssClass:n.def.cssClass||"",source:n.def.source===!0,target:n.def.target===!0}):r,h=this.instance.validAnchorsSpec(u.anchors)?u.anchors:this.instance.areDefaultAnchorsSet()?this.instance.defaults.anchors:null,d=n.def.anchor,p=n.def.anchorPositionFinder?n.def.anchorPositionFinder(a,l,n.def,r.e):null,v=p??d??(h!=null&&h[1]!=null?h[1]:null);v!=null&&(c=U(c,{anchor:v})),n.def.portId!=null&&(c.portId=n.def.portId);var y=n.def.parameterExtractor?n.def.parameterExtractor(this.currentDropTarget.el,o,r.e):{};if(c=es(c,y),c.element=a,e=this.instance._internal_newEndpoint(c),e._mtNew=!0,e.deleteOnEmpty=!0,n.def.parameters&&e.mergeParameters(n.def.parameters),n.def.extract){var m={};for(var b in n.def.extract){var C=this.currentDropTarget.el.getAttribute(b);C&&(m[n.def.extract[b]]=C)}e.mergeParameters(m)}}else e=this.currentDropTarget.endpoint;return e&&(e.removeClass(this.instance.endpointDropAllowedClass),e.removeClass(this.instance.endpointDropForbiddenClass)),e}},{key:"_doForceReattach",value:function(r){this.floatingEndpoint.detachFromConnection(this.jpc,null,!0),this.jpc.endpoints[r]=this.jpc.suspendedEndpoint,this.instance.setHover(this.jpc,!1),this.jpc._forceDetach=!0,this.jpc.suspendedEndpoint.addConnection(this.jpc),this.instance.sourceOrTargetChanged(this.floatingId,this.jpc.suspendedEndpoint.elementId,this.jpc,this.jpc.suspendedEndpoint.element,r),this.instance.deleteEndpoint(this.floatingEndpoint),this.instance.repaint(this.jpc.source),delete this.jpc._forceDetach}},{key:"_shouldReattach",value:function(){if(this.jpc.isReattach()||this.jpc._forceReattach)return!0;var r=this.jpc.suspendedEndpoint,i=this.jpc.suspendedElementType==Do?1:0,e=this.jpc.endpoints[i];return!lh(!0,!1,[[r,Zn,[this.jpc]],[e,Zn,[this.jpc]],[this.jpc,Zn,[this.jpc]],[this.instance,_h,[Oh,this.jpc]]])}},{key:"_discard",value:function(r,i){this.jpc.pending?this.instance.fire(Sm,this.jpc,i):(r===0?(this.jpc.source=this.jpc.suspendedEndpoint.element,this.jpc.sourceId=this.jpc.suspendedEndpoint.elementId):(this.jpc.target=this.jpc.suspendedEndpoint.element,this.jpc.targetId=this.jpc.suspendedEndpoint.elementId),this.jpc.endpoints[r]=this.jpc.suspendedEndpoint),this.floatingEndpoint&&this.floatingEndpoint.detachFromConnection(this.jpc),this.instance.deleteConnection(this.jpc,{originalEvent:i,force:!0})}},{key:"_drop",value:function(r,i,e,n){if(this.jpc.endpoints[i].detachFromConnection(this.jpc),this.jpc.suspendedEndpoint&&this.jpc.suspendedEndpoint.detachFromConnection(this.jpc),this.jpc.endpoints[i]=r,r.addConnection(this.jpc),this.jpc.suspendedEndpoint){var o=this.jpc.suspendedEndpoint.elementId;this.instance.fireMoveEvent({index:i,originalSourceId:i===0?o:this.jpc.sourceId,newSourceId:i===0?r.elementId:this.jpc.sourceId,originalTargetId:i===1?o:this.jpc.targetId,newTargetId:i===1?r.elementId:this.jpc.targetId,originalEndpoint:this.jpc.suspendedEndpoint,connection:this.jpc,newEndpoint:r},e)}if(i===1?this.instance.sourceOrTargetChanged(this.floatingId,this.jpc.targetId,this.jpc,this.jpc.target,1):this.instance.sourceOrTargetChanged(this.floatingId,this.jpc.sourceId,this.jpc,this.jpc.source,0),this.jpc.endpoints[0].finalEndpoint){var a=this.jpc.endpoints[0];a.detachFromConnection(this.jpc),this.jpc.endpoints[0]=this.jpc.endpoints[0].finalEndpoint,this.jpc.endpoints[0].addConnection(this.jpc)}sr(n)&&this.jpc.mergeData(n),this._originalAnchorSpec&&(this.jpc.endpoints[0].setAnchor(this._originalAnchorSpec),this._originalAnchorSpec=null),this.instance._finaliseConnection(this.jpc,null,e),this.instance.setHover(this.jpc,!1),this.instance.revalidate(this.jpc.endpoints[0].element)}},{key:"_registerFloatingConnection",value:function(r,i){this.floatingConnections[r.id]=i}},{key:"_getFloatingAnchorIndex",value:function(){return this.floatingIndex==null?1:this.floatingIndex}}]),t}(),fu=function(t){oe(r,t);var s=ae(r);function r(i,e){var n;return H(this,r),n=s.call(this,i,e),n.instance=i,n.dragSelection=e,f(g(n),"selector",[">",Wm,ge].join(" ")),f(g(n),"doRevalidate",void 0),n.doRevalidate=n._revalidate.bind(g(n)),n}return z(r,[{key:"reset",value:function(){this.drag.off(rs,this.doRevalidate)}},{key:"_revalidate",value:function(e){this.instance.revalidate(e)}},{key:"init",value:function(e){this.drag=e,e.on(rs,this.doRevalidate)}},{key:"useGhostProxy",value:function(e,n){var o=n._jsPlumbParentGroup;return o==null?!1:o.ghost===!0}},{key:"makeGhostProxy",value:function(e){var n=e,o=n.cloneNode(!0);return o._jsPlumbParentGroup=n._jsPlumbParentGroup,o}}]),r}(Fo),La=function(){function t(s,r){H(this,t),this.instance=s,this.overlay=r,f(this,"htmlElementOverlay",void 0),this.htmlElementOverlay=r}return z(t,null,[{key:"getElement",value:function(r,i,e){if(r.canvas==null){if(e&&i){r.canvas=e(i);var n=r.instance.overlayClass+" "+(r.cssClass?r.cssClass:"");r.instance.addClass(r.canvas,n)}else r.canvas=ph(Mh,{},r.instance.overlayClass+" "+(r.cssClass?r.cssClass:""));r.instance.setAttribute(r.canvas,"jtk-overlay-id",r.id);for(var o in r.attributes)r.instance.setAttribute(r.canvas,o,r.attributes[o]);r.canvas.style.position=Zr,r.instance._appendElement(r.canvas,r.instance.getContainer()),r.instance.getId(r.canvas);var a="translate(-50%, -50%)";r.canvas.style.webkitTransform=a,r.canvas.style.mozTransform=a,r.canvas.style.msTransform=a,r.canvas.style.oTransform=a,r.canvas.style.transform=a,r.isVisible()||(r.canvas.style.display=or),r.canvas.jtk={overlay:r}}return r.canvas}},{key:"destroy",value:function(r){r.canvas&&r.canvas.parentNode&&r.canvas.parentNode.removeChild(r.canvas),delete r.canvas,delete r.cachedDimensions}},{key:"_getDimensions",value:function(r,i){return(r.cachedDimensions==null||i)&&(r.cachedDimensions={w:1,h:1}),r.cachedDimensions}}]),t}(),oi=function(){function t(){H(this,t),f(this,"_listeners",{}),f(this,"eventsSuspended",!1),f(this,"tick",!1),f(this,"eventsToDieOn",{ready:!0}),f(this,"queue",[])}return z(t,[{key:"fire",value:function(r,i,e){var n=null;if(this.tick)this.queue.unshift(arguments);else{if(this.tick=!0,!this.eventsSuspended&&this._listeners[r]){var o=this._listeners[r].length,a=0,l=!1;if(!this.shouldFireEvent||this.shouldFireEvent(r,i,e))for(;!l&&a<o&&n!==!1;){if(this.eventsToDieOn[r])this._listeners[r][a](i,e);else try{n=this._listeners[r][a](i,e)}catch(u){Pe("jsPlumb: fire failed for event "+r+" : "+(u.message||u))}a++,(this._listeners==null||this._listeners[r]==null)&&(l=!0)}}this.tick=!1,this._drain()}return n}},{key:"_drain",value:function(){var r=this.queue.pop();r&&this.fire.apply(this,r)}},{key:"unbind",value:function(r,i){if(arguments.length===0)this._listeners={};else if(arguments.length===1){if(typeof r=="string")delete this._listeners[r];else if(r.__jsPlumb){var e;for(var n in r.__jsPlumb)e=r.__jsPlumb[n],Gl(this._listeners[e]||[],r)}}else arguments.length===2&&Gl(this._listeners[r]||[],i);return this}},{key:"getListener",value:function(r){return this._listeners[r]||[]}},{key:"isSuspendEvents",value:function(){return this.eventsSuspended}},{key:"setSuspendEvents",value:function(r){this.eventsSuspended=r}},{key:"bind",value:function(r,i,e){var n=this,o=function(u){ch(n._listeners,u,i,e),i.__jsPlumb=i.__jsPlumb||{},i.__jsPlumb[ke()]=u};if(typeof r=="string")o(r);else if(r.length!=null)for(var a=0;a<r.length;a++)o(r[a]);return this}},{key:"silently",value:function(r){this.setSuspendEvents(!0);try{r()}catch(i){Pe("Cannot execute silent function "+i)}this.setSuspendEvents(!1)}}]),t}();(function(t){oe(r,t);var s=ae(r);function r(){return H(this,r),s.apply(this,arguments)}return z(r,[{key:"shouldFireEvent",value:function(e,n,o){return!0}}]),r})(oi);function Go(t){var s=null;return _e(t)?s={type:t,options:{}}:s=t,s.options.id=s.options.id||ke(),s}var Bs=function(t){oe(r,t);var s=ae(r);function r(i,e,n){var o;H(this,r),o=s.call(this),o.instance=i,o.component=e,f(g(o),"id",void 0),f(g(o),"type",void 0),f(g(o),"cssClass",void 0),f(g(o),"visible",!0),f(g(o),"location",void 0),f(g(o),"events",void 0),f(g(o),"attributes",void 0),n=n||{},o.id=n.id||ke(),o.cssClass=n.cssClass||"",o.setLocation(n.location),o.events=n.events||{},o.attributes=n.attributes||{};for(var a in o.events)o.bind(a,o.events[a]);return o}return z(r,[{key:"setLocation",value:function(e){var n=this.location==null?.5:this.location;if(e!=null)try{var o=typeof e=="string"?parseFloat(e):e;isNaN(o)||(n=o)}catch{}this.location=n}},{key:"shouldFireEvent",value:function(e,n,o){return!0}},{key:"setVisible",value:function(e){this.visible=e,this.instance.setOverlayVisible(this,e)}},{key:"isVisible",value:function(){return this.visible}}]),r}(oi),du={},Tn={get:function(s,r,i,e){var n=du[r];if(n)return new n(s,i,e);throw{message:"jsPlumb: unknown overlay type '"+r+"'"}},register:function(s,r){du[s]=r}},An=function(t){oe(r,t);var s=ae(r);function r(i,e,n){var o;return H(this,r),o=s.call(this,i,e,n),o.instance=i,o.component=e,f(g(o),"label",void 0),f(g(o),"labelText",void 0),f(g(o),"type",r.type),f(g(o),"cachedDimensions",void 0),n=n||{label:""},o.setLabel(n.label),o}return z(r,[{key:"getLabel",value:function(){return xn(this.label)?this.label(this):this.labelText}},{key:"setLabel",value:function(e){this.label=e,this.labelText=null,this.instance.updateLabel(this)}},{key:"getDimensions",value:function(){return{w:1,h:1}}},{key:"updateFrom",value:function(e){e.label!=null&&this.setLabel(e.label),e.location!=null&&(this.setLocation(e.location),this.instance.updateLabel(this))}}]),r}(Bs);f(An,"type","Label");function Vt(t){return t.type===An.type}Tn.register(An.type,An);function bi(t){return t==null?null:t.split(" ").filter(function(s){return s!=null&&s.length>0})}function pu(t,s,r){for(var i in s)t[i]=r}var b0="connector",C0="override",x0="cssClass",vu="__default",S0="anchor",P0="anchors",Nr="__label",k0="jtk-default-label",Kh="overlay",T0="labelLocation",gu="add",yu="remove";function Gn(t,s){if(t.getDefaultType){var r=t.getTypeDescriptor(),i={},e=t.getDefaultType(),n=U({},e);pu(i,e,vu),t._types.forEach(function(o){if(o!==vu){var a=t.instance.getType(o,r);if(a!=null){var l=new Set([b0,S0,P0]);if(a.mergeStrategy===C0)for(var u in a)l.add(u);n=es(n,a,[x0],Py(l)),pu(i,a,o)}}}),s&&(n=Cy(n,s,"_")),t.applyType(n,i)}}function oo(t,s){var r=t.instance.getType(s,t.getTypeDescriptor());r!=null&&r.cssClass&&t.removeClass(r.cssClass)}function mu(t){if(t.paintStyle&&t.hoverPaintStyle){var s={};U(s,t.paintStyle),U(s,t.hoverPaintStyle),t.hoverPaintStyle=s}}function A0(t,s){var r={cssClass:s.cssClass,id:Nr,component:t},i=U(r,s);return new An(t.instance,t,i)}function O0(t,s){var r=null;if(_e(s))r=Tn.get(t.instance,s,t,{});else if(s.type!=null&&s.options!=null){var i=s,e=U({},i.options);r=Tn.get(t.instance,i.type,t,e)}else r=s;return r.id=r.id||ke(),t.cacheTypeItem(Kh,r,r.id),t.overlays[r.id]=r,r}var Jh=function(t){oe(r,t);var s=ae(r);function r(i,e){var n;if(H(this,r),n=s.call(this),n.instance=i,f(g(n),"defaultLabelLocation",.5),f(g(n),"overlays",{}),f(g(n),"overlayPositions",{}),f(g(n),"overlayPlacements",{}),f(g(n),"clone",void 0),f(g(n),"deleted",void 0),f(g(n),"segment",void 0),f(g(n),"x",void 0),f(g(n),"y",void 0),f(g(n),"w",void 0),f(g(n),"h",void 0),f(g(n),"id",void 0),f(g(n),"visible",!0),f(g(n),"typeId",void 0),f(g(n),"params",{}),f(g(n),"paintStyle",void 0),f(g(n),"hoverPaintStyle",void 0),f(g(n),"paintStyleInUse",void 0),f(g(n),"_hover",!1),f(g(n),"lastPaintedAt",void 0),f(g(n),"data",void 0),f(g(n),"_defaultType",void 0),f(g(n),"events",void 0),f(g(n),"parameters",void 0),f(g(n),"_types",void 0),f(g(n),"_typeCache",void 0),f(g(n),"cssClass",void 0),f(g(n),"hoverClass",void 0),f(g(n),"beforeDetach",void 0),f(g(n),"beforeDrop",void 0),e=e||{},n.cssClass=e.cssClass||"",n.hoverClass=e.hoverClass||i.defaults.hoverClass,n.beforeDetach=e.beforeDetach,n.beforeDrop=e.beforeDrop,n._types=new Set,n._typeCache={},n.parameters=Qi(e.parameters||{}),n.id=e.id||n.getIdPrefix()+new Date().getTime(),n._defaultType={parameters:n.parameters,scope:e.scope||n.instance.defaultScope,overlays:{}},e.events)for(var o in e.events)n.bind(o,e.events[o]);n.clone=function(){var p=Object.create(n.constructor.prototype);return n.constructor.apply(p,[i,e]),p},n.overlays={},n.overlayPositions={};var a=e.overlays||[],l={},u=n.getDefaultOverlayKey();if(u){var c=n.instance.defaults[u];c&&a.push.apply(a,ir(c));for(var h=0;h<a.length;h++){var d=Go(a[h]);l[d.options.id]=d}}return n._defaultType.overlays=l,e.label&&(n.getDefaultType().overlays[Nr]={type:An.type,options:{label:e.label,location:e.labelLocation||n.defaultLabelLocation,id:Nr,cssClass:k0}}),n}return z(r,[{key:"isDetachAllowed",value:function(e){var n=!0;if(this.beforeDetach)try{n=this.beforeDetach(e)}catch(o){Pe("jsPlumb: beforeDetach callback failed",o)}return n}},{key:"isDropAllowed",value:function(e,n,o,a,l){var u,c={sourceId:e,targetId:n,scope:o,connection:a,dropEndpoint:l};if(this.beforeDrop)try{u=this.beforeDrop(c)}catch(h){Pe("jsPlumb: beforeDrop callback failed",h)}else u=this.instance.checkCondition(Ah,c);return u}},{key:"getDefaultType",value:function(){return this._defaultType}},{key:"appendToDefaultType",value:function(e){for(var n in e)this._defaultType[n]=e[n]}},{key:"getId",value:function(){return this.id}},{key:"cacheTypeItem",value:function(e,n,o){this._typeCache[o]=this._typeCache[o]||{},this._typeCache[o][e]=n}},{key:"getCachedTypeItem",value:function(e,n){return this._typeCache[n]?this._typeCache[n][e]:null}},{key:"setType",value:function(e,n){this.clearTypes(),(bi(e)||[]).forEach(this._types.add,this._types),Gn(this,n)}},{key:"getType",value:function(){return Array.from(this._types.keys())}},{key:"reapplyTypes",value:function(e){Gn(this,e)}},{key:"hasType",value:function(e){return this._types.has(e)}},{key:"addType",value:function(e,n){var o=bi(e),a=!1;if(o!=null){for(var l=0,u=o.length;l<u;l++)this._types.has(o[l])||(this._types.add(o[l]),a=!0);a&&Gn(this,n)}}},{key:"removeType",value:function(e,n){var o=this,a=bi(e),l=!1,u=function(p){return o._types.has(p)?(oo(o,p),o._types.delete(p),!0):!1};if(a!=null){for(var c=0,h=a.length;c<h;c++)l=u(a[c])||l;l&&Gn(this,n)}}},{key:"clearTypes",value:function(e){var n=this;this._types.forEach(function(o){oo(n,o)}),this._types.clear(),Gn(this,e)}},{key:"toggleType",value:function(e,n){var o=bi(e);if(o!=null){for(var a=0,l=o.length;a<l;a++)this._types.has(o[a])?(oo(this,o[a]),this._types.delete(o[a])):this._types.add(o[a]);Gn(this,n)}}},{key:"applyType",value:function(e,n){if(this.setPaintStyle(e.paintStyle),this.setHoverPaintStyle(e.hoverPaintStyle),this.mergeParameters(e.parameters),this.paintStyleInUse=this.getPaintStyle(),e.overlays){var o={},a;for(a in e.overlays){var l=this.overlays[e.overlays[a].options.id];if(l)l.updateFrom(e.overlays[a].options),o[e.overlays[a].options.id]=!0,this.instance.reattachOverlay(l,this);else{var u=this.getCachedTypeItem(Kh,e.overlays[a].options.id);u!=null?(this.instance.reattachOverlay(u,this),u.setVisible(!0),u.updateFrom(e.overlays[a].options),this.overlays[u.id]=u):u=this.addOverlay(e.overlays[a]),o[u.id]=!0}}for(a in this.overlays)o[this.overlays[a].id]==null&&this.removeOverlay(this.overlays[a].id,!0)}}},{key:"setPaintStyle",value:function(e){this.paintStyle=e,this.paintStyleInUse=this.paintStyle,mu(this)}},{key:"getPaintStyle",value:function(){return this.paintStyle}},{key:"setHoverPaintStyle",value:function(e){this.hoverPaintStyle=e,mu(this)}},{key:"getHoverPaintStyle",value:function(){return this.hoverPaintStyle}},{key:"destroy",value:function(){for(var e in this.overlays)this.instance.destroyOverlay(this.overlays[e]);this.overlays={},this.overlayPositions={},this.unbind(),this.clone=null}},{key:"isHover",value:function(){return this._hover}},{key:"mergeParameters",value:function(e){e!=null&&U(this.parameters,e)}},{key:"setVisible",value:function(e){this.visible=e,e?this.showOverlays():this.hideOverlays()}},{key:"isVisible",value:function(){return this.visible}},{key:"setAbsoluteOverlayPosition",value:function(e,n){this.overlayPositions[e.id]=n}},{key:"getAbsoluteOverlayPosition",value:function(e){return this.overlayPositions?this.overlayPositions[e.id]:null}},{key:"_clazzManip",value:function(e,n){for(var o in this.overlays)e===gu?this.instance.addOverlayClass(this.overlays[o],n):e===yu&&this.instance.removeOverlayClass(this.overlays[o],n)}},{key:"addClass",value:function(e,n){var o=(this.cssClass||"").split(" ");o.push(e),this.cssClass=o.join(" "),this._clazzManip(gu,e)}},{key:"removeClass",value:function(e,n){var o=(this.cssClass||"").split(" ");this.cssClass=o.filter(function(a){return a!==e}).join(" "),this._clazzManip(yu,e)}},{key:"getClass",value:function(){return this.cssClass}},{key:"shouldFireEvent",value:function(e,n,o){return!0}},{key:"getData",value:function(){return this.data}},{key:"setData",value:function(e){this.data=e||{}}},{key:"mergeData",value:function(e){this.data=U(this.data,e)}},{key:"addOverlay",value:function(e){var n=O0(this,e);if(this.getData&&n.type===An.type&&!_e(e)){var o=this.getData(),a=e.options;if(o){var l=a.labelLocationAttribute||T0,u=o[l];u&&(n.location=u)}}return n}},{key:"getOverlay",value:function(e){return this.overlays[e]}},{key:"getOverlays",value:function(){return this.overlays}},{key:"hideOverlay",value:function(e){var n=this.getOverlay(e);n&&n.setVisible(!1)}},{key:"hideOverlays",value:function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];n=n||[];for(var a in this.overlays)(n.length===0||n.indexOf(a)!==-1)&&this.overlays[a].setVisible(!1)}},{key:"showOverlay",value:function(e){var n=this.getOverlay(e);n&&n.setVisible(!0)}},{key:"showOverlays",value:function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];n=n||[];for(var a in this.overlays)(n.length===0||n.indexOf(a)!==-1)&&this.overlays[a].setVisible(!0)}},{key:"removeAllOverlays",value:function(){for(var e in this.overlays)this.instance.destroyOverlay(this.overlays[e]);this.overlays={},this.overlayPositions=null,this.overlayPlacements={}}},{key:"removeOverlay",value:function(e,n){var o=this.overlays[e];o&&(o.setVisible(!1),n||this.instance.destroyOverlay(o),delete this.overlays[e],this.overlayPositions&&delete this.overlayPositions[e],this.overlayPlacements&&delete this.overlayPlacements[e])}},{key:"removeOverlays",value:function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];for(var a=0,l=n.length;a<l;a++)this.removeOverlay(arguments[a])}},{key:"getLabel",value:function(){var e=this.getLabelOverlay();return e!=null?e.getLabel():null}},{key:"getLabelOverlay",value:function(){return this.getOverlay(Nr)}},{key:"setLabel",value:function(e){var n=this.getLabelOverlay();if(n)if(_e(e)||xn(e))n.setLabel(e);else{var a=e;a.label&&n.setLabel(a.label),a.location&&(n.location=a.location)}else{var o=_e(e)||xn(e)?{label:e}:e;n=A0(this,o),this.overlays[Nr]=n}}}]),r}(oi),w0=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"],Xn=function(t){oe(r,t);var s=ae(r);function r(i,e){var n;H(this,r),n=s.call(this,i,e),n.instance=i,f(g(n),"connections",[]),f(g(n),"endpoint",void 0),f(g(n),"element",void 0),f(g(n),"elementId",void 0),f(g(n),"dragAllowedWhenFull",!0),f(g(n),"timestamp",void 0),f(g(n),"portId",void 0),f(g(n),"maxConnections",void 0),f(g(n),"proxiedBy",void 0),f(g(n),"connectorClass",void 0),f(g(n),"connectorHoverClass",void 0),f(g(n),"finalEndpoint",void 0),f(g(n),"enabled",!0),f(g(n),"isSource",void 0),f(g(n),"isTarget",void 0),f(g(n),"isTemporarySource",void 0),f(g(n),"connectionCost",1),f(g(n),"connectionsDirected",void 0),f(g(n),"connectionsDetachable",void 0),f(g(n),"reattachConnections",void 0),f(g(n),"currentAnchorClass",void 0),f(g(n),"referenceEndpoint",void 0),f(g(n),"edgeType",void 0),f(g(n),"connector",void 0),f(g(n),"connectorOverlays",void 0),f(g(n),"connectorStyle",void 0),f(g(n),"connectorHoverStyle",void 0),f(g(n),"deleteOnEmpty",void 0),f(g(n),"uuid",void 0),f(g(n),"scope",void 0),f(g(n),"_anchor",void 0),f(g(n),"defaultLabelLocation",[.5,.5]),n.appendToDefaultType({edgeType:e.edgeType,maxConnections:e.maxConnections==null?n.instance.defaults.maxConnections:e.maxConnections,paintStyle:e.paintStyle||n.instance.defaults.endpointStyle,hoverPaintStyle:e.hoverPaintStyle||n.instance.defaults.endpointHoverStyle,connectorStyle:e.connectorStyle,connectorHoverStyle:e.connectorHoverStyle,connectorClass:e.connectorClass,connectorHoverClass:e.connectorHoverClass,connectorOverlays:e.connectorOverlays,connector:e.connector}),n.enabled=e.enabled!==!1,n.visible=!0,n.element=e.element,n.uuid=e.uuid,n.portId=e.portId,n.elementId=e.elementId,n.connectionCost=e.connectionCost==null?1:e.connectionCost,n.connectionsDirected=e.connectionsDirected,n.currentAnchorClass="",n.events={},n.connectorOverlays=e.connectorOverlays,n.connectorStyle=e.connectorStyle,n.connectorHoverStyle=e.connectorHoverStyle,n.connector=e.connector,n.edgeType=e.edgeType,n.connectorClass=e.connectorClass,n.connectorHoverClass=e.connectorHoverClass,n.deleteOnEmpty=e.deleteOnEmpty===!0,n.isSource=e.source||!1,n.isTemporarySource=e.isTemporarySource||!1,n.isTarget=e.target||!1,n.connections=e.connections||[],n.scope=e.scope||i.defaultScope,n.timestamp=null,n.reattachConnections=e.reattachConnections||i.defaults.reattachConnections,n.connectionsDetachable=i.defaults.connectionsDetachable,e.connectionsDetachable===!1&&(n.connectionsDetachable=!1),n.dragAllowedWhenFull=e.dragAllowedWhenFull!==!1,e.onMaxConnections&&n.bind(Ph,e.onMaxConnections);var o=e.endpoint||e.existingEndpoint||i.defaults.endpoint;if(n.setEndpoint(o),e.preparedAnchor!=null)n.setPreparedAnchor(e.preparedAnchor);else{var a=e.anchor?e.anchor:e.anchors?e.anchors:i.defaults.anchor||kt.Top;n.setAnchor(a)}var l=[ss,e.type||""].join(" ");return n.addType(l,e.data),n}return z(r,[{key:"getIdPrefix",value:function(){return"_jsplumb_e"}},{key:"getTypeDescriptor",value:function(){return"endpoint"}},{key:"getXY",value:function(){return{x:this.endpoint.x,y:this.endpoint.y}}},{key:"getDefaultOverlayKey",value:function(){return"endpointOverlays"}},{key:"_updateAnchorClass",value:function(){var e=this._anchor&&this._anchor.cssClass;if(e!=null&&e.length>0){var n=this.instance.endpointAnchorClassPrefix+"-"+this.currentAnchorClass;this.currentAnchorClass=e;var o=this.instance.endpointAnchorClassPrefix+(this.currentAnchorClass?"-"+this.currentAnchorClass:"");n!==o&&(this.removeClass(n),this.addClass(o),this.instance.removeClass(this.element,n),this.instance.addClass(this.element,o))}}},{key:"setPreparedAnchor",value:function(e){return this.instance.router.setAnchor(this,e),this._updateAnchorClass(),this}},{key:"_anchorLocationChanged",value:function(e){this.fire(Wy,{endpoint:this,anchor:e}),this._updateAnchorClass()}},{key:"setAnchor",value:function(e){var n=this.instance.router.prepareAnchor(e);return this.setPreparedAnchor(n),this}},{key:"addConnection",value:function(e){this.connections.push(e),this.instance._refreshEndpoint(this)}},{key:"detachFromConnection",value:function(e,n,o){n=n??this.connections.indexOf(e),n>=0&&(this.connections.splice(n,1),this.instance._refreshEndpoint(this)),!o&&this.deleteOnEmpty&&this.connections.length===0&&this.instance.deleteEndpoint(this)}},{key:"deleteEveryConnection",value:function(e){for(var n=this.connections.length,o=0;o<n;o++)this.instance.deleteConnection(this.connections[0],e)}},{key:"detachFrom",value:function(e){for(var n=[],o=0;o<this.connections.length;o++)(this.connections[o].endpoints[1]===e||this.connections[o].endpoints[0]===e)&&n.push(this.connections[o]);for(var a=0,l=n.length;a<l;a++)this.instance.deleteConnection(n[0]);return this}},{key:"setVisible",value:function(e,n,o){if(me(ye(r.prototype),"setVisible",this).call(this,e),this.endpoint.setVisible(e),e?this.showOverlays():this.hideOverlays(),!n){for(var a=0;a<this.connections.length;a++)if(this.connections[a].setVisible(e),!o){var l=this===this.connections[a].endpoints[0]?1:0;this.connections[a].endpoints[l].connections.length===1&&this.connections[a].endpoints[l].setVisible(e,!0,!0)}}}},{key:"applyType",value:function(e,n){me(ye(r.prototype),"applyType",this).call(this,e,n),this.setPaintStyle(e.endpointStyle||e.paintStyle),this.setHoverPaintStyle(e.endpointHoverStyle||e.hoverPaintStyle),this.connectorStyle=e.connectorStyle,this.connectorHoverStyle=e.connectorHoverStyle,this.connector=e.connector,this.connectorOverlays=e.connectorOverlays,this.edgeType=e.edgeType,e.maxConnections!=null&&(this.maxConnections=e.maxConnections),e.scope&&(this.scope=e.scope),U(e,w0),this.instance.applyEndpointType(this,e)}},{key:"destroy",value:function(){me(ye(r.prototype),"destroy",this).call(this),this.deleted=!0,this.endpoint!=null&&this.instance.destroyEndpoint(this)}},{key:"isFull",value:function(){return this.maxConnections===0?!0:!(this.isFloating()||this.maxConnections<0||this.connections.length<this.maxConnections)}},{key:"isFloating",value:function(){return this.instance.router.isFloating(this)}},{key:"isConnectedTo",value:function(e){var n=!1;if(e){for(var o=0;o<this.connections.length;o++)if(this.connections[o].endpoints[1]===e||this.connections[o].endpoints[0]===e){n=!0;break}}return n}},{key:"setDragAllowedWhenFull",value:function(e){this.dragAllowedWhenFull=e}},{key:"getUuid",value:function(){return this.uuid}},{key:"connectorSelector",value:function(){return this.connections[0]}},{key:"prepareEndpoint",value:function(e,n){var o={cssClass:this.cssClass,endpoint:this},a;if(fh(e,gr)){var l=e;a=Qt.clone(l),a.classes=o.cssClass.split(" ")}else if(_e(e))a=Qt.get(this,e,o);else{var u=e;U(o,u.options||{}),a=Qt.get(this,u.type,o)}return a.typeId=n,a}},{key:"setEndpoint",value:function(e){var n=this.prepareEndpoint(e);this.setPreparedEndpoint(n)}},{key:"setPreparedEndpoint",value:function(e){this.endpoint!=null&&this.instance.destroyEndpoint(this),this.endpoint=e}},{key:"addClass",value:function(e,n){me(ye(r.prototype),"addClass",this).call(this,e,n),this.endpoint!=null&&this.endpoint.addClass(e)}},{key:"removeClass",value:function(e,n){me(ye(r.prototype),"removeClass",this).call(this,e,n),this.endpoint!=null&&this.endpoint.removeClass(e)}}]),r}(Jh),Ci="anchors",ao="connector";function _u(t,s,r,i,e,n,o){var a;if(s)t.endpoints[r]=s,s.addConnection(t);else{var l=o||t.endpointSpec||t.endpointsSpec[r]||t.instance.defaults.endpoints[r]||t.instance.defaults.endpoint,u=t.endpointStyles[r]||t.endpointStyle||t.instance.defaults.endpointStyles[r]||t.instance.defaults.endpointStyle;u.fill==null&&t.paintStyle!=null&&(u.fill=t.paintStyle.stroke),u.outlineStroke==null&&t.paintStyle!=null&&(u.outlineStroke=t.paintStyle.outlineStroke),u.outlineWidth==null&&t.paintStyle!=null&&(u.outlineWidth=t.paintStyle.outlineWidth);var c=t.endpointHoverStyles[r]||t.endpointHoverStyle||t.endpointHoverStyle||t.instance.defaults.endpointHoverStyles[r]||t.instance.defaults.endpointHoverStyle;t.hoverPaintStyle!=null&&(c==null&&(c={}),c.fill==null&&(c.fill=t.hoverPaintStyle.stroke));var h=t.uuids?t.uuids[r]:null;i=i??(t.instance.defaults.anchors!=null?t.instance.defaults.anchors[r]:t.instance.defaults.anchor),a=t.instance._internal_newEndpoint({paintStyle:u,hoverPaintStyle:c,endpoint:l,connections:[t],uuid:h,element:e,scope:t.scope,anchor:i,reattachConnections:t.reattach||t.instance.defaults.reattachConnections,connectionsDetachable:t.detachable||t.instance.defaults.connectionsDetachable}),t.instance._refreshEndpoint(a),s==null&&(a.deleteOnEmpty=!0),t.endpoints[r]=a}return a}var ti=function(t){oe(r,t);var s=ae(r);function r(i,e){var n;H(this,r),n=s.call(this,i,e),n.instance=i,f(g(n),"connector",void 0),f(g(n),"defaultLabelLocation",.5),f(g(n),"scope",void 0),f(g(n),"typeId","_jsplumb_connection"),f(g(n),"previousConnection",void 0),f(g(n),"sourceId",void 0),f(g(n),"targetId",void 0),f(g(n),"source",void 0),f(g(n),"target",void 0),f(g(n),"detachable",!0),f(g(n),"reattach",!1),f(g(n),"uuids",void 0),f(g(n),"cost",1),f(g(n),"directed",void 0),f(g(n),"endpoints",[null,null]),f(g(n),"endpointStyles",void 0),f(g(n),"endpointSpec",void 0),f(g(n),"endpointsSpec",void 0),f(g(n),"endpointStyle",{}),f(g(n),"endpointHoverStyle",{}),f(g(n),"endpointHoverStyles",void 0),f(g(n),"suspendedEndpoint",void 0),f(g(n),"suspendedIndex",void 0),f(g(n),"suspendedElement",void 0),f(g(n),"suspendedElementId",void 0),f(g(n),"suspendedElementType",void 0),f(g(n),"_forceReattach",void 0),f(g(n),"_forceDetach",void 0),f(g(n),"proxies",[]),f(g(n),"pending",!1),n.id=e.id,n.previousConnection=e.previousConnection,n.source=e.source,n.target=e.target,e.sourceEndpoint?(n.source=e.sourceEndpoint.element,n.sourceId=e.sourceEndpoint.elementId):n.sourceId=i.getId(n.source),e.targetEndpoint?(n.target=e.targetEndpoint.element,n.targetId=e.targetEndpoint.elementId):n.targetId=i.getId(n.target),n.scope=e.scope;var o=e.anchors?e.anchors[0]:e.anchor,a=e.anchors?e.anchors[1]:e.anchor;i.manage(n.source),i.manage(n.target),n.visible=!0,n.params={cssClass:e.cssClass,hoverClass:e.hoverClass,"pointer-events":e["pointer-events"],overlays:e.overlays},n.lastPaintedAt=null,e.type&&(e.endpoints=e.endpoints||n.instance._deriveEndpointAndAnchorSpec(e.type).endpoints),n.endpointSpec=e.endpoint,n.endpointsSpec=e.endpoints||[null,null],n.endpointStyle=e.endpointStyle,n.endpointHoverStyle=e.endpointHoverStyle,n.endpointStyles=e.endpointStyles||[null,null],n.endpointHoverStyles=e.endpointHoverStyles||[null,null],n.paintStyle=e.paintStyle,n.hoverPaintStyle=e.hoverPaintStyle,n.uuids=e.uuids,n.makeEndpoint(!0,n.source,n.sourceId,o,e.sourceEndpoint),n.makeEndpoint(!1,n.target,n.targetId,a,e.targetEndpoint),n.scope||(n.scope=n.endpoints[0].scope),e.deleteEndpointsOnEmpty!=null&&(n.endpoints[0].deleteOnEmpty=e.deleteEndpointsOnEmpty,n.endpoints[1].deleteOnEmpty=e.deleteEndpointsOnEmpty);var l=n.instance.defaults.connectionsDetachable;e.detachable===!1&&(l=!1),n.endpoints[0].connectionsDetachable===!1&&(l=!1),n.endpoints[1].connectionsDetachable===!1&&(l=!1),n.endpointsSpec=e.endpoints||[null,null],n.endpointSpec=e.endpoint||null;var u=e.reattach||n.endpoints[0].reattachConnections||n.endpoints[1].reattachConnections||n.instance.defaults.reattachConnections,c=U({},n.endpoints[0].connectorStyle||n.endpoints[1].connectorStyle||e.paintStyle||n.instance.defaults.paintStyle);if(n.appendToDefaultType({detachable:l,reattach:u,paintStyle:c,hoverPaintStyle:U({},n.endpoints[0].connectorHoverStyle||n.endpoints[1].connectorHoverStyle||e.hoverPaintStyle||n.instance.defaults.hoverPaintStyle)}),e.outlineWidth&&(c.outlineWidth=e.outlineWidth),e.outlineColor&&(c.outlineStroke=e.outlineColor),e.lineWidth&&(c.strokeWidth=e.lineWidth),e.color&&(c.stroke=e.color),!n.instance._suspendDrawing){var h=n.instance._suspendedAt||ke();n.instance._paintEndpoint(n.endpoints[0],{timestamp:h}),n.instance._paintEndpoint(n.endpoints[1],{timestamp:h})}n.cost=e.cost||n.endpoints[0].connectionCost,n.directed=e.directed,e.directed==null&&(n.directed=n.endpoints[0].connectionsDirected);var d=U({},n.endpoints[1].parameters);U(d,n.endpoints[0].parameters),U(d,n.parameters),n.parameters=d,n.paintStyleInUse=n.getPaintStyle()||{},n._setConnector(n.endpoints[0].connector||n.endpoints[1].connector||e.connector||n.instance.defaults.connector,!0);var p=e.data==null||!sr(e.data)?{}:e.data;n.setData(p);var v=[ss,n.endpoints[0].edgeType,n.endpoints[1].edgeType,e.type].join(" ");return/[^\s]/.test(v)&&n.addType(v,e.data),n}return z(r,[{key:"getIdPrefix",value:function(){return"_jsPlumb_c"}},{key:"getDefaultOverlayKey",value:function(){return hm}},{key:"getXY",value:function(){return{x:this.connector.x,y:this.connector.y}}},{key:"makeEndpoint",value:function(e,n,o,a,l){return o=o||this.instance.getId(n),_u(this,l,e?0:1,a,n)}},{key:"getTypeDescriptor",value:function(){return r.type}},{key:"isDetachable",value:function(e){return this.detachable===!1?!1:e!=null?e.connectionsDetachable===!0:this.detachable===!0}},{key:"setDetachable",value:function(e){this.detachable=e===!0}},{key:"isReattach",value:function(){return this.reattach===!0||this.endpoints[0].reattachConnections===!0||this.endpoints[1].reattachConnections===!0}},{key:"setReattach",value:function(e){this.reattach=e===!0}},{key:"applyType",value:function(e,n){var o=null;e.connector!=null&&(o=this.getCachedTypeItem(ao,n.connector),o==null&&(o=this.prepareConnector(e.connector,n.connector),this.cacheTypeItem(ao,o,n.connector)),this.setPreparedConnector(o)),me(ye(r.prototype),"applyType",this).call(this,e,n),e.detachable!=null&&this.setDetachable(e.detachable),e.reattach!=null&&this.setReattach(e.reattach),e.scope&&(this.scope=e.scope);var a=null;e.anchor?(a=this.getCachedTypeItem(Ci,n.anchor),a==null&&(a=[Lr(e.anchor),Lr(e.anchor)],this.cacheTypeItem(Ci,a,n.anchor))):e.anchors&&(a=this.getCachedTypeItem(Ci,n.anchors),a==null&&(a=[Lr(e.anchors[0]),Lr(e.anchors[1])],this.cacheTypeItem(Ci,a,n.anchors))),a!=null&&(this.instance.router.setConnectionAnchors(this,a),this.instance.router.isDynamicAnchor(this.endpoints[1])&&this.instance.repaint(this.endpoints[1].element)),this.instance.applyConnectorType(this.connector,e)}},{key:"addClass",value:function(e,n){me(ye(r.prototype),"addClass",this).call(this,e),n&&(this.endpoints[0].addClass(e),this.endpoints[1].addClass(e),this.suspendedEndpoint&&this.suspendedEndpoint.addClass(e)),this.connector&&this.instance.addConnectorClass(this.connector,e)}},{key:"removeClass",value:function(e,n){me(ye(r.prototype),"removeClass",this).call(this,e),n&&(this.endpoints[0].removeClass(e),this.endpoints[1].removeClass(e),this.suspendedEndpoint&&this.suspendedEndpoint.removeClass(e)),this.connector&&this.instance.removeConnectorClass(this.connector,e)}},{key:"setVisible",value:function(e){me(ye(r.prototype),"setVisible",this).call(this,e),this.connector&&this.instance.setConnectorVisible(this.connector,e),this.instance._paintConnection(this)}},{key:"destroy",value:function(){me(ye(r.prototype),"destroy",this).call(this),this.endpoints=null,this.endpointStyles=null,this.source=null,this.target=null,this.instance.destroyConnector(this),this.connector=null,this.deleted=!0}},{key:"getUuids",value:function(){return[this.endpoints[0].getUuid(),this.endpoints[1].getUuid()]}},{key:"prepareConnector",value:function(e,n){var o={cssClass:this.params.cssClass,hoverClass:this.params.hoverClass,"pointer-events":this.params["pointer-events"]},a;if(_e(e))a=this.instance._makeConnector(this,e,o);else{var l=e;a=this.instance._makeConnector(this,l.type,es(l.options||{},o))}return n!=null&&(a.typeId=n),a}},{key:"setPreparedConnector",value:function(e,n,o,a){if(this.connector!==e){var l,u="";if(this.connector!=null&&(l=this.connector,u=this.instance.getConnectorClass(this.connector),this.instance.destroyConnector(this)),this.connector=e,a&&this.cacheTypeItem(ao,e,a),this.addClass(u),l!=null){var c=this.getOverlays();for(var h in c)this.instance.reattachOverlay(c[h],this)}n||this.instance._paintConnection(this)}}},{key:"_setConnector",value:function(e,n,o,a){var l=this.prepareConnector(e,a);this.setPreparedConnector(l,n,o,a)}},{key:"replaceEndpoint",value:function(e,n){var o=this.endpoints[e],a=o.elementId,l=this.instance.getEndpoints(o.element),u=l.indexOf(o),c=_u(this,null,e,null,o.element,a,n);this.endpoints[e]=c,l.splice(u,1,c),o.detachFromConnection(this),this.instance.deleteEndpoint(o),this.instance.fire(Ky,{previous:o,current:c})}}]),r}(Jh);f(ti,"type","connection");function Rr(t){if(t.path==null){var s=U({"jtk-overlay-id":t.id},t.attributes);t.path=Gt(Io,s);var r=t.instance.overlayClass+" "+(t.cssClass?t.cssClass:"");t.instance.addClass(t.path,r),t.path.jtk={overlay:t}}var i=t.path.parentNode;if(i==null){if(t.component instanceof ti){var e=t.component.connector;i=e!=null?e.canvas:null}else if(t.component instanceof Xn){var n=t.component.endpoint;i=n!=null?n.canvas:n}i!=null&&ji(i,t.path,1)}return t.path}function D0(t,s,r,i){Rr(t);var e=[0,0];i.xmin<0&&(e[0]=-i.xmin),i.ymin<0&&(e[1]=-i.ymin);var n={d:s,stroke:r.stroke?r.stroke:null,fill:r.fill?r.fill:null,transform:"translate("+e[0]+","+e[1]+")","pointer-events":"visibleStroke"};Ft(t.path,n)}function M0(t,s){var r=t;r.path!=null&&r.path.parentNode!=null&&r.path.parentNode.removeChild(r.path),r.bgPath!=null&&r.bgPath.parentNode!=null&&r.bgPath.parentNode.removeChild(r.bgPath),delete r.path,delete r.bgPath}(function(t){oe(r,t);var s=ae(r);function r(){var i;H(this,r);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return i=s.call.apply(s,[this].concat(n)),f(g(i),"path",void 0),i}return r})(Bs);var Zh=function(){function t(){H(this,t)}return z(t,null,[{key:"paint",value:function(r,i,e,n){if(e!=null){var o=[r.x,r.y],a=[r.w,r.h];if(n!=null&&(n.xmin<0&&(o[0]+=n.xmin),n.ymin<0&&(o[1]+=n.ymin),a[0]=n.xmax+(n.xmin<0?-n.xmin:0),a[1]=n.ymax+(n.ymin<0?-n.ymin:0)),isFinite(a[0])&&isFinite(a[1])){var l={width:""+(a[0]||0),height:""+(a[1]||0)};i.containerType===Pn.HTML?Ft(r.canvas,U(l,{style:Dh([o[0],o[1]])})):Ft(r.canvas,U(l,{x:o[0],y:o[1]}))}}}}]),t}();function I0(t,s,r,i){L0(t,s),Zh.paint(s,t,r,i);var e="",n=[0,0];if(i.xmin<0&&(n[0]=-i.xmin),i.ymin<0&&(n[1]=-i.ymin),s.segments.length>0){e=t.getPathData(s);var o={d:e,transform:"translate("+n[0]+","+n[1]+")","pointer-events":"visibleStroke"},a=null;if(r.outlineStroke){var l=r.outlineWidth||1,u=r.strokeWidth+2*l;a=U({},r),a.stroke=r.outlineStroke,a.strokeWidth=u,s.bgPath==null?(s.bgPath=Gt(Io,o),t.addClass(s.bgPath,t.connectorOutlineClass),ji(s.canvas,s.bgPath,0)):Ft(s.bgPath,o),Lo(s.canvas,s.bgPath,a)}var c=s;c.path==null?(c.path=Gt(Io,o),ji(c.canvas,c.path,r.outlineStroke?1:0)):(c.path.parentNode!==c.canvas&&ji(c.canvas,c.path,r.outlineStroke?1:0),Ft(s.path,o)),Lo(s.canvas,s.path,r)}}function L0(t,s){if(s.canvas!=null)return s.canvas;var r=Gt(wh,{style:"",width:"0",height:"0","pointer-events":or,position:Zr});return s.canvas=r,t._appendElement(s.canvas,t.getContainer()),s.cssClass!=null&&t.addClass(r,s.cssClass),t.addClass(r,t.connectorClass),r.jtk=r.jtk||{},r.jtk.connector=s,r}var N0=function(){function t(){H(this,t)}return z(t,null,[{key:"getEndpointElement",value:function(r){if(r.canvas!=null)return r.canvas;var i=Gt(wh,{style:"",width:"0",height:"0","pointer-events":"all",position:Zr});r.canvas=i;var e=r.classes.join(" ");r.instance.addClass(i,e);for(var n=r.endpoint.scope.split(/\s/),o=0;o<n.length;o++)r.instance.setAttribute(i,mh+n[o],Lh);return r.instance._appendElementToContainer(i),r.cssClass!=null&&r.instance.addClass(i,r.cssClass),r.instance.addClass(i,r.instance.endpointClass),i.jtk=i.jtk||{},i.jtk.endpoint=r.endpoint,i.style.display=r.endpoint.visible!==!1?Mo:or,i}},{key:"paint",value:function(r,i,e){if(r.endpoint.deleted!==!0){this.getEndpointElement(r),Zh.paint(r,r.instance,e);var n=U({},e);n.outlineStroke&&(n.stroke=n.outlineStroke),r.node==null?(r.node=i.makeNode(r,n),r.canvas.appendChild(r.node)):i.updateNode!=null&&i.updateNode(r,r.node),Lo(r.canvas,r.node,n)}}}]),t}(),Hs=function(){function t(s,r){H(this,t),this.connection=s,f(this,"type",void 0),f(this,"edited",!1),f(this,"stub",void 0),f(this,"sourceStub",void 0),f(this,"targetStub",void 0),f(this,"maxStub",void 0),f(this,"typeId",void 0),f(this,"gap",void 0),f(this,"sourceGap",void 0),f(this,"targetGap",void 0),f(this,"segments",[]),f(this,"totalLength",0),f(this,"segmentProportions",[]),f(this,"segmentProportionalLengths",[]),f(this,"paintInfo",null),f(this,"strokeWidth",void 0),f(this,"x",void 0),f(this,"y",void 0),f(this,"w",void 0),f(this,"h",void 0),f(this,"segment",void 0),f(this,"bounds",is()),f(this,"cssClass",void 0),f(this,"hoverClass",void 0),f(this,"geometry",void 0),this.stub=r.stub||this.getDefaultStubs(),this.sourceStub=Array.isArray(this.stub)?this.stub[0]:this.stub,this.targetStub=Array.isArray(this.stub)?this.stub[1]:this.stub,this.gap=r.gap||0,this.sourceGap=Array.isArray(this.gap)?this.gap[0]:this.gap,this.targetGap=Array.isArray(this.gap)?this.gap[1]:this.gap,this.maxStub=Math.max(this.sourceStub,this.targetStub),this.cssClass=r.cssClass||"",this.hoverClass=r.hoverClass||""}return z(t,[{key:"getTypeDescriptor",value:function(){return"connector"}},{key:"getIdPrefix",value:function(){return"_jsplumb_connector"}},{key:"setGeometry",value:function(r,i){this.geometry=r,this.edited=r!=null&&!i}},{key:"exportGeometry",value:function(){return this.geometry}},{key:"importGeometry",value:function(r){return this.geometry=r,!0}},{key:"resetGeometry",value:function(){this.geometry=null,this.edited=!1}},{key:"transformAnchorPlacement",value:function(r,i,e){return{x:r.x,y:r.y,ox:r.ox,oy:r.oy,curX:r.curX+i,curY:r.curY+e}}},{key:"resetBounds",value:function(){this.bounds=is()}},{key:"findSegmentForPoint",value:function(r,i){for(var e={d:1/0,s:null,x:null,y:null,l:null,x1:null,y1:null,x2:null,y2:null,index:null,connectorLocation:null},n=0;n<this.segments.length;n++){var o=this.segments[n].findClosestPointOnPath(r,i);o.d<e.d&&(e.d=o.d,e.l=o.l,e.x=o.x,e.y=o.y,e.s=this.segments[n],e.x1=o.x1,e.x2=o.x2,e.y1=o.y1,e.y2=o.y2,e.index=n,e.connectorLocation=this.segmentProportions[n][0]+o.l*(this.segmentProportions[n][1]-this.segmentProportions[n][0]))}return e}},{key:"lineIntersection",value:function(r,i,e,n){for(var o=[],a=0;a<this.segments.length;a++)o.push.apply(o,this.segments[a].lineIntersection(r,i,e,n));return o}},{key:"boxIntersection",value:function(r,i,e,n){for(var o=[],a=0;a<this.segments.length;a++)o.push.apply(o,this.segments[a].boxIntersection(r,i,e,n));return o}},{key:"boundingBoxIntersection",value:function(r){for(var i=[],e=0;e<this.segments.length;e++)i.push.apply(i,this.segments[e].boundingBoxIntersection(r));return i}},{key:"_updateSegmentProportions",value:function(){for(var r=0,i=0;i<this.segments.length;i++){var e=this.segments[i].getLength();this.segmentProportionalLengths[i]=e/this.totalLength,this.segmentProportions[i]=[r,r+=e/this.totalLength]}}},{key:"_findSegmentForLocation",value:function(r,i){var e,n,o;if(i&&(r=r>0?r/this.totalLength:(this.totalLength+r)/this.totalLength),r===1)e=this.segments.length-1,o=1;else if(r===0)o=0,e=0;else if(r>=.5){for(e=0,o=0,n=this.segmentProportions.length-1;n>-1;n--)if(this.segmentProportions[n][1]>=r&&this.segmentProportions[n][0]<=r){e=n,o=(r-this.segmentProportions[n][0])/this.segmentProportionalLengths[n];break}}else for(e=this.segmentProportions.length-1,o=1,n=0;n<this.segmentProportions.length;n++)if(this.segmentProportions[n][1]>=r){e=n,o=(r-this.segmentProportions[n][0])/this.segmentProportionalLengths[n];break}return{segment:this.segments[e],proportion:o,index:e}}},{key:"_addSegment",value:function(r,i){if(!(i.x1===i.x2&&i.y1===i.y2)){var e=new r(i);this.segments.push(e),this.totalLength+=e.getLength(),this.updateBounds(e)}}},{key:"_clearSegments",value:function(){this.totalLength=0,this.segments.length=0,this.segmentProportions.length=0,this.segmentProportionalLengths.length=0}},{key:"getLength",value:function(){return this.totalLength}},{key:"_prepareCompute",value:function(r){this.strokeWidth=r.strokeWidth;var i=r.sourcePos.curX,e=r.targetPos.curX,n=r.sourcePos.curY,o=r.targetPos.curY,a=Aa({x:i,y:n},{x:e,y:o}),l=e<i,u=o<n,c=[r.sourcePos.ox,r.sourcePos.oy],h=[r.targetPos.ox,r.targetPos.oy],d=l?e:i,p=u?o:n,v=Math.abs(e-i),y=Math.abs(o-n),m=c[0]===0&&c[1]===0,b=h[0]===0&&h[1]===0;if(m||b){var C=v>y?0:1,E=[1,0][C],S=C===0?i:n,D=C===0?e:o;m&&(c[C]=S>D?-1:1,c[E]=0),b&&(h[C]=S>D?1:-1,h[E]=0)}var G=l?v+this.sourceGap*c[0]:this.sourceGap*c[0],L=u?y+this.sourceGap*c[1]:this.sourceGap*c[1],T=l?this.targetGap*h[0]:v+this.targetGap*h[0],q=u?this.targetGap*h[1]:y+this.targetGap*h[1],W=c[0]*h[0]+c[1]*h[1],te={sx:G,sy:L,tx:T,ty:q,xSpan:Math.abs(T-G),ySpan:Math.abs(q-L),mx:(G+T)/2,my:(L+q)/2,so:c,to:h,x:d,y:p,w:v,h:y,segment:a,startStubX:G+c[0]*this.sourceStub,startStubY:L+c[1]*this.sourceStub,endStubX:T+h[0]*this.targetStub,endStubY:q+h[1]*this.targetStub,isXGreaterThanStubTimes2:Math.abs(G-T)>this.sourceStub+this.targetStub,isYGreaterThanStubTimes2:Math.abs(L-q)>this.sourceStub+this.targetStub,opposite:W===-1,perpendicular:W===0,orthogonal:W===1,sourceAxis:c[0]===0?"y":"x",points:[d,p,v,y,G,L,T,q],stubs:[this.sourceStub,this.targetStub]};return te.anchorOrientation=te.opposite?"opposite":te.orthogonal?"orthogonal":"perpendicular",te}},{key:"updateBounds",value:function(r){var i=r.extents;this.bounds.xmin=Math.min(this.bounds.xmin,i.xmin),this.bounds.xmax=Math.max(this.bounds.xmax,i.xmax),this.bounds.ymin=Math.min(this.bounds.ymin,i.ymin),this.bounds.ymax=Math.max(this.bounds.ymax,i.ymax)}},{key:"dumpSegmentsToConsole",value:function(){Pe("SEGMENTS:");for(var r=0;r<this.segments.length;r++)Pe(this.segments[r].type,""+this.segments[r].getLength(),""+this.segmentProportions[r])}},{key:"pointOnPath",value:function(r,i){var e=this._findSegmentForLocation(r,i);return e.segment&&e.segment.pointOnPath(e.proportion,!1)||{x:0,y:0}}},{key:"gradientAtPoint",value:function(r,i){var e=this._findSegmentForLocation(r,i);return e.segment&&e.segment.gradientAtPoint(e.proportion,!1)||0}},{key:"pointAlongPathFrom",value:function(r,i,e){var n=this._findSegmentForLocation(r,e);return n.segment&&n.segment.pointAlongPathFrom(n.proportion,i,!1)||{x:0,y:0}}},{key:"compute",value:function(r){this.paintInfo=this._prepareCompute(r),this._clearSegments(),this._compute(this.paintInfo,r),this.x=this.paintInfo.points[0],this.y=this.paintInfo.points[1],this.w=this.paintInfo.points[2],this.h=this.paintInfo.points[3],this.segment=this.paintInfo.segment,this._updateSegmentProportions()}},{key:"setAnchorOrientation",value:function(r,i){}}]),t}(),R0=20,F0=20,cr=function(t){oe(r,t);var s=ae(r);function r(i,e,n){var o;return H(this,r),o=s.call(this,i,e,n),o.instance=i,o.component=e,f(g(o),"width",void 0),f(g(o),"length",void 0),f(g(o),"foldback",void 0),f(g(o),"direction",void 0),f(g(o),"location",.5),f(g(o),"paintStyle",void 0),f(g(o),"type",r.type),f(g(o),"cachedDimensions",void 0),n=n||{},o.width=n.width||R0,o.length=n.length||F0,o.direction=(n.direction||1)<0?-1:1,o.foldback=n.foldback||.623,o.paintStyle=n.paintStyle||{strokeWidth:1},o.location=n.location==null?o.location:Array.isArray(n.location)?n.location[0]:n.location,o}return z(r,[{key:"draw",value:function(e,n,o){if(e instanceof Hs){var a=e,l,u,c,h,d;if(this.location>1||this.location<0){var p=this.location<0?1:0;l=a.pointAlongPathFrom(p,this.location,!1),u=a.pointAlongPathFrom(p,this.location-this.direction*this.length/2,!1),c=vn(l,u,this.length)}else if(this.location===1){if(l=a.pointOnPath(this.location),u=a.pointAlongPathFrom(this.location,-this.length),c=vn(l,u,this.length),this.direction===-1){var v=c;c=l,l=v}}else if(this.location===0){if(c=a.pointOnPath(this.location),u=a.pointAlongPathFrom(this.location,this.length),l=vn(c,u,this.length),this.direction===-1){var y=c;c=l,l=y}}else l=a.pointAlongPathFrom(this.location,this.direction*this.length/2),u=a.pointOnPath(this.location),c=vn(l,u,this.length);h=y_(l,c,this.width),d=vn(l,c,this.foldback*this.length);var m={hxy:l,tail:h,cxy:d},b=this.paintStyle.stroke||n.stroke,C=this.paintStyle.fill||n.stroke,E=this.paintStyle.strokeWidth||n.strokeWidth;return{component:e,d:m,"stroke-width":E,stroke:b,fill:C,xmin:Math.min(l.x,h[0].x,h[1].x),xmax:Math.max(l.x,h[0].x,h[1].x),ymin:Math.min(l.y,h[0].y,h[1].y),ymax:Math.max(l.y,h[0].y,h[1].y)}}}},{key:"updateFrom",value:function(e){}}]),r}(Bs);f(cr,"type","Arrow");function jo(t){return t.type===cr.type}Tn.register(cr.type,cr);var cs=function(t){oe(r,t);var s=ae(r);function r(i,e,n){var o;return H(this,r),o=s.call(this,i,e,n),o.instance=i,f(g(o),"type",r.type),o.length=o.length/2,o.foldback=2,o}return r}(cr);f(cs,"type","Diamond");function Bo(t){return t.type===cs.type}Tn.register(cs.type,cs);var Na=function(t){oe(r,t);var s=ae(r);function r(i,e,n){var o;return H(this,r),o=s.call(this,i,e,n),o.instance=i,f(g(o),"type",r.type),o.foldback=1,o}return r}(cr);f(Na,"type","PlainArrow");function Ho(t){return t.type===Na.type}Tn.register("PlainArrow",Na);var hs=function(t){oe(r,t);var s=ae(r);function r(i,e,n){var o;return H(this,r),o=s.call(this,i,e,n),o.instance=i,o.component=e,f(g(o),"create",void 0),f(g(o),"type",r.type),o.create=n.create,o}return z(r,[{key:"updateFrom",value:function(e){}}]),r}(Bs);f(hs,"type","Custom");function Yt(t){return t.type===hs.type}Tn.register(hs.type,hs);var G0="allowNestedGroups",jn="paintStyle",j0="scope",hr=function(t){oe(r,t);var s=ae(r);function r(i,e){var n;return H(this,r),n=s.call(this,i,e),f(g(n),"radius",void 0),f(g(n),"defaultOffset",void 0),f(g(n),"defaultInnerRadius",void 0),f(g(n),"type",r.type),e=e||{},n.radius=e.radius||5,n.defaultOffset=.5*n.radius,n.defaultInnerRadius=n.radius/3,n}return r}(gr);f(hr,"type","Dot");var B0={type:hr.type,cls:hr,compute:function(s,r,i,e){var n=r.curX-s.radius,o=r.curY-s.radius,a=s.radius*2,l=s.radius*2;if(e&&e.stroke){var u=e.strokeWidth||1;n-=u,o-=u,a+=u*2,l+=u*2}return s.x=n,s.y=o,s.w=a,s.h=l,[n,o,a,l,s.radius]},getParams:function(s){return{radius:s.radius}}},lo=function t(s,r){H(this,t),this.instance=s,this.el=r,f(this,"group",void 0)},H0=function(t){oe(r,t);var s=ae(r);function r(i,e,n){var o;H(this,r),o=s.call(this,i,e),o.instance=i,f(g(o),"children",[]),f(g(o),"collapsed",!1),f(g(o),"droppable",void 0),f(g(o),"enabled",void 0),f(g(o),"orphan",void 0),f(g(o),"constrain",void 0),f(g(o),"proxied",void 0),f(g(o),"ghost",void 0),f(g(o),"revert",void 0),f(g(o),"prune",void 0),f(g(o),"dropOverride",void 0),f(g(o),"anchor",void 0),f(g(o),"endpoint",void 0),f(g(o),"connections",{source:[],target:[],internal:[]}),f(g(o),"manager",void 0),f(g(o),"id",void 0),f(g(o),"elId",void 0);var a=o.el;return a._isJsPlumbGroup=!0,a._jsPlumbGroup=g(o),o.elId=i.getId(e),o.orphan=n.orphan===!0,o.revert=o.orphan===!0?!1:n.revert!==!1,o.droppable=n.droppable!==!1,o.ghost=n.ghost===!0,o.enabled=n.enabled!==!1,o.prune=o.orphan!==!0&&n.prune===!0,o.constrain=o.ghost||n.constrain===!0,o.proxied=n.proxied!==!1,o.id=n.id||ke(),o.dropOverride=n.dropOverride===!0,o.anchor=n.anchor,o.endpoint=n.endpoint,o.anchor=n.anchor,i.setAttribute(e,yh,""),o}return z(r,[{key:"contentArea",get:function(){return this.instance.getGroupContentArea(this)}},{key:"overrideDrop",value:function(e,n){return this.dropOverride&&(this.revert||this.prune||this.orphan)}},{key:"getAnchor",value:function(e,n){return this.anchor||"Continuous"}},{key:"getEndpoint",value:function(e,n){return this.endpoint||{type:hr.type,options:{radius:10}}}},{key:"add",value:function(e,n){var o=this.instance.getGroupContentArea(this),a=e;if(a._jsPlumbParentGroup!=null){if(a._jsPlumbParentGroup===this)return;a._jsPlumbParentGroup.remove(e,!0,n,!1)}a._jsPlumbParentGroup=this,this.children.push(new lo(this.instance,e)),this.instance._appendElement(a,o),this.manager._updateConnectionsForGroup(this)}},{key:"resolveNode",value:function(e){return e==null?null:ya(this.children,function(n){return n.el===e})}},{key:"remove",value:function(e,n,o,a,l){var u=this.resolveNode(e);u!=null&&this._doRemove(u,n,o,a,l)}},{key:"_doRemove",value:function(e,n,o,a,l){var u=e.el;if(delete u._jsPlumbParentGroup,we(this.children,function(h){return h===e}),n)try{this.instance.getGroupContentArea(this).removeChild(u)}catch(h){Pe("Could not remove element from Group "+h)}if(!o){var c={group:this,el:u};l&&(c.targetGroup=l),this.instance.fire(tm,c)}a||this.manager._updateConnectionsForGroup(this)}},{key:"removeAll",value:function(e,n){for(var o=0,a=this.children.length;o<a;o++){var l=this.children[0];this._doRemove(l,e,n,!0),this.instance.unmanage(l.el,!0)}this.children.length=0,this.manager._updateConnectionsForGroup(this)}},{key:"orphanAll",value:function(){for(var e={},n=0;n<this.children.length;n++){var o=this.manager.orphan(this.children[n].el,!1);e[o.id]=o.pos}return this.children.length=0,e}},{key:"addGroup",value:function(e){if(this.instance.allowNestedGroups&&e!==this){if(this.instance.groupManager.isAncestor(this,e))return!1;e.group!=null&&e.group.removeGroup(e);var n=this.instance.getId(e.el),o=this.instance.getManagedElements()[n];o.group=this.elId;var a=this.instance.getOffsetRelativeToRoot(e.el),l=this.collapsed?this.instance.getOffsetRelativeToRoot(this.el):this.instance.getOffsetRelativeToRoot(this.instance.getGroupContentArea(this));e.el._jsPlumbParentGroup=this,this.children.push(e),this.instance._appendElementToGroup(this,e.el),e.group=this;var u={x:a.x-l.x,y:a.y-l.y};return this.instance.setPosition(e.el,u),this.instance.fire(rm,{parent:this,child:e}),!0}else return!1}},{key:"removeGroup",value:function(e){if(e.group===this){var n=e.el,o=this.instance.getGroupContentArea(this);o===n.parentNode&&o.removeChild(e.el);var a=this.instance.getId(e.el),l=this.instance.getManagedElements()[a];l&&delete l.group,this.children=this.children.filter(function(u){return u.id!==e.id}),delete e.group,delete n._jsPlumbParentGroup,this.instance.fire(im,{parent:this,child:e})}}},{key:"getGroups",value:function(){return this.children.filter(function(e){return e.constructor===r})}},{key:"getNodes",value:function(){return this.children.filter(function(e){return e.constructor===lo})}},{key:"collapseParent",get:function(){var e=null;if(this.group==null)return null;for(var n=this.group;n!=null;)n.collapsed&&(e=n),n=n.group;return e}}]),r}(lo),U0=function(){function t(s){var r=this;H(this,t),this.instance=s,f(this,"groupMap",{}),f(this,"_connectionSourceMap",{}),f(this,"_connectionTargetMap",{}),s.bind(bh,function(i){var e=r.getGroupFor(i.source),n=r.getGroupFor(i.target);e!=null&&n!=null&&e===n?(r._connectionSourceMap[i.connection.id]=e,r._connectionTargetMap[i.connection.id]=e,Cr(e.connections.internal,i.connection)):(e!=null&&(i.target._jsPlumbGroup===e?Cr(e.connections.internal,i.connection):Cr(e.connections.source,i.connection),r._connectionSourceMap[i.connection.id]=e),n!=null&&(i.source._jsPlumbGroup===n?Cr(n.connections.internal,i.connection):Cr(n.connections.target,i.connection),r._connectionTargetMap[i.connection.id]=n))}),s.bind(Ca,function(i){r._cleanupDetachedConnection(i.connection)}),s.bind(Ch,function(i){var e=i.originalEndpoint.element,n=r.getGroupFor(e),o=i.connection.endpoints[i.index],a=o.element,l=r.getGroupFor(a),u=i.index===0?r._connectionSourceMap:r._connectionTargetMap,c=i.index===0?r._connectionTargetMap:r._connectionSourceMap;l!=null?(u[i.connection.id]=l,i.connection.source===i.connection.target&&(c[i.connection.id]=l)):(delete u[i.connection.id],i.connection.source===i.connection.target&&delete c[i.connection.id]),n!=null&&r._updateConnectionsForGroup(n),l!=null&&r._updateConnectionsForGroup(l)})}return z(t,[{key:"_cleanupDetachedConnection",value:function(r){r.proxies.length=0;var i=this._connectionSourceMap[r.id],e;i!=null&&(e=function(o){return o.id===r.id},we(i.connections.source,e),we(i.connections.target,e),we(i.connections.internal,e),delete this._connectionSourceMap[r.id]),i=this._connectionTargetMap[r.id],i!=null&&(e=function(o){return o.id===r.id},we(i.connections.source,e),we(i.connections.target,e),we(i.connections.internal,e),delete this._connectionTargetMap[r.id])}},{key:"addGroup",value:function(r){var i=r.el;if(this.groupMap[r.id]!=null)throw new Error("cannot create Group ["+r.id+"]; a Group with that ID exists");if(i._isJsPlumbGroup!=null)throw new Error("cannot create Group ["+r.id+"]; the given element is already a Group");var e=new H0(this.instance,r.el,r);return this.groupMap[e.id]=e,r.collapsed&&this.collapseGroup(e),this.instance.manage(e.el),this.instance.addClass(e.el,Pr),e.manager=this,this._updateConnectionsForGroup(e),this.instance.fire(Jy,{group:e}),e}},{key:"getGroup",value:function(r){var i=r;if(_e(r)&&(i=this.groupMap[r],i==null))throw new Error("No such group ["+r+"]");return i}},{key:"getGroupFor",value:function(r){for(var i=r,e=this.instance.getContainer(),n=!1,o=null;!n;)i==null||i===e?n=!0:i._jsPlumbParentGroup?(o=i._jsPlumbParentGroup,n=!0):i=i.parentNode;return o}},{key:"getGroups",value:function(){var r=[];for(var i in this.groupMap)r.push(this.groupMap[i]);return r}},{key:"removeGroup",value:function(r,i,e,n){var o=this,a=this.getGroup(r);this.expandGroup(a,!0);var l={};return X(a.children,function(u){var c=o.instance.getManagedElements()[o.instance.getId(u.el)];c&&delete c.group}),i?(X(a.getGroups(),function(u){return o.removeGroup(u,i,e)}),a.removeAll(e,n)):(a.group&&X(a.children,function(u){return a.group.add(u.el)}),l=a.orphanAll()),a.group&&a.group.removeGroup(a),this.instance.unmanage(a.el,!0),delete this.groupMap[a.id],this.instance.fire(nm,{group:a}),l}},{key:"removeAllGroups",value:function(r,i,e){for(var n in this.groupMap)this.removeGroup(this.groupMap[n],r,i,e)}},{key:"forEach",value:function(r){for(var i in this.groupMap)r(this.groupMap[i])}},{key:"orphan",value:function(r,i){var e=r;if(e._jsPlumbParentGroup){var n=e._jsPlumbParentGroup,o=this.instance.getId(e),a=this.instance.getOffset(r);return i!==!0&&n.group?this.instance._appendElementToGroup(n.group,r):this.instance._appendElementToContainer(r),this.instance.setPosition(r,a),delete e._jsPlumbParentGroup,{id:o,pos:a}}}},{key:"_updateConnectionsForGroup",value:function(r){var i=this;r.connections.source.length=0,r.connections.target.length=0,r.connections.internal.length=0;var e=r.children.slice().map(function(d){return d.el}),n=[];if(X(e,function(d){Array.prototype.push.apply(n,i.instance.getSelector(d,ge))}),Array.prototype.push.apply(e,n),e.length>0){var o=this.instance.getConnections({source:e,scope:mn},!0),a=this.instance.getConnections({target:e,scope:mn},!0),l={},u,c,h=function(p){for(var v=0;v<p.length;v++)l[p[v].id]||(l[p[v].id]=!0,u=i.getGroupFor(p[v].source),c=i.getGroupFor(p[v].target),p[v].source===r.el&&c===r||p[v].target===r.el&&u===r?r.connections.internal.push(p[v]):u===r?(c!==r?r.connections.source.push(p[v]):r.connections.internal.push(p[v]),i._connectionSourceMap[p[v].id]=r):c===r&&(r.connections.target.push(p[v]),i._connectionTargetMap[p[v].id]=r))};h(o),h(a)}}},{key:"_collapseConnection",value:function(r,i,e){var n=r.endpoints[i===0?1:0].element;if(n._jsPlumbParentGroup&&!n._jsPlumbParentGroup.proxied&&n._jsPlumbParentGroup.collapsed)return!1;var o=r.endpoints[0].element,a=o._jsPlumbParentGroup,l=a!=null?a.collapseParent||a:null,u=r.endpoints[1].element,c=u._jsPlumbParentGroup,h=c!=null?c.collapseParent||c:null;if(l==null||h==null||l.id!==h.id){var d=e.el;return this.instance.getId(d),this.instance.proxyConnection(r,i,d,function(p,v){return e.getEndpoint(p,v)},function(p,v){return e.getAnchor(p,v)}),!0}else return!1}},{key:"_expandConnection",value:function(r,i,e){this.instance.unproxyConnection(r,i)}},{key:"isElementDescendant",value:function(r,i){for(var e=this.instance.getContainer(),n=!1;!n;){if(r==null||r===e)return!1;if(r===i)return!0;r=r.parentNode}}},{key:"collapseGroup",value:function(r){var i=this,e=this.getGroup(r);if(!(e==null||e.collapsed)){var n=e.el;if(e.collapseParent==null){if(this.instance.setGroupVisible(e,!1),e.collapsed=!0,this.instance.removeClass(n,Pr),this.instance.addClass(n,_i),e.proxied){var o=new Set,a=function(u,c){for(var h=0;h<u.length;h++){var d=u[h];i._collapseConnection(d,c,e)===!0&&o.add(d.id)}};a(e.connections.source,0),a(e.connections.target,1),X(e.getGroups(),function(l){i.cascadeCollapse(e,l,o)})}this.instance.revalidate(n),this.repaintGroup(e),this.instance.fire(Zy,{group:e})}else e.collapsed=!0,this.instance.removeClass(n,Pr),this.instance.addClass(n,_i)}}},{key:"cascadeCollapse",value:function(r,i,e){var n=this;if(r.proxied){var o=function(l,u){for(var c=0;c<l.length;c++){var h=l[c];e.has(h.id)||n._collapseConnection(h,u,r)===!0&&e.add(h.id)}};o(i.connections.source,0),o(i.connections.target,1)}X(i.getGroups(),function(a){n.cascadeCollapse(r,a,e)})}},{key:"expandGroup",value:function(r,i){var e=this,n=this.getGroup(r);if(n!=null){var o=n.el;if(n.collapseParent==null){if(this.instance.setGroupVisible(n,!0),n.collapsed=!1,this.instance.addClass(o,Pr),this.instance.removeClass(o,_i),n.proxied){var a=function(c,h){for(var d=0;d<c.length;d++){var p=c[d];e._expandConnection(p,h,n)}};a(n.connections.source,0),a(n.connections.target,1);var l=function u(c,h){if(h||c.collapsed){var d=function(v,y){for(var m=0;m<v.length;m++){var b=v[m];e._collapseConnection(b,y,c.collapseParent||c)}};d(c.connections.source,0),d(c.connections.target,1),X(c.connections.internal,function(p){return p.setVisible(!1)}),X(c.getGroups(),function(p){return u(p,!0)})}else e.expandGroup(c,!0)};X(n.getGroups(),l)}this.instance.revalidate(o),this.repaintGroup(n),i||this.instance.fire(Qy,{group:n})}else n.collapsed=!1,this.instance.addClass(o,Pr),this.instance.removeClass(o,_i)}}},{key:"toggleGroup",value:function(r){r=this.getGroup(r),r!=null&&(r.collapsed?this.expandGroup(r):this.collapseGroup(r))}},{key:"repaintGroup",value:function(r){for(var i=this.getGroup(r),e=i.children,n=0;n<e.length;n++)this.instance.revalidate(e[n].el)}},{key:"addToGroup",value:function(r,i){var e=this,n=this.getGroup(r);if(n){for(var o=n.el,a=function(d){var p=d,v=p._isJsPlumbGroup!=null,y=p._jsPlumbGroup,m=p._jsPlumbParentGroup;if(m!==n){var b=e.instance.manage(d),C=e.instance.getOffset(d),E=n.collapsed?e.instance.getOffsetRelativeToRoot(o):e.instance.getOffset(e.instance.getGroupContentArea(n));b.group=n.elId,m!=null&&(m.remove(d,!1,i,!1,n),e._updateConnectionsForGroup(m)),v?n.addGroup(y):n.add(d,i);var S=function(T,q){var W=q===0?1:0;T.each(function(te){te.setVisible(!1),te.endpoints[W].element._jsPlumbGroup===n?(te.endpoints[W].setVisible(!1),e._expandConnection(te,W,n)):(te.endpoints[q].setVisible(!1),e._collapseConnection(te,q,n))})};n.collapsed&&(S(e.instance.select({source:d}),0),S(e.instance.select({target:d}),1)),e.instance.getId(d);var D={x:C.x-E.x,y:C.y-E.y};if(e.instance.setPosition(d,D),e._updateConnectionsForGroup(n),e.instance.revalidate(d),!i){var G={group:n,el:d,pos:D};m&&(G.sourceGroup=m),e.instance.fire(em,G)}}},l=arguments.length,u=new Array(l>2?l-2:0),c=2;c<l;c++)u[c-2]=arguments[c];X(u,a)}}},{key:"removeFromGroup",value:function(r,i){var e=this,n=this.getGroup(r);if(n){for(var o=function(h){if(n.collapsed){var d=function(y,m){for(var b=0;b<y.length;b++){var C=y[b];if(C.proxies){for(var E=0;E<C.proxies.length;E++)if(C.proxies[E]!=null){var S=C.proxies[E].originalEp.element;(S===h||e.isElementDescendant(S,h))&&e._expandConnection(C,m,n)}}}};d(n.connections.source.slice(),0),d(n.connections.target.slice(),1)}n.remove(h,null,i);var p=e.instance.getManagedElements()[e.instance.getId(h)];p&&delete p.group},a=arguments.length,l=new Array(a>2?a-2:0),u=2;u<a;u++)l[u-2]=arguments[u];X(l,o)}}},{key:"getAncestors",value:function(r){for(var i=[],e=r.group;e!=null;)i.push(e),e=e.group;return i}},{key:"isAncestor",value:function(r,i){return r==null||i==null?!1:this.getAncestors(r).indexOf(i)!==-1}},{key:"getDescendants",value:function(r){var i=[],e=function n(o){var a=o.getGroups();i.push.apply(i,ir(a)),X(a,n)};return e(r),i}},{key:"isDescendant",value:function(r,i){return r==null||i==null?!1:this.getDescendants(i).indexOf(r)!==-1}},{key:"reset",value:function(){this._connectionSourceMap={},this._connectionTargetMap={},this.groupMap={}}}]),t}(),Qh=function(){function t(s,r){H(this,t),this.instance=s,this.entries=r}return z(t,[{key:"length",get:function(){return this.entries.length}},{key:"each",value:function(r){return X(this.entries,function(i){return r(i)}),this}},{key:"get",value:function(r){return this.entries[r]}},{key:"addClass",value:function(r,i){return this.each(function(e){return e.addClass(r,i)}),this}},{key:"removeClass",value:function(r,i){return this.each(function(e){return e.removeClass(r,i)}),this}},{key:"removeAllOverlays",value:function(){return this.each(function(r){return r.removeAllOverlays()}),this}},{key:"setLabel",value:function(r){return this.each(function(i){return i.setLabel(r)}),this}},{key:"clear",value:function(){return this.entries.length=0,this}},{key:"map",value:function(r){var i=[];return this.each(function(e){return i.push(r(e))}),i}},{key:"addOverlay",value:function(r){return this.each(function(i){return i.addOverlay(r)}),this}},{key:"removeOverlay",value:function(r){return this.each(function(i){return i.removeOverlay(r)}),this}},{key:"removeOverlays",value:function(){return this.each(function(r){return r.removeOverlays()}),this}},{key:"showOverlay",value:function(r){return this.each(function(i){return i.showOverlay(r)}),this}},{key:"hideOverlay",value:function(r){return this.each(function(i){return i.hideOverlay(r)}),this}},{key:"setPaintStyle",value:function(r){return this.each(function(i){return i.setPaintStyle(r)}),this}},{key:"setHoverPaintStyle",value:function(r){return this.each(function(i){return i.setHoverPaintStyle(r)}),this}},{key:"setSuspendEvents",value:function(r){return this.each(function(i){return i.setSuspendEvents(r)}),this}},{key:"setParameter",value:function(r,i){return this.each(function(e){return e.parameters[r]=i}),this}},{key:"setParameters",value:function(r){return this.each(function(i){return i.parameters=r}),this}},{key:"setVisible",value:function(r){return this.each(function(i){return i.setVisible(r)}),this}},{key:"addType",value:function(r){return this.each(function(i){return i.addType(r)}),this}},{key:"toggleType",value:function(r){return this.each(function(i){return i.toggleType(r)}),this}},{key:"removeType",value:function(r){return this.each(function(i){return i.removeType(r)}),this}},{key:"bind",value:function(r,i){return this.each(function(e){return e.bind(r,i)}),this}},{key:"unbind",value:function(r,i){return this.each(function(e){return e.unbind(r,i)}),this}},{key:"setHover",value:function(r){var i=this;return this.each(function(e){return i.instance.setHover(e,r)}),this}}]),t}(),V0=function(t){oe(r,t);var s=ae(r);function r(){return H(this,r),s.apply(this,arguments)}return z(r,[{key:"setEnabled",value:function(e){return this.each(function(n){return n.enabled=e}),this}},{key:"setAnchor",value:function(e){return this.each(function(n){return n.setAnchor(e)}),this}},{key:"deleteEveryConnection",value:function(){return this.each(function(e){return e.deleteEveryConnection()}),this}},{key:"deleteAll",value:function(){var e=this;return this.each(function(n){return e.instance.deleteEndpoint(n)}),this.clear(),this}}]),r}(Qh),Y0=function(t){oe(r,t);var s=ae(r);function r(){return H(this,r),s.apply(this,arguments)}return z(r,[{key:"setDetachable",value:function(e){return this.each(function(n){return n.setDetachable(e)}),this}},{key:"setReattach",value:function(e){return this.each(function(n){return n.setReattach(e)}),this}},{key:"setConnector",value:function(e){return this.each(function(n){return n._setConnector(e)}),this}},{key:"deleteAll",value:function(){var e=this;this.each(function(n){return e.instance.deleteConnection(n)}),this.clear()}},{key:"repaint",value:function(){var e=this;return this.each(function(n){return e.instance._paintConnection(n)}),this}}]),r}(Qh),X0=function t(){H(this,t),f(this,"affectedElements",new Set)};function Eu(){return{x:0,y:0,w:0,h:0,r:0,c:{x:0,y:0},x2:0,y2:0,t:{x:0,y:0,c:{x:0,y:0},w:0,h:0,r:0,x2:0,y2:0,cr:0,sr:0},dirty:!0}}function $0(t,s,r,i,e){var n={x:t+r/2,y:s+i/2},o=Math.cos(e/360*Math.PI*2),a=Math.sin(e/360*Math.PI*2),l=function(E,S){return{x:n.x+Math.round((E-n.x)*o-(S-n.y)*a),y:n.y+Math.round((S-n.y)*o-(E-n.x)*a)}},u=l(t,s),c=l(t+r,s),h=l(t+r,s+i),d=l(t,s+i),p=l(t+r/2,s+i/2),v=Math.min(u.x,c.x,h.x,d.x),y=Math.max(u.x,c.x,h.x,d.x),m=Math.min(u.y,c.y,h.y,d.y),b=Math.max(u.y,c.y,h.y,d.y);return{x:v,y:m,w:y-v,h:b-m,c:p,r:e,x2:y,y2:b,cr:o,sr:a}}var fs=function(s,r){var i=0;return r[1]>s[1]?i=-1:r[1]<s[1]&&(i=1),i},bu=function(s,r){return fs(s,r)*-1};function xi(t,s,r,i){Ty([t,s],r,fs,i)}function Xt(t,s){var r=tn(s,function(i){return i[0]===t});r>-1&&s.splice(r,1)}var W0=function(t){oe(r,t);var s=ae(r);function r(i){var e;return H(this,r),e=s.call(this),e.instance=i,f(g(e),"_currentTransaction",null),f(g(e),"_sortedElements",{xmin:[],xmax:[],ymin:[],ymax:[]}),f(g(e),"_elementMap",new Map),f(g(e),"_transformedElementMap",new Map),f(g(e),"_bounds",{minx:0,maxx:0,miny:0,maxy:0}),e}return z(r,[{key:"_updateBounds",value:function(e,n,o){n!=null&&(Xt(e,this._sortedElements.xmin),Xt(e,this._sortedElements.xmax),Xt(e,this._sortedElements.ymin),Xt(e,this._sortedElements.ymax),xi(e,n.t.x,this._sortedElements.xmin,!1),xi(e,n.t.x+n.t.w,this._sortedElements.xmax,!0),xi(e,n.t.y,this._sortedElements.ymin,!1),xi(e,n.t.y+n.t.h,this._sortedElements.ymax,!0),o!==!0&&this._recalculateBounds())}},{key:"_recalculateBounds",value:function(){this._bounds.minx=this._sortedElements.xmin.length>0?this._sortedElements.xmin[0][1]:0,this._bounds.maxx=this._sortedElements.xmax.length>0?this._sortedElements.xmax[0][1]:0,this._bounds.miny=this._sortedElements.ymin.length>0?this._sortedElements.ymin[0][1]:0,this._bounds.maxy=this._sortedElements.ymax.length>0?this._sortedElements.ymax[0][1]:0}},{key:"recomputeBounds",value:function(){var e=this;this._sortedElements.xmin.length=0,this._sortedElements.xmax.length=0,this._sortedElements.ymin.length=0,this._sortedElements.ymax.length=0,this._elementMap.forEach(function(n,o){e._sortedElements.xmin.push([o,n.t.x]),e._sortedElements.xmax.push([o,n.t.x+n.t.w]),e._sortedElements.ymin.push([o,n.t.y]),e._sortedElements.ymax.push([o,n.t.y+n.t.h])}),this._sortedElements.xmin.sort(fs),this._sortedElements.ymin.sort(fs),this._sortedElements.xmax.sort(bu),this._sortedElements.ymax.sort(bu),this._recalculateBounds()}},{key:"_finaliseUpdate",value:function(e,n,o){n.t=$0(n.x,n.y,n.w,n.h,n.r),this._transformedElementMap.set(e,n.t),o!==!0&&this._updateBounds(e,n,o)}},{key:"shouldFireEvent",value:function(e,n,o){return!0}},{key:"startTransaction",value:function(){if(this._currentTransaction!=null)throw new Error("Viewport: cannot start transaction; a transaction is currently active.");this._currentTransaction=new X0}},{key:"endTransaction",value:function(){var e=this;this._currentTransaction!=null&&(this._currentTransaction.affectedElements.forEach(function(n){var o=e.getPosition(n);e._finaliseUpdate(n,o,!0)}),this.recomputeBounds(),this._currentTransaction=null)}},{key:"updateElements",value:function(e){var n=this;X(e,function(o){return n.updateElement(o.id,o.x,o.y,o.width,o.height,o.rotation)})}},{key:"updateElement",value:function(e,n,o,a,l,u,c){var h=jl(this._elementMap,e,Eu);return h.dirty=n==null&&h.x==null||o==null&&h.y==null||a==null&&h.w==null||l==null&&h.h==null,n!=null&&(h.x=n),o!=null&&(h.y=o),a!=null&&(h.w=a),l!=null&&(h.h=l),u!=null&&(h.r=u||0),h.c.x=h.x+h.w/2,h.c.y=h.y+h.h/2,h.x2=h.x+h.w,h.y2=h.y+h.h,this._currentTransaction==null?this._finaliseUpdate(e,h,c):this._currentTransaction.affectedElements.add(e),h}},{key:"refreshElement",value:function(e,n){var o=this.instance.getManagedElements(),a=o[e]?o[e].el:null;if(a!=null){var l=this.getSize(a),u=this.getOffset(a);return this.updateElement(e,u.x,u.y,l.w,l.h,null,n)}else return null}},{key:"getSize",value:function(e){return this.instance.getSize(e)}},{key:"getOffset",value:function(e){return this.instance.getOffset(e)}},{key:"registerElement",value:function(e,n){return this.updateElement(e,0,0,0,0,0,n)}},{key:"addElement",value:function(e,n,o,a,l,u){return this.updateElement(e,n,o,a,l,u)}},{key:"rotateElement",value:function(e,n){var o=jl(this._elementMap,e,Eu);return o.r=n||0,this._finaliseUpdate(e,o),o}},{key:"getBoundsWidth",value:function(){return this._bounds.maxx-this._bounds.minx}},{key:"getBoundsHeight",value:function(){return this._bounds.maxy-this._bounds.miny}},{key:"getX",value:function(){return this._bounds.minx}},{key:"getY",value:function(){return this._bounds.miny}},{key:"setSize",value:function(e,n,o){if(this._elementMap.has(e))return this.updateElement(e,null,null,n,o,null)}},{key:"setPosition",value:function(e,n,o){if(this._elementMap.has(e))return this.updateElement(e,n,o,null,null,null)}},{key:"reset",value:function(){this._sortedElements.xmin.length=0,this._sortedElements.xmax.length=0,this._sortedElements.ymin.length=0,this._sortedElements.ymax.length=0,this._elementMap.clear(),this._transformedElementMap.clear(),this._recalculateBounds()}},{key:"remove",value:function(e){Xt(e,this._sortedElements.xmin),Xt(e,this._sortedElements.xmax),Xt(e,this._sortedElements.ymin),Xt(e,this._sortedElements.ymax),this._elementMap.delete(e),this._transformedElementMap.delete(e),this._recalculateBounds()}},{key:"getPosition",value:function(e){return this._elementMap.get(e)}},{key:"getElements",value:function(){return this._elementMap}},{key:"isEmpty",value:function(){return this._elementMap.size===0}}]),r}(oi),Bn;function z0(t,s,r,i,e){for(var n=r?t.w:t.h,o=r?t.h:t.w,a=[],l=n/(s.length+1),u=0;u<s.length;u++){var c=(u+1)*l,h=i*o;e&&(c=n-c);var d=r?c:h,p=t.x+d,v=d/t.w,y=r?h:c,m=t.y+y,b=y/t.h;if(t.r!==0&&t.r!=null){var C=ts({x:p,y:m},t.c,t.r);p=C.x,m=C.y}a.push({x:p,y:m,xLoc:v,yLoc:b,c:s[u].c})}return a}function Cu(t,s){return s.theta-t.theta}function xu(t,s){var r=t.theta<0?-Math.PI-t.theta:Math.PI-t.theta,i=s.theta<0?-Math.PI-s.theta:Math.PI-s.theta;return r-i}var q0=(Bn={},f(Bn,Ce,xu),f(Bn,Le,Cu),f(Bn,He,Cu),f(Bn,Fe,xu),Bn);function $t(t){return t.isContinuous===!0}function Su(t){return t.isContinuous===!0}function K0(t){return t.locations.length>1}function Pu(t){return[t.currentLocation,t.locations[t.currentLocation]]}var J0=function(){function t(s){var r=this;H(this,t),this.instance=s,f(this,"anchorLists",new Map),f(this,"anchorLocations",new Map),s.bind(Ca,function(i){i.sourceEndpoint._anchor.isContinuous&&r._removeEndpointFromAnchorLists(i.sourceEndpoint),i.targetEndpoint._anchor.isContinuous&&r._removeEndpointFromAnchorLists(i.targetEndpoint)}),s.bind(xh,function(i){r._removeEndpointFromAnchorLists(i)})}return z(t,[{key:"getAnchorOrientation",value:function(r){var i=this.anchorLocations.get(r.id);return i?[i.ox,i.oy]:[0,0]}},{key:"_distance",value:function(r,i,e,n,o,a,l){var u=n.x+r.x*o.w,c=n.y+r.y*o.h,h=n.x+o.w/2,d=n.y+o.h/2;if(a!=null&&a.length>0){var p=this.instance._applyRotations([u,c,0,0],a);u=p.x,c=p.y}return Math.sqrt(Math.pow(i-u,2)+Math.pow(e-c,2))+Math.sqrt(Math.pow(h-u,2)+Math.pow(d-c,2))}},{key:"_anchorSelector",value:function(r,i,e,n,o,a,l){for(var u=e.x+n.w/2,c=e.y+n.h/2,h=-1,d=1/0,p=0;p<l.length;p++){var v=this._distance(l[p],u,c,r,i,o,a);v<d&&(h=p+0,d=v)}return[h,l[h]]}},{key:"_floatingAnchorCompute",value:function(r,i){var e=i.xy,n={curX:e.x+r.size.w/2,curY:e.y+r.size.h/2,x:0,y:0,ox:0,oy:0};return this._setComputedPosition(r,n)}},{key:"_setComputedPosition",value:function(r,i,e){return this.anchorLocations.set(r.id,i),r.computedPosition=i,e&&(r.timestamp=e),i}},{key:"_computeSingleLocation",value:function(r,i,e,n){var o,a=n.rotation,l={curX:i.x+r.x*e.w+r.offx,curY:i.y+r.y*e.h+r.offy,x:r.x,y:r.y,ox:0,oy:0};if(a!=null&&a.length>0){var u=[r.iox,r.ioy],c={x:l.curX,y:l.curY,cr:0,sr:0};X(a,function(h){c=ts(c,h.c,h.r);var d=[Math.round(u[0]*c.cr-u[1]*c.sr),Math.round(u[1]*c.cr+u[0]*c.sr)];u=d.slice()}),r.ox=u[0],r.oy=u[1],o={curX:c.x,curY:c.y,x:r.x,y:r.y,ox:u[0],oy:u[1]}}else r.ox=r.iox,r.oy=r.ioy,o=U({ox:r.iox,oy:r.ioy},l);return o}},{key:"_singleAnchorCompute",value:function(r,i){var e=i.xy,n=i.wh,o=i.timestamp,a=this.anchorLocations.get(r.id);if(a!=null&&o&&o===r.timestamp)return a;var l=Pu(r),u=Fi(l,2);u[0];var c=u[1];return a=this._computeSingleLocation(c,e,n,i),this._setComputedPosition(r,a,o)}},{key:"_defaultAnchorCompute",value:function(r,i){var e;if(r.locations.length===1)return this._singleAnchorCompute(r,i);var n=i.xy,o=i.wh,a=i.txy,l=i.twh,u=Pu(r),c=Fi(u,2),h=c[0],d=c[1];if(r.locked||a==null||l==null)e=this._computeSingleLocation(d,n,o,i);else{var p=this._anchorSelector(n,o,a,l,i.rotation,i.tRotation,r.locations),v=Fi(p,2),y=v[0],m=v[1];r.currentLocation=y,y!==h&&(r.cssClass=m.cls||r.cssClass,i.element._anchorLocationChanged(r)),e=this._computeSingleLocation(m,n,o,i)}return this._setComputedPosition(r,e,i.timestamp)}},{key:"_placeAnchors",value:function(r,i){var e=this,n=this.instance.viewport.getPosition(r),o=function(l,u,c,h,d,p){if(c.length>0)for(var v=c.sort(q0[l]),y=l===Le||l===Ce,m=z0(n,v,h,d,y),b=0;b<m.length;b++){var C=m[b].c,E=C.endpoints[0].elementId===r,S=E?C.endpoints[0]:C.endpoints[1];e._setComputedPosition(S._anchor,{curX:m[b].x,curY:m[b].y,x:m[b].xLoc,y:m[b].yLoc,ox:p[0],oy:p[1]})}};o(He,n,i.bottom,!0,1,[0,1]),o(Ce,n,i.top,!0,0,[0,-1]),o(Fe,n,i.left,!1,0,[-1,0]),o(Le,n,i.right,!1,1,[1,0])}},{key:"_updateAnchorList",value:function(r,i,e,n,o,a,l,u,c,h,d){var p=n.endpoints[l],v=p.id,y=[1,0][l],m={theta:i,order:e,c:n,b:o,elId:a,epId:v},b=r[c],C=p._continuousAnchorEdge?r[p._continuousAnchorEdge]:null,E;if(C){var S=tn(C,function(T){return T.epId===v});if(S!==-1){C.splice(S,1);for(var D=0;D<C.length;D++)E=C[D].c,E.placeholder!==!0&&h.add(E),d.add(C[D].c.endpoints[l]),d.add(C[D].c.endpoints[y])}}for(var G=0;G<b.length;G++)E=b[G].c,E.placeholder!==!0&&h.add(E),d.add(b[G].c.endpoints[l]),d.add(b[G].c.endpoints[y]);{var L=u?0:b.length;b.splice(L,0,m)}p._continuousAnchorEdge=c}},{key:"_removeEndpointFromAnchorLists",value:function(r){var i=this.anchorLists.get(r.elementId),e=0;(function(n,o){if(n){var a=function(u){return u.epId===o};we(n.top,a),we(n.left,a),we(n.bottom,a),we(n.right,a),e+=n.top.length,e+=n.left.length,e+=n.bottom.length,e+=n.right.length}})(i,r.id),e===0&&this.anchorLists.delete(r.elementId),this.anchorLocations.delete(r._anchor.id)}},{key:"computeAnchorLocation",value:function(r,i){var e;return $t(r)?e=this.anchorLocations.get(r.id)||{curX:0,curY:0,x:0,y:0,ox:0,oy:0}:Su(r)?e=this._floatingAnchorCompute(r,i):e=this._defaultAnchorCompute(r,i),r.timestamp=i.timestamp,e}},{key:"computePath",value:function(r,i){var e=this.instance.viewport.getPosition(r.sourceId),n=this.instance.viewport.getPosition(r.targetId),o=r.endpoints[0],a=r.endpoints[1],l=this.getEndpointLocation(o,{xy:e,wh:e,element:o,timestamp:i,rotation:this.instance._getRotations(r.sourceId)}),u=this.getEndpointLocation(a,{xy:n,wh:n,element:a,timestamp:i,rotation:this.instance._getRotations(r.targetId)});r.connector.resetBounds(),r.connector.compute({sourcePos:l,targetPos:u,sourceEndpoint:r.endpoints[0],targetEndpoint:r.endpoints[1],strokeWidth:r.paintStyleInUse.strokeWidth,sourceInfo:e,targetInfo:n})}},{key:"getEndpointLocation",value:function(r,i){i=i||{};var e=r._anchor,n=this.anchorLocations.get(e.id);return(n==null||i.timestamp!=null&&e.timestamp!==i.timestamp)&&(n=this.computeAnchorLocation(e,i),this._setComputedPosition(e,n,i.timestamp)),n}},{key:"getEndpointOrientation",value:function(r){return r._anchor?this.getAnchorOrientation(r._anchor):[0,0]}},{key:"setAnchorOrientation",value:function(r,i){var e=this.anchorLocations.get(r.id);e!=null&&(e.ox=i[0],e.oy=i[1])}},{key:"isDynamicAnchor",value:function(r){return r._anchor?!$t(r._anchor)&&r._anchor.locations.length>1:!1}},{key:"isFloating",value:function(r){return r._anchor?Su(r._anchor):!1}},{key:"prepareAnchor",value:function(r){return Lr(r)}},{key:"redraw",value:function(r,i,e){var n=this,o=new Set,a=new Set,l=new Set;if(!this.instance._suspendDrawing){var u=this.instance.endpointsByElement[r]||[];i=i||ke();for(var c={},h,d,p=0;p<u.length;p++)if(d=u[p],d.visible!==!1)if(a.add(d),h=d._anchor,d.connections.length===0)$t(h)&&(this.anchorLists.has(r)||this.anchorLists.set(r,{top:[],right:[],bottom:[],left:[]}),this._updateAnchorList(this.anchorLists.get(r),-Math.PI/2,0,{endpoints:[d,d],placeholder:!0},!1,r,0,!1,K_(h),o,a),l.add(r));else for(var v=0;v<d.connections.length;v++){var y=d.connections[v],m=y.sourceId,b=y.targetId,C=$t(y.endpoints[0]._anchor),E=$t(y.endpoints[1]._anchor);if(C||E){var S=(y.endpoints[0]._anchor.faces||[]).join("-"),D=(y.endpoints[1]._anchor.faces||[]).join("-"),G=[m,S,b,D].join("-"),L=c[G],T=y.sourceId===r?1:0;C&&!this.anchorLists.has(m)&&this.anchorLists.set(m,{top:[],right:[],bottom:[],left:[]}),E&&!this.anchorLists.has(b)&&this.anchorLists.set(b,{top:[],right:[],bottom:[],left:[]});var q=this.instance.viewport.getPosition(b),W=this.instance.viewport.getPosition(m);if(b===m&&(C||E))this._updateAnchorList(this.anchorLists.get(m),-Math.PI/2,0,y,!1,b,0,!1,Ce,o,a),this._updateAnchorList(this.anchorLists.get(b),-Math.PI/2,0,y,!1,m,1,!1,Ce,o,a);else{var te=this.instance._getRotations(m),R=this.instance._getRotations(b);L||(L=this._calculateOrientation(m,b,W,q,y.endpoints[0]._anchor,y.endpoints[1]._anchor,te,R),c[G]=L),C&&this._updateAnchorList(this.anchorLists.get(m),L.theta,0,y,!1,b,0,!1,L.a[0],o,a),E&&this._updateAnchorList(this.anchorLists.get(b),L.theta2,-1,y,!0,m,1,!0,L.a[1],o,a)}C&&l.add(m),E&&l.add(b),o.add(y),(C&&T===0||E&&T===1)&&a.add(y.endpoints[T])}else{var he=d.connections[v].endpoints[y.sourceId===r?1:0],gt=he._anchor;if(K0(gt)){this.instance._paintEndpoint(he,{elementWithPrecedence:r,timestamp:i}),o.add(d.connections[v]);for(var st=0;st<he.connections.length;st++)he.connections[st]!==d.connections[v]&&o.add(he.connections[st])}else o.add(d.connections[v])}}l.forEach(function(se){n._placeAnchors(se,n.anchorLists.get(se))}),a.forEach(function(se){var fe=n.instance.viewport.getPosition(se.elementId);n.instance._paintEndpoint(se,{timestamp:i,offset:fe})}),o.forEach(function(se){n.instance._paintConnection(se,{timestamp:i})})}return{c:o,e:a}}},{key:"reset",value:function(){this.anchorLocations.clear(),this.anchorLists.clear()}},{key:"setAnchor",value:function(r,i){i!=null&&(r._anchor=i)}},{key:"setConnectionAnchors",value:function(r,i){r.endpoints[0]._anchor=i[0],r.endpoints[1]._anchor=i[1]}},{key:"_calculateOrientation",value:function(r,i,e,n,o,a,l,u){var c=this,h={HORIZONTAL:"horizontal",VERTICAL:"vertical",DIAGONAL:"diagonal",IDENTITY:"identity"};if(r===i)return{orientation:h.IDENTITY,a:[Ce,Ce]};var d=Math.atan2(n.c.y-e.c.y,n.c.x-e.c.x),p=Math.atan2(e.c.y-n.c.y,e.c.x-n.c.x),v=[],y={};(function(G,L){for(var T=0;T<G.length;T++){var q;if(y[G[T]]=(q={},f(q,Fe,{x:L[T][0].x,y:L[T][0].c.y}),f(q,Le,{x:L[T][0].x+L[T][0].w,y:L[T][0].c.y}),f(q,Ce,{x:L[T][0].c.x,y:L[T][0].y}),f(q,He,{x:L[T][0].c.x,y:L[T][0].y+L[T][0].h}),q),L[T][1]!=null&&L[T][1].length>0)for(var W in y[G[T]])y[G[T]][W]=c.instance._applyRotationsXY(y[G[T]][W],L[T][1])}})([Do,gh],[[e,l],[n,u]]);for(var m=[Ce,Fe,Le,He],b=0;b<m.length;b++)for(var C=0;C<m.length;C++)v.push({source:m[b],target:m[C],dist:Ro(y.source[m[b]],y.target[m[C]])});v.sort(function(G,L){if(G.dist<L.dist)return-1;if(L.dist<G.dist)return 1;var T,q=(T={},f(T,Fe,0),f(T,Ce,1),f(T,Le,2),f(T,He,3),T),W=q[G.source],te=q[L.source],R=q[G.target],he=q[L.target];return W<te?-1:te<W?1:R<he?-1:he<R?1:0});for(var E=v[0].source,S=v[0].target,D=0;D<v.length&&($t(o)&&o.locked?E=o.currentFace:!o.isContinuous||nu(o,v[D].source)?E=v[D].source:E=null,a.isContinuous&&a.locked?S=a.currentFace:!a.isContinuous||nu(a,v[D].target)?S=v[D].target:S=null,!(E!=null&&S!=null));D++);return o.isContinuous&&this.setCurrentFace(o,E),a.isContinuous&&this.setCurrentFace(a,S),{a:[E,S],theta:d,theta2:p}}},{key:"setCurrentFace",value:function(r,i,e){r.currentFace=i,e&&r.lockedFace!=null&&(r.lockedFace=r.currentFace)}},{key:"lock",value:function(r){r.locked=!0,$t(r)&&(r.lockedFace=r.currentFace)}},{key:"unlock",value:function(r){r.locked=!1,$t(r)&&(r.lockedFace=null)}},{key:"selectAnchorLocation",value:function(r,i){var e=tn(r.locations,function(n){return n.x===i.x&&n.y===i.y});return e!==-1?(r.currentLocation=e,!0):!1}},{key:"lockCurrentAxis",value:function(r){r.currentFace!=null&&(r.lockedAxis=r.currentFace===Fe||r.currentFace===Le?W_:z_)}},{key:"unlockCurrentAxis",value:function(r){r.lockedAxis=null}},{key:"anchorsEqual",value:function(r,i){if(!r||!i)return!1;var e=r.locations[r.currentLocation],n=i.locations[i.currentLocation];return e.x===n.x&&e.y===n.y&&e.offx===n.offx&&e.offy===n.offy&&e.ox===n.ox&&e.oy===n.oy}}]),t}(),ku={},ai={get:function(s,r,i){var e=ku[r];if(e)return new e(s,i);throw{message:"jsPlumb: unknown connector type '"+r+"'"}},register:function(s,r){ku[s]=r}},bn=function(t){oe(r,t);var s=ae(r);function r(i){var e;return H(this,r),e=s.call(this,i),f(g(e),"length",void 0),f(g(e),"m",void 0),f(g(e),"m2",void 0),f(g(e),"type",r.segmentType),e._setCoordinates({x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2}),e}return z(r,[{key:"getPath",value:function(e){return(e?"M "+this.x1+" "+this.y1+" ":"")+"L "+this.x2+" "+this.y2}},{key:"_recalc",value:function(){this.length=Math.sqrt(Math.pow(this.x2-this.x1,2)+Math.pow(this.y2-this.y1,2)),this.m=lr({x:this.x1,y:this.y1},{x:this.x2,y:this.y2}),this.m2=-1/this.m,this.extents={xmin:Math.min(this.x1,this.x2),ymin:Math.min(this.y1,this.y2),xmax:Math.max(this.x1,this.x2),ymax:Math.max(this.y1,this.y2)}}},{key:"getLength",value:function(){return this.length}},{key:"getGradient",value:function(){return this.m}},{key:"_setCoordinates",value:function(e){this.x1=e.x1,this.y1=e.y1,this.x2=e.x2,this.y2=e.y2,this._recalc()}},{key:"pointOnPath",value:function(e,n){if(e===0&&!n)return{x:this.x1,y:this.y1};if(e===1&&!n)return{x:this.x2,y:this.y2};var o=n?e>0?e:this.length+e:e*this.length;return vn({x:this.x1,y:this.y1},{x:this.x2,y:this.y2},o)}},{key:"gradientAtPoint",value:function(e,n){return this.m}},{key:"pointAlongPathFrom",value:function(e,n,o){var a=this.pointOnPath(e,o),l=n<=0?{x:this.x1,y:this.y1}:{x:this.x2,y:this.y2};return n<=0&&Math.abs(n)>1&&(n*=-1),vn(a,l,n)}},{key:"within",value:function(e,n,o){return o>=Math.min(e,n)&&o<=Math.max(e,n)}},{key:"closest",value:function(e,n,o){return Math.abs(o-e)<Math.abs(o-n)?e:n}},{key:"findClosestPointOnPath",value:function(e,n){var o={d:1/0,x:null,y:null,l:null,x1:this.x1,x2:this.x2,y1:this.y1,y2:this.y2};if(this.m===0)o.y=this.y1,o.x=this.within(this.x1,this.x2,e)?e:this.closest(this.x1,this.x2,e);else if(this.m===1/0||this.m===-1/0)o.x=this.x1,o.y=this.within(this.y1,this.y2,n)?n:this.closest(this.y1,this.y2,n);else{var a=this.y1-this.m*this.x1,l=n-this.m2*e,u=(l-a)/(this.m-this.m2),c=this.m*u+a;o.x=this.within(this.x1,this.x2,u)?u:this.closest(this.x1,this.x2,u),o.y=this.within(this.y1,this.y2,c)?c:this.closest(this.y1,this.y2,c)}var h=Ro({x:o.x,y:o.y},{x:this.x1,y:this.y1});return o.d=Ro({x:e,y:n},o),o.l=h/length,o}},{key:"_pointLiesBetween",value:function(e,n,o){return o>n?n<=e&&e<=o:n>=e&&e>=o}},{key:"lineIntersection",value:function(e,n,o,a){var l=Math.abs(lr({x:e,y:n},{x:o,y:a})),u=Math.abs(this.m),c=u===1/0?this.x1:this.y1-u*this.x1,h=[],d=l===1/0?e:n-l*e;if(l!==u)if(l===1/0&&u===0)this._pointLiesBetween(e,this.x1,this.x2)&&this._pointLiesBetween(this.y1,n,a)&&h.push({x:e,y:this.y1});else if(l===0&&u===1/0)this._pointLiesBetween(n,this.y1,this.y2)&&this._pointLiesBetween(this.x1,e,o)&&h.push({x:this.x1,y:n});else{var p,v;l===1/0?(p=e,this._pointLiesBetween(p,this.x1,this.x2)&&(v=u*e+c,this._pointLiesBetween(v,n,a)&&h.push({x:p,y:v}))):l===0?(v=n,this._pointLiesBetween(v,this.y1,this.y2)&&(p=(n-c)/u,this._pointLiesBetween(p,e,o)&&h.push({x:p,y:v}))):(p=(d-c)/(u-l),v=u*p+c,this._pointLiesBetween(p,this.x1,this.x2)&&this._pointLiesBetween(v,this.y1,this.y2)&&h.push({x:p,y:v}))}return h}},{key:"boxIntersection",value:function(e,n,o,a){var l=[];return l.push.apply(l,this.lineIntersection(e,n,e+o,n)),l.push.apply(l,this.lineIntersection(e+o,n,e+o,n+a)),l.push.apply(l,this.lineIntersection(e+o,n+a,e,n+a)),l.push.apply(l,this.lineIntersection(e,n+a,e,n)),l}}]),r}(Pa);f(bn,"segmentType","Straight");var ds=function(t){oe(r,t);var s=ae(r);function r(){var i;H(this,r);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return i=s.call.apply(s,[this].concat(n)),f(g(i),"type",r.type),i}return z(r,[{key:"getDefaultStubs",value:function(){return[0,0]}},{key:"_compute",value:function(e,n){this._addSegment(bn,{x1:e.sx,y1:e.sy,x2:e.startStubX,y2:e.startStubY}),this._addSegment(bn,{x1:e.startStubX,y1:e.startStubY,x2:e.endStubX,y2:e.endStubY}),this._addSegment(bn,{x1:e.endStubX,y1:e.endStubY,x2:e.tx,y2:e.ty}),this.geometry={source:n.sourcePos,target:n.targetPos}}},{key:"transformGeometry",value:function(e,n,o){return{source:this.transformAnchorPlacement(e.source,n,o),target:this.transformAnchorPlacement(e.target,n,o)}}}]),r}(Hs);f(ds,"type","Straight");function Z0(t,s){for(var r=t.scope.split(/\s/),i=s.scope.split(/\s/),e=0;e<r.length;e++)for(var n=0;n<i.length;n++)if(i[n]===r[e])return!0;return!1}function cn(t,s,r){var i=[],e=function(a){return _e(a)?a:t.getId(a)};if(s)if(typeof s=="string"){if(s==="*")return s;i.push(s)}else if(r)i=s;else if(s.length!=null){var n;(n=i).push.apply(n,ir(ir(s).map(e)))}else i.push(e(s));return i}function Q0(t,s){t!=null&&t.endpoints.push(s)}function eE(t,s){t!=null&&we(t.endpoints,function(r){return r===s})}function Si(t,s,r){s!=null&&(s.connections.push(t),s.connections.length===1&&t.instance.addClass(t.source,t.instance.connectedClass)),r!=null&&(s==null||t.sourceId!==t.targetId)&&(r.connections.push(t),r.connections.length===1&&t.instance.addClass(t.target,t.instance.connectedClass))}function Pi(t,s,r){if(s!=null){var i=s.connections.length;we(s.connections,function(n){return t.id===n.id}),i>0&&s.connections.length===0&&t.instance.removeClass(t.source,t.instance.connectedClass)}if(r!=null){var e=r.connections.length;(s==null||t.sourceId!==t.targetId)&&we(r.connections,function(n){return t.id===n.id}),e>0&&r.connections.length===0&&t.instance.removeClass(t.target,t.instance.connectedClass)}}var tE=function(t){oe(r,t);var s=ae(r);function r(i,e){var n;return H(this,r),n=s.call(this),n._instanceIndex=i,f(g(n),"defaults",void 0),f(g(n),"_initialDefaults",{}),f(g(n),"isConnectionBeingDragged",!1),f(g(n),"currentlyDragging",!1),f(g(n),"hoverSuspended",!1),f(g(n),"_suspendDrawing",!1),f(g(n),"_suspendedAt",null),f(g(n),"connectorClass",Ea),f(g(n),"connectorOutlineClass",By),f(g(n),"connectedClass",Hy),f(g(n),"endpointClass",Jn),f(g(n),"endpointConnectedClass",Uy),f(g(n),"endpointFullClass",Vy),f(g(n),"endpointFloatingClass",ba),f(g(n),"endpointDropAllowedClass",Yy),f(g(n),"endpointDropForbiddenClass",Xy),f(g(n),"endpointAnchorClassPrefix",$y),f(g(n),"overlayClass",js),f(g(n),"connections",[]),f(g(n),"endpointsByElement",{}),f(g(n),"endpointsByUUID",new Map),f(g(n),"sourceSelectors",[]),f(g(n),"targetSelectors",[]),f(g(n),"allowNestedGroups",void 0),f(g(n),"_curIdStamp",1),f(g(n),"viewport",new W0(g(n))),f(g(n),"router",void 0),f(g(n),"groupManager",void 0),f(g(n),"_connectionTypes",new Map),f(g(n),"_endpointTypes",new Map),f(g(n),"_container",void 0),f(g(n),"_managedElements",{}),f(g(n),"DEFAULT_SCOPE",void 0),f(g(n),"_zoom",1),n.defaults={anchor:kt.Bottom,anchors:[null,null],connectionsDetachable:!0,connectionOverlays:[],connector:ds.type,container:null,endpoint:hr.type,endpointOverlays:[],endpoints:[null,null],endpointStyle:{fill:"#456"},endpointStyles:[null,null],endpointHoverStyle:null,endpointHoverStyles:[null,null],hoverPaintStyle:null,listStyle:{},maxConnections:1,paintStyle:{strokeWidth:2,stroke:"#456"},reattachConnections:!1,scope:"jsplumb_defaultscope",allowNestedGroups:!0},e&&U(n.defaults,e),U(n._initialDefaults,n.defaults),n._initialDefaults[jn]!=null&&(n._initialDefaults[jn].strokeWidth=n._initialDefaults[jn].strokeWidth||2),n.DEFAULT_SCOPE=n.defaults[j0],n.allowNestedGroups=n._initialDefaults[G0]!==!1,n.router=new J0(g(n)),n.groupManager=new U0(g(n)),n.setContainer(n._initialDefaults.container),n}return z(r,[{key:"defaultScope",get:function(){return this.DEFAULT_SCOPE}},{key:"currentZoom",get:function(){return this._zoom}},{key:"areDefaultAnchorsSet",value:function(){return this.validAnchorsSpec(this.defaults.anchors)}},{key:"validAnchorsSpec",value:function(e){return e!=null&&e[0]!=null&&e[1]!=null}},{key:"getContainer",value:function(){return this._container}},{key:"setZoom",value:function(e,n){return this._zoom=e,this.fire(Th,this._zoom),n&&this.repaintEverything(),!0}},{key:"_idstamp",value:function(){return""+this._curIdStamp++}},{key:"checkCondition",value:function(e,n){var o=this.getListener(e),a=!0;if(o&&o.length>0){var l=Array.prototype.slice.call(arguments,1);try{for(var u=0,c=o.length;u<c;u++)a=a&&o[u].apply(o[u],l)}catch(h){Pe("cannot check condition ["+e+"]"+h)}}return a}},{key:"getId",value:function(e,n){if(e==null)return null;var o=this.getAttribute(e,zt);return(!o||o==="undefined")&&(arguments.length===2&&arguments[1]!==void 0?o=n:(arguments.length===1||arguments.length===3&&!arguments[2])&&(o="jsplumb-"+this._instanceIndex+"-"+this._idstamp()),this.setAttribute(e,zt,o)),o}},{key:"getConnections",value:function(e,n){e?e.constructor===String&&(e={scope:e}):e={};for(var o=e.scope||this.defaultScope,a=cn(this,o,!0),l=cn(this,e.source),u=cn(this,e.target),c=!n&&a.length>1?{}:[],h=function(C,E){if(!n&&a.length>1){var S=c[C];S==null&&(S=c[C]=[]),S.push(E)}else c.push(E)},d=0,p=this.connections.length;d<p;d++){var v=this.connections[d],y=v.proxies&&v.proxies[0]?v.proxies[0].originalEp.elementId:v.sourceId,m=v.proxies&&v.proxies[1]?v.proxies[1].originalEp.elementId:v.targetId;an(a,v.scope)&&an(l,y)&&an(u,m)&&h(v.scope,v)}return c}},{key:"select",value:function(e){return e=e||{},e.scope=e.scope||"*",new Y0(this,e.connections||this.getConnections(e,!0))}},{key:"selectEndpoints",value:function(e){e=e||{},e.scope=e.scope||mn;var n=!e.element&&!e.source&&!e.target,o=n?mn:cn(this,e.element),a=n?mn:cn(this,e.source),l=n?mn:cn(this,e.target),u=cn(this,e.scope,!0),c=[];for(var h in this.endpointsByElement){var d=an(o,h,!0),p=an(a,h,!0),v=a!=="*",y=an(l,h,!0),m=l!=="*";if(d||p||y)e:for(var b=0,C=this.endpointsByElement[h].length;b<C;b++){var E=this.endpointsByElement[h][b];if(an(u,E.scope,!0)){var S=v&&a.length>0&&!E.isSource,D=m&&l.length>0&&!E.isTarget;if(S||D)continue e;c.push(E)}}}return new V0(this,c)}},{key:"setContainer",value:function(e){this._container=e,this.fire(qy,this._container)}},{key:"_set",value:function(e,n,o){var a=[{el:"source",elId:"sourceId"},{el:"target",elId:"targetId"}],l,u=a[o],c=e[u.elId],h,d=e.endpoints[o],p={index:o,originalEndpoint:d,originalSourceId:o===0?c:e.sourceId,newSourceId:e.sourceId,originalTargetId:o===1?c:e.targetId,newTargetId:e.targetId,connection:e,newEndpoint:d};return n instanceof Xn?(l=n,l.addConnection(e)):(h=this.getId(n),h===e[u.elId]?l=null:l=e.makeEndpoint(o===0,n,h)),l!=null&&(p.newEndpoint=l,d.detachFromConnection(e),e.endpoints[o]=l,e[u.el]=l.element,e[u.elId]=l.elementId,p[o===0?"newSourceId":"newTargetId"]=l.elementId,this.fireMoveEvent(p),this._paintConnection(e)),p}},{key:"setSource",value:function(e,n){Pi(e,this._managedElements[e.sourceId]);var o=this._set(e,n,0);Si(e,this._managedElements[o.newSourceId])}},{key:"setTarget",value:function(e,n){Pi(e,this._managedElements[e.targetId]);var o=this._set(e,n,1);Si(e,this._managedElements[o.newTargetId])}},{key:"setConnectionType",value:function(e,n,o){e.setType(n,o),this._paintConnection(e)}},{key:"isHoverSuspended",value:function(){return this.hoverSuspended}},{key:"setSuspendDrawing",value:function(e,n){var o=this._suspendDrawing;return this._suspendDrawing=e,e?this._suspendedAt=""+new Date().getTime():(this._suspendedAt=null,this.viewport.recomputeBounds()),n&&this.repaintEverything(),o}},{key:"getSuspendedAt",value:function(){return this._suspendedAt}},{key:"batch",value:function(e,n){var o=this._suspendDrawing===!0;o||this.setSuspendDrawing(!0),e(),o||this.setSuspendDrawing(!1,!n)}},{key:"each",value:function(e,n){if(e!=null){if(e.length!=null)for(var o=0;o<e.length;o++)n(e[o]);else n(e);return this}}},{key:"updateOffset",value:function(e){var n=e.elId;return e.recalc?this.viewport.refreshElement(n):this.viewport.getPosition(n)}},{key:"deleteConnection",value:function(e,n){if(e!=null&&e.deleted!==!0&&(n=n||{},n.force||lh(!0,!1,[[e.endpoints[0],Zn,[e]],[e.endpoints[1],Zn,[e]],[e,Zn,[e]],[this,_h,[Oh,e]]]))){Pi(e,this._managedElements[e.sourceId],this._managedElements[e.targetId]),this.fireDetachEvent(e,!e.pending&&n.fireEvent!==!1,n.originalEvent);var o=e.endpoints[0],a=e.endpoints[1];return o!==n.endpointToIgnore&&o.detachFromConnection(e,null,!0),a!==n.endpointToIgnore&&a.detachFromConnection(e,null,!0),we(this.connections,function(l){return e.id===l.id}),e.destroy(),o!==n.endpointToIgnore&&o.deleteOnEmpty&&o.connections.length===0&&this.deleteEndpoint(o),a!==n.endpointToIgnore&&a.deleteOnEmpty&&a.connections.length===0&&this.deleteEndpoint(a),!0}return!1}},{key:"deleteEveryConnection",value:function(e){var n=this;e=e||{};var o=this.connections.length,a=0;return this.batch(function(){for(var l=0;l<o;l++)a+=n.deleteConnection(n.connections[0],e)?1:0}),a}},{key:"deleteConnectionsForElement",value:function(e,n){var o=this.getId(e),a=this._managedElements[o];if(a)for(var l=a.connections.length,u=0;u<l;u++)this.deleteConnection(a.connections[0],n);return this}},{key:"fireDetachEvent",value:function(e,n,o){var a=e.id!=null,l=a?{connection:e,source:e.source,target:e.target,sourceId:e.sourceId,targetId:e.targetId,sourceEndpoint:e.endpoints[0],targetEndpoint:e.endpoints[1]}:e;n&&this.fire(zy,l,o),this.fire(Ca,l,o)}},{key:"fireMoveEvent",value:function(e,n){this.fire(Ch,e,n)}},{key:"manageAll",value:function(e,n){for(var o=_e(e)?this.getSelector(this.getContainer(),e):e,a=0;a<o.length;a++)this.manage(o[a],null,n)}},{key:"manage",value:function(e,n,o){this.getAttribute(e,zt)==null&&(n=n||this.getAttribute(e,"id")||ke(),this.setAttribute(e,zt,n));var a=this.getId(e);if(this._managedElements[a])o&&(this._managedElements[a].viewportElement=this.updateOffset({elId:a,timestamp:null,recalc:!0}));else{var l={el:e,endpoints:[],connections:[],rotation:0,data:{}};this._managedElements[a]=l,this._suspendDrawing?l.viewportElement=this.viewport.registerElement(a,!0):l.viewportElement=this.updateOffset({elId:a,recalc:!0}),this.fire(Sh,{el:e})}return this._managedElements[a]}},{key:"getManagedData",value:function(e,n,o){if(this._managedElements[e]){var a=this._managedElements[e].data[n];return a!=null?a[o]:null}}},{key:"setManagedData",value:function(e,n,o,a){this._managedElements[e]&&(this._managedElements[e].data[n]=this._managedElements[e].data[n]||{},this._managedElements[e].data[n][o]=a)}},{key:"getManagedElement",value:function(e){return this._managedElements[e]?this._managedElements[e].el:null}},{key:"unmanage",value:function(e,n){var o=this;this.removeAllEndpoints(e,!0);var a=function(u){var c=o.getId(u);o.removeAttribute(u,zt),delete o._managedElements[c],o.viewport.remove(c),o.fire(kh,{el:u,id:c}),u&&n&&o._removeElement(u)};this._getAssociatedElements(e).map(a),a(e)}},{key:"rotate",value:function(e,n,o){var a=this.getId(e);return this._managedElements[a]&&(this._managedElements[a].rotation=n,this.viewport.rotateElement(a,n),o!==!0)?this.revalidate(e):{c:new Set,e:new Set}}},{key:"_getRotation",value:function(e){var n=this._managedElements[e];return n!=null&&n.rotation||0}},{key:"_getRotations",value:function(e){var n=this,o=[],a=this._managedElements[e],l=function u(c){if(c.group!=null){var h=n._managedElements[c.group];h!=null&&(o.push({r:h.viewportElement.r,c:h.viewportElement.c}),u(h))}};return a!=null&&(o.push({r:a.viewportElement.r||0,c:a.viewportElement.c}),l(a)),o}},{key:"_applyRotations",value:function(e,n){var o=e.slice(),a={x:o[0],y:o[1],cr:0,sr:0};return X(n,function(l){a=ts(a,l.c,l.r)}),a}},{key:"_applyRotationsXY",value:function(e,n){return X(n,function(o){e=ts(e,o.c,o.r)}),e}},{key:"_internal_newEndpoint",value:function(e){var n=U({},e),o=this.manage(n.element);n.elementId=this.getId(n.element),n.id="ep_"+this._idstamp();var a=new Xn(this,n);return Q0(o,a),e.uuid&&this.endpointsByUUID.set(e.uuid,a),ch(this.endpointsByElement,a.elementId,a),this._suspendDrawing||this._paintEndpoint(a,{timestamp:this._suspendedAt}),a}},{key:"_deriveEndpointAndAnchorSpec",value:function(e,n){for(var o=((n?"":"default ")+e).split(/[\s]/),a=null,l=null,u=null,c=null,h=0;h<o.length;h++){var d=this.getConnectionType(o[h]);d&&(d.endpoints&&(a=d.endpoints),d.endpoint&&(l=d.endpoint),d.anchors&&(c=d.anchors),d.anchor&&(u=d.anchor))}return{endpoints:a||[l,l],anchors:c||[u,u]}}},{key:"revalidate",value:function(e,n){var o=this.getId(e);return this.updateOffset({elId:o,recalc:!0,timestamp:n}),this.repaint(e)}},{key:"repaintEverything",value:function(){var e=ke(),n;for(n in this._managedElements)this.viewport.refreshElement(n,!0);this.viewport.recomputeBounds();for(n in this._managedElements)this.repaint(this._managedElements[n].el,e,!0);return this}},{key:"setElementPosition",value:function(e,n,o){var a=this.getId(e);return this.viewport.setPosition(a,n,o),this.repaint(e)}},{key:"repaint",value:function(e,n,o){var a={c:new Set,e:new Set},l=function(v){v.c.forEach(function(y){return a.c.add(y)}),v.e.forEach(function(y){return a.e.add(y)})};if(!this._suspendDrawing){var u=this.getId(e);if(e!=null){var c=this._getAssociatedElements(e);if(n==null&&(n=ke()),!o)for(var h=0;h<c.length;h++)this.updateOffset({elId:this.getId(c[h]),recalc:!0,timestamp:n});if(l(this.router.redraw(u,n,null)),c.length>0)for(var d=0;d<c.length;d++)l(this.router.redraw(this.getId(c[d]),n,null))}}return a}},{key:"unregisterEndpoint",value:function(e){var n=e.getUuid();n&&this.endpointsByUUID.delete(n),eE(this._managedElements[e.elementId],e);var o=this.endpointsByElement[e.elementId];o!=null&&(this.endpointsByElement[e.elementId]=o.filter(function(a){return a!==e})),this.fire(xh,e)}},{key:"_maybePruneEndpoint",value:function(e){return e.deleteOnEmpty&&e.connections.length===0?(this.deleteEndpoint(e),!0):!1}},{key:"deleteEndpoint",value:function(e){var n=this,o=typeof e=="string"?this.endpointsByUUID.get(e):e;if(o){var a=o.proxiedBy,l=o.connections.slice();X(l,function(u){o.detachFromConnection(u,null,!0)}),this.unregisterEndpoint(o),o.destroy(),X(l,function(u){n.deleteConnection(u,{force:!0,endpointToIgnore:o})}),a!=null&&this.deleteEndpoint(a)}return this}},{key:"addEndpoint",value:function(e,n,o){o=o||{};var a=U({},o);U(a,n||{});var l=U({element:e},a);return this._internal_newEndpoint(l)}},{key:"addEndpoints",value:function(e,n,o){for(var a=[],l=0,u=n.length;l<u;l++)a.push(this.addEndpoint(e,n[l],o));return a}},{key:"reset",value:function(){var e=this;this.silently(function(){e.endpointsByElement={},e._managedElements={},e.endpointsByUUID.clear(),e.viewport.reset(),e.router.reset(),e.groupManager.reset(),e.connections.length=0})}},{key:"destroy",value:function(){this.reset(),this.unbind(),this.sourceSelectors.length=0,this.targetSelectors.length=0,this._connectionTypes.clear(),this._endpointTypes.clear()}},{key:"getEndpoints",value:function(e){return this.endpointsByElement[this.getId(e)]||[]}},{key:"getEndpoint",value:function(e){return this.endpointsByUUID.get(e)}},{key:"setEndpointUuid",value:function(e,n){e.uuid&&this.endpointsByUUID.delete(e.uuid),e.uuid=n,this.endpointsByUUID.set(n,e)}},{key:"connect",value:function(e,n){try{var o=this._prepareConnectionParams(e,n),a=this._newConnection(o);return this._finaliseConnection(a,o),a}catch(l){Pe(l);return}}},{key:"_prepareConnectionParams",value:function(e,n){var o=U({},e);n&&U(o,n);var a=o;if(a.source&&a.source.endpoint&&(a.sourceEndpoint=a.source),a.target&&a.target.endpoint&&(a.targetEndpoint=a.target),e.uuids&&(a.sourceEndpoint=this.getEndpoint(e.uuids[0]),a.targetEndpoint=this.getEndpoint(e.uuids[1])),a.sourceEndpoint!=null){if(a.sourceEndpoint.isFull())throw am;if(a.type||(a.type=a.sourceEndpoint.edgeType),a.sourceEndpoint.connectorOverlays){a.overlays=a.overlays||[];for(var l=0,u=a.sourceEndpoint.connectorOverlays.length;l<u;l++)a.overlays.push(a.sourceEndpoint.connectorOverlays[l])}a.sourceEndpoint.scope&&(a.scope=a.sourceEndpoint.scope)}else if(a.source==null)throw um;if(a.targetEndpoint!=null){if(a.targetEndpoint.isFull())throw lm}else if(a.target==null)throw cm;if(a.sourceEndpoint&&a.targetEndpoint&&!Z0(a.sourceEndpoint,a.targetEndpoint))throw"Cannot establish connection: scopes do not match";return a}},{key:"_newConnection",value:function(e){e.id="con_"+this._idstamp();var n=new ti(this,e);return Si(n,this._managedElements[n.sourceId],this._managedElements[n.targetId]),this._paintConnection(n),n}},{key:"_finaliseConnection",value:function(e,n,o){n=n||{},e.suspendedEndpoint||this.connections.push(e),e.pending=null,e.endpoints[0].isTemporarySource=!1,this.repaint(e.source);var a={connection:e,source:e.source,target:e.target,sourceId:e.sourceId,targetId:e.targetId,sourceEndpoint:e.endpoints[0],targetEndpoint:e.endpoints[1]};this.fire(bh,a,o),!n.doNotFireConnectionEvent&&n.fireEvent!==!1&&this.fire(Eh,a,o)}},{key:"removeAllEndpoints",value:function(e,n){var o=this,a=function(u){var c=o.getId(u),h=o.endpointsByElement[c],d,p;if(h)for(d=0,p=h.length;d<p;d++)o.deleteEndpoint(h[d]);delete o.endpointsByElement[c]};return n&&this._getAssociatedElements(e).map(a),a(e),this}},{key:"_createSourceDefinition",value:function(e,n){var o=U({},n);U(o,e),o.edgeType=o.edgeType||ss;var a=this._deriveEndpointAndAnchorSpec(o.edgeType);o.endpoint=o.endpoint||a.endpoints[0],o.anchor=o.anchor||a.anchors[0];var l=o.maxConnections||-1,u={def:U({},o),uniqueEndpoint:o.uniqueEndpoint,maxConnections:l,enabled:!0,endpoint:null};return u}},{key:"addSourceSelector",value:function(e,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=this._createSourceDefinition(n),l=new uu(e,a,o);return this.sourceSelectors.push(l),l}},{key:"removeSourceSelector",value:function(e){we(this.sourceSelectors,function(n){return n===e})}},{key:"removeTargetSelector",value:function(e){we(this.targetSelectors,function(n){return n===e})}},{key:"addTargetSelector",value:function(e,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=this._createTargetDefinition(n),l=new uu(e,a,o);return this.targetSelectors.push(l),l}},{key:"_createTargetDefinition",value:function(e,n){var o=U({},n);U(o,e),o.edgeType=o.edgeType||ss;var a=o.maxConnections||-1,l={def:U({},o),uniqueEndpoint:o.uniqueEndpoint,maxConnections:a,enabled:!0,endpoint:null};return l}},{key:"show",value:function(e,n){return this._setVisible(e,Mo,n)}},{key:"hide",value:function(e,n){return this._setVisible(e,or,n)}},{key:"_setVisible",value:function(e,n,o){var a=n===Mo,l=null;o&&(l=function(h){h.setVisible(a,!0,!0)});var u=this.getId(e);return this._operation(e,function(c){if(a&&o){var h=c.sourceId===u?1:0;c.endpoints[h].isVisible()&&c.setVisible(!0)}else c.setVisible(a)},l),this}},{key:"toggleVisible",value:function(e,n){var o=null;n&&(o=function(l){var u=l.isVisible();l.setVisible(!u)}),this._operation(e,function(a){var l=a.isVisible();a.setVisible(!l)},o)}},{key:"_operation",value:function(e,n,o){var a=this.getId(e),l=this.endpointsByElement[a];if(l&&l.length)for(var u=0,c=l.length;u<c;u++){for(var h=0,d=l[u].connections.length;h<d;h++){var p=n(l[u].connections[h]);if(p)return}o&&o(l[u])}}},{key:"registerConnectionType",value:function(e,n){if(this._connectionTypes.set(e,U({},n)),n.overlays){for(var o={},a=0;a<n.overlays.length;a++){var l=Go(n.overlays[a]);o[l.options.id]=l}this._connectionTypes.get(e).overlays=o}}},{key:"registerConnectionTypes",value:function(e){for(var n in e)this.registerConnectionType(n,e[n])}},{key:"registerEndpointType",value:function(e,n){if(this._endpointTypes.set(e,U({},n)),n.overlays){for(var o={},a=0;a<n.overlays.length;a++){var l=Go(n.overlays[a]);o[l.options.id]=l}this._endpointTypes.get(e).overlays=o}}},{key:"registerEndpointTypes",value:function(e){for(var n in e)this.registerEndpointType(n,e[n])}},{key:"getType",value:function(e,n){return n==="connection"?this.getConnectionType(e):this.getEndpointType(e)}},{key:"getConnectionType",value:function(e){return this._connectionTypes.get(e)}},{key:"getEndpointType",value:function(e){return this._endpointTypes.get(e)}},{key:"importDefaults",value:function(e){for(var n in e)this.defaults[n]=e[n];return this.defaults[jn]!=null&&(this.defaults[jn].strokeWidth=this.defaults[jn].strokeWidth||2),e.container&&this.setContainer(e.container),this}},{key:"restoreDefaults",value:function(){return this.defaults=U({},this._initialDefaults),this}},{key:"getManagedElements",value:function(){return this._managedElements}},{key:"proxyConnection",value:function(e,n,o,a,l){var u=e.proxies[n]!=null,c,h=u?e.proxies[n].originalEp.elementId:e.endpoints[n].elementId,d=u?e.proxies[n].originalEp:e.endpoints[n],p=this.getId(o);e.proxies[n]?e.proxies[n].ep.elementId===p?c=e.proxies[n].ep:(e.proxies[n].ep.detachFromConnection(e,n),c=this._internal_newEndpoint({element:o,endpoint:a(e,n),anchor:l(e,n),parameters:{isProxyEndpoint:!0}})):c=this._internal_newEndpoint({element:o,endpoint:a(e,n),anchor:l(e,n),parameters:{isProxyEndpoint:!0}}),c.deleteOnEmpty=!0,e.proxies[n]={ep:c,originalEp:d},this.sourceOrTargetChanged(h,p,e,o,n),d.detachFromConnection(e,null,!0),c.connections=[e],e.endpoints[n]=c,d.proxiedBy=c,d.setVisible(!1),e.setVisible(!0),this.revalidate(o)}},{key:"unproxyConnection",value:function(e,n){if(!(e.proxies==null||e.proxies[n]==null)){var o=e.proxies[n].originalEp.element,a=e.proxies[n].originalEp.elementId,l=e.proxies[n].ep.elementId;e.endpoints[n]=e.proxies[n].originalEp,delete e.proxies[n].originalEp.proxiedBy,this.sourceOrTargetChanged(l,a,e,o,n),e.proxies[n].ep.detachFromConnection(e,null),e.proxies[n].originalEp.addConnection(e),e.isVisible()&&e.proxies[n].originalEp.setVisible(!0),e.proxies[n]=null,tn(e.proxies,function(u){return u!=null})===-1&&(e.proxies.length=0)}}},{key:"sourceOrTargetChanged",value:function(e,n,o,a,l){e!==n&&(l===0?(o.sourceId=n,o.source=a):l===1&&(o.targetId=n,o.target=a),Pi(o,this._managedElements[e]),Si(o,this._managedElements[n]))}},{key:"getGroup",value:function(e){return this.groupManager.getGroup(e)}},{key:"getGroupFor",value:function(e){return this.groupManager.getGroupFor(e)}},{key:"addGroup",value:function(e){return this.groupManager.addGroup(e)}},{key:"addToGroup",value:function(e){for(var n,o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return(n=this.groupManager).addToGroup.apply(n,[e,!1].concat(a))}},{key:"collapseGroup",value:function(e){this.groupManager.collapseGroup(e)}},{key:"expandGroup",value:function(e){this.groupManager.expandGroup(e)}},{key:"toggleGroup",value:function(e){this.groupManager.toggleGroup(e)}},{key:"removeGroup",value:function(e,n,o,a){return this.groupManager.removeGroup(e,n,o,a)}},{key:"removeAllGroups",value:function(e,n){this.groupManager.removeAllGroups(e,n,!1)}},{key:"removeFromGroup",value:function(e,n,o){this.groupManager.removeFromGroup(e,o,n),this._appendElement(n,this.getContainer()),this.updateOffset({recalc:!0,elId:this.getId(n)})}},{key:"_paintEndpoint",value:function(e,n){function o(E){var S=0;if(n.elementWithPrecedence!=null){for(var D=0;D<E.connections.length;D++)if(E.connections[D].sourceId===n.elementWithPrecedence||E.connections[D].targetId===n.elementWithPrecedence){S=D;break}}return E.connections[S]}n=n||{};var a=n.timestamp,l=n.recalc!==!1;if(!a||e.timestamp!==a){var u=this.viewport.getPosition(e.elementId),c=n.offset?{x:n.offset.x,y:n.offset.y}:{x:u.x,y:u.y};if(c!=null){var h=n.anchorLoc;if(h==null){var d={xy:c,wh:u,element:e,timestamp:a};if(l&&this.router.isDynamicAnchor(e)&&e.connections.length>0){var p=o(e),v=p.endpoints[0]===e?1:0,y=v===0?p.sourceId:p.targetId,m=this.viewport.getPosition(y);d.index=v===0?1:0,d.connection=p,d.txy=m,d.twh=m,d.tElement=p.endpoints[v],d.tRotation=this._getRotations(y)}else e.connections.length>0&&(d.connection=e.connections[0]);d.rotation=this._getRotations(e.elementId),h=this.router.computeAnchorLocation(e._anchor,d)}e.endpoint.compute(h,this.router.getEndpointOrientation(e),e.paintStyleInUse),this.renderEndpoint(e,e.paintStyleInUse),e.timestamp=a;for(var b in e.overlays)if(e.overlays.hasOwnProperty(b)){var C=e.overlays[b];C.isVisible()&&(e.overlayPlacements[b]=this.drawOverlay(C,e.endpoint,e.paintStyleInUse,e.getAbsoluteOverlayPosition(C)),this._paintOverlay(C,e.overlayPlacements[b],{xmin:0,ymin:0}))}}}}},{key:"_paintConnection",value:function(e,n){if(!this._suspendDrawing&&e.visible!==!1){n=n||{};var o=n.timestamp;if(o!=null&&o===e.lastPaintedAt)return;if(o==null||o!==e.lastPaintedAt){this.router.computePath(e,o);var a={xmin:1/0,ymin:1/0,xmax:-1/0,ymax:-1/0};for(var l in e.overlays)if(e.overlays.hasOwnProperty(l)){var u=e.overlays[l];u.isVisible()&&(e.overlayPlacements[l]=this.drawOverlay(u,e.connector,e.paintStyleInUse,e.getAbsoluteOverlayPosition(u)),a.xmin=Math.min(a.xmin,e.overlayPlacements[l].xmin),a.xmax=Math.max(a.xmax,e.overlayPlacements[l].xmax),a.ymin=Math.min(a.ymin,e.overlayPlacements[l].ymin),a.ymax=Math.max(a.ymax,e.overlayPlacements[l].ymax))}var c=parseFloat(""+e.paintStyleInUse.strokeWidth||"1")/2,h=parseFloat(""+e.paintStyleInUse.strokeWidth||"0"),d={xmin:Math.min(e.connector.bounds.xmin-(c+h),a.xmin),ymin:Math.min(e.connector.bounds.ymin-(c+h),a.ymin),xmax:Math.max(e.connector.bounds.xmax+(c+h),a.xmax),ymax:Math.max(e.connector.bounds.ymax+(c+h),a.ymax)};this.paintConnector(e.connector,e.paintStyleInUse,d);for(var p in e.overlays)if(e.overlays.hasOwnProperty(p)){var v=e.overlays[p];v.isVisible()&&this._paintOverlay(v,e.overlayPlacements[p],d)}}e.lastPaintedAt=o}}},{key:"_refreshEndpoint",value:function(e){e._anchor.isFloating||(e.connections.length>0?this.addEndpointClass(e,this.endpointConnectedClass):this.removeEndpointClass(e,this.endpointConnectedClass),e.isFull()?this.addEndpointClass(e,this.endpointFullClass):this.removeEndpointClass(e,this.endpointFullClass))}},{key:"_makeConnector",value:function(e,n,o){return ai.get(e,n,o)}},{key:"addOverlay",value:function(e,n,o){if(e.addOverlay(n),!o){var a=e instanceof Xn?e.element:e.source;this.revalidate(a)}}},{key:"removeOverlay",value:function(e,n){e.removeOverlay(n);var o=e instanceof Xn?e.element:e.source;this.revalidate(o)}},{key:"setOutlineColor",value:function(e,n){e.paintStyleInUse.outlineStroke=n,this._paintConnection(e)}},{key:"setOutlineWidth",value:function(e,n){e.paintStyleInUse.outlineWidth=n,this._paintConnection(e)}},{key:"setColor",value:function(e,n){e.paintStyleInUse.stroke=n,this._paintConnection(e)}},{key:"setLineWidth",value:function(e,n){e.paintStyleInUse.strokeWidth=n,this._paintConnection(e)}},{key:"setLineStyle",value:function(e,n){n.lineWidth!=null&&(e.paintStyleInUse.strokeWidth=n.lineWidth),n.outlineWidth!=null&&(e.paintStyleInUse.outlineWidth=n.outlineWidth),n.color!=null&&(e.paintStyleInUse.stroke=n.color),n.outlineColor!=null&&(e.paintStyleInUse.outlineStroke=n.outlineColor),this._paintConnection(e)}},{key:"getPathData",value:function(e){for(var n="",o=0;o<e.segments.length;o++)n+=e.segments[o].getPath(o===0),n+=" ";return n}}]),r}(oi),ef={};function Ra(t,s){ef[t]=s}function Tu(t,s,r){var i=s,e=Kn(s.getBoundingClientRect)!==Ih?s.getBoundingClientRect():{left:0,top:0,width:0,height:0},n=document.body,o=document.documentElement,a=window.pageYOffset||o.scrollTop||n.scrollTop,l=window.pageXOffset||o.scrollLeft||n.scrollLeft,u=o.clientTop||n.clientTop||0,c=o.clientLeft||n.clientLeft||0,h=0,d=0,p=e.top+a-u+h*r,v=e.left+l-c+d*r,y=os(t),m=e.width||i.offsetWidth*r,b=e.height||i.offsetHeight*r,C=(y.x-v)/m,E=(y.y-p)/b;return{x:C,y:E}}function Hn(t){return jo(t)||Bo(t)||Ho(t)}function Au(t,s){t.canvas&&(t.canvas.style.display=s?"block":"none")}function Ou(t){t.canvas&&t.canvas.parentNode.removeChild(t.canvas),delete t.canvas}function Or(t){return t.canvas}function ut(t){return La.getElement(t)}function hn(t){return La.getElement(t,t.component,function(s){var r=t.create(s);return t.instance.addClass(r,t.instance.overlayClass),r})}function nE(t,s,r,i){var e=t.x,n=t.y;return s._jsPlumbParentGroup&&s._jsPlumbParentGroup.constrain&&(e=Math.max(t.x,0),n=Math.max(t.y,0),e=Math.min(e,r.w-i.w),n=Math.min(n,r.h-i.h)),{x:e,y:n}}var rE=function(t){oe(r,t);var s=ae(r);function r(i,e){var n;if(H(this,r),n=s.call(this,i,e),n._instanceIndex=i,f(g(n),"containerType",null),f(g(n),"dragSelection",void 0),f(g(n),"dragManager",void 0),f(g(n),"_connectorClick",void 0),f(g(n),"_connectorDblClick",void 0),f(g(n),"_connectorTap",void 0),f(g(n),"_connectorDblTap",void 0),f(g(n),"_endpointClick",void 0),f(g(n),"_endpointDblClick",void 0),f(g(n),"_overlayClick",void 0),f(g(n),"_overlayDblClick",void 0),f(g(n),"_overlayTap",void 0),f(g(n),"_overlayDblTap",void 0),f(g(n),"_connectorMouseover",void 0),f(g(n),"_connectorMouseout",void 0),f(g(n),"_endpointMouseover",void 0),f(g(n),"_endpointMouseout",void 0),f(g(n),"_connectorContextmenu",void 0),f(g(n),"_connectorMousedown",void 0),f(g(n),"_connectorMouseup",void 0),f(g(n),"_endpointMousedown",void 0),f(g(n),"_endpointMouseup",void 0),f(g(n),"_overlayMouseover",void 0),f(g(n),"_overlayMouseout",void 0),f(g(n),"_elementClick",void 0),f(g(n),"_elementTap",void 0),f(g(n),"_elementDblTap",void 0),f(g(n),"_elementMouseenter",void 0),f(g(n),"_elementMouseexit",void 0),f(g(n),"_elementMousemove",void 0),f(g(n),"_elementMouseup",void 0),f(g(n),"_elementMousedown",void 0),f(g(n),"_elementContextmenu",void 0),f(g(n),"_resizeObserver",void 0),f(g(n),"eventManager",void 0),f(g(n),"draggingClass","jtk-dragging"),f(g(n),"elementDraggingClass","jtk-element-dragging"),f(g(n),"hoverClass","jtk-hover"),f(g(n),"sourceElementDraggingClass","jtk-source-element-dragging"),f(g(n),"targetElementDraggingClass","jtk-target-element-dragging"),f(g(n),"hoverSourceClass","jtk-source-hover"),f(g(n),"hoverTargetClass","jtk-target-hover"),f(g(n),"dragSelectClass","jtk-drag-select"),f(g(n),"managedElementsSelector",void 0),f(g(n),"elementsDraggable",void 0),f(g(n),"elementDragHandler",void 0),f(g(n),"groupDragOptions",void 0),f(g(n),"elementDragOptions",void 0),f(g(n),"svg",{node:function(a,l){return Gt(a,l)},attr:function(a,l){return Ft(a,l)},pos:function(a){return Dh(a)}}),e=e||{},n.containerType=wo(n.getContainer()),n.elementsDraggable=e&&e.elementsDraggable!==!1,n.managedElementsSelector=e&&e.managedElementsSelector||ge,n.eventManager=new Ta,n.dragSelection=new F_(g(n)),n.dragManager=new V_(g(n),n.dragSelection),n.dragManager.addHandler(new hu(g(n))),n.groupDragOptions={constrainFunction:nE},n.dragManager.addHandler(new fu(g(n),n.dragSelection),n.groupDragOptions),n.elementDragHandler=new Fo(g(n),n.dragSelection),n.elementDragOptions=e&&e.dragOptions||{},n.dragManager.addHandler(n.elementDragHandler,n.elementDragOptions),e&&e.dragOptions&&e.dragOptions.filter&&n.dragManager.addFilter(e.dragOptions.filter),n._createEventListeners(),n._attachEventDelegates(),e.resizeObserver!==!1)try{n._resizeObserver=new ResizeObserver(function(o){var a=o.filter(function(l){var u=n.getAttribute(l.target,zt);if(u!=null){var c=n.viewport._elementMap.get(u);return c?c.w!==l.contentRect.width||c.h!==l.contentRect.height:!1}else return!1});a.forEach(function(l){return n.revalidate(l.target)})})}catch{Pe("WARN: ResizeObserver could not be attached.")}return n}return z(r,[{key:"fireOverlayMethod",value:function(e,n,o){var a=e.component instanceof ti?Ot:Bt,l=ce(a,n);o._jsPlumbOverlay=e,e.fire(n,{e:o,overlay:e}),this.fire(l,e.component,o)}},{key:"addDragFilter",value:function(e,n){this.dragManager.addFilter(e,n)}},{key:"removeDragFilter",value:function(e){this.dragManager.removeFilter(e)}},{key:"setDragGrid",value:function(e){this.dragManager.setOption(this.elementDragHandler,{grid:e})}},{key:"setDragConstrainFunction",value:function(e){this.dragManager.setOption(this.elementDragHandler,{constrainFunction:e})}},{key:"_removeElement",value:function(e){e.parentNode&&e.parentNode.removeChild(e)}},{key:"_appendElement",value:function(e,n){n&&n.appendChild(e)}},{key:"_appendElementToGroup",value:function(e,n){this.getGroupContentArea(e).appendChild(n)}},{key:"_appendElementToContainer",value:function(e){this._appendElement(e,this.getContainer())}},{key:"_getAssociatedElements",value:function(e){var n=[];if(e.nodeType!==3&&e.nodeType!==8){var o=e.querySelectorAll(ge);Array.prototype.push.apply(n,o)}return n.filter(function(a){return a.nodeType!==3&&a.nodeType!==8})}},{key:"shouldFireEvent",value:function(e,n,o){return!0}},{key:"getClass",value:function(e){return Oy(e)}},{key:"addClass",value:function(e,n){pn(e,n)}},{key:"hasClass",value:function(e,n){return wy(e,n)}},{key:"removeClass",value:function(e,n){Oo(e,n)}},{key:"toggleClass",value:function(e,n){Dy(e,n)}},{key:"setAttribute",value:function(e,n,o){e.setAttribute(n,o)}},{key:"getAttribute",value:function(e,n){return e.getAttribute(n)}},{key:"setAttributes",value:function(e,n){for(var o in n)e.setAttribute(o,n[o])}},{key:"removeAttribute",value:function(e,n){e.removeAttribute&&e.removeAttribute(n)}},{key:"on",value:function(e,n,o,a){var l=this,u=function(h){a==null?l.eventManager.on(h,n,o):l.eventManager.on(h,n,o,a)};return Jr(e)?X(e,function(c){return u(c)}):u(e),this}},{key:"off",value:function(e,n,o){var a=this;return Jr(e)?X(e,function(l){return a.eventManager.off(l,n,o)}):this.eventManager.off(e,n,o),this}},{key:"trigger",value:function(e,n,o,a,l){this.eventManager.trigger(e,n,o,a,l)}},{key:"getOffsetRelativeToRoot",value:function(e){return Vn(e)}},{key:"getOffset",value:function(e){for(var n=e,o=this.getContainer(),a=this.getPosition(n),l=e!==o&&n.offsetParent!==o?n.offsetParent:null,u=function(p){p!=null&&p!==document.body&&(p.scrollTop>0||p.scrollLeft>0)&&(a.x-=p.scrollLeft,a.y-=p.scrollTop)};l!=null;)a.x+=l.offsetLeft,a.y+=l.offsetTop,u(l),l=l.offsetParent===o?null:l.offsetParent;if(o!=null&&(o.scrollTop>0||o.scrollLeft>0)){var c=n.offsetParent!=null?this.getStyle(n.offsetParent,ql):Fy,h=this.getStyle(n,ql);h!==Zr&&h!==Bl&&c!==Zr&&c!==Bl&&(a.x-=o.scrollLeft,a.y-=o.scrollTop)}return a}},{key:"getSize",value:function(e){var n=e;if(n.offsetWidth!=null)return My(e);if(n.width&&n.width.baseVal)return Iy(n)}},{key:"getPosition",value:function(e){var n=e;if(n.offsetLeft!=null)return{x:parseFloat(n.offsetLeft),y:parseFloat(n.offsetTop)};if(n.x&&n.x.baseVal)return Ly(n)}},{key:"getStyle",value:function(e,n){return Kn(window.getComputedStyle)!==Ih?getComputedStyle(e,null).getPropertyValue(n):e.currentStyle[n]}},{key:"getGroupContentArea",value:function(e){var n=this.getSelector(e.el,zm);return n&&n.length>0?n[0]:e.el}},{key:"getSelector",value:function(e,n){var o=null;if(arguments.length===1){if(!_e(e)){var a=document.createDocumentFragment();return a.appendChild(e),gi(a.childNodes)}o=gi(document.querySelectorAll(e))}else o=gi(e.querySelectorAll(n));return o}},{key:"setPosition",value:function(e,n){var o=e;o.style.left=n.x+"px",o.style.top=n.y+"px"}},{key:"setDraggable",value:function(e,n){n?this.removeAttribute(e,Gi):this.setAttribute(e,Gi,Lh)}},{key:"isDraggable",value:function(e){var n=this.getAttribute(e,Gi);return n==null||n===Yn}},{key:"toggleDraggable",value:function(e){var n=this.isDraggable(e);return this.setDraggable(e,!n),!n}},{key:"_createEventListeners",value:function(){var e=function(b,C){if(!C.defaultPrevented&&C._jsPlumbOverlay==null){var E=Mt(ze(C),lt,this.getContainer(),!0);this.fire(b,E.jtk.connector.connection,C)}};this._connectorClick=e.bind(this,Gm),this._connectorDblClick=e.bind(this,jm),this._connectorTap=e.bind(this,$m),this._connectorDblTap=e.bind(this,Bm);var n=function(b,C){var E=ze(C).parentNode;if(E.jtk&&E.jtk.connector){var S=E.jtk.connector,D=S.connection;this.setConnectorHover(S,b),b?(this.addClass(D.source,this.hoverSourceClass),this.addClass(D.target,this.hoverTargetClass)):(this.removeClass(D.source,this.hoverSourceClass),this.removeClass(D.target,this.hoverTargetClass)),this.fire(b?Um:Hm,E.jtk.connector.connection,C)}};this._connectorMouseover=n.bind(this,!0),this._connectorMouseout=n.bind(this,!1);var o=function(b,C){var E=ze(C).parentNode;E.jtk&&E.jtk.connector&&this.fire(b?Vm:Ym,E.jtk.connector.connection,C)};this._connectorMouseup=o.bind(this,!0),this._connectorMousedown=o.bind(this,!1),this._connectorContextmenu=function(m){var b=ze(m).parentNode;b.jtk&&b.jtk.connector&&this.fire(Xm,b.jtk.connector.connection,m)}.bind(this);var a=function(b,C,E){!C.defaultPrevented&&C._jsPlumbOverlay==null&&this.fire(b,E.jtk.endpoint,C)};this._endpointClick=a.bind(this,Mm),this._endpointDblClick=a.bind(this,Im);var l=function(b,C){var E=ze(C);E.jtk&&E.jtk.endpoint&&(this.setEndpointHover(E.jtk.endpoint,b),this.fire(b?Nm:Lm,E.jtk.endpoint,C))};this._endpointMouseover=l.bind(this,!0),this._endpointMouseout=l.bind(this,!1);var u=function(b,C){var E=ze(C);E.jtk&&E.jtk.endpoint&&this.fire(b?Rm:Fm,E.jtk.endpoint,C)};this._endpointMouseup=u.bind(this,!0),this._endpointMousedown=u.bind(this,!1);var c=function(m,b){var C=Mt(ze(b),wt,this.getContainer(),!0),E=C.jtk.overlay;E&&this.fireOverlayMethod(E,m,b)}.bind(this);this._overlayClick=c.bind(this,Be),this._overlayDblClick=c.bind(this,qe),this._overlayTap=c.bind(this,nt),this._overlayDblTap=c.bind(this,Qe);var h=function(b,C){var E=Mt(ze(C),wt,this.getContainer(),!0),S=E.jtk.overlay;S&&this.setOverlayHover(S,b)};this._overlayMouseover=h.bind(this,!0),this._overlayMouseout=h.bind(this,!1);var d=function(b,C,E){C.defaultPrevented||this.fire(C.detail===1?$l:Pm,E,C)};this._elementClick=d.bind(this,$l);var p=function(b,C,E){C.defaultPrevented||this.fire(zl,E,C)};this._elementTap=p.bind(this,zl);var v=function(b,C,E){C.defaultPrevented||this.fire(Wl,E,C)};this._elementDblTap=v.bind(this,Wl);var y=function(b,C){this.fire(b?Tm:km,ze(C),C)};this._elementMouseenter=y.bind(this,!0),this._elementMouseexit=y.bind(this,!1),this._elementMousemove=function(m){this.fire(Am,ze(m),m)}.bind(this),this._elementMouseup=function(m){this.fire(Om,ze(m),m)}.bind(this),this._elementMousedown=function(m){this.fire(wm,ze(m),m)}.bind(this),this._elementContextmenu=function(m){this.fire(Dm,ze(m),m)}.bind(this)}},{key:"_attachEventDelegates",value:function(){var e=this.getContainer();this.eventManager.on(e,Be,wt,this._overlayClick),this.eventManager.on(e,qe,wt,this._overlayDblClick),this.eventManager.on(e,nt,wt,this._overlayTap),this.eventManager.on(e,Qe,wt,this._overlayDblTap),this.eventManager.on(e,Be,lt,this._connectorClick),this.eventManager.on(e,qe,lt,this._connectorDblClick),this.eventManager.on(e,nt,lt,this._connectorTap),this.eventManager.on(e,Qe,lt,this._connectorDblTap),this.eventManager.on(e,Be,ln,this._endpointClick),this.eventManager.on(e,qe,ln,this._endpointDblClick),this.eventManager.on(e,Be,this.managedElementsSelector,this._elementClick),this.eventManager.on(e,nt,this.managedElementsSelector,this._elementTap),this.eventManager.on(e,Qe,this.managedElementsSelector,this._elementDblTap),this.eventManager.on(e,tt,lt,this._connectorMouseover),this.eventManager.on(e,et,lt,this._connectorMouseout),this.eventManager.on(e,It,lt,this._connectorContextmenu),this.eventManager.on(e,ee,lt,this._connectorMouseup),this.eventManager.on(e,Q,lt,this._connectorMousedown),this.eventManager.on(e,tt,ln,this._endpointMouseover),this.eventManager.on(e,et,ln,this._endpointMouseout),this.eventManager.on(e,ee,ln,this._endpointMouseup),this.eventManager.on(e,Q,ln,this._endpointMousedown),this.eventManager.on(e,tt,wt,this._overlayMouseover),this.eventManager.on(e,et,wt,this._overlayMouseout),this.eventManager.on(e,tt,ge,this._elementMouseenter),this.eventManager.on(e,et,ge,this._elementMouseexit),this.eventManager.on(e,Oe,ge,this._elementMousemove),this.eventManager.on(e,ee,ge,this._elementMouseup),this.eventManager.on(e,Q,ge,this._elementMousedown),this.eventManager.on(e,It,ge,this._elementContextmenu)}},{key:"_detachEventDelegates",value:function(){var e=this.getContainer();e&&(this.eventManager.off(e,Be,this._connectorClick),this.eventManager.off(e,qe,this._connectorDblClick),this.eventManager.off(e,nt,this._connectorTap),this.eventManager.off(e,Qe,this._connectorDblTap),this.eventManager.off(e,Be,this._endpointClick),this.eventManager.off(e,qe,this._endpointDblClick),this.eventManager.off(e,Be,this._overlayClick),this.eventManager.off(e,qe,this._overlayDblClick),this.eventManager.off(e,nt,this._overlayTap),this.eventManager.off(e,Qe,this._overlayDblTap),this.eventManager.off(e,Be,this._elementClick),this.eventManager.off(e,nt,this._elementTap),this.eventManager.off(e,Qe,this._elementDblTap),this.eventManager.off(e,tt,this._connectorMouseover),this.eventManager.off(e,et,this._connectorMouseout),this.eventManager.off(e,It,this._connectorContextmenu),this.eventManager.off(e,ee,this._connectorMouseup),this.eventManager.off(e,Q,this._connectorMousedown),this.eventManager.off(e,tt,this._endpointMouseover),this.eventManager.off(e,et,this._endpointMouseout),this.eventManager.off(e,ee,this._endpointMouseup),this.eventManager.off(e,Q,this._endpointMousedown),this.eventManager.off(e,tt,this._overlayMouseover),this.eventManager.off(e,et,this._overlayMouseout),this.eventManager.off(e,xa,this._elementMouseenter),this.eventManager.off(e,Sa,this._elementMouseexit),this.eventManager.off(e,Oe,this._elementMousemove),this.eventManager.off(e,ee,this._elementMouseup),this.eventManager.off(e,Q,this._elementMousedown),this.eventManager.off(e,It,this._elementContextmenu))}},{key:"setContainer",value:function(e){var n=this;if(e===document||e===document.body)throw new Error("Cannot set document or document.body as container element");this._detachEventDelegates();var o;this.dragManager!=null&&(o=this.dragManager.reset()),this.setAttribute(e,Yl,ke().replace("-",""));var a=this.getContainer();if(a!=null){a.removeAttribute(Yl);var l=gi(a.childNodes).filter(function(u){return u!=null&&(n.hasClass(u,Ea)||n.hasClass(u,Jn)||n.hasClass(u,js)||u.getAttribute&&u.getAttribute(zt)!=null)});X(l,function(u){e.appendChild(u)})}me(ye(r.prototype),"setContainer",this).call(this,e),this.containerType=wo(e),this.eventManager!=null&&this._attachEventDelegates(),this.dragManager!=null&&(this.dragManager.addHandler(new hu(this)),this.dragManager.addHandler(new fu(this,this.dragSelection),this.groupDragOptions),this.elementDragHandler=new Fo(this,this.dragSelection),this.dragManager.addHandler(this.elementDragHandler,this.elementDragOptions),o!=null&&this.dragManager.setFilters(o))}},{key:"reset",value:function(){me(ye(r.prototype),"reset",this).call(this),this._resizeObserver&&this._resizeObserver.disconnect();var e=this.getContainer(),n=e.querySelectorAll([ge,ln,lt,wt].join(","));X(n,function(o){return o.parentNode&&o.parentNode.removeChild(o)})}},{key:"destroy",value:function(){this._detachEventDelegates(),this.dragManager!=null&&this.dragManager.reset(),this.clearDragSelection(),me(ye(r.prototype),"destroy",this).call(this)}},{key:"unmanage",value:function(e,n){this._resizeObserver!=null&&this._resizeObserver.unobserve(e),this.removeFromDragSelection(e),me(ye(r.prototype),"unmanage",this).call(this,e,n)}},{key:"addToDragSelection",value:function(){for(var e=this,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];X(o,function(l){return e.dragSelection.add(l)})}},{key:"clearDragSelection",value:function(){this.dragSelection.clear()}},{key:"removeFromDragSelection",value:function(){for(var e=this,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];X(o,function(l){return e.dragSelection.remove(l)})}},{key:"toggleDragSelection",value:function(){for(var e=this,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];X(o,function(l){return e.dragSelection.toggle(l)})}},{key:"addToDragGroup",value:function(e){for(var n,o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];(n=this.elementDragHandler).addToDragGroup.apply(n,[e].concat(a))}},{key:"removeFromDragGroup",value:function(){var e;(e=this.elementDragHandler).removeFromDragGroup.apply(e,arguments)}},{key:"setDragGroupState",value:function(e){for(var n,o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];(n=this.elementDragHandler).setDragGroupState.apply(n,[e].concat(a))}},{key:"clearDragGroup",value:function(e){this.elementDragHandler.clearDragGroup(e)}},{key:"consume",value:function(e,n){Kr(e,n)}},{key:"rotate",value:function(e,n,o){var a=this.getId(e);return this._managedElements[a]?(this._managedElements[a].el.style.transform="rotate("+n+"deg)",this._managedElements[a].el.style.transformOrigin="center center",me(ye(r.prototype),"rotate",this).call(this,e,n,o)):{c:new Set,e:new Set}}},{key:"addOverlayClass",value:function(e,n){if(Vt(e))e.instance.addClass(ut(e),n);else if(Hn(e))e.instance.addClass(Rr(e),n);else if(Yt(e))e.instance.addClass(hn(e),n);else throw"Could not add class to overlay of type ["+e.type+"]"}},{key:"removeOverlayClass",value:function(e,n){if(Vt(e))e.instance.removeClass(ut(e),n);else if(Hn(e))e.instance.removeClass(Rr(e),n);else if(Yt(e))e.instance.removeClass(hn(e),n);else throw"Could not remove class from overlay of type ["+e.type+"]"}},{key:"_paintOverlay",value:function(e,n,o){if(Vt(e)){ut(e);var a=e.component.getXY();e.canvas.style.left=a.x+n.d.minx+"px",e.canvas.style.top=a.y+n.d.miny+"px"}else if(Hn(e)){var l=isNaN(n.d.cxy.x)||isNaN(n.d.cxy.y)?"M 0 0":"M"+n.d.hxy.x+","+n.d.hxy.y+" L"+n.d.tail[0].x+","+n.d.tail[0].y+" L"+n.d.cxy.x+","+n.d.cxy.y+" L"+n.d.tail[1].x+","+n.d.tail[1].y+" Z";D0(e,l,n,o)}else if(Yt(e)){hn(e);var u=e.component.getXY();e.canvas.style.left=u.x+n.d.minx+"px",e.canvas.style.top=u.y+n.d.miny+"px"}else throw"Could not paint overlay of type ["+e.type+"]"}},{key:"setOverlayVisible",value:function(e,n){var o=n?"block":"none";function a(l){l!=null&&(l.style.display=o)}Vt(e)?a(ut(e)):Yt(e)?a(hn(e)):Hn(e)&&a(e.path)}},{key:"reattachOverlay",value:function(e,n){Vt(e)?e.instance._appendElement(ut(e),this.getContainer()):Yt(e)?e.instance._appendElement(hn(e),this.getContainer()):Hn(e)&&this._appendElement(Rr(e),n.connector.canvas)}},{key:"setOverlayHover",value:function(e,n){var o;Vt(e)?o=ut(e):Yt(e)?o=hn(e):Hn(e)&&(o=Rr(e)),o!=null&&(this.hoverClass!=null&&(n?this.addClass(o,this.hoverClass):this.removeClass(o,this.hoverClass)),this.setHover(e.component,n))}},{key:"destroyOverlay",value:function(e){if(Vt(e)){var n=ut(e);n.parentNode.removeChild(n),delete e.canvas,delete e.cachedDimensions}else if(jo(e)||Bo(e)||Ho(e))M0(e);else if(Yt(e)){var o=hn(e);o.parentNode.removeChild(o),delete e.canvas,delete e.cachedDimensions}}},{key:"drawOverlay",value:function(e,n,o,a){if(Vt(e)||Yt(e)){var l=La._getDimensions(e);if(l!=null&&l.w!=null&&l.h!=null){var u={x:0,y:0};if(a)u={x:a.x,y:a.y};else if(n instanceof gr){var c=Array.isArray(e.location)?e.location:[e.location,e.location];u={x:c[0]*n.w,y:c[1]*n.h}}else{var h=e.location,d=!1;(_e(e.location)||e.location<0||e.location>1)&&(h=parseInt(""+e.location,10),d=!0),u=n.pointOnPath(h,d)}var p=u.x-l.w/2,v=u.y-l.h/2;return{component:e,d:{minx:p,miny:v,td:l,cxy:u},xmin:p,xmax:p+l.w,ymin:v,ymax:v+l.h}}else return{xmin:0,xmax:0,ymin:0,ymax:0}}else{if(jo(e)||Bo(e)||Ho(e))return e.draw(n,o,a);throw"Could not draw overlay of type ["+e.type+"]"}}},{key:"updateLabel",value:function(e){if(xn(e.label)){var n=e.label(this);n!=null?ut(e).innerText=n:ut(e).innerText=""}else e.labelText==null&&(e.labelText=e.label,e.labelText!=null?ut(e).innerText=e.labelText:ut(e).innerText="")}},{key:"setHover",value:function(e,n){e._hover=n,e instanceof Xn&&e.endpoint!=null?this.setEndpointHover(e,n,-1):e instanceof ti&&e.connector!=null&&this.setConnectorHover(e.connector,n)}},{key:"paintConnector",value:function(e,n,o){I0(this,e,n,o)}},{key:"setConnectorHover",value:function(e,n,o){if(n===!1||!this.currentlyDragging&&!this.isHoverSuspended()){var a=e.canvas;a!=null&&(e.hoverClass!=null&&(n?this.addClass(a,e.hoverClass):this.removeClass(a,e.hoverClass)),n?this.addClass(a,this.hoverClass):this.removeClass(a,this.hoverClass)),e.connection.hoverPaintStyle!=null&&(e.connection.paintStyleInUse=n?e.connection.hoverPaintStyle:e.connection.paintStyle,this._suspendDrawing||this._paintConnection(e.connection)),e.connection.endpoints[0]!==o&&this.setEndpointHover(e.connection.endpoints[0],n,0,!0),e.connection.endpoints[1]!==o&&this.setEndpointHover(e.connection.endpoints[1],n,1,!0)}}},{key:"destroyConnector",value:function(e){e.connector!=null&&Ou(e.connector)}},{key:"addConnectorClass",value:function(e,n){e.canvas&&this.addClass(e.canvas,n)}},{key:"removeConnectorClass",value:function(e,n){e.canvas&&this.removeClass(e.canvas,n)}},{key:"getConnectorClass",value:function(e){return e.canvas?e.canvas.className.baseVal:""}},{key:"setConnectorVisible",value:function(e,n){Au(e,n)}},{key:"applyConnectorType",value:function(e,n){if(e.canvas&&n.cssClass){var o=Array.isArray(n.cssClass)?n.cssClass:[n.cssClass];this.addClass(e.canvas,o.join(" "))}}},{key:"addEndpointClass",value:function(e,n){var o=Or(e.endpoint);o!=null&&this.addClass(o,n)}},{key:"applyEndpointType",value:function(e,n){if(n.cssClass){var o=Or(e.endpoint);if(o){var a=Array.isArray(n.cssClass)?n.cssClass:[n.cssClass];this.addClass(o,a.join(" "))}}}},{key:"destroyEndpoint",value:function(e){var n=this.endpointAnchorClassPrefix+(e.currentAnchorClass?"-"+e.currentAnchorClass:"");this.removeClass(e.element,n),Ou(e.endpoint)}},{key:"renderEndpoint",value:function(e,n){var o=ef[e.endpoint.type];o!=null?N0.paint(e.endpoint,o,n):Pe("jsPlumb: no endpoint renderer found for type ["+e.endpoint.type+"]")}},{key:"removeEndpointClass",value:function(e,n){var o=Or(e.endpoint);o!=null&&this.removeClass(o,n)}},{key:"getEndpointClass",value:function(e){var n=Or(e.endpoint);return n!=null?n.className:""}},{key:"setEndpointHover",value:function(e,n,o,a){if(e!=null&&(n===!1||!this.currentlyDragging&&!this.isHoverSuspended())){var l=Or(e.endpoint);if(l!=null&&(e.hoverClass!=null&&(n?this.addClass(l,e.hoverClass):this.removeClass(l,e.hoverClass)),o===0||o===1)){var u=o===0?this.hoverSourceClass:this.hoverTargetClass;n?this.addClass(l,u):this.removeClass(l,u)}if(e.hoverPaintStyle!=null&&(e.paintStyleInUse=n?e.hoverPaintStyle:e.paintStyle,this._suspendDrawing||this.renderEndpoint(e,e.paintStyleInUse)),!a)for(var c=0;c<e.connections.length;c++)this.setConnectorHover(e.connections[c].connector,n,e)}}},{key:"setEndpointVisible",value:function(e,n){Au(e.endpoint,n)}},{key:"setGroupVisible",value:function(e,n){for(var o=e.el.querySelectorAll(ge),a=0;a<o.length;a++)n?this.show(o[a],!0):this.hide(o[a],!0)}},{key:"deleteConnection",value:function(e,n){return e!=null&&e.deleted!==!0?(e.endpoints[0].deleted!==!0&&this.setEndpointHover(e.endpoints[0],!1,0,!0),e.endpoints[1].deleted!==!0&&this.setEndpointHover(e.endpoints[1],!1,1,!0),me(ye(r.prototype),"deleteConnection",this).call(this,e,n)):!1}},{key:"addSourceSelector",value:function(e,n,o){return this.addDragFilter(e),me(ye(r.prototype),"addSourceSelector",this).call(this,e,n,o)}},{key:"removeSourceSelector",value:function(e){this.removeDragFilter(e.selector),me(ye(r.prototype),"removeSourceSelector",this).call(this,e)}},{key:"manage",value:function(e,n,o){if(this.containerType===Pn.SVG&&!Ny(e))throw new Error("ERROR: cannot manage non-svg element when container is an SVG element.");var a=me(ye(r.prototype),"manage",this).call(this,e,n,o);return a!=null&&this._resizeObserver!=null&&this._resizeObserver.observe(a.el),a}}]),r}(tE),iE="circle",sE=function(){Ra(hr.type,{makeNode:function(r,i){return Gt(iE,{cx:r.w/2,cy:r.h/2,r:r.radius})},updateNode:function(r,i){Ft(i,{cx:""+r.w/2,cy:""+r.h/2,r:""+r.radius})}})},ps=function(t){oe(r,t);var s=ae(r);function r(i,e){var n;return H(this,r),n=s.call(this,i,e),f(g(n),"width",void 0),f(g(n),"height",void 0),f(g(n),"type",r.type),e=e||{},n.width=e.width||10,n.height=e.height||10,n}return z(r,null,[{key:"_getParams",value:function(e){return{width:e.width,height:e.height}}}]),r}(gr);f(ps,"type","Rectangle");var oE={type:ps.type,cls:ps,compute:function(s,r,i,e){var n=e.width||s.width,o=e.height||s.height,a=r.curX-n/2,l=r.curY-o/2;return s.x=a,s.y=l,s.w=n,s.h=o,[a,l,n,o]},getParams:function(s){return{width:s.width,height:s.height}}},aE="rect",lE=function(){Ra(ps.type,{makeNode:function(r,i){return Gt(aE,{width:r.w,height:r.h})},updateNode:function(r,i){Ft(i,{width:r.w,height:r.h})}})},vs=function(t){oe(r,t);var s=ae(r);function r(i,e){var n;return H(this,r),n=s.call(this,i,e),f(g(n),"type",r.type),n}return r}(gr);f(vs,"type","Blank");var uE={type:vs.type,cls:vs,compute:function(s,r,i,e){return s.x=r.curX,s.y=r.curY,s.w=10,s.h=0,[r.curX,r.curY,10,0]},getParams:function(s){return{}}},wu={width:10,height:0,fill:"transparent",stroke:"transparent"},cE=function(){Ra(vs.type,{makeNode:function(r,i){return Gt("rect",wu)},updateNode:function(r,i){Ft(i,wu)}})};sE();cE();lE();var Et;(function(t){t[t.top=0]="top",t[t.bottom=1]="bottom"})(Et||(Et={}));var Fa=new Map;Fa.set(Et.top,[kt.TopRight,kt.TopLeft]);Fa.set(Et.bottom,[kt.BottomRight,kt.BottomLeft]);var hE={deriveAnchor:function(s,r,i,e){return Fa.get(s)[r]}},Ga="jtk-scrollable-list",fE=Gs(Ga),Du="scroll";(function(){function t(s,r){var i=this;H(this,t),this.instance=s,f(this,"options",void 0),f(this,"count",void 0),f(this,"lists",void 0),this.count=0,this.lists={},this.options=r||{},this.instance.bind(Sh,function(e){for(var n=i.instance.getSelector(e.el,fE),o=0;o<n.length;o++)i.addList(n[o])}),this.instance.bind(kh,function(e){i.removeList(e.el)}),this.instance.bind(Eh,function(e,n){if(n==null){var o=i.findParentList(e.target);o!=null&&o.newConnection(e.connection,e.target,1);var a=i.findParentList(e.source);a!=null&&a.newConnection(e.connection,e.source,0)}}),this.instance.bind(Ah,function(e){var n=e.dropEndpoint.element,o=i.findParentList(n);return o==null||n.offsetTop>=o.domElement.scrollTop&&n.offsetTop+n.offsetHeight<=o.domElement.scrollTop+o.domElement.offsetHeight})}return z(t,[{key:"addList",value:function(r,i){var e=U({},hE);U(e,this.options),i=U(e,i||{});var n=[this.instance._instanceIndex,this.count++].join("_");return this.lists[n]=new dE(this.instance,r,i,n),this.lists[n]}},{key:"getList",value:function(r){var i=this.instance.getAttribute(r,Ga);if(i!=null)return this.lists[i]}},{key:"removeList",value:function(r){var i=this.getList(r);i&&(i.destroy(),delete this.lists[i.id])}},{key:"findParentList",value:function(r){for(var i=r.parentNode,e=this.instance.getContainer(),n;i!=null&&i!==e&&i!==document;){if(n=this.getList(i),n!=null)return n;i=i.parentNode}}}]),t})();var dE=function(){function t(s,r,i,e){H(this,t),this.instance=s,this.el=r,this.options=i,this.id=e,f(this,"_scrollHandler",void 0),f(this,"domElement",void 0),f(this,"elId",void 0),this.domElement=r,this.elId=this.instance.getId(r),s.setAttribute(r,Ga,e),this._scrollHandler=this.scrollHandler.bind(this),this.domElement._jsPlumbScrollHandler=this._scrollHandler,s.on(r,Du,this._scrollHandler),this._scrollHandler()}return z(t,[{key:"deriveAnchor",value:function(r,i,e,n){return this.options.anchor?this.options.anchor:this.options.deriveAnchor(r,i,e,n)}},{key:"deriveEndpoint",value:function(r,i,e,n){return this.options.deriveEndpoint?this.options.deriveEndpoint(r,i,e,n):this.options.endpoint?this.options.endpoint:e.endpoint.type}},{key:"newConnection",value:function(r,i,e){i.offsetTop<this.el.scrollTop?this._proxyConnection(i,r,e,Et.top):i.offsetTop+i.offsetHeight>this.el.scrollTop+this.domElement.offsetHeight&&this._proxyConnection(i,r,e,Et.bottom)}},{key:"scrollHandler",value:function(){for(var r=this,i=this.instance.getSelector(this.el,ge),e=function(a){if(i[a].offsetTop<r.el.scrollTop)i[a]._jsPlumbProxies=i[a]._jsPlumbProxies||[],r.instance.select({source:i[a]}).each(function(u){r._proxyConnection(i[a],u,0,Et.top)}),r.instance.select({target:i[a]}).each(function(u){r._proxyConnection(i[a],u,1,Et.top)});else if(i[a].offsetTop+i[a].offsetHeight>r.el.scrollTop+r.domElement.offsetHeight)i[a]._jsPlumbProxies=i[a]._jsPlumbProxies||[],r.instance.select({source:i[a]}).each(function(u){r._proxyConnection(i[a],u,0,Et.bottom)}),r.instance.select({target:i[a]}).each(function(u){r._proxyConnection(i[a],u,1,Et.bottom)});else if(i[a]._jsPlumbProxies){for(var l=0;l<i[a]._jsPlumbProxies.length;l++)r.instance.unproxyConnection(i[a]._jsPlumbProxies[l][0],i[a]._jsPlumbProxies[l][1]);delete i[a]._jsPlumbProxies}r.instance.revalidate(i[a])},n=0;n<i.length;n++)e(n)}},{key:"_proxyConnection",value:function(r,i,e,n){var o=this;this.instance.proxyConnection(i,e,this.domElement,function(a,l){return o.deriveEndpoint(n,l,i.endpoints[l],i)},function(a,l){return o.deriveAnchor(n,l,i.endpoints[l],i)}),r._jsPlumbProxies=r._jsPlumbProxies||[],r._jsPlumbProxies.push([i,e])}},{key:"destroy",value:function(){this.instance.off(this.el,Du,this._scrollHandler),delete this.domElement._jsPlumbScrollHandler;for(var r=this.instance.getSelector(this.el,ge),i=0;i<r.length;i++)if(r[i]._jsPlumbProxies){for(var e=0;e<r[i]._jsPlumbProxies.length;e++)this.instance.unproxyConnection(r[i]._jsPlumbProxies[e][0],r[i]._jsPlumbProxies[e][1]);delete r[i]._jsPlumbProxies}}}]),t}(),Mu=1e-10;function Iu(t){var s=Math.floor(t),r=Math.ceil(t);return t-s<Mu?s:r-t<Mu?r:t}var ja=function(t){oe(r,t);var s=ae(r);function r(i){var e;H(this,r),e=s.call(this,i),f(g(e),"type",r.segmentType),f(g(e),"cx",void 0),f(g(e),"cy",void 0),f(g(e),"radius",void 0),f(g(e),"anticlockwise",void 0),f(g(e),"startAngle",void 0),f(g(e),"endAngle",void 0),f(g(e),"sweep",void 0),f(g(e),"length",void 0),f(g(e),"circumference",void 0),f(g(e),"frac",void 0),e.cx=i.cx,e.cy=i.cy,e.radius=i.r,e.anticlockwise=i.ac,i.startAngle&&i.endAngle?(e.startAngle=i.startAngle,e.endAngle=i.endAngle,e.x1=e.cx+e.radius*Math.cos(e.startAngle),e.y1=e.cy+e.radius*Math.sin(e.startAngle),e.x2=e.cx+e.radius*Math.cos(e.endAngle),e.y2=e.cy+e.radius*Math.sin(e.endAngle)):(e.startAngle=e._calcAngle(e.x1,e.y1),e.endAngle=e._calcAngle(e.x2,e.y2)),e.endAngle<0&&(e.endAngle+=un),e.startAngle<0&&(e.startAngle+=un);var n=e.endAngle<e.startAngle?e.endAngle+un:e.endAngle;return e.sweep=Math.abs(n-e.startAngle),e.anticlockwise&&(e.sweep=un-e.sweep),e.circumference=2*Math.PI*e.radius,e.frac=e.sweep/un,e.length=e.circumference*e.frac,e.extents={xmin:e.cx-e.radius,xmax:e.cx+e.radius,ymin:e.cy-e.radius,ymax:e.cy+e.radius},e}return z(r,[{key:"_calcAngle",value:function(e,n){return g_({x:this.cx,y:this.cy},{x:e,y:n})}},{key:"_calcAngleForLocation",value:function(e,n){if(e.anticlockwise){var o=e.startAngle<e.endAngle?e.startAngle+un:e.startAngle,a=Math.abs(o-e.endAngle);return o-a*n}else{var l=e.endAngle<e.startAngle?e.endAngle+un:e.endAngle,u=Math.abs(l-e.startAngle);return e.startAngle+u*n}}},{key:"getPath",value:function(e){var n=this.sweep>Math.PI?1:0,o=this.anticlockwise?0:1;return(e?"M"+this.x1+" "+this.y1+" ":"")+"A "+this.radius+" "+this.radius+" 0 "+n+","+o+" "+this.x2+" "+this.y2}},{key:"getLength",value:function(){return this.length}},{key:"pointOnPath",value:function(e,n){if(e===0)return{x:this.x1,y:this.y1,theta:this.startAngle};if(e===1)return{x:this.x2,y:this.y2,theta:this.endAngle};n&&(e=e/length);var o=this._calcAngleForLocation(this,e),a=this.cx+this.radius*Math.cos(o),l=this.cy+this.radius*Math.sin(o);return{x:Iu(a),y:Iu(l),theta:o}}},{key:"gradientAtPoint",value:function(e,n){var o=this.pointOnPath(e,n),a=v_({x:this.cx,y:this.cy},o);return!this.anticlockwise&&(a===1/0||a===-1/0)&&(a*=-1),a}},{key:"pointAlongPathFrom",value:function(e,n,o){var a=this.pointOnPath(e,o),l=n/this.circumference*2*Math.PI,u=this.anticlockwise?-1:1,c=a.theta+u*l,h=this.cx+this.radius*Math.cos(c),d=this.cy+this.radius*Math.sin(c);return{x:h,y:d}}}]),r}(Pa);f(ja,"segmentType","Arc");var tf=function(t){oe(r,t);var s=ae(r);function r(i,e){var n;return H(this,r),n=s.call(this,i,e),n.connection=i,f(g(n),"showLoopback",void 0),f(g(n),"curviness",void 0),f(g(n),"margin",void 0),f(g(n),"proximityLimit",void 0),f(g(n),"orientation",void 0),f(g(n),"loopbackRadius",void 0),f(g(n),"clockwise",void 0),f(g(n),"isLoopbackCurrently",void 0),f(g(n),"geometry",null),e=e||{},n.showLoopback=e.showLoopback!==!1,n.curviness=e.curviness||10,n.margin=e.margin||5,n.proximityLimit=e.proximityLimit||80,n.clockwise=e.orientation&&e.orientation==="clockwise",n.loopbackRadius=e.loopbackRadius||25,n.isLoopbackCurrently=!1,n}return z(r,[{key:"getDefaultStubs",value:function(){return[0,0]}},{key:"_compute",value:function(e,n){var o=n.sourcePos,a=n.targetPos,l=Math.abs(o.curX-a.curX),u=Math.abs(o.curY-a.curY);if(!this.showLoopback||n.sourceEndpoint.elementId!==n.targetEndpoint.elementId)this.isLoopbackCurrently=!1,this._computeBezier(e,n,o,a,l,u);else{this.isLoopbackCurrently=!0;var c=n.sourcePos.curX,h=n.sourcePos.curY-this.margin,d=c,p=h-this.loopbackRadius,v=d-this.loopbackRadius,y=p-this.loopbackRadius;l=2*this.loopbackRadius,u=2*this.loopbackRadius,e.points[0]=v,e.points[1]=y,e.points[2]=l,e.points[3]=u,this._addSegment(ja,{loopback:!0,x1:c-v+4,y1:h-y,startAngle:0,endAngle:2*Math.PI,r:this.loopbackRadius,ac:!this.clockwise,x2:c-v-4,y2:h-y,cx:d-v,cy:p-y})}}},{key:"exportGeometry",value:function(){return this.geometry==null?null:{controlPoints:[U({},this.geometry.controlPoints[0]),U({},this.geometry.controlPoints[1])],source:U({},this.geometry.source),target:U({},this.geometry.target)}}},{key:"transformGeometry",value:function(e,n,o){return{controlPoints:[{x:e.controlPoints[0].x+n,y:e.controlPoints[0].y+o},{x:e.controlPoints[1].x+n,y:e.controlPoints[1].y+o}],source:this.transformAnchorPlacement(e.source,n,o),target:this.transformAnchorPlacement(e.target,n,o)}}},{key:"importGeometry",value:function(e){return e!=null?e.controlPoints==null||e.controlPoints.length!=2?(Pe("jsPlumb Bezier: cannot import geometry; controlPoints missing or does not have length 2"),this.setGeometry(null,!0),!1):e.controlPoints[0].x==null||e.controlPoints[0].y==null||e.controlPoints[1].x==null||e.controlPoints[1].y==null?(Pe("jsPlumb Bezier: cannot import geometry; controlPoints malformed"),this.setGeometry(null,!0),!1):e.source==null||e.source.curX==null||e.source.curY==null?(Pe("jsPlumb Bezier: cannot import geometry; source missing or malformed"),this.setGeometry(null,!0),!1):e.target==null||e.target.curX==null||e.target.curY==null?(Pe("jsPlumb Bezier: cannot import geometry; target missing or malformed"),this.setGeometry(null,!0),!1):(this.setGeometry(e,!1),!0):!1}}]),r}(Hs),bt={subtract:function(s,r){return{x:s.x-r.x,y:s.y-r.y}},dotProduct:function(s,r){return s.x*r.x+s.y*r.y},square:function(s){return Math.sqrt(s.x*s.x+s.y*s.y)},scale:function(s,r){return{x:s.x*r,y:s.y*r}}},nf=64,pE=Math.pow(2,-nf-1);function vE(t,s){for(var r=[],i=yE(t,s),e=s.length-1,n=2*e-1,o=Uo(i,n,r,0),a=bt.subtract(t,s[0]),l=bt.square(a),u=0,c,h=0;h<o;h++)a=bt.subtract(t,Ba(s,e,r[h],null,null)),c=bt.square(a),c<l&&(l=c,u=r[h]);return a=bt.subtract(t,s[e]),c=bt.square(a),c<l&&(l=c,u=1),{location:u,distance:l}}function gE(t,s){var r=vE(t,s);return{point:Ba(s,s.length-1,r.location,null,null),location:r.location}}function yE(t,s){for(var r=s.length-1,i=2*r-1,e=[],n=[],o=[],a=[],l=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],u=0;u<=r;u++)e[u]=bt.subtract(s[u],t);for(var c=0;c<=r-1;c++)n[c]=bt.subtract(s[c+1],s[c]),n[c]=bt.scale(n[c],3);for(var h=0;h<=r-1;h++)for(var d=0;d<=r;d++)o[h]||(o[h]=[]),o[h][d]=bt.dotProduct(n[h],e[d]);for(var p=0;p<=i;p++)a[p]||(a[p]=[]),a[p].y=0,a[p].x=parseFloat(""+p)/i;for(var v=r,y=r-1,m=0;m<=v+y;m++)for(var b=Math.max(0,m-y),C=Math.min(m,v),E=b;E<=C;E++){var S=m-E;a[E+S].y+=o[S][E]*l[S][E]}return a}function Uo(t,s,r,i){var e=[],n=[],o,a,l=[],u=[];switch(mE(t,s)){case 0:return 0;case 1:{if(i>=nf)return r[0]=(t[0].x+t[s].x)/2,1;if(_E(t,s))return r[0]=EE(t,s),1;break}}Ba(t,s,.5,e,n),o=Uo(e,s,l,i+1),a=Uo(n,s,u,i+1);for(var c=0;c<o;c++)r[c]=l[c];for(var h=0;h<a;h++)r[h+o]=u[h];return o+a}function mE(t,s){var r=0,i,e;i=e=ns(t[0].y);for(var n=1;n<=s;n++)i=ns(t[n].y),i!=e&&r++,e=i;return r}function _E(t,s){var r,i,e,n,o,a,l,u,c,h,d,p,v,y,m,b;a=t[0].y-t[s].y,l=t[s].x-t[0].x,u=t[0].x*t[s].y-t[s].x*t[0].y;var C,E;C=E=0;for(var S=1;S<s;S++){var D=a*t[S].x+l*t[S].y+u;D>C?C=D:D<E&&(E=D)}return d=0,p=1,v=0,y=a,m=l,b=u-C,c=d*m-y*p,h=1/c,i=(p*b-m*v)*h,y=a,m=l,b=u-E,c=d*m-y*p,h=1/c,e=(p*b-m*v)*h,n=Math.min(i,e),o=Math.max(i,e),r=o-n,r<pE?1:0}function EE(t,s){var r=1,i=0,e=t[s].x-t[0].x,n=t[s].y-t[0].y,o=t[0].x-0,a=t[0].y-0,l=e*i-n*r,u=1/l,c=(e*a-n*o)*u;return 0+r*c}function Ba(t,s,r,i,e){for(var n=[[]],o=0;o<=s;o++)n[0][o]=t[o];for(var a=1;a<=s;a++)for(var l=0;l<=s-a;l++)n[a]||(n[a]=[]),n[a][l]||(n[a][l]={}),n[a][l].x=(1-r)*n[a-1][l].x+r*n[a-1][l+1].x,n[a][l].y=(1-r)*n[a-1][l].y+r*n[a-1][l+1].y;if(i!=null)for(var u=0;u<=s;u++)i[u]=n[u][0];if(e!=null)for(var c=0;c<=s;c++)e[c]=n[s-c][c];return n[s][0]}function bE(t,s){var r=[];t--;for(var i=0;i<=t;i++)r.push(CE(i/t,s));return r}function CE(t,s){var r={x:0,y:0};if(t===0)return s[0];var i=s.length-1;if(t===1)return s[i];var e=s,n=1-t;if(i===0)return s[0];if(i===1)return{x:n*e[0].x+t*e[1].x,y:n*e[0].y+t*e[1].y};if(4>i){var o=n*n,a=t*t,l=0,u,c,h;return i===2?(e=[e[0],e[1],e[2],r],u=o,c=2*(n*t),h=a):i===3&&(u=o*n,c=3*(o*t),h=3*(n*a),l=t*a),{x:u*e[0].x+c*e[1].x+h*e[2].x+l*e[3].x,y:u*e[0].y+c*e[1].y+h*e[2].y+l*e[3].y}}else return r}function xE(t){var s=0;if(!sf(t))for(var r=16,i=bE(r,t),e=0;e<r-1;e++){var n=i[e],o=i[e+1];s+=rf(n,o)}return s}var Lu=new Map;function SE(t){var s=Lu.get(t);if(!s){s=[];var r=function(){return function(p){return Math.pow(p,t)}},i=function(){return function(p){return Math.pow(1-p,t)}},e=function(p){return function(v){return p}},n=function(){return function(p){return p}},o=function(){return function(p){return 1-p}},a=function(p){return function(v){for(var y=1,m=0;m<p.length;m++)y=y*p[m](v);return y}};s.push(r());for(var l=1;l<t;l++){for(var u=[e(t)],c=0;c<t-l;c++)u.push(n());for(var h=0;h<l;h++)u.push(o());s.push(a(u))}s.push(i()),Lu.set(t,s)}return s}function ni(t,s){for(var r=SE(t.length-1),i=0,e=0,n=0;n<t.length;n++)i=i+t[n].x*r[n](s),e=e+t[n].y*r[n](s);return{x:i,y:e}}function rf(t,s){return Math.sqrt(Math.pow(t.x-s.x,2)+Math.pow(t.y-s.y,2))}function sf(t){return t[0].x===t[1].x&&t[0].y===t[1].y}function of(t,s,r){if(sf(t))return{point:t[0],location:s};for(var i=ni(t,s),e=0,n=s,o=r>0?1:-1,a=null;e<Math.abs(r);)n+=.005*o,a=ni(t,n),e+=rf(a,i),i=a;return{point:a,location:n}}function PE(t,s,r){return of(t,s,r).point}function kE(t,s,r){return of(t,s,r).location}function TE(t,s){var r=ni(t,s),i=ni(t.slice(0,t.length-1),s),e=i.y-r.y,n=i.x-r.x;return e===0?1/0:Math.atan(e/n)}function AE(t,s,r,i,e){var n=i-s,o=t-r,a=t*(s-i)+s*(r-t),l=OE(e),u=[n*l[0][0]+o*l[1][0],n*l[0][1]+o*l[1][1],n*l[0][2]+o*l[1][2],n*l[0][3]+o*l[1][3]+a],c=wE.apply(null,u),h=[];if(c!=null)for(var d=0;d<3;d++){var p=c[d],v=Math.pow(p,2),y=Math.pow(p,3),m={x:l[0][0]*y+l[0][1]*v+l[0][2]*p+l[0][3],y:l[1][0]*y+l[1][1]*v+l[1][2]*p+l[1][3]},b=void 0;r-t!==0?b=(m[0]-t)/(r-t):b=(m[1]-s)/(i-s),p>=0&&p<=1&&b>=0&&b<=1&&h.push(m)}return h}function Nu(t,s){return[-t[0][s]+3*t[1][s]+-3*t[2][s]+t[3][s],3*t[0][s]-6*t[1][s]+3*t[2][s],-3*t[0][s]+3*t[1][s],t[0][s]]}function OE(t){return[Nu(t,"x"),Nu(t,"y")]}function wE(t,s,r,i){var e=s/t,n=r/t,o=i/t,a=(3*n-Math.pow(e,2))/9,l=(9*e*n-27*o-2*Math.pow(e,3))/54,u=Math.pow(a,3)+Math.pow(l,2),c,h,d=[0,0,0];if(u>=0)c=ns(l+Math.sqrt(u))*Math.pow(Math.abs(l+Math.sqrt(u)),1/3),h=ns(l-Math.sqrt(u))*Math.pow(Math.abs(l-Math.sqrt(u)),1/3),d[0]=-e/3+(c+h),d[1]=-e/3-(c+h)/2,d[2]=-e/3-(c+h)/2,Math.abs(Math.sqrt(3)*(c-h)/2)!==0&&(d[1]=-1,d[2]=-1);else{var p=Math.acos(l/Math.sqrt(-Math.pow(a,3)));d[0]=2*Math.sqrt(-a)*Math.cos(p/3)-e/3,d[1]=2*Math.sqrt(-a)*Math.cos((p+2*Math.PI)/3)-e/3,d[2]=2*Math.sqrt(-a)*Math.cos((p+4*Math.PI)/3)-e/3}for(var v=0;v<3;v++)(d[v]<0||d[v]>1)&&(d[v]=-1);return d}var Ha=function(t){oe(r,t);var s=ae(r);function r(i){var e;return H(this,r),e=s.call(this,i),f(g(e),"curve",void 0),f(g(e),"cp1x",void 0),f(g(e),"cp1y",void 0),f(g(e),"cp2x",void 0),f(g(e),"cp2y",void 0),f(g(e),"length",0),f(g(e),"type",r.segmentType),e.cp1x=i.cp1x,e.cp1y=i.cp1y,e.cp2x=i.cp2x,e.cp2y=i.cp2y,e.x1=i.x1,e.x2=i.x2,e.y1=i.y1,e.y2=i.y2,e.curve=[{x:e.x1,y:e.y1},{x:e.cp1x,y:e.cp1y},{x:e.cp2x,y:e.cp2y},{x:e.x2,y:e.y2}],e.extents={xmin:Math.min(e.x1,e.x2,e.cp1x,e.cp2x),ymin:Math.min(e.y1,e.y2,e.cp1y,e.cp2y),xmax:Math.max(e.x1,e.x2,e.cp1x,e.cp2x),ymax:Math.max(e.y1,e.y2,e.cp1y,e.cp2y)},e}return z(r,[{key:"getPath",value:function(e){return(e?"M "+this.x2+" "+this.y2+" ":"")+"C "+this.cp2x+" "+this.cp2y+" "+this.cp1x+" "+this.cp1y+" "+this.x1+" "+this.y1}},{key:"pointOnPath",value:function(e,n){return e=r._translateLocation(this.curve,e,n),ni(this.curve,e)}},{key:"gradientAtPoint",value:function(e,n){return e=r._translateLocation(this.curve,e,n),TE(this.curve,e)}},{key:"pointAlongPathFrom",value:function(e,n,o){return e=r._translateLocation(this.curve,e,o),PE(this.curve,e,n)}},{key:"getLength",value:function(){return(this.length==null||this.length===0)&&(this.length=xE(this.curve)),this.length}},{key:"findClosestPointOnPath",value:function(e,n){var o=gE({x:e,y:n},this.curve);return{d:Math.sqrt(Math.pow(o.point.x-e,2)+Math.pow(o.point.y-n,2)),x:o.point.x,y:o.point.y,l:1-o.location,s:this,x1:null,y1:null,x2:null,y2:null}}},{key:"lineIntersection",value:function(e,n,o,a){return AE(e,n,o,a,this.curve)}}],[{key:"_translateLocation",value:function(e,n,o){return o&&(n=kE(e,n>0?0:1,n)),n}}]),r}(Pa);f(Ha,"segmentType","Bezier");var Vo=function(t){oe(r,t);var s=ae(r);function r(i,e){var n;return H(this,r),n=s.call(this,i,e),n.connection=i,f(g(n),"type",r.type),f(g(n),"majorAnchor",void 0),f(g(n),"minorAnchor",void 0),e=e||{},n.majorAnchor=e.curviness||150,n.minorAnchor=10,n}return z(r,[{key:"getCurviness",value:function(){return this.majorAnchor}},{key:"_findControlPoint",value:function(e,n,o,a,l){var u=a[0]!==l[0]||a[1]===l[1],c={x:0,y:0};return u?(l[0]===0?c.x=o.curX<n.curX?e.x+this.minorAnchor:e.x-this.minorAnchor:c.x=e.x+this.majorAnchor*l[0],l[1]===0?c.y=o.curY<n.curY?e.y+this.minorAnchor:e.y-this.minorAnchor:c.y=e.y+this.majorAnchor*a[1]):(a[0]===0?c.x=n.curX<o.curX?e.x+this.minorAnchor:e.x-this.minorAnchor:c.x=e.x-this.majorAnchor*a[0],a[1]===0?c.y=n.curY<o.curY?e.y+this.minorAnchor:e.y-this.minorAnchor:c.y=e.y+this.majorAnchor*l[1]),c}},{key:"_computeBezier",value:function(e,n,o,a,l,u){var c,h,d=o.curX<a.curX?l:0,p=o.curY<a.curY?u:0,v=o.curX<a.curX?0:l,y=o.curY<a.curY?0:u;this.edited!==!0?(c=this._findControlPoint({x:d,y:p},o,a,e.so,e.to),h=this._findControlPoint({x:v,y},a,o,e.to,e.so)):(c=this.geometry.controlPoints[0],h=this.geometry.controlPoints[1]),this.geometry={controlPoints:[c,h],source:n.sourcePos,target:n.targetPos},this._addSegment(Ha,{x1:d,y1:p,x2:v,y2:y,cp1x:c.x,cp1y:c.y,cp2x:h.x,cp2y:h.y})}}]),r}(tf);f(Vo,"type","Bezier");function DE(t,s,r,i){return t<=r&&i<=s?1:t<=r&&s<=i?2:r<=t&&i>=s?3:4}function ME(t,s,r,i,e,n,o,a,l){if(a<=l)return{x:t,y:s};if(r===1)return i.curY<=0&&e.curY>=1?{x:t+(i.x<.5?-1*n:n),y:s}:i.curX>=1&&e.curX<=0?{x:t,y:s+(i.y<.5?-1*o:o)}:{x:t+-1*n,y:s+-1*o};if(r===2)return i.curY>=1&&e.curY<=0?{x:t+(i.x<.5?-1*n:n),y:s}:i.curX>=1&&e.curX<=0?{x:t,y:s+(i.y<.5?-1*o:o)}:{x:t+n,y:s+-1*o};if(r===3)return i.curY>=1&&e.curY<=0?{x:t+(i.x<.5?-1*n:n),y:s}:i.curX<=0&&e.curX>=1?{x:t,y:s+(i.y<.5?-1*o:o)}:{x:t+-1*n,y:s+-1*o};if(r===4)return i.curY<=0&&e.curY>=1?{x:t+(i.x<.5?-1*n:n),y:s}:i.curX<=0&&e.curX>=1?{x:t,y:s+(i.y<.5?-1*o:o)}:{x:t+n,y:s+-1*o}}var Yo=function(t){oe(r,t);var s=ae(r);function r(i,e){var n;return H(this,r),n=s.call(this,i,e),n.connection=i,f(g(n),"type",r.type),f(g(n),"_controlPoint",void 0),n.curviness=e.curviness||10,n.margin=e.margin||5,n.proximityLimit=e.proximityLimit||80,n.clockwise=e.orientation&&e.orientation==="clockwise",n}return z(r,[{key:"_computeBezier",value:function(e,n,o,a,l,u){var c=o.curX<a.curX?0:l,h=o.curY<a.curY?0:u,d=o.curX<a.curX?l:0,p=o.curY<a.curY?u:0;if(o.x===0&&(c-=this.margin),o.x===1&&(c+=this.margin),o.y===0&&(h-=this.margin),o.y===1&&(h+=this.margin),a.x===0&&(d-=this.margin),a.x===1&&(d+=this.margin),a.y===0&&(p-=this.margin),a.y===1&&(p+=this.margin),this.edited!==!0){var v=(c+d)/2,y=(h+p)/2,m=DE(c,h,d,p),b=Math.sqrt(Math.pow(d-c,2)+Math.pow(p-h,2));this._controlPoint=ME(v,y,m,n.sourcePos,n.targetPos,this.curviness,this.curviness,b,this.proximityLimit)}else this._controlPoint=this.geometry.controlPoints[0];var C,E,S,D;C=this._controlPoint.x,E=this._controlPoint.x,S=this._controlPoint.y,D=this._controlPoint.y,this.geometry={controlPoints:[this._controlPoint,this._controlPoint],source:n.sourcePos,target:n.targetPos},this._addSegment(Ha,{x1:d,y1:p,x2:c,y2:h,cp1x:C,cp1y:S,cp2x:E,cp2y:D})}}]),r}(tf);f(Yo,"type","StateMachine");ai.register(Vo.type,Vo);ai.register(Yo.type,Yo);function Ru(t){return t<0?-1:t===0?0:1}function Fu(t){return[Ru(t[2]-t[0]),Ru(t[3]-t[1])]}function Gu(t){return Math.sqrt(Math.pow(t[0]-t[2],2)+Math.pow(t[1]-t[3],2))}function ju(t){var s=[];return s.push.apply(s,t),s}var Xo=function(t){oe(r,t);var s=ae(r);function r(i,e){var n;return H(this,r),n=s.call(this,i,e),n.connection=i,f(g(n),"type",r.type),f(g(n),"internalSegments",[]),f(g(n),"midpoint",void 0),f(g(n),"alwaysRespectStubs",void 0),f(g(n),"cornerRadius",void 0),f(g(n),"lastx",void 0),f(g(n),"lasty",void 0),f(g(n),"lastOrientation",void 0),f(g(n),"loopbackRadius",void 0),f(g(n),"isLoopbackCurrently",void 0),n.midpoint=e.midpoint==null||isNaN(e.midpoint)?.5:e.midpoint,n.cornerRadius=e.cornerRadius!=null?e.cornerRadius:0,n.alwaysRespectStubs=e.alwaysRespectStubs===!0,n.lastx=null,n.lasty=null,n.lastOrientation=null,n.loopbackRadius=e.loopbackRadius||25,n.isLoopbackCurrently=!1,n}return z(r,[{key:"getDefaultStubs",value:function(){return[30,30]}},{key:"addASegment",value:function(e,n,o){if(!(this.lastx===e&&this.lasty===n)){var a=this.lastx==null?o.sx:this.lastx,l=this.lasty==null?o.sy:this.lasty,u=a===e?"v":"h";this.lastx=e,this.lasty=n,this.internalSegments.push([a,l,e,n,u])}}},{key:"writeSegments",value:function(e){for(var n=null,o,a,l,u=0;u<this.internalSegments.length-1;u++){if(n=n||ju(this.internalSegments[u]),o=ju(this.internalSegments[u+1]),a=Fu(n),l=Fu(o),this.cornerRadius>0&&n[4]!==o[4]){var c=Math.min(Gu(n),Gu(o)),h=Math.min(this.cornerRadius,c/2);n[2]-=a[0]*h,n[3]-=a[1]*h,o[0]+=l[0]*h,o[1]+=l[1]*h;var d=a[1]===l[0]&&l[0]===1||a[1]===l[0]&&l[0]===0&&a[0]!==l[1]||a[1]===l[0]&&l[0]===-1,p=o[1]>n[3]?1:-1,v=o[0]>n[2]?1:-1,y=p===v,m=y&&d||!y&&!d?o[0]:n[2],b=y&&d||!y&&!d?n[3]:o[1];this._addSegment(bn,{x1:n[0],y1:n[1],x2:n[2],y2:n[3]}),this._addSegment(ja,{r:h,x1:n[2],y1:n[3],x2:o[0],y2:o[1],cx:m,cy:b,ac:d})}else this._addSegment(bn,{x1:n[0],y1:n[1],x2:n[2],y2:n[3]});n=o}o!=null&&this._addSegment(bn,{x1:o[0],y1:o[1],x2:o[2],y2:o[3]})}},{key:"_compute",value:function(e,n){var o=this;this.internalSegments.length=0,this.lastx=null,this.lasty=null,this.lastOrientation=null;var a=function(L){return[e.startStubX,e.startStubY,e.endStubX,e.endStubY]},l={perpendicular:a,orthogonal:a,opposite:function(L){var T=e,q=L==="x"?0:1,W={x:function(){return T.so[q]===1&&(T.startStubX>T.endStubX&&T.tx>T.startStubX||T.sx>T.endStubX&&T.tx>T.sx)||T.so[q]===-1&&(T.startStubX<T.endStubX&&T.tx<T.startStubX||T.sx<T.endStubX&&T.tx<T.sx)},y:function(){return T.so[q]===1&&(T.startStubY>T.endStubY&&T.ty>T.startStubY||T.sy>T.endStubY&&T.ty>T.sy)||T.so[q]===-1&&(T.startStubY<T.endStubY&&T.ty<T.startStubY||T.sy<T.endStubY&&T.ty<T.sy)}};return!o.alwaysRespectStubs&&W[L]()?{x:[(e.sx+e.tx)/2,e.startStubY,(e.sx+e.tx)/2,e.endStubY],y:[e.startStubX,(e.sy+e.ty)/2,e.endStubX,(e.sy+e.ty)/2]}[L]:[e.startStubX,e.startStubY,e.endStubX,e.endStubY]}},u=l[e.anchorOrientation](e.sourceAxis),c=e.sourceAxis==="x"?0:1,h=e.sourceAxis==="x"?1:0,d=u[c],p=u[h],v=u[c+2],y=u[h+2];this.addASegment(u[0],u[1],e);var m=e.startStubX+(e.endStubX-e.startStubX)*this.midpoint,b=e.startStubY+(e.endStubY-e.startStubY)*this.midpoint,C={x:[0,1],y:[1,0]},E={perpendicular:function(L,T,q,W,te){var R=e,he={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]},gt={x:[[R.startStubX,R.endStubX],null,[R.endStubX,R.startStubX]],y:[[R.startStubY,R.endStubY],null,[R.endStubY,R.startStubY]]},st={x:[[m,R.startStubY],[m,R.endStubY]],y:[[R.startStubX,b],[R.endStubX,b]]},se={x:[[R.endStubX,R.startStubY]],y:[[R.startStubX,R.endStubY]]},fe={x:[[R.startStubX,R.endStubY],[R.endStubX,R.endStubY]],y:[[R.endStubX,R.startStubY],[R.endStubX,R.endStubY]]},le={x:[[R.startStubX,b],[R.endStubX,b],[R.endStubX,R.endStubY]],y:[[m,R.startStubY],[m,R.endStubY],[R.endStubX,R.endStubY]]},Ke={x:[R.startStubY,R.endStubY],y:[R.startStubX,R.endStubX]},wn=C[L][0],ot=C[L][1],Ue=R.so[wn]+1,li=R.to[ot]+1,yr=R.to[ot]===-1&&Ke[L][1]<Ke[L][0]||R.to[ot]===1&&Ke[L][1]>Ke[L][0],ui=gt[L][Ue][0],Je=gt[L][Ue][1],Ze=he[L][Ue][li];if(R.segment===Ze[3]||R.segment===Ze[2]&&yr)return st[L];if(R.segment===Ze[2]&&Je<ui)return se[L];if(R.segment===Ze[2]&&Je>=ui||R.segment===Ze[1]&&!yr)return le[L];if(R.segment===Ze[0]||R.segment===Ze[1]&&yr)return fe[L]},orthogonal:function(L,T,q,W,te){var R=e,he={x:R.so[0]===-1?Math.min(T,W):Math.max(T,W),y:R.so[1]===-1?Math.min(T,W):Math.max(T,W)}[L];return{x:[[he,q],[he,te],[W,te]],y:[[q,he],[te,he],[te,W]]}[L]},opposite:function(L,T,q,W,te){var R=e,he={x:"y",y:"x"}[L],gt={x:"h",y:"w"}[L],st=R["is"+L.toUpperCase()+"GreaterThanStubTimes2"];if(n.sourceEndpoint.elementId===n.targetEndpoint.elementId){var se=q+(1-n.sourceEndpoint._anchor.computedPosition[he])*n.sourceInfo[gt]+o.maxStub;return{x:[[T,se],[W,se]],y:[[se,T],[se,W]]}[L]}else{if(!st||R.so[c]===1&&T>W||R.so[c]===-1&&T<W)return{x:[[T,b],[W,b]],y:[[m,T],[m,W]]}[L];if(R.so[c]===1&&T<W||R.so[c]===-1&&T>W)return{x:[[m,R.sy],[m,R.ty]],y:[[R.sx,b],[R.tx,b]]}[L]}}},S=E[e.anchorOrientation](e.sourceAxis,d,p,v,y);if(S)for(var D=0;D<S.length;D++)this.addASegment(S[D][0],S[D][1],e);this.addASegment(u[2],u[3],e),this.addASegment(e.tx,e.ty,e),this.writeSegments(e)}},{key:"transformGeometry",value:function(e,n,o){return e}}]),r}(Hs);f(Xo,"type","Flowchart");ai.register(Xo.type,Xo);Qt.registerHandler(B0);Qt.registerHandler(oE);Qt.registerHandler(uE);ai.register(ds.type,ds);function IE(){var t=Math.floor(Math.random()*2e3),s=Math.floor(Math.random()*2e3);return{clientX:t,clientY:s,screenX:t,screenY:s,pageX:t,pageY:s}}var Un={clientX:5e4,clientY:5e4,screenX:5e4,screenY:5e4,pageX:5e4,pageY:5e4};for(var ki=0;ki<256;ki++)(ki<16?"0":"")+ki.toString(16);var LE=1e-11;(function(){function t(s,r,i){H(this,t),this._jsPlumb=s,this.ok=r,this.equal=i,f(this,"_divs",[]),f(this,"mottle",void 0),this.mottle=new Ta}return z(t,[{key:"_t",value:function(r,i,e,n){this.mottle.trigger(r,i,{pageX:e,pageY:n,screenX:e,screenY:n,clientX:e,clientY:n})}},{key:"addDiv",value:function(r,i,e,n,o,a,l){var u=document.createElement("div");return u.style.position="absolute",u.innerHTML=r,i?i.appendChild(u):this._jsPlumb.getContainer().appendChild(u),u.setAttribute("id",r),u.style.left=(n??Math.floor(Math.random()*1e3))+"px",u.style.top=(o??Math.floor(Math.random()*1e3))+"px",e&&(u.className=e),a&&(u.style.width=a+"px"),l&&(u.style.height=l+"px"),this._divs.push(r),u}},{key:"addDivs",value:function(r,i){for(var e=0;e<r.length;e++)this.addDiv(r[e],i)}},{key:"assertEndpointCount",value:function(r,i){var e=this._jsPlumb.getEndpoints(r),n=e?e.length:0;this.equal(n,i,r.getAttribute("data-jtk-managed")+" has "+i+(i>1||i==0?" endpoints":" endpoint"))}},{key:"_assertManagedEndpointCount",value:function(r,i){var e=this._jsPlumb.getId(r),n=this._jsPlumb._managedElements[e];this.equal(n.endpoints.length,i,e+" has "+i+" endpoints in managed record")}},{key:"_assertManagedConnectionCount",value:function(r,i){var e=this._jsPlumb.getId(r),n=this._jsPlumb._managedElements[e];this.equal(n.connections.length,i,e+" has "+i+" connections in managed record")}},{key:"_registerDiv",value:function(r){this._divs.push(r)}},{key:"makeDragStartEvt",value:function(r){var i=this.makeEvent(r),e=this._jsPlumb.getContainer();return i.clientX+=e.offsetLeft,i.screenX+=e.offsetLeft,i.pageX+=e.offsetLeft,i.clientY+=e.offsetTop,i.screenY+=e.offsetTop,i.pageY+=e.offsetTop,i}},{key:"getAttribute",value:function(r,i){return r.getAttribute(i)}},{key:"dragNodeBy",value:function(r,i,e,n){n=n||{},n.before&&n.before();var o=this.makeEvent(r);this._jsPlumb.trigger(r,Q,o),n.beforeMouseMove&&n.beforeMouseMove(),this._t(document,Oe,o.pageX+i,o.pageY+e),n.beforeMouseUp&&n.beforeMouseUp(),this.mottle.trigger(document,ee,null),n.after&&n.after()}},{key:"dragNodeTo",value:function(r,i,e,n){n=n||{};var o=this._jsPlumb.viewport.getPosition(this._jsPlumb.getId(r));n.before&&n.before();var a=this.makeEvent(r);this._jsPlumb.trigger(r,Q,a);var l=this._jsPlumb.getContainer().getBoundingClientRect();n.beforeMouseMove&&n.beforeMouseMove(),this._t(document,Oe,l.x+i+o.w/2,l.y+e+o.h/2),n.beforeMouseUp&&n.beforeMouseUp(),this.mottle.trigger(document,ee,null),n.after&&n.after()}},{key:"dragToGroup",value:function(r,i,e){var n=this._jsPlumb.getGroup(i),o=this._jsPlumb.viewport.getPosition(n.elId),a=o.x+o.w/2,l=o.y+o.h/2;this.dragNodeTo(r,a,l,e)}},{key:"aSyncDragNodeBy",value:function(r,i,e,n){var o=this;n=n||{},n.before&&n.before();var a=this.makeEvent(r);this._jsPlumb.trigger(r,Q,a),n.beforeMouseMove&&n.beforeMouseMove(),setTimeout(function(){o._t(document,Oe,a.pageX+i,a.pageY+e),n.beforeMouseUp&&n.beforeMouseUp(),setTimeout(function(){o.mottle.trigger(document,ee,null),n.after&&n.after()},45)},45)}},{key:"dragANodeAround",value:function(r,i,e){this._jsPlumb.trigger(r,Q,this.makeEvent(r));for(var n=Math.random()*50,o=0;o<n;o++){var a=IE();r.style.left=a.screenX+"px",r.style.top=a.screenY+"px",this._jsPlumb.trigger(document,Oe,a)}i&&this.ok(i(),e||"while dragging assert"),this._jsPlumb.trigger(document,ee,Un)}},{key:"dragConnection",value:function(r,i,e,n){var o=this.getCanvas(r),a=this.getCanvas(i),l=this.makeEvent(o),u=this.makeEvent(a);n=n||{};var c=this._jsPlumb.select().length;return this._jsPlumb.trigger(o,Q,l),n.beforeMouseMove&&n.beforeMouseMove(),this._jsPlumb.trigger(e?a:document,Oe,u),n.beforeMouseUp&&n.beforeMouseUp(),this._jsPlumb.trigger(e?a:document,ee,u),this._jsPlumb.select().get(c)}},{key:"aSyncDragConnection",value:function(r,i,e){var n=this;e=e||{};var o=this.getCanvas(r),a=this.getCanvas(i),l=this.makeEvent(o),u=this.makeEvent(a),c=this._jsPlumb.select().length;this._jsPlumb.trigger(o,Q,l),setTimeout(function(){e.beforeMouseMove&&e.beforeMouseMove(),n._jsPlumb.trigger(document,Oe,u),setTimeout(function(){e.beforeMouseUp&&e.beforeMouseUp(),n._jsPlumb.trigger(a,ee,u),e.after&&e.after(n._jsPlumb.select().get(c))},5)},5)}},{key:"dragAndAbortConnection",value:function(r){var i=this.getCanvas(r),e=this.makeEvent(i);this._jsPlumb.trigger(i,Q,e),this._jsPlumb.trigger(document,Oe,Un),this._jsPlumb.trigger(document,ee,Un)}},{key:"detachConnection",value:function(r,i){i=i||{};var e=this.getEndpointCanvas(r),n=this.makeEvent(e);i.before&&i.before(),this._jsPlumb.trigger(e,Q,n),i.beforeMouseMove&&i.beforeMouseMove(),this._jsPlumb.trigger(document,Oe,Un),i.beforeMouseUp&&i.beforeMouseUp(),this._jsPlumb.trigger(document,ee,Un),i.after&&i.after()}},{key:"detachAndReattachConnection",value:function(r,i){i=i||{};var e=this.getEndpointCanvas(r),n=this.makeEvent(e);i.before&&i.before(),this._jsPlumb.trigger(e,Q,n),i.beforeMouseMove&&i.beforeMouseMove(),this._jsPlumb.trigger(document,Oe,Un),this._jsPlumb.trigger(document,Oe,n),i.beforeMouseUp&&i.beforeMouseUp(),this._jsPlumb.trigger(document,ee,n),i.after&&i.after()}},{key:"detachConnectionByTarget",value:function(r,i){this.detachConnection(r.endpoints[1],i)}},{key:"relocateTarget",value:function(r,i,e){this.relocate(r,1,i,e)}},{key:"relocate",value:function(r,i,e,n){n=n||{},e=this.getCanvas(e);var o=this.getEndpointCanvas(r.endpoints[i]),a=this.makeEvent(o),l=this.makeEvent(e);n.before&&n.before(),this._jsPlumb.trigger(o,Q,a),n.beforeMouseMove&&n.beforeMouseMove(),this._jsPlumb.trigger(document,Oe,l),n.beforeMouseUp&&n.beforeMouseUp(),this._jsPlumb.trigger(e,ee,l),n.after&&n.after()}},{key:"relocateSource",value:function(r,i,e){this.relocate(r,0,i,e)}},{key:"makeEvent",value:function(r){var i=r.getBoundingClientRect(),e=i.x+i.width/2,n=i.y+i.height/2;return{clientX:e,clientY:n,screenX:e,screenY:n,pageX:e,pageY:n}}},{key:"getCanvas",value:function(r){return r.endpoint?this.getEndpointCanvas(r):r}},{key:"getEndpointCanvas",value:function(r){return r.endpoint.canvas}},{key:"getConnectionCanvas",value:function(r){return r.connector.canvas}},{key:"getEndpointCanvasPosition",value:function(r){var i=this.getEndpointCanvas(r);return{x:parseInt(i.style.left,10),y:parseInt(i.style.top,10),w:i.getAttribute("width"),h:i.getAttribute("height")}}},{key:"within",value:function(r,i,e){this.ok(Math.abs(r-i)<LE,e+"[expected: "+i+" got "+r+"] [diff:"+Math.abs(r-i)+"]")}},{key:"assertManagedEndpointCount",value:function(r,i){var e=this._jsPlumb.getId(r),n=this._jsPlumb._managedElements[e];this.equal(n.endpoints.length,i,e+" has "+i+" endpoints in managed record")}},{key:"assertManagedConnectionCount",value:function(r,i){var e=this._jsPlumb.getId(r),n=this._jsPlumb._managedElements[e];this.equal(n.connections.length,i,e+" has "+i+" connections in managed record")}},{key:"fireEventOnEndpoint",value:function(r){for(var i=this.getEndpointCanvas(r),e=0;e<(arguments.length<=1?0:arguments.length-1);e++)this._jsPlumb.trigger(i,e+1<1||arguments.length<=e+1?void 0:arguments[e+1])}},{key:"fireEventOnElement",value:function(r){for(var i=0;i<(arguments.length<=1?0:arguments.length-1);i++)this._jsPlumb.trigger(r,i+1<1||arguments.length<=i+1?void 0:arguments[i+1])}},{key:"fireEventOnConnection",value:function(r){for(var i=this.getConnectionCanvas(r),e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];this.fireEventOnElement.apply(this,[i].concat(n))}},{key:"clickOnConnection",value:function(r){this.fireEventOnConnection(r,Be)}},{key:"dblClickOnConnection",value:function(r){this.fireEventOnConnection(r,qe)}},{key:"tapOnConnection",value:function(r){this.fireEventOnConnection(r,Q),this.fireEventOnConnection(r,ee)}},{key:"dblTapOnConnection",value:function(r){this.fireEventOnConnection(r,Q),this.fireEventOnConnection(r,ee),this.fireEventOnConnection(r,Q),this.fireEventOnConnection(r,ee)}},{key:"clickOnElement",value:function(r,i){this._jsPlumb.trigger(r,Be,null,null,i??1)}},{key:"dblClickOnElement",value:function(r){this._jsPlumb.trigger(r,qe)}},{key:"tapOnElement",value:function(r){this._jsPlumb.trigger(r,Q),this._jsPlumb.trigger(r,ee)}},{key:"dblTapOnElement",value:function(r){this._jsPlumb.trigger(r,Q),this._jsPlumb.trigger(r,ee),this._jsPlumb.trigger(r,Q),this._jsPlumb.trigger(r,ee)}},{key:"getOverlayCanvas",value:function(r){return r.canvas||r.path}},{key:"fireEventOnOverlay",value:function(r,i,e){var n=r.getOverlay(i),o=this.getOverlayCanvas(n);this._jsPlumb.trigger(o,e)}},{key:"clickOnOverlay",value:function(r,i){this.fireEventOnOverlay(r,i,Be)}},{key:"dblClickOnOverlay",value:function(r,i){this.fireEventOnOverlay(r,i,qe)}},{key:"tapOnOverlay",value:function(r,i){this.fireEventOnOverlay(r,i,Q),this.fireEventOnOverlay(r,i,ee)}},{key:"dblTapOnOverlay",value:function(r,i){this.fireEventOnOverlay(r,i,Q),this.fireEventOnOverlay(r,i,ee),this.fireEventOnOverlay(r,i,Q),this.fireEventOnOverlay(r,i,ee)}},{key:"cleanup",value:function(){var r=this._jsPlumb.getContainer();this._jsPlumb.destroy();for(var i in this._divs){var e=document.getElementById(this._divs[i]);e&&e.parentNode.removeChild(e)}this._divs.length=0;var n=this._jsPlumb.select().length,o=this._jsPlumb.selectEndpoints().length,a=r.querySelectorAll(".jtk-endpoint").length,l=r.querySelectorAll(".jtk-connector").length;for(var u in r.__ta)for(var c in r.__ta[u])throw"Container event bindings not empty for key "+u;if(n>0)throw"there are connections in the data model!";if(o>0)throw"there are endpoints in the data model!";if(a>0)throw"there are "+a+" endpoints left in the dom!";if(l>0)throw"there are "+l+" connections left in the dom!"}},{key:"makeContent",value:function(r){var i=document.createElement("div");return i.innerHTML=r,i.firstChild}},{key:"length",value:function(r){var i=0;for(var e in r)r.hasOwnProperty(e)&&i++;return i}},{key:"head",value:function(r){for(var i in r)return r[i]}},{key:"uuid",value:function(){return ke()}}]),t})();var Bu=0;function NE(){var t=Bu+1;return Bu++,t}function RE(t){return new rE(NE(),t)}const FE=B("span",{class:"toggle-icons"},"export",-1),GE=[FE],jE=["id"],BE={__name:"workspace",setup(t){const s=Ye([]);let r=null;const i=Ye(null),e=Ye([]);var n={jsplumbElements:e};const o=Ye({});Ec(()=>{i.value.focus(),console.log(e.value),r=RE({container:i.value,maxConnections:-1,connectionOverlays:[{type:"Arrow",options:{location:1}}]})});function a(p){return r.addEndpoint(p,{source:!0,anchor:"Bottom",endpoint:{type:"Dot"}})}function l(p){return r.addEndpoint(p,{target:!0,anchor:"Top",endpoint:{type:"Dot"}})}async function u(p,v){if(console.log("entered addJSEndpoints"),console.log(p),console.log(v),p){var y={},m={};v.type==="material"?v.name==="Eingangsmaterial"?(y=a(p),m={id:""}):v.name==="Zwischenprodukt"?(y=a(p),m=l(p)):v.name==="Endprodukt"?(y={id:""},m=l(p)):console.error("unknown material type: "+v.name):v.type==="process"?(y=a(p),m=l(p)):console.error("unknown type: "+v.type),v&&(v.sourceEndpointId=y.id,v.targetEndpointId=m.id)}}async function c(p){console.debug("workspace_items updated, watcher triggered"),await hc(),p.forEach(v=>{const y=e.value.find(m=>m.id===v.id);o.value[v.id]||(u(y,v),y.style.left=v.x+"px",y.style.top=v.y+"px",o.value[v.id]=!0)})}Oi(s,c,{deep:!0});function h(){var p=document.implementation.createDocument(null,"BatchML"),v=p.documentElement,y=r.getConnections();y.forEach(function(D){console.log(D);var G=D.sourceId,L=D.targetId,T=s.value.find(he=>he.id===G),q=s.value.find(he=>he.id===L);if(T&&q){var W=T.id,te=q.id,R=p.createElement("Connection");R.setAttribute("sourceId",W),R.setAttribute("targetId",te),v.appendChild(R)}}),s.value.forEach(function(D){var G=p.createElement("Element");G.setAttribute("id",D.id),G.setAttribute("name",D.name),G.setAttribute("type",D.type),G.setAttribute("x",D.x),G.setAttribute("y",D.y),v.appendChild(G)});var m=new XMLSerializer,b=m.serializeToString(p);console.log(b);var C="Verfahrensrezept.xml",E=document.createElement("a"),S=new Blob([b],{type:"text/plain"});E.setAttribute("href",window.URL.createObjectURL(S)),E.setAttribute("download",C),E.dataset.downloadurl=["text/plain",E.download,E.href].join(":"),E.draggable=!0,E.classList.add("dragout"),E.click()}const d=p=>{console.log("Drop"),p.preventDefault(),p.dataTransfer.getData("itemID");var v=p.dataTransfer.getData("itemName"),y=p.dataTransfer.getData("itemClasses"),m;console.log(y),y.includes("material_element")?m="material":y.includes("process_element")?m="process":console.log("neither material nor process");var b=p.target.getBoundingClientRect(),C=p.clientX-b.left,E=p.clientY-b.top;if(y.includes("sidebar_element")){var S=Date.now().toString(36)+Math.random().toString(36).substring(2);s.value.push({id:S,name:v,type:m,x:C,y:E}),console.log("dragged from sidebar, dropped in workspace at absolute position: "+p.clientX.toString()+" "+p.clientY.toString()),console.log(s)}};return(p,v)=>(be(),Se("div",{id:"workspace",ref_key:"workspace",ref:i,onDrop:v[0]||(v[0]=y=>d(y)),onDragenter:v[1]||(v[1]=nr(()=>{},["prevent"])),onDragover:v[2]||(v[2]=nr(()=>{},["prevent"]))},[B("button",{onClick:h},GE),(be(!0),Se(Xe,null,Wi(s.value,y=>(be(),Se("div",{class:On("workspace_element "+y.type),key:y.id,ref_for:!0,ref:Ct(n).jsplumbElements,id:y.id},gn(y.name),11,jE))),128))],544))}};const HE={id:"editor"},UE={__name:"App",setup(t){return(s,r)=>(be(),Se("main",null,[Ge(Bp,{id:"top_bar"}),B("div",HE,[Ge(hy),Ge(BE)])]))}},VE=Np(UE);VE.mount("#app");
