(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function i(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(e){if(e.ep)return;e.ep=!0;const n=i(e);fetch(e.href,n)}})();function Uo(t,s){const i=Object.create(null),r=t.split(",");for(let e=0;e<r.length;e++)i[r[e]]=!0;return s?e=>!!i[e.toLowerCase()]:e=>!!i[e]}const de={},Yn=[],pt=()=>{},ef=()=>!1,tf=/^on[^a-z]/,gs=t=>tf.test(t),Vo=t=>t.startsWith("onUpdate:"),Le=Object.assign,Yo=(t,s)=>{const i=t.indexOf(s);i>-1&&t.splice(i,1)},nf=Object.prototype.hasOwnProperty,ne=(t,s)=>nf.call(t,s),W=Array.isArray,Xn=t=>nr(t)==="[object Map]",ys=t=>nr(t)==="[object Set]",Xa=t=>nr(t)==="[object Date]",J=t=>typeof t=="function",Pe=t=>typeof t=="string",Bi=t=>typeof t=="symbol",pe=t=>t!==null&&typeof t=="object",ju=t=>pe(t)&&J(t.then)&&J(t.catch),Bu=Object.prototype.toString,nr=t=>Bu.call(t),rf=t=>nr(t).slice(8,-1),Hu=t=>nr(t)==="[object Object]",Xo=t=>Pe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Tr=Uo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ms=t=>{const s=Object.create(null);return i=>s[i]||(s[i]=t(i))},sf=/-(\w)/g,Jn=ms(t=>t.replace(sf,(s,i)=>i?i.toUpperCase():"")),of=/\B([A-Z])/g,ci=ms(t=>t.replace(of,"-$1").toLowerCase()),Uu=ms(t=>t.charAt(0).toUpperCase()+t.slice(1)),Bs=ms(t=>t?`on${Uu(t)}`:""),Hi=(t,s)=>!Object.is(t,s),Ar=(t,s)=>{for(let i=0;i<t.length;i++)t[i](s)},Vr=(t,s,i)=>{Object.defineProperty(t,s,{configurable:!0,enumerable:!1,value:i})},Vu=t=>{const s=parseFloat(t);return isNaN(s)?t:s};let $a;const ro=()=>$a||($a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function $o(t){if(W(t)){const s={};for(let i=0;i<t.length;i++){const r=t[i],e=Pe(r)?cf(r):$o(r);if(e)for(const n in e)s[n]=e[n]}return s}else{if(Pe(t))return t;if(pe(t))return t}}const af=/;(?![^(]*\))/g,lf=/:([^]+)/,uf=/\/\*[^]*?\*\//g;function cf(t){const s={};return t.replace(uf,"").split(af).forEach(i=>{if(i){const r=i.split(lf);r.length>1&&(s[r[0].trim()]=r[1].trim())}}),s}function hi(t){let s="";if(Pe(t))s=t;else if(W(t))for(let i=0;i<t.length;i++){const r=hi(t[i]);r&&(s+=r+" ")}else if(pe(t))for(const i in t)t[i]&&(s+=i+" ");return s.trim()}const hf="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ff=Uo(hf);function Yu(t){return!!t||t===""}function df(t,s){if(t.length!==s.length)return!1;let i=!0;for(let r=0;i&&r<t.length;r++)i=_s(t[r],s[r]);return i}function _s(t,s){if(t===s)return!0;let i=Xa(t),r=Xa(s);if(i||r)return i&&r?t.getTime()===s.getTime():!1;if(i=Bi(t),r=Bi(s),i||r)return t===s;if(i=W(t),r=W(s),i||r)return i&&r?df(t,s):!1;if(i=pe(t),r=pe(s),i||r){if(!i||!r)return!1;const e=Object.keys(t).length,n=Object.keys(s).length;if(e!==n)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=s.hasOwnProperty(o);if(a&&!l||!a&&l||!_s(t[o],s[o]))return!1}}return String(t)===String(s)}function pf(t,s){return t.findIndex(i=>_s(i,s))}const Mt=t=>Pe(t)?t:t==null?"":W(t)||pe(t)&&(t.toString===Bu||!J(t.toString))?JSON.stringify(t,Xu,2):String(t),Xu=(t,s)=>s&&s.__v_isRef?Xu(t,s.value):Xn(s)?{[`Map(${s.size})`]:[...s.entries()].reduce((i,[r,e])=>(i[`${r} =>`]=e,i),{})}:ys(s)?{[`Set(${s.size})`]:[...s.values()]}:pe(s)&&!W(s)&&!Hu(s)?String(s):s;let ct;class vf{constructor(s=!1){this.detached=s,this._active=!0,this.effects=[],this.cleanups=[],this.parent=ct,!s&&ct&&(this.index=(ct.scopes||(ct.scopes=[])).push(this)-1)}get active(){return this._active}run(s){if(this._active){const i=ct;try{return ct=this,s()}finally{ct=i}}}on(){ct=this}off(){ct=this.parent}stop(s){if(this._active){let i,r;for(i=0,r=this.effects.length;i<r;i++)this.effects[i].stop();for(i=0,r=this.cleanups.length;i<r;i++)this.cleanups[i]();if(this.scopes)for(i=0,r=this.scopes.length;i<r;i++)this.scopes[i].stop(!0);if(!this.detached&&this.parent&&!s){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0,this._active=!1}}}function gf(t,s=ct){s&&s.active&&s.effects.push(t)}function yf(){return ct}const Wo=t=>{const s=new Set(t);return s.w=0,s.n=0,s},$u=t=>(t.w&en)>0,Wu=t=>(t.n&en)>0,mf=({deps:t})=>{if(t.length)for(let s=0;s<t.length;s++)t[s].w|=en},_f=t=>{const{deps:s}=t;if(s.length){let i=0;for(let r=0;r<s.length;r++){const e=s[r];$u(e)&&!Wu(e)?e.delete(t):s[i++]=e,e.w&=~en,e.n&=~en}s.length=i}},Yr=new WeakMap;let Oi=0,en=1;const so=30;let ht;const mn=Symbol(""),oo=Symbol("");class zo{constructor(s,i=null,r){this.fn=s,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,gf(this,r)}run(){if(!this.active)return this.fn();let s=ht,i=Kt;for(;s;){if(s===this)return;s=s.parent}try{return this.parent=ht,ht=this,Kt=!0,en=1<<++Oi,Oi<=so?mf(this):Wa(this),this.fn()}finally{Oi<=so&&_f(this),en=1<<--Oi,ht=this.parent,Kt=i,this.parent=void 0,this.deferStop&&this.stop()}}stop(){ht===this?this.deferStop=!0:this.active&&(Wa(this),this.onStop&&this.onStop(),this.active=!1)}}function Wa(t){const{deps:s}=t;if(s.length){for(let i=0;i<s.length;i++)s[i].delete(t);s.length=0}}let Kt=!0;const zu=[];function fi(){zu.push(Kt),Kt=!1}function di(){const t=zu.pop();Kt=t===void 0?!0:t}function Xe(t,s,i){if(Kt&&ht){let r=Yr.get(t);r||Yr.set(t,r=new Map);let e=r.get(i);e||r.set(i,e=Wo()),qu(e)}}function qu(t,s){let i=!1;Oi<=so?Wu(t)||(t.n|=en,i=!$u(t)):i=!t.has(ht),i&&(t.add(ht),ht.deps.push(t))}function Rt(t,s,i,r,e,n){const o=Yr.get(t);if(!o)return;let a=[];if(s==="clear")a=[...o.values()];else if(i==="length"&&W(t)){const l=Number(r);o.forEach((u,c)=>{(c==="length"||c>=l)&&a.push(u)})}else switch(i!==void 0&&a.push(o.get(i)),s){case"add":W(t)?Xo(i)&&a.push(o.get("length")):(a.push(o.get(mn)),Xn(t)&&a.push(o.get(oo)));break;case"delete":W(t)||(a.push(o.get(mn)),Xn(t)&&a.push(o.get(oo)));break;case"set":Xn(t)&&a.push(o.get(mn));break}if(a.length===1)a[0]&&ao(a[0]);else{const l=[];for(const u of a)u&&l.push(...u);ao(Wo(l))}}function ao(t,s){const i=W(t)?t:[...t];for(const r of i)r.computed&&za(r);for(const r of i)r.computed||za(r)}function za(t,s){(t!==ht||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}function Ef(t,s){var i;return(i=Yr.get(t))==null?void 0:i.get(s)}const bf=Uo("__proto__,__v_isRef,__isVue"),Ku=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Bi)),Cf=qo(),xf=qo(!1,!0),Sf=qo(!0),qa=Pf();function Pf(){const t={};return["includes","indexOf","lastIndexOf"].forEach(s=>{t[s]=function(...i){const r=re(this);for(let n=0,o=this.length;n<o;n++)Xe(r,"get",n+"");const e=r[s](...i);return e===-1||e===!1?r[s](...i.map(re)):e}}),["push","pop","shift","unshift","splice"].forEach(s=>{t[s]=function(...i){fi();const r=re(this)[s].apply(this,i);return di(),r}}),t}function kf(t){const s=re(this);return Xe(s,"has",t),s.hasOwnProperty(t)}function qo(t=!1,s=!1){return function(r,e,n){if(e==="__v_isReactive")return!t;if(e==="__v_isReadonly")return t;if(e==="__v_isShallow")return s;if(e==="__v_raw"&&n===(t?s?Uf:tc:s?ec:Qu).get(r))return r;const o=W(r);if(!t){if(o&&ne(qa,e))return Reflect.get(qa,e,n);if(e==="hasOwnProperty")return kf}const a=Reflect.get(r,e,n);return(Bi(e)?Ku.has(e):bf(e))||(t||Xe(r,"get",e),s)?a:we(a)?o&&Xo(e)?a:a.value:pe(a)?t?nc(a):Zo(a):a}}const Tf=Ju(),Af=Ju(!0);function Ju(t=!1){return function(i,r,e,n){let o=i[r];if(Zn(o)&&we(o)&&!we(e))return!1;if(!t&&(!Xr(e)&&!Zn(e)&&(o=re(o),e=re(e)),!W(i)&&we(o)&&!we(e)))return o.value=e,!0;const a=W(i)&&Xo(r)?Number(r)<i.length:ne(i,r),l=Reflect.set(i,r,e,n);return i===re(n)&&(a?Hi(e,o)&&Rt(i,"set",r,e):Rt(i,"add",r,e)),l}}function Of(t,s){const i=ne(t,s);t[s];const r=Reflect.deleteProperty(t,s);return r&&i&&Rt(t,"delete",s,void 0),r}function wf(t,s){const i=Reflect.has(t,s);return(!Bi(s)||!Ku.has(s))&&Xe(t,"has",s),i}function Df(t){return Xe(t,"iterate",W(t)?"length":mn),Reflect.ownKeys(t)}const Zu={get:Cf,set:Tf,deleteProperty:Of,has:wf,ownKeys:Df},Mf={get:Sf,set(t,s){return!0},deleteProperty(t,s){return!0}},If=Le({},Zu,{get:xf,set:Af}),Ko=t=>t,Es=t=>Reflect.getPrototypeOf(t);function cr(t,s,i=!1,r=!1){t=t.__v_raw;const e=re(t),n=re(s);i||(s!==n&&Xe(e,"get",s),Xe(e,"get",n));const{has:o}=Es(e),a=r?Ko:i?ea:Ui;if(o.call(e,s))return a(t.get(s));if(o.call(e,n))return a(t.get(n));t!==e&&t.get(s)}function hr(t,s=!1){const i=this.__v_raw,r=re(i),e=re(t);return s||(t!==e&&Xe(r,"has",t),Xe(r,"has",e)),t===e?i.has(t):i.has(t)||i.has(e)}function fr(t,s=!1){return t=t.__v_raw,!s&&Xe(re(t),"iterate",mn),Reflect.get(t,"size",t)}function Ka(t){t=re(t);const s=re(this);return Es(s).has.call(s,t)||(s.add(t),Rt(s,"add",t,t)),this}function Ja(t,s){s=re(s);const i=re(this),{has:r,get:e}=Es(i);let n=r.call(i,t);n||(t=re(t),n=r.call(i,t));const o=e.call(i,t);return i.set(t,s),n?Hi(s,o)&&Rt(i,"set",t,s):Rt(i,"add",t,s),this}function Za(t){const s=re(this),{has:i,get:r}=Es(s);let e=i.call(s,t);e||(t=re(t),e=i.call(s,t)),r&&r.call(s,t);const n=s.delete(t);return e&&Rt(s,"delete",t,void 0),n}function Qa(){const t=re(this),s=t.size!==0,i=t.clear();return s&&Rt(t,"clear",void 0,void 0),i}function dr(t,s){return function(r,e){const n=this,o=n.__v_raw,a=re(o),l=s?Ko:t?ea:Ui;return!t&&Xe(a,"iterate",mn),o.forEach((u,c)=>r.call(e,l(u),l(c),n))}}function pr(t,s,i){return function(...r){const e=this.__v_raw,n=re(e),o=Xn(n),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=e[t](...r),c=i?Ko:s?ea:Ui;return!s&&Xe(n,"iterate",l?oo:mn),{next(){const{value:h,done:d}=u.next();return d?{value:h,done:d}:{value:a?[c(h[0]),c(h[1])]:c(h),done:d}},[Symbol.iterator](){return this}}}}function Ht(t){return function(...s){return t==="delete"?!1:this}}function Lf(){const t={get(n){return cr(this,n)},get size(){return fr(this)},has:hr,add:Ka,set:Ja,delete:Za,clear:Qa,forEach:dr(!1,!1)},s={get(n){return cr(this,n,!1,!0)},get size(){return fr(this)},has:hr,add:Ka,set:Ja,delete:Za,clear:Qa,forEach:dr(!1,!0)},i={get(n){return cr(this,n,!0)},get size(){return fr(this,!0)},has(n){return hr.call(this,n,!0)},add:Ht("add"),set:Ht("set"),delete:Ht("delete"),clear:Ht("clear"),forEach:dr(!0,!1)},r={get(n){return cr(this,n,!0,!0)},get size(){return fr(this,!0)},has(n){return hr.call(this,n,!0)},add:Ht("add"),set:Ht("set"),delete:Ht("delete"),clear:Ht("clear"),forEach:dr(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(n=>{t[n]=pr(n,!1,!1),i[n]=pr(n,!0,!1),s[n]=pr(n,!1,!0),r[n]=pr(n,!0,!0)}),[t,i,s,r]}const[Nf,Rf,Ff,Gf]=Lf();function Jo(t,s){const i=s?t?Gf:Ff:t?Rf:Nf;return(r,e,n)=>e==="__v_isReactive"?!t:e==="__v_isReadonly"?t:e==="__v_raw"?r:Reflect.get(ne(i,e)&&e in r?i:r,e,n)}const jf={get:Jo(!1,!1)},Bf={get:Jo(!1,!0)},Hf={get:Jo(!0,!1)},Qu=new WeakMap,ec=new WeakMap,tc=new WeakMap,Uf=new WeakMap;function Vf(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Yf(t){return t.__v_skip||!Object.isExtensible(t)?0:Vf(rf(t))}function Zo(t){return Zn(t)?t:Qo(t,!1,Zu,jf,Qu)}function Xf(t){return Qo(t,!1,If,Bf,ec)}function nc(t){return Qo(t,!0,Mf,Hf,tc)}function Qo(t,s,i,r,e){if(!pe(t)||t.__v_raw&&!(s&&t.__v_isReactive))return t;const n=e.get(t);if(n)return n;const o=Yf(t);if(o===0)return t;const a=new Proxy(t,o===2?r:i);return e.set(t,a),a}function $n(t){return Zn(t)?$n(t.__v_raw):!!(t&&t.__v_isReactive)}function Zn(t){return!!(t&&t.__v_isReadonly)}function Xr(t){return!!(t&&t.__v_isShallow)}function ic(t){return $n(t)||Zn(t)}function re(t){const s=t&&t.__v_raw;return s?re(s):t}function rc(t){return Vr(t,"__v_skip",!0),t}const Ui=t=>pe(t)?Zo(t):t,ea=t=>pe(t)?nc(t):t;function sc(t){Kt&&ht&&(t=re(t),qu(t.dep||(t.dep=Wo())))}function oc(t,s){t=re(t);const i=t.dep;i&&ao(i)}function we(t){return!!(t&&t.__v_isRef===!0)}function qe(t){return $f(t,!1)}function $f(t,s){return we(t)?t:new Wf(t,s)}class Wf{constructor(s,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?s:re(s),this._value=i?s:Ui(s)}get value(){return sc(this),this._value}set value(s){const i=this.__v_isShallow||Xr(s)||Zn(s);s=i?s:re(s),Hi(s,this._rawValue)&&(this._rawValue=s,this._value=i?s:Ui(s),oc(this))}}function it(t){return we(t)?t.value:t}const zf={get:(t,s,i)=>it(Reflect.get(t,s,i)),set:(t,s,i,r)=>{const e=t[s];return we(e)&&!we(i)?(e.value=i,!0):Reflect.set(t,s,i,r)}};function ac(t){return $n(t)?t:new Proxy(t,zf)}function lc(t){const s=W(t)?new Array(t.length):{};for(const i in t)s[i]=Kf(t,i);return s}class qf{constructor(s,i,r){this._object=s,this._key=i,this._defaultValue=r,this.__v_isRef=!0}get value(){const s=this._object[this._key];return s===void 0?this._defaultValue:s}set value(s){this._object[this._key]=s}get dep(){return Ef(re(this._object),this._key)}}function Kf(t,s,i){const r=t[s];return we(r)?r:new qf(t,s,i)}class Jf{constructor(s,i,r,e){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new zo(s,()=>{this._dirty||(this._dirty=!0,oc(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!e,this.__v_isReadonly=r}get value(){const s=re(this);return sc(s),(s._dirty||!s._cacheable)&&(s._dirty=!1,s._value=s.effect.run()),s._value}set value(s){this._setter(s)}}function Zf(t,s,i=!1){let r,e;const n=J(t);return n?(r=t,e=pt):(r=t.get,e=t.set),new Jf(r,e,n||!e,i)}function Jt(t,s,i,r){let e;try{e=r?t(...r):t()}catch(n){bs(n,s,i)}return e}function vt(t,s,i,r){if(J(t)){const n=Jt(t,s,i,r);return n&&ju(n)&&n.catch(o=>{bs(o,s,i)}),n}const e=[];for(let n=0;n<t.length;n++)e.push(vt(t[n],s,i,r));return e}function bs(t,s,i,r=!0){const e=s?s.vnode:null;if(s){let n=s.parent;const o=s.proxy,a=i;for(;n;){const u=n.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](t,o,a)===!1)return}n=n.parent}const l=s.appContext.config.errorHandler;if(l){Jt(l,null,10,[t,o,a]);return}}Qf(t,i,e,r)}function Qf(t,s,i,r=!0){console.error(t)}let Vi=!1,lo=!1;const Ne=[];let xt=0;const Wn=[];let wt=null,fn=0;const uc=Promise.resolve();let ta=null;function cc(t){const s=ta||uc;return t?s.then(this?t.bind(this):t):s}function ed(t){let s=xt+1,i=Ne.length;for(;s<i;){const r=s+i>>>1;Yi(Ne[r])<t?s=r+1:i=r}return s}function na(t){(!Ne.length||!Ne.includes(t,Vi&&t.allowRecurse?xt+1:xt))&&(t.id==null?Ne.push(t):Ne.splice(ed(t.id),0,t),hc())}function hc(){!Vi&&!lo&&(lo=!0,ta=uc.then(dc))}function td(t){const s=Ne.indexOf(t);s>xt&&Ne.splice(s,1)}function nd(t){W(t)?Wn.push(...t):(!wt||!wt.includes(t,t.allowRecurse?fn+1:fn))&&Wn.push(t),hc()}function el(t,s=Vi?xt+1:0){for(;s<Ne.length;s++){const i=Ne[s];i&&i.pre&&(Ne.splice(s,1),s--,i())}}function fc(t){if(Wn.length){const s=[...new Set(Wn)];if(Wn.length=0,wt){wt.push(...s);return}for(wt=s,wt.sort((i,r)=>Yi(i)-Yi(r)),fn=0;fn<wt.length;fn++)wt[fn]();wt=null,fn=0}}const Yi=t=>t.id==null?1/0:t.id,id=(t,s)=>{const i=Yi(t)-Yi(s);if(i===0){if(t.pre&&!s.pre)return-1;if(s.pre&&!t.pre)return 1}return i};function dc(t){lo=!1,Vi=!0,Ne.sort(id);const s=pt;try{for(xt=0;xt<Ne.length;xt++){const i=Ne[xt];i&&i.active!==!1&&Jt(i,null,14)}}finally{xt=0,Ne.length=0,fc(),Vi=!1,ta=null,(Ne.length||Wn.length)&&dc()}}function rd(t,s,...i){if(t.isUnmounted)return;const r=t.vnode.props||de;let e=i;const n=s.startsWith("update:"),o=n&&s.slice(7);if(o&&o in r){const c=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=r[c]||de;d&&(e=i.map(p=>Pe(p)?p.trim():p)),h&&(e=i.map(Vu))}let a,l=r[a=Bs(s)]||r[a=Bs(Jn(s))];!l&&n&&(l=r[a=Bs(ci(s))]),l&&vt(l,t,6,e);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,vt(u,t,6,e)}}function pc(t,s,i=!1){const r=s.emitsCache,e=r.get(t);if(e!==void 0)return e;const n=t.emits;let o={},a=!1;if(!J(t)){const l=u=>{const c=pc(u,s,!0);c&&(a=!0,Le(o,c))};!i&&s.mixins.length&&s.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!n&&!a?(pe(t)&&r.set(t,null),null):(W(n)?n.forEach(l=>o[l]=null):Le(o,n),pe(t)&&r.set(t,o),o)}function Cs(t,s){return!t||!gs(s)?!1:(s=s.slice(2).replace(/Once$/,""),ne(t,s[0].toLowerCase()+s.slice(1))||ne(t,ci(s))||ne(t,s))}let ft=null,xs=null;function $r(t){const s=ft;return ft=t,xs=t&&t.type.__scopeId||null,s}function ia(t){xs=t}function ra(){xs=null}function uo(t,s=ft,i){if(!s||t._n)return t;const r=(...e)=>{r._d&&cl(-1);const n=$r(s);let o;try{o=t(...e)}finally{$r(n),r._d&&cl(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Hs(t){const{type:s,vnode:i,proxy:r,withProxy:e,props:n,propsOptions:[o],slots:a,attrs:l,emit:u,render:c,renderCache:h,data:d,setupState:p,ctx:g,inheritAttrs:y}=t;let m,E;const b=$r(t);try{if(i.shapeFlag&4){const S=e||r;m=Et(c.call(S,S,h,n,p,d,g)),E=l}else{const S=s;m=Et(S.length>1?S(n,{attrs:l,slots:a,emit:u}):S(n,null)),E=s.props?l:sd(l)}}catch(S){Fi.length=0,bs(S,t,1),m=Ue(bn)}let C=m;if(E&&y!==!1){const S=Object.keys(E),{shapeFlag:N}=C;S.length&&N&7&&(o&&S.some(Vo)&&(E=od(E,o)),C=Qn(C,E))}return i.dirs&&(C=Qn(C),C.dirs=C.dirs?C.dirs.concat(i.dirs):i.dirs),i.transition&&(C.transition=i.transition),m=C,$r(b),m}const sd=t=>{let s;for(const i in t)(i==="class"||i==="style"||gs(i))&&((s||(s={}))[i]=t[i]);return s},od=(t,s)=>{const i={};for(const r in t)(!Vo(r)||!(r.slice(9)in s))&&(i[r]=t[r]);return i};function ad(t,s,i){const{props:r,children:e,component:n}=t,{props:o,children:a,patchFlag:l}=s,u=n.emitsOptions;if(s.dirs||s.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return r?tl(r,o,u):!!o;if(l&8){const c=s.dynamicProps;for(let h=0;h<c.length;h++){const d=c[h];if(o[d]!==r[d]&&!Cs(u,d))return!0}}}else return(e||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?tl(r,o,u):!0:!!o;return!1}function tl(t,s,i){const r=Object.keys(s);if(r.length!==Object.keys(t).length)return!0;for(let e=0;e<r.length;e++){const n=r[e];if(s[n]!==t[n]&&!Cs(i,n))return!0}return!1}function ld({vnode:t,parent:s},i){for(;s&&s.subTree===t;)(t=s.vnode).el=i,s=s.parent}const ud=t=>t.__isSuspense;function cd(t,s){s&&s.pendingBranch?W(t)?s.effects.push(...t):s.effects.push(t):nd(t)}const vr={};function Or(t,s,i){return vc(t,s,i)}function vc(t,s,{immediate:i,deep:r,flush:e,onTrack:n,onTrigger:o}=de){var a;const l=yf()===((a=Re)==null?void 0:a.scope)?Re:null;let u,c=!1,h=!1;if(we(t)?(u=()=>t.value,c=Xr(t)):$n(t)?(u=()=>t,r=!0):W(t)?(h=!0,c=t.some(S=>$n(S)||Xr(S)),u=()=>t.map(S=>{if(we(S))return S.value;if($n(S))return gn(S);if(J(S))return Jt(S,l,2)})):J(t)?s?u=()=>Jt(t,l,2):u=()=>{if(!(l&&l.isUnmounted))return d&&d(),vt(t,l,3,[p])}:u=pt,s&&r){const S=u;u=()=>gn(S())}let d,p=S=>{d=b.onStop=()=>{Jt(S,l,4)}},g;if(Wi)if(p=pt,s?i&&vt(s,l,3,[u(),h?[]:void 0,p]):u(),e==="sync"){const S=sp();g=S.__watcherHandles||(S.__watcherHandles=[])}else return pt;let y=h?new Array(t.length).fill(vr):vr;const m=()=>{if(b.active)if(s){const S=b.run();(r||c||(h?S.some((N,G)=>Hi(N,y[G])):Hi(S,y)))&&(d&&d(),vt(s,l,3,[S,y===vr?void 0:h&&y[0]===vr?[]:y,p]),y=S)}else b.run()};m.allowRecurse=!!s;let E;e==="sync"?E=m:e==="post"?E=()=>Ye(m,l&&l.suspense):(m.pre=!0,l&&(m.id=l.uid),E=()=>na(m));const b=new zo(u,E);s?i?m():y=b.run():e==="post"?Ye(b.run.bind(b),l&&l.suspense):b.run();const C=()=>{b.stop(),l&&l.scope&&Yo(l.scope.effects,b)};return g&&g.push(C),C}function hd(t,s,i){const r=this.proxy,e=Pe(t)?t.includes(".")?gc(r,t):()=>r[t]:t.bind(r,r);let n;J(s)?n=s:(n=s.handler,i=s);const o=Re;ei(this);const a=vc(e,n.bind(r),i);return o?ei(o):_n(),a}function gc(t,s){const i=s.split(".");return()=>{let r=t;for(let e=0;e<i.length&&r;e++)r=r[i[e]];return r}}function gn(t,s){if(!pe(t)||t.__v_skip||(s=s||new Set,s.has(t)))return t;if(s.add(t),we(t))gn(t.value,s);else if(W(t))for(let i=0;i<t.length;i++)gn(t[i],s);else if(ys(t)||Xn(t))t.forEach(i=>{gn(i,s)});else if(Hu(t))for(const i in t)gn(t[i],s);return t}function Wr(t,s){const i=ft;if(i===null)return t;const r=Ts(i)||i.proxy,e=t.dirs||(t.dirs=[]);for(let n=0;n<s.length;n++){let[o,a,l,u=de]=s[n];o&&(J(o)&&(o={mounted:o,updated:o}),o.deep&&gn(a),e.push({dir:o,instance:r,value:a,oldValue:void 0,arg:l,modifiers:u}))}return t}function sn(t,s,i,r){const e=t.dirs,n=s&&s.dirs;for(let o=0;o<e.length;o++){const a=e[o];n&&(a.oldValue=n[o].value);let l=a.dir[r];l&&(fi(),vt(l,i,8,[t.el,a,t,s]),di())}}const wr=t=>!!t.type.__asyncLoader,yc=t=>t.type.__isKeepAlive;function fd(t,s){mc(t,"a",s)}function dd(t,s){mc(t,"da",s)}function mc(t,s,i=Re){const r=t.__wdc||(t.__wdc=()=>{let e=i;for(;e;){if(e.isDeactivated)return;e=e.parent}return t()});if(Ss(s,r,i),i){let e=i.parent;for(;e&&e.parent;)yc(e.parent.vnode)&&pd(r,s,i,e),e=e.parent}}function pd(t,s,i,r){const e=Ss(s,t,r,!0);Ec(()=>{Yo(r[s],e)},i)}function Ss(t,s,i=Re,r=!1){if(i){const e=i[t]||(i[t]=[]),n=s.__weh||(s.__weh=(...o)=>{if(i.isUnmounted)return;fi(),ei(i);const a=vt(s,i,t,o);return _n(),di(),a});return r?e.unshift(n):e.push(n),n}}const jt=t=>(s,i=Re)=>(!Wi||t==="sp")&&Ss(t,(...r)=>s(...r),i),vd=jt("bm"),_c=jt("m"),gd=jt("bu"),yd=jt("u"),md=jt("bum"),Ec=jt("um"),_d=jt("sp"),Ed=jt("rtg"),bd=jt("rtc");function Cd(t,s=Re){Ss("ec",t,s)}const xd=Symbol.for("v-ndc");function Xi(t,s,i,r){let e;const n=i&&i[r];if(W(t)||Pe(t)){e=new Array(t.length);for(let o=0,a=t.length;o<a;o++)e[o]=s(t[o],o,void 0,n&&n[o])}else if(typeof t=="number"){e=new Array(t);for(let o=0;o<t;o++)e[o]=s(o+1,o,void 0,n&&n[o])}else if(pe(t))if(t[Symbol.iterator])e=Array.from(t,(o,a)=>s(o,a,void 0,n&&n[a]));else{const o=Object.keys(t);e=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const u=o[a];e[a]=s(t[u],u,a,n&&n[a])}}else e=[];return i&&(i[r]=e),e}const co=t=>t?Dc(t)?Ts(t)||t.proxy:co(t.parent):null,Ri=Le(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>co(t.parent),$root:t=>co(t.root),$emit:t=>t.emit,$options:t=>sa(t),$forceUpdate:t=>t.f||(t.f=()=>na(t.update)),$nextTick:t=>t.n||(t.n=cc.bind(t.proxy)),$watch:t=>hd.bind(t)}),Us=(t,s)=>t!==de&&!t.__isScriptSetup&&ne(t,s),Sd={get({_:t},s){const{ctx:i,setupState:r,data:e,props:n,accessCache:o,type:a,appContext:l}=t;let u;if(s[0]!=="$"){const p=o[s];if(p!==void 0)switch(p){case 1:return r[s];case 2:return e[s];case 4:return i[s];case 3:return n[s]}else{if(Us(r,s))return o[s]=1,r[s];if(e!==de&&ne(e,s))return o[s]=2,e[s];if((u=t.propsOptions[0])&&ne(u,s))return o[s]=3,n[s];if(i!==de&&ne(i,s))return o[s]=4,i[s];ho&&(o[s]=0)}}const c=Ri[s];let h,d;if(c)return s==="$attrs"&&Xe(t,"get",s),c(t);if((h=a.__cssModules)&&(h=h[s]))return h;if(i!==de&&ne(i,s))return o[s]=4,i[s];if(d=l.config.globalProperties,ne(d,s))return d[s]},set({_:t},s,i){const{data:r,setupState:e,ctx:n}=t;return Us(e,s)?(e[s]=i,!0):r!==de&&ne(r,s)?(r[s]=i,!0):ne(t.props,s)||s[0]==="$"&&s.slice(1)in t?!1:(n[s]=i,!0)},has({_:{data:t,setupState:s,accessCache:i,ctx:r,appContext:e,propsOptions:n}},o){let a;return!!i[o]||t!==de&&ne(t,o)||Us(s,o)||(a=n[0])&&ne(a,o)||ne(r,o)||ne(Ri,o)||ne(e.config.globalProperties,o)},defineProperty(t,s,i){return i.get!=null?t._.accessCache[s]=0:ne(i,"value")&&this.set(t,s,i.value,null),Reflect.defineProperty(t,s,i)}};function nl(t){return W(t)?t.reduce((s,i)=>(s[i]=null,s),{}):t}let ho=!0;function Pd(t){const s=sa(t),i=t.proxy,r=t.ctx;ho=!1,s.beforeCreate&&il(s.beforeCreate,t,"bc");const{data:e,computed:n,methods:o,watch:a,provide:l,inject:u,created:c,beforeMount:h,mounted:d,beforeUpdate:p,updated:g,activated:y,deactivated:m,beforeDestroy:E,beforeUnmount:b,destroyed:C,unmounted:S,render:N,renderTracked:G,renderTriggered:I,errorCaptured:T,serverPrefetch:K,expose:$,inheritAttrs:Z,components:R,directives:me,filters:yt}=s;if(u&&kd(u,r,null),o)for(const he in o){const le=o[he];J(le)&&(r[he]=le.bind(i))}if(e){const he=e.call(i,i);pe(he)&&(t.data=Zo(he))}if(ho=!0,n)for(const he in n){const le=n[he],Ke=J(le)?le.bind(i,i):J(le.get)?le.get.bind(i,i):pt,An=!J(le)&&J(le.set)?le.set.bind(i):pt,ot=ip({get:Ke,set:An});Object.defineProperty(r,he,{enumerable:!0,configurable:!0,get:()=>ot.value,set:Ve=>ot.value=Ve})}if(a)for(const he in a)bc(a[he],r,i,he);if(l){const he=J(l)?l.call(i):l;Reflect.ownKeys(he).forEach(le=>{Md(le,he[le])})}c&&il(c,t,"c");function se(he,le){W(le)?le.forEach(Ke=>he(Ke.bind(i))):le&&he(le.bind(i))}if(se(vd,h),se(_c,d),se(gd,p),se(yd,g),se(fd,y),se(dd,m),se(Cd,T),se(bd,G),se(Ed,I),se(md,b),se(Ec,S),se(_d,K),W($))if($.length){const he=t.exposed||(t.exposed={});$.forEach(le=>{Object.defineProperty(he,le,{get:()=>i[le],set:Ke=>i[le]=Ke})})}else t.exposed||(t.exposed={});N&&t.render===pt&&(t.render=N),Z!=null&&(t.inheritAttrs=Z),R&&(t.components=R),me&&(t.directives=me)}function kd(t,s,i=pt){W(t)&&(t=fo(t));for(const r in t){const e=t[r];let n;pe(e)?"default"in e?n=Dr(e.from||r,e.default,!0):n=Dr(e.from||r):n=Dr(e),we(n)?Object.defineProperty(s,r,{enumerable:!0,configurable:!0,get:()=>n.value,set:o=>n.value=o}):s[r]=n}}function il(t,s,i){vt(W(t)?t.map(r=>r.bind(s.proxy)):t.bind(s.proxy),s,i)}function bc(t,s,i,r){const e=r.includes(".")?gc(i,r):()=>i[r];if(Pe(t)){const n=s[t];J(n)&&Or(e,n)}else if(J(t))Or(e,t.bind(i));else if(pe(t))if(W(t))t.forEach(n=>bc(n,s,i,r));else{const n=J(t.handler)?t.handler.bind(i):s[t.handler];J(n)&&Or(e,n,t)}}function sa(t){const s=t.type,{mixins:i,extends:r}=s,{mixins:e,optionsCache:n,config:{optionMergeStrategies:o}}=t.appContext,a=n.get(s);let l;return a?l=a:!e.length&&!i&&!r?l=s:(l={},e.length&&e.forEach(u=>zr(l,u,o,!0)),zr(l,s,o)),pe(s)&&n.set(s,l),l}function zr(t,s,i,r=!1){const{mixins:e,extends:n}=s;n&&zr(t,n,i,!0),e&&e.forEach(o=>zr(t,o,i,!0));for(const o in s)if(!(r&&o==="expose")){const a=Td[o]||i&&i[o];t[o]=a?a(t[o],s[o]):s[o]}return t}const Td={data:rl,props:sl,emits:sl,methods:wi,computed:wi,beforeCreate:Ge,created:Ge,beforeMount:Ge,mounted:Ge,beforeUpdate:Ge,updated:Ge,beforeDestroy:Ge,beforeUnmount:Ge,destroyed:Ge,unmounted:Ge,activated:Ge,deactivated:Ge,errorCaptured:Ge,serverPrefetch:Ge,components:wi,directives:wi,watch:Od,provide:rl,inject:Ad};function rl(t,s){return s?t?function(){return Le(J(t)?t.call(this,this):t,J(s)?s.call(this,this):s)}:s:t}function Ad(t,s){return wi(fo(t),fo(s))}function fo(t){if(W(t)){const s={};for(let i=0;i<t.length;i++)s[t[i]]=t[i];return s}return t}function Ge(t,s){return t?[...new Set([].concat(t,s))]:s}function wi(t,s){return t?Le(Object.create(null),t,s):s}function sl(t,s){return t?W(t)&&W(s)?[...new Set([...t,...s])]:Le(Object.create(null),nl(t),nl(s??{})):s}function Od(t,s){if(!t)return s;if(!s)return t;const i=Le(Object.create(null),t);for(const r in s)i[r]=Ge(t[r],s[r]);return i}function Cc(){return{app:null,config:{isNativeTag:ef,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let wd=0;function Dd(t,s){return function(r,e=null){J(r)||(r=Le({},r)),e!=null&&!pe(e)&&(e=null);const n=Cc(),o=new Set;let a=!1;const l=n.app={_uid:wd++,_component:r,_props:e,_container:null,_context:n,_instance:null,version:op,get config(){return n.config},set config(u){},use(u,...c){return o.has(u)||(u&&J(u.install)?(o.add(u),u.install(l,...c)):J(u)&&(o.add(u),u(l,...c))),l},mixin(u){return n.mixins.includes(u)||n.mixins.push(u),l},component(u,c){return c?(n.components[u]=c,l):n.components[u]},directive(u,c){return c?(n.directives[u]=c,l):n.directives[u]},mount(u,c,h){if(!a){const d=Ue(r,e);return d.appContext=n,c&&s?s(d,u):t(d,u,h),a=!0,l._container=u,u.__vue_app__=l,Ts(d.component)||d.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(u,c){return n.provides[u]=c,l},runWithContext(u){qr=l;try{return u()}finally{qr=null}}};return l}}let qr=null;function Md(t,s){if(Re){let i=Re.provides;const r=Re.parent&&Re.parent.provides;r===i&&(i=Re.provides=Object.create(r)),i[t]=s}}function Dr(t,s,i=!1){const r=Re||ft;if(r||qr){const e=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:qr._context.provides;if(e&&t in e)return e[t];if(arguments.length>1)return i&&J(s)?s.call(r&&r.proxy):s}}function Id(t,s,i,r=!1){const e={},n={};Vr(n,ks,1),t.propsDefaults=Object.create(null),xc(t,s,e,n);for(const o in t.propsOptions[0])o in e||(e[o]=void 0);i?t.props=r?e:Xf(e):t.type.props?t.props=e:t.props=n,t.attrs=n}function Ld(t,s,i,r){const{props:e,attrs:n,vnode:{patchFlag:o}}=t,a=re(e),[l]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const c=t.vnode.dynamicProps;for(let h=0;h<c.length;h++){let d=c[h];if(Cs(t.emitsOptions,d))continue;const p=s[d];if(l)if(ne(n,d))p!==n[d]&&(n[d]=p,u=!0);else{const g=Jn(d);e[g]=po(l,a,g,p,t,!1)}else p!==n[d]&&(n[d]=p,u=!0)}}}else{xc(t,s,e,n)&&(u=!0);let c;for(const h in a)(!s||!ne(s,h)&&((c=ci(h))===h||!ne(s,c)))&&(l?i&&(i[h]!==void 0||i[c]!==void 0)&&(e[h]=po(l,a,h,void 0,t,!0)):delete e[h]);if(n!==a)for(const h in n)(!s||!ne(s,h))&&(delete n[h],u=!0)}u&&Rt(t,"set","$attrs")}function xc(t,s,i,r){const[e,n]=t.propsOptions;let o=!1,a;if(s)for(let l in s){if(Tr(l))continue;const u=s[l];let c;e&&ne(e,c=Jn(l))?!n||!n.includes(c)?i[c]=u:(a||(a={}))[c]=u:Cs(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(n){const l=re(i),u=a||de;for(let c=0;c<n.length;c++){const h=n[c];i[h]=po(e,l,h,u[h],t,!ne(u,h))}}return o}function po(t,s,i,r,e,n){const o=t[i];if(o!=null){const a=ne(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&J(l)){const{propsDefaults:u}=e;i in u?r=u[i]:(ei(e),r=u[i]=l.call(null,s),_n())}else r=l}o[0]&&(n&&!a?r=!1:o[1]&&(r===""||r===ci(i))&&(r=!0))}return r}function Sc(t,s,i=!1){const r=s.propsCache,e=r.get(t);if(e)return e;const n=t.props,o={},a=[];let l=!1;if(!J(t)){const c=h=>{l=!0;const[d,p]=Sc(h,s,!0);Le(o,d),p&&a.push(...p)};!i&&s.mixins.length&&s.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!n&&!l)return pe(t)&&r.set(t,Yn),Yn;if(W(n))for(let c=0;c<n.length;c++){const h=Jn(n[c]);ol(h)&&(o[h]=de)}else if(n)for(const c in n){const h=Jn(c);if(ol(h)){const d=n[c],p=o[h]=W(d)||J(d)?{type:d}:Le({},d);if(p){const g=ul(Boolean,p.type),y=ul(String,p.type);p[0]=g>-1,p[1]=y<0||g<y,(g>-1||ne(p,"default"))&&a.push(h)}}}const u=[o,a];return pe(t)&&r.set(t,u),u}function ol(t){return t[0]!=="$"}function al(t){const s=t&&t.toString().match(/^\s*(function|class) (\w+)/);return s?s[2]:t===null?"null":""}function ll(t,s){return al(t)===al(s)}function ul(t,s){return W(s)?s.findIndex(i=>ll(i,t)):J(s)&&ll(s,t)?0:-1}const Pc=t=>t[0]==="_"||t==="$stable",oa=t=>W(t)?t.map(Et):[Et(t)],Nd=(t,s,i)=>{if(s._n)return s;const r=uo((...e)=>oa(s(...e)),i);return r._c=!1,r},kc=(t,s,i)=>{const r=t._ctx;for(const e in t){if(Pc(e))continue;const n=t[e];if(J(n))s[e]=Nd(e,n,r);else if(n!=null){const o=oa(n);s[e]=()=>o}}},Tc=(t,s)=>{const i=oa(s);t.slots.default=()=>i},Rd=(t,s)=>{if(t.vnode.shapeFlag&32){const i=s._;i?(t.slots=re(s),Vr(s,"_",i)):kc(s,t.slots={})}else t.slots={},s&&Tc(t,s);Vr(t.slots,ks,1)},Fd=(t,s,i)=>{const{vnode:r,slots:e}=t;let n=!0,o=de;if(r.shapeFlag&32){const a=s._;a?i&&a===1?n=!1:(Le(e,s),!i&&a===1&&delete e._):(n=!s.$stable,kc(s,e)),o=s}else s&&(Tc(t,s),o={default:1});if(n)for(const a in e)!Pc(a)&&!(a in o)&&delete e[a]};function vo(t,s,i,r,e=!1){if(W(t)){t.forEach((d,p)=>vo(d,s&&(W(s)?s[p]:s),i,r,e));return}if(wr(r)&&!e)return;const n=r.shapeFlag&4?Ts(r.component)||r.component.proxy:r.el,o=e?null:n,{i:a,r:l}=t,u=s&&s.r,c=a.refs===de?a.refs={}:a.refs,h=a.setupState;if(u!=null&&u!==l&&(Pe(u)?(c[u]=null,ne(h,u)&&(h[u]=null)):we(u)&&(u.value=null)),J(l))Jt(l,a,12,[o,c]);else{const d=Pe(l),p=we(l);if(d||p){const g=()=>{if(t.f){const y=d?ne(h,l)?h[l]:c[l]:l.value;e?W(y)&&Yo(y,n):W(y)?y.includes(n)||y.push(n):d?(c[l]=[n],ne(h,l)&&(h[l]=c[l])):(l.value=[n],t.k&&(c[t.k]=l.value))}else d?(c[l]=o,ne(h,l)&&(h[l]=o)):p&&(l.value=o,t.k&&(c[t.k]=o))};o?(g.id=-1,Ye(g,i)):g()}}}const Ye=cd;function Gd(t){return jd(t)}function jd(t,s){const i=ro();i.__VUE__=!0;const{insert:r,remove:e,patchProp:n,createElement:o,createText:a,createComment:l,setText:u,setElementText:c,parentNode:h,nextSibling:d,setScopeId:p=pt,insertStaticContent:g}=t,y=(_,x,P,O=null,A=null,M=null,F=!1,D=null,L=!!x.dynamicChildren)=>{if(_===x)return;_&&!mi(_,x)&&(O=Ze(_),Ve(_,A,M,!0),_=null),x.patchFlag===-2&&(L=!1,x.dynamicChildren=null);const{type:w,ref:V,shapeFlag:B}=x;switch(w){case Ps:m(_,x,P,O);break;case bn:E(_,x,P,O);break;case Vs:_==null&&b(x,P,O,F);break;case Be:R(_,x,P,O,A,M,F,D,L);break;default:B&1?N(_,x,P,O,A,M,F,D,L):B&6?me(_,x,P,O,A,M,F,D,L):(B&64||B&128)&&w.process(_,x,P,O,A,M,F,D,L,On)}V!=null&&A&&vo(V,_&&_.ref,M,x||_,!x)},m=(_,x,P,O)=>{if(_==null)r(x.el=a(x.children),P,O);else{const A=x.el=_.el;x.children!==_.children&&u(A,x.children)}},E=(_,x,P,O)=>{_==null?r(x.el=l(x.children||""),P,O):x.el=_.el},b=(_,x,P,O)=>{[_.el,_.anchor]=g(_.children,x,P,O,_.el,_.anchor)},C=({el:_,anchor:x},P,O)=>{let A;for(;_&&_!==x;)A=d(_),r(_,P,O),_=A;r(x,P,O)},S=({el:_,anchor:x})=>{let P;for(;_&&_!==x;)P=d(_),e(_),_=P;e(x)},N=(_,x,P,O,A,M,F,D,L)=>{F=F||x.type==="svg",_==null?G(x,P,O,A,M,F,D,L):K(_,x,A,M,F,D,L)},G=(_,x,P,O,A,M,F,D)=>{let L,w;const{type:V,props:B,shapeFlag:Y,transition:q,dirs:Q}=_;if(L=_.el=o(_.type,M,B&&B.is,B),Y&8?c(L,_.children):Y&16&&T(_.children,L,null,O,A,M&&V!=="foreignObject",F,D),Q&&sn(_,null,O,"created"),I(L,_,_.scopeId,F,O),B){for(const ue in B)ue!=="value"&&!Tr(ue)&&n(L,ue,null,B[ue],M,_.children,O,A,Je);"value"in B&&n(L,"value",null,B.value),(w=B.onVnodeBeforeMount)&&_t(w,O,_)}Q&&sn(_,null,O,"beforeMount");const fe=(!A||A&&!A.pendingBranch)&&q&&!q.persisted;fe&&q.beforeEnter(L),r(L,x,P),((w=B&&B.onVnodeMounted)||fe||Q)&&Ye(()=>{w&&_t(w,O,_),fe&&q.enter(L),Q&&sn(_,null,O,"mounted")},A)},I=(_,x,P,O,A)=>{if(P&&p(_,P),O)for(let M=0;M<O.length;M++)p(_,O[M]);if(A){let M=A.subTree;if(x===M){const F=A.vnode;I(_,F,F.scopeId,F.slotScopeIds,A.parent)}}},T=(_,x,P,O,A,M,F,D,L=0)=>{for(let w=L;w<_.length;w++){const V=_[w]=D?Wt(_[w]):Et(_[w]);y(null,V,x,P,O,A,M,F,D)}},K=(_,x,P,O,A,M,F)=>{const D=x.el=_.el;let{patchFlag:L,dynamicChildren:w,dirs:V}=x;L|=_.patchFlag&16;const B=_.props||de,Y=x.props||de;let q;P&&on(P,!1),(q=Y.onVnodeBeforeUpdate)&&_t(q,P,x,_),V&&sn(x,_,P,"beforeUpdate"),P&&on(P,!0);const Q=A&&x.type!=="foreignObject";if(w?$(_.dynamicChildren,w,D,P,O,Q,M):F||le(_,x,D,null,P,O,Q,M,!1),L>0){if(L&16)Z(D,x,B,Y,P,O,A);else if(L&2&&B.class!==Y.class&&n(D,"class",null,Y.class,A),L&4&&n(D,"style",B.style,Y.style,A),L&8){const fe=x.dynamicProps;for(let ue=0;ue<fe.length;ue++){const Ce=fe[ue],at=B[Ce],wn=Y[Ce];(wn!==at||Ce==="value")&&n(D,Ce,at,wn,A,_.children,P,O,Je)}}L&1&&_.children!==x.children&&c(D,x.children)}else!F&&w==null&&Z(D,x,B,Y,P,O,A);((q=Y.onVnodeUpdated)||V)&&Ye(()=>{q&&_t(q,P,x,_),V&&sn(x,_,P,"updated")},O)},$=(_,x,P,O,A,M,F)=>{for(let D=0;D<x.length;D++){const L=_[D],w=x[D],V=L.el&&(L.type===Be||!mi(L,w)||L.shapeFlag&70)?h(L.el):P;y(L,w,V,null,O,A,M,F,!0)}},Z=(_,x,P,O,A,M,F)=>{if(P!==O){if(P!==de)for(const D in P)!Tr(D)&&!(D in O)&&n(_,D,P[D],null,F,x.children,A,M,Je);for(const D in O){if(Tr(D))continue;const L=O[D],w=P[D];L!==w&&D!=="value"&&n(_,D,w,L,F,x.children,A,M,Je)}"value"in O&&n(_,"value",P.value,O.value)}},R=(_,x,P,O,A,M,F,D,L)=>{const w=x.el=_?_.el:a(""),V=x.anchor=_?_.anchor:a("");let{patchFlag:B,dynamicChildren:Y,slotScopeIds:q}=x;q&&(D=D?D.concat(q):q),_==null?(r(w,P,O),r(V,P,O),T(x.children,P,V,A,M,F,D,L)):B>0&&B&64&&Y&&_.dynamicChildren?($(_.dynamicChildren,Y,P,A,M,F,D),(x.key!=null||A&&x===A.subTree)&&Ac(_,x,!0)):le(_,x,P,V,A,M,F,D,L)},me=(_,x,P,O,A,M,F,D,L)=>{x.slotScopeIds=D,_==null?x.shapeFlag&512?A.ctx.activate(x,P,O,F,L):yt(x,P,O,A,M,F,L):st(_,x,L)},yt=(_,x,P,O,A,M,F)=>{const D=_.component=Jd(_,O,A);if(yc(_)&&(D.ctx.renderer=On),Zd(D),D.asyncDep){if(A&&A.registerDep(D,se),!_.el){const L=D.subTree=Ue(bn);E(null,L,x,P)}return}se(D,_,x,P,A,M,F)},st=(_,x,P)=>{const O=x.component=_.component;if(ad(_,x,P))if(O.asyncDep&&!O.asyncResolved){he(O,x,P);return}else O.next=x,td(O.update),O.update();else x.el=_.el,O.vnode=x},se=(_,x,P,O,A,M,F)=>{const D=()=>{if(_.isMounted){let{next:V,bu:B,u:Y,parent:q,vnode:Q}=_,fe=V,ue;on(_,!1),V?(V.el=Q.el,he(_,V,F)):V=Q,B&&Ar(B),(ue=V.props&&V.props.onVnodeBeforeUpdate)&&_t(ue,q,V,Q),on(_,!0);const Ce=Hs(_),at=_.subTree;_.subTree=Ce,y(at,Ce,h(at.el),Ze(at),_,A,M),V.el=Ce.el,fe===null&&ld(_,Ce.el),Y&&Ye(Y,A),(ue=V.props&&V.props.onVnodeUpdated)&&Ye(()=>_t(ue,q,V,Q),A)}else{let V;const{el:B,props:Y}=x,{bm:q,m:Q,parent:fe}=_,ue=wr(x);if(on(_,!1),q&&Ar(q),!ue&&(V=Y&&Y.onVnodeBeforeMount)&&_t(V,fe,x),on(_,!0),B&&js){const Ce=()=>{_.subTree=Hs(_),js(B,_.subTree,_,A,null)};ue?x.type.__asyncLoader().then(()=>!_.isUnmounted&&Ce()):Ce()}else{const Ce=_.subTree=Hs(_);y(null,Ce,P,O,_,A,M),x.el=Ce.el}if(Q&&Ye(Q,A),!ue&&(V=Y&&Y.onVnodeMounted)){const Ce=x;Ye(()=>_t(V,fe,Ce),A)}(x.shapeFlag&256||fe&&wr(fe.vnode)&&fe.vnode.shapeFlag&256)&&_.a&&Ye(_.a,A),_.isMounted=!0,x=P=O=null}},L=_.effect=new zo(D,()=>na(w),_.scope),w=_.update=()=>L.run();w.id=_.uid,on(_,!0),w()},he=(_,x,P)=>{x.component=_;const O=_.vnode.props;_.vnode=x,_.next=null,Ld(_,x.props,O,P),Fd(_,x.children,P),fi(),el(),di()},le=(_,x,P,O,A,M,F,D,L=!1)=>{const w=_&&_.children,V=_?_.shapeFlag:0,B=x.children,{patchFlag:Y,shapeFlag:q}=x;if(Y>0){if(Y&128){An(w,B,P,O,A,M,F,D,L);return}else if(Y&256){Ke(w,B,P,O,A,M,F,D,L);return}}q&8?(V&16&&Je(w,A,M),B!==w&&c(P,B)):V&16?q&16?An(w,B,P,O,A,M,F,D,L):Je(w,A,M,!0):(V&8&&c(P,""),q&16&&T(B,P,O,A,M,F,D,L))},Ke=(_,x,P,O,A,M,F,D,L)=>{_=_||Yn,x=x||Yn;const w=_.length,V=x.length,B=Math.min(w,V);let Y;for(Y=0;Y<B;Y++){const q=x[Y]=L?Wt(x[Y]):Et(x[Y]);y(_[Y],q,P,null,A,M,F,D,L)}w>V?Je(_,A,M,!0,!1,B):T(x,P,O,A,M,F,D,L,B)},An=(_,x,P,O,A,M,F,D,L)=>{let w=0;const V=x.length;let B=_.length-1,Y=V-1;for(;w<=B&&w<=Y;){const q=_[w],Q=x[w]=L?Wt(x[w]):Et(x[w]);if(mi(q,Q))y(q,Q,P,null,A,M,F,D,L);else break;w++}for(;w<=B&&w<=Y;){const q=_[B],Q=x[Y]=L?Wt(x[Y]):Et(x[Y]);if(mi(q,Q))y(q,Q,P,null,A,M,F,D,L);else break;B--,Y--}if(w>B){if(w<=Y){const q=Y+1,Q=q<V?x[q].el:O;for(;w<=Y;)y(null,x[w]=L?Wt(x[w]):Et(x[w]),P,Q,A,M,F,D,L),w++}}else if(w>Y)for(;w<=B;)Ve(_[w],A,M,!0),w++;else{const q=w,Q=w,fe=new Map;for(w=Q;w<=Y;w++){const $e=x[w]=L?Wt(x[w]):Et(x[w]);$e.key!=null&&fe.set($e.key,w)}let ue,Ce=0;const at=Y-Q+1;let wn=!1,Ua=0;const yi=new Array(at);for(w=0;w<at;w++)yi[w]=0;for(w=q;w<=B;w++){const $e=_[w];if(Ce>=at){Ve($e,A,M,!0);continue}let mt;if($e.key!=null)mt=fe.get($e.key);else for(ue=Q;ue<=Y;ue++)if(yi[ue-Q]===0&&mi($e,x[ue])){mt=ue;break}mt===void 0?Ve($e,A,M,!0):(yi[mt-Q]=w+1,mt>=Ua?Ua=mt:wn=!0,y($e,x[mt],P,null,A,M,F,D,L),Ce++)}const Va=wn?Bd(yi):Yn;for(ue=Va.length-1,w=at-1;w>=0;w--){const $e=Q+w,mt=x[$e],Ya=$e+1<V?x[$e+1].el:O;yi[w]===0?y(null,mt,P,Ya,A,M,F,D,L):wn&&(ue<0||w!==Va[ue]?ot(mt,P,Ya,2):ue--)}}},ot=(_,x,P,O,A=null)=>{const{el:M,type:F,transition:D,children:L,shapeFlag:w}=_;if(w&6){ot(_.component.subTree,x,P,O);return}if(w&128){_.suspense.move(x,P,O);return}if(w&64){F.move(_,x,P,On);return}if(F===Be){r(M,x,P);for(let B=0;B<L.length;B++)ot(L[B],x,P,O);r(_.anchor,x,P);return}if(F===Vs){C(_,x,P);return}if(O!==2&&w&1&&D)if(O===0)D.beforeEnter(M),r(M,x,P),Ye(()=>D.enter(M),A);else{const{leave:B,delayLeave:Y,afterLeave:q}=D,Q=()=>r(M,x,P),fe=()=>{B(M,()=>{Q(),q&&q()})};Y?Y(M,Q,fe):fe()}else r(M,x,P)},Ve=(_,x,P,O=!1,A=!1)=>{const{type:M,props:F,ref:D,children:L,dynamicChildren:w,shapeFlag:V,patchFlag:B,dirs:Y}=_;if(D!=null&&vo(D,null,P,_,!0),V&256){x.ctx.deactivate(_);return}const q=V&1&&Y,Q=!wr(_);let fe;if(Q&&(fe=F&&F.onVnodeBeforeUnmount)&&_t(fe,x,_),V&6)ur(_.component,P,O);else{if(V&128){_.suspense.unmount(P,O);return}q&&sn(_,null,x,"beforeUnmount"),V&64?_.type.remove(_,x,P,A,On,O):w&&(M!==Be||B>0&&B&64)?Je(w,x,P,!1,!0):(M===Be&&B&384||!A&&V&16)&&Je(L,x,P),O&&lr(_)}(Q&&(fe=F&&F.onVnodeUnmounted)||q)&&Ye(()=>{fe&&_t(fe,x,_),q&&sn(_,null,x,"unmounted")},P)},lr=_=>{const{type:x,el:P,anchor:O,transition:A}=_;if(x===Be){gi(P,O);return}if(x===Vs){S(_);return}const M=()=>{e(P),A&&!A.persisted&&A.afterLeave&&A.afterLeave()};if(_.shapeFlag&1&&A&&!A.persisted){const{leave:F,delayLeave:D}=A,L=()=>F(P,M);D?D(_.el,M,L):L()}else M()},gi=(_,x)=>{let P;for(;_!==x;)P=d(_),e(_),_=P;e(x)},ur=(_,x,P)=>{const{bum:O,scope:A,update:M,subTree:F,um:D}=_;O&&Ar(O),A.stop(),M&&(M.active=!1,Ve(F,_,x,P)),D&&Ye(D,x),Ye(()=>{_.isUnmounted=!0},x),x&&x.pendingBranch&&!x.isUnmounted&&_.asyncDep&&!_.asyncResolved&&_.suspenseId===x.pendingId&&(x.deps--,x.deps===0&&x.resolve())},Je=(_,x,P,O=!1,A=!1,M=0)=>{for(let F=M;F<_.length;F++)Ve(_[F],x,P,O,A)},Ze=_=>_.shapeFlag&6?Ze(_.component.subTree):_.shapeFlag&128?_.suspense.next():d(_.anchor||_.el),Ha=(_,x,P)=>{_==null?x._vnode&&Ve(x._vnode,null,null,!0):y(x._vnode||null,_,x,null,null,null,P),el(),fc(),x._vnode=_},On={p:y,um:Ve,m:ot,r:lr,mt:yt,mc:T,pc:le,pbc:$,n:Ze,o:t};let Gs,js;return s&&([Gs,js]=s(On)),{render:Ha,hydrate:Gs,createApp:Dd(Ha,Gs)}}function on({effect:t,update:s},i){t.allowRecurse=s.allowRecurse=i}function Ac(t,s,i=!1){const r=t.children,e=s.children;if(W(r)&&W(e))for(let n=0;n<r.length;n++){const o=r[n];let a=e[n];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=e[n]=Wt(e[n]),a.el=o.el),i||Ac(o,a)),a.type===Ps&&(a.el=o.el)}}function Bd(t){const s=t.slice(),i=[0];let r,e,n,o,a;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(e=i[i.length-1],t[e]<u){s[r]=e,i.push(r);continue}for(n=0,o=i.length-1;n<o;)a=n+o>>1,t[i[a]]<u?n=a+1:o=a;u<t[i[n]]&&(n>0&&(s[r]=i[n-1]),i[n]=r)}}for(n=i.length,o=i[n-1];n-- >0;)i[n]=o,o=s[o];return i}const Hd=t=>t.__isTeleport,Be=Symbol.for("v-fgt"),Ps=Symbol.for("v-txt"),bn=Symbol.for("v-cmt"),Vs=Symbol.for("v-stc"),Fi=[];let dt=null;function Ae(t=!1){Fi.push(dt=t?null:[])}function Ud(){Fi.pop(),dt=Fi[Fi.length-1]||null}let $i=1;function cl(t){$i+=t}function Oc(t){return t.dynamicChildren=$i>0?dt||Yn:null,Ud(),$i>0&&dt&&dt.push(t),t}function Me(t,s,i,r,e,n){return Oc(j(t,s,i,r,e,n,!0))}function Vd(t,s,i,r,e){return Oc(Ue(t,s,i,r,e,!0))}function Yd(t){return t?t.__v_isVNode===!0:!1}function mi(t,s){return t.type===s.type&&t.key===s.key}const ks="__vInternal",wc=({key:t})=>t??null,Mr=({ref:t,ref_key:s,ref_for:i})=>(typeof t=="number"&&(t=""+t),t!=null?Pe(t)||we(t)||J(t)?{i:ft,r:t,k:s,f:!!i}:t:null);function j(t,s=null,i=null,r=0,e=null,n=t===Be?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:s,key:s&&wc(s),ref:s&&Mr(s),scopeId:xs,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:n,patchFlag:r,dynamicProps:e,dynamicChildren:null,appContext:null,ctx:ft};return a?(aa(l,i),n&128&&t.normalize(l)):i&&(l.shapeFlag|=Pe(i)?8:16),$i>0&&!o&&dt&&(l.patchFlag>0||n&6)&&l.patchFlag!==32&&dt.push(l),l}const Ue=Xd;function Xd(t,s=null,i=null,r=0,e=null,n=!1){if((!t||t===xd)&&(t=bn),Yd(t)){const a=Qn(t,s,!0);return i&&aa(a,i),$i>0&&!n&&dt&&(a.shapeFlag&6?dt[dt.indexOf(t)]=a:dt.push(a)),a.patchFlag|=-2,a}if(np(t)&&(t=t.__vccOpts),s){s=$d(s);let{class:a,style:l}=s;a&&!Pe(a)&&(s.class=hi(a)),pe(l)&&(ic(l)&&!W(l)&&(l=Le({},l)),s.style=$o(l))}const o=Pe(t)?1:ud(t)?128:Hd(t)?64:pe(t)?4:J(t)?2:0;return j(t,s,i,r,e,o,n,!0)}function $d(t){return t?ic(t)||ks in t?Le({},t):t:null}function Qn(t,s,i=!1){const{props:r,ref:e,patchFlag:n,children:o}=t,a=s?zd(r||{},s):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&wc(a),ref:s&&s.ref?i&&e?W(e)?e.concat(Mr(s)):[e,Mr(s)]:Mr(s):e,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:s&&t.type!==Be?n===-1?16:n|16:n,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Qn(t.ssContent),ssFallback:t.ssFallback&&Qn(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function go(t=" ",s=0){return Ue(Ps,null,t,s)}function Wd(t="",s=!1){return s?(Ae(),Vd(bn,null,t)):Ue(bn,null,t)}function Et(t){return t==null||typeof t=="boolean"?Ue(bn):W(t)?Ue(Be,null,t.slice()):typeof t=="object"?Wt(t):Ue(Ps,null,String(t))}function Wt(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Qn(t)}function aa(t,s){let i=0;const{shapeFlag:r}=t;if(s==null)s=null;else if(W(s))i=16;else if(typeof s=="object")if(r&65){const e=s.default;e&&(e._c&&(e._d=!1),aa(t,e()),e._c&&(e._d=!0));return}else{i=32;const e=s._;!e&&!(ks in s)?s._ctx=ft:e===3&&ft&&(ft.slots._===1?s._=1:(s._=2,t.patchFlag|=1024))}else J(s)?(s={default:s,_ctx:ft},i=32):(s=String(s),r&64?(i=16,s=[go(s)]):i=8);t.children=s,t.shapeFlag|=i}function zd(...t){const s={};for(let i=0;i<t.length;i++){const r=t[i];for(const e in r)if(e==="class")s.class!==r.class&&(s.class=hi([s.class,r.class]));else if(e==="style")s.style=$o([s.style,r.style]);else if(gs(e)){const n=s[e],o=r[e];o&&n!==o&&!(W(n)&&n.includes(o))&&(s[e]=n?[].concat(n,o):o)}else e!==""&&(s[e]=r[e])}return s}function _t(t,s,i,r=null){vt(t,s,7,[i,r])}const qd=Cc();let Kd=0;function Jd(t,s,i){const r=t.type,e=(s?s.appContext:t.appContext)||qd,n={uid:Kd++,vnode:t,type:r,parent:s,appContext:e,root:null,next:null,subTree:null,effect:null,update:null,scope:new vf(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:s?s.provides:Object.create(e.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Sc(r,e),emitsOptions:pc(r,e),emit:null,emitted:null,propsDefaults:de,inheritAttrs:r.inheritAttrs,ctx:de,data:de,props:de,attrs:de,slots:de,refs:de,setupState:de,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return n.ctx={_:n},n.root=s?s.root:n,n.emit=rd.bind(null,n),t.ce&&t.ce(n),n}let Re=null,la,Dn,hl="__VUE_INSTANCE_SETTERS__";(Dn=ro()[hl])||(Dn=ro()[hl]=[]),Dn.push(t=>Re=t),la=t=>{Dn.length>1?Dn.forEach(s=>s(t)):Dn[0](t)};const ei=t=>{la(t),t.scope.on()},_n=()=>{Re&&Re.scope.off(),la(null)};function Dc(t){return t.vnode.shapeFlag&4}let Wi=!1;function Zd(t,s=!1){Wi=s;const{props:i,children:r}=t.vnode,e=Dc(t);Id(t,i,e,s),Rd(t,r);const n=e?Qd(t,s):void 0;return Wi=!1,n}function Qd(t,s){const i=t.type;t.accessCache=Object.create(null),t.proxy=rc(new Proxy(t.ctx,Sd));const{setup:r}=i;if(r){const e=t.setupContext=r.length>1?tp(t):null;ei(t),fi();const n=Jt(r,t,0,[t.props,e]);if(di(),_n(),ju(n)){if(n.then(_n,_n),s)return n.then(o=>{fl(t,o,s)}).catch(o=>{bs(o,t,0)});t.asyncDep=n}else fl(t,n,s)}else Mc(t,s)}function fl(t,s,i){J(s)?t.type.__ssrInlineRender?t.ssrRender=s:t.render=s:pe(s)&&(t.setupState=ac(s)),Mc(t,i)}let dl;function Mc(t,s,i){const r=t.type;if(!t.render){if(!s&&dl&&!r.render){const e=r.template||sa(t).template;if(e){const{isCustomElement:n,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,u=Le(Le({isCustomElement:n,delimiters:a},o),l);r.render=dl(e,u)}}t.render=r.render||pt}ei(t),fi(),Pd(t),di(),_n()}function ep(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(s,i){return Xe(t,"get","$attrs"),s[i]}}))}function tp(t){const s=i=>{t.exposed=i||{}};return{get attrs(){return ep(t)},slots:t.slots,emit:t.emit,expose:s}}function Ts(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(ac(rc(t.exposed)),{get(s,i){if(i in s)return s[i];if(i in Ri)return Ri[i](t)},has(s,i){return i in s||i in Ri}}))}function np(t){return J(t)&&"__vccOpts"in t}const ip=(t,s)=>Zf(t,s,Wi),rp=Symbol.for("v-scx"),sp=()=>Dr(rp),op="3.3.4",ap="http://www.w3.org/2000/svg",dn=typeof document<"u"?document:null,pl=dn&&dn.createElement("template"),lp={insert:(t,s,i)=>{s.insertBefore(t,i||null)},remove:t=>{const s=t.parentNode;s&&s.removeChild(t)},createElement:(t,s,i,r)=>{const e=s?dn.createElementNS(ap,t):dn.createElement(t,i?{is:i}:void 0);return t==="select"&&r&&r.multiple!=null&&e.setAttribute("multiple",r.multiple),e},createText:t=>dn.createTextNode(t),createComment:t=>dn.createComment(t),setText:(t,s)=>{t.nodeValue=s},setElementText:(t,s)=>{t.textContent=s},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>dn.querySelector(t),setScopeId(t,s){t.setAttribute(s,"")},insertStaticContent(t,s,i,r,e,n){const o=i?i.previousSibling:s.lastChild;if(e&&(e===n||e.nextSibling))for(;s.insertBefore(e.cloneNode(!0),i),!(e===n||!(e=e.nextSibling)););else{pl.innerHTML=r?`<svg>${t}</svg>`:t;const a=pl.content;if(r){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}s.insertBefore(a,i)}return[o?o.nextSibling:s.firstChild,i?i.previousSibling:s.lastChild]}};function up(t,s,i){const r=t._vtc;r&&(s=(s?[s,...r]:[...r]).join(" ")),s==null?t.removeAttribute("class"):i?t.setAttribute("class",s):t.className=s}function cp(t,s,i){const r=t.style,e=Pe(i);if(i&&!e){if(s&&!Pe(s))for(const n in s)i[n]==null&&yo(r,n,"");for(const n in i)yo(r,n,i[n])}else{const n=r.display;e?s!==i&&(r.cssText=i):s&&t.removeAttribute("style"),"_vod"in t&&(r.display=n)}}const vl=/\s*!important$/;function yo(t,s,i){if(W(i))i.forEach(r=>yo(t,s,r));else if(i==null&&(i=""),s.startsWith("--"))t.setProperty(s,i);else{const r=hp(t,s);vl.test(i)?t.setProperty(ci(r),i.replace(vl,""),"important"):t[r]=i}}const gl=["Webkit","Moz","ms"],Ys={};function hp(t,s){const i=Ys[s];if(i)return i;let r=Jn(s);if(r!=="filter"&&r in t)return Ys[s]=r;r=Uu(r);for(let e=0;e<gl.length;e++){const n=gl[e]+r;if(n in t)return Ys[s]=n}return s}const yl="http://www.w3.org/1999/xlink";function fp(t,s,i,r,e){if(r&&s.startsWith("xlink:"))i==null?t.removeAttributeNS(yl,s.slice(6,s.length)):t.setAttributeNS(yl,s,i);else{const n=ff(s);i==null||n&&!Yu(i)?t.removeAttribute(s):t.setAttribute(s,n?"":i)}}function dp(t,s,i,r,e,n,o){if(s==="innerHTML"||s==="textContent"){r&&o(r,e,n),t[s]=i??"";return}const a=t.tagName;if(s==="value"&&a!=="PROGRESS"&&!a.includes("-")){t._value=i;const u=a==="OPTION"?t.getAttribute("value"):t.value,c=i??"";u!==c&&(t.value=c),i==null&&t.removeAttribute(s);return}let l=!1;if(i===""||i==null){const u=typeof t[s];u==="boolean"?i=Yu(i):i==null&&u==="string"?(i="",l=!0):u==="number"&&(i=0,l=!0)}try{t[s]=i}catch{}l&&t.removeAttribute(s)}function Ic(t,s,i,r){t.addEventListener(s,i,r)}function pp(t,s,i,r){t.removeEventListener(s,i,r)}function vp(t,s,i,r,e=null){const n=t._vei||(t._vei={}),o=n[s];if(r&&o)o.value=r;else{const[a,l]=gp(s);if(r){const u=n[s]=_p(r,e);Ic(t,a,u,l)}else o&&(pp(t,a,o,l),n[s]=void 0)}}const ml=/(?:Once|Passive|Capture)$/;function gp(t){let s;if(ml.test(t)){s={};let r;for(;r=t.match(ml);)t=t.slice(0,t.length-r[0].length),s[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ci(t.slice(2)),s]}let Xs=0;const yp=Promise.resolve(),mp=()=>Xs||(yp.then(()=>Xs=0),Xs=Date.now());function _p(t,s){const i=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=i.attached)return;vt(Ep(r,i.value),s,5,[r])};return i.value=t,i.attached=mp(),i}function Ep(t,s){if(W(s)){const i=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{i.call(t),t._stopped=!0},s.map(r=>e=>!e._stopped&&r&&r(e))}else return s}const _l=/^on[a-z]/,bp=(t,s,i,r,e=!1,n,o,a,l)=>{s==="class"?up(t,r,e):s==="style"?cp(t,i,r):gs(s)?Vo(s)||vp(t,s,i,r,o):(s[0]==="."?(s=s.slice(1),!0):s[0]==="^"?(s=s.slice(1),!1):Cp(t,s,r,e))?dp(t,s,r,n,o,a,l):(s==="true-value"?t._trueValue=r:s==="false-value"&&(t._falseValue=r),fp(t,s,r,e))};function Cp(t,s,i,r){return r?!!(s==="innerHTML"||s==="textContent"||s in t&&_l.test(s)&&J(i)):s==="spellcheck"||s==="draggable"||s==="translate"||s==="form"||s==="list"&&t.tagName==="INPUT"||s==="type"&&t.tagName==="TEXTAREA"||_l.test(s)&&Pe(i)?!1:s in t}const El=t=>{const s=t.props["onUpdate:modelValue"]||!1;return W(s)?i=>Ar(s,i):s},bl={deep:!0,created(t,{value:s,modifiers:{number:i}},r){const e=ys(s);Ic(t,"change",()=>{const n=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>i?Vu(Kr(o)):Kr(o));t._assign(t.multiple?e?new Set(n):n:n[0])}),t._assign=El(r)},mounted(t,{value:s}){Cl(t,s)},beforeUpdate(t,s,i){t._assign=El(i)},updated(t,{value:s}){Cl(t,s)}};function Cl(t,s){const i=t.multiple;if(!(i&&!W(s)&&!ys(s))){for(let r=0,e=t.options.length;r<e;r++){const n=t.options[r],o=Kr(n);if(i)W(s)?n.selected=pf(s,o)>-1:n.selected=s.has(o);else if(_s(Kr(n),s)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!i&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Kr(t){return"_value"in t?t._value:t.value}const xp=["ctrl","shift","alt","meta"],Sp={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,s)=>xp.some(i=>t[`${i}Key`]&&!s.includes(i))},Jr=(t,s)=>(i,...r)=>{for(let e=0;e<s.length;e++){const n=Sp[s[e]];if(n&&n(i,s))return}return t(i,...r)},Lc={beforeMount(t,{value:s},{transition:i}){t._vod=t.style.display==="none"?"":t.style.display,i&&s?i.beforeEnter(t):_i(t,s)},mounted(t,{value:s},{transition:i}){i&&s&&i.enter(t)},updated(t,{value:s,oldValue:i},{transition:r}){!s!=!i&&(r?s?(r.beforeEnter(t),_i(t,!0),r.enter(t)):r.leave(t,()=>{_i(t,!1)}):_i(t,s))},beforeUnmount(t,{value:s}){_i(t,s)}};function _i(t,s){t.style.display=s?t._vod:"none"}const Pp=Le({patchProp:bp},lp);let xl;function kp(){return xl||(xl=Gd(Pp))}const Tp=(...t)=>{const s=kp().createApp(...t),{mount:i}=s;return s.mount=r=>{const e=Ap(r);if(!e)return;const n=s._component;!J(n)&&!n.render&&!n.template&&(n.template=e.innerHTML),e.innerHTML="";const o=i(e,!1,e instanceof SVGElement);return e instanceof Element&&(e.removeAttribute("v-cloak"),e.setAttribute("data-v-app","")),o},s};function Ap(t){return Pe(t)?document.querySelector(t):t}const Op={id:"topbar"},wp=j("h3",null,"Verfahrensrezept-Editor",-1),Dp=[wp],Mp={__name:"Topbar",setup(t){return(s,i)=>(Ae(),Me("div",Op,Dp))}},Ip="/assets/logo-03d6d6da.png";function Nc(t,s){return function(){return t.apply(s,arguments)}}const{toString:Lp}=Object.prototype,{getPrototypeOf:ua}=Object,As=(t=>s=>{const i=Lp.call(s);return t[i]||(t[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),kt=t=>(t=t.toLowerCase(),s=>As(s)===t),Os=t=>s=>typeof s===t,{isArray:pi}=Array,zi=Os("undefined");function Np(t){return t!==null&&!zi(t)&&t.constructor!==null&&!zi(t.constructor)&&rt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Rc=kt("ArrayBuffer");function Rp(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&Rc(t.buffer),s}const Fp=Os("string"),rt=Os("function"),Fc=Os("number"),ws=t=>t!==null&&typeof t=="object",Gp=t=>t===!0||t===!1,Ir=t=>{if(As(t)!=="object")return!1;const s=ua(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},jp=kt("Date"),Bp=kt("File"),Hp=kt("Blob"),Up=kt("FileList"),Vp=t=>ws(t)&&rt(t.pipe),Yp=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||rt(t.append)&&((s=As(t))==="formdata"||s==="object"&&rt(t.toString)&&t.toString()==="[object FormData]"))},Xp=kt("URLSearchParams"),$p=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ir(t,s,{allOwnKeys:i=!1}={}){if(t===null||typeof t>"u")return;let r,e;if(typeof t!="object"&&(t=[t]),pi(t))for(r=0,e=t.length;r<e;r++)s.call(null,t[r],r,t);else{const n=i?Object.getOwnPropertyNames(t):Object.keys(t),o=n.length;let a;for(r=0;r<o;r++)a=n[r],s.call(null,t[a],a,t)}}function Gc(t,s){s=s.toLowerCase();const i=Object.keys(t);let r=i.length,e;for(;r-- >0;)if(e=i[r],s===e.toLowerCase())return e;return null}const jc=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Bc=t=>!zi(t)&&t!==jc;function mo(){const{caseless:t}=Bc(this)&&this||{},s={},i=(r,e)=>{const n=t&&Gc(s,e)||e;Ir(s[n])&&Ir(r)?s[n]=mo(s[n],r):Ir(r)?s[n]=mo({},r):pi(r)?s[n]=r.slice():s[n]=r};for(let r=0,e=arguments.length;r<e;r++)arguments[r]&&ir(arguments[r],i);return s}const Wp=(t,s,i,{allOwnKeys:r}={})=>(ir(s,(e,n)=>{i&&rt(e)?t[n]=Nc(e,i):t[n]=e},{allOwnKeys:r}),t),zp=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),qp=(t,s,i,r)=>{t.prototype=Object.create(s.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),i&&Object.assign(t.prototype,i)},Kp=(t,s,i,r)=>{let e,n,o;const a={};if(s=s||{},t==null)return s;do{for(e=Object.getOwnPropertyNames(t),n=e.length;n-- >0;)o=e[n],(!r||r(o,t,s))&&!a[o]&&(s[o]=t[o],a[o]=!0);t=i!==!1&&ua(t)}while(t&&(!i||i(t,s))&&t!==Object.prototype);return s},Jp=(t,s,i)=>{t=String(t),(i===void 0||i>t.length)&&(i=t.length),i-=s.length;const r=t.indexOf(s,i);return r!==-1&&r===i},Zp=t=>{if(!t)return null;if(pi(t))return t;let s=t.length;if(!Fc(s))return null;const i=new Array(s);for(;s-- >0;)i[s]=t[s];return i},Qp=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&ua(Uint8Array)),ev=(t,s)=>{const r=(t&&t[Symbol.iterator]).call(t);let e;for(;(e=r.next())&&!e.done;){const n=e.value;s.call(t,n[0],n[1])}},tv=(t,s)=>{let i;const r=[];for(;(i=t.exec(s))!==null;)r.push(i);return r},nv=kt("HTMLFormElement"),iv=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,r,e){return r.toUpperCase()+e}),Sl=(({hasOwnProperty:t})=>(s,i)=>t.call(s,i))(Object.prototype),rv=kt("RegExp"),Hc=(t,s)=>{const i=Object.getOwnPropertyDescriptors(t),r={};ir(i,(e,n)=>{s(e,n,t)!==!1&&(r[n]=e)}),Object.defineProperties(t,r)},sv=t=>{Hc(t,(s,i)=>{if(rt(t)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const r=t[i];if(rt(r)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},ov=(t,s)=>{const i={},r=e=>{e.forEach(n=>{i[n]=!0})};return pi(t)?r(t):r(String(t).split(s)),i},av=()=>{},lv=(t,s)=>(t=+t,Number.isFinite(t)?t:s),$s="abcdefghijklmnopqrstuvwxyz",Pl="0123456789",Uc={DIGIT:Pl,ALPHA:$s,ALPHA_DIGIT:$s+$s.toUpperCase()+Pl},uv=(t=16,s=Uc.ALPHA_DIGIT)=>{let i="";const{length:r}=s;for(;t--;)i+=s[Math.random()*r|0];return i};function cv(t){return!!(t&&rt(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const hv=t=>{const s=new Array(10),i=(r,e)=>{if(ws(r)){if(s.indexOf(r)>=0)return;if(!("toJSON"in r)){s[e]=r;const n=pi(r)?[]:{};return ir(r,(o,a)=>{const l=i(o,e+1);!zi(l)&&(n[a]=l)}),s[e]=void 0,n}}return r};return i(t,0)},fv=kt("AsyncFunction"),dv=t=>t&&(ws(t)||rt(t))&&rt(t.then)&&rt(t.catch),k={isArray:pi,isArrayBuffer:Rc,isBuffer:Np,isFormData:Yp,isArrayBufferView:Rp,isString:Fp,isNumber:Fc,isBoolean:Gp,isObject:ws,isPlainObject:Ir,isUndefined:zi,isDate:jp,isFile:Bp,isBlob:Hp,isRegExp:rv,isFunction:rt,isStream:Vp,isURLSearchParams:Xp,isTypedArray:Qp,isFileList:Up,forEach:ir,merge:mo,extend:Wp,trim:$p,stripBOM:zp,inherits:qp,toFlatObject:Kp,kindOf:As,kindOfTest:kt,endsWith:Jp,toArray:Zp,forEachEntry:ev,matchAll:tv,isHTMLForm:nv,hasOwnProperty:Sl,hasOwnProp:Sl,reduceDescriptors:Hc,freezeMethods:sv,toObjectSet:ov,toCamelCase:iv,noop:av,toFiniteNumber:lv,findKey:Gc,global:jc,isContextDefined:Bc,ALPHABET:Uc,generateString:uv,isSpecCompliantForm:cv,toJSONObject:hv,isAsyncFn:fv,isThenable:dv};function ie(t,s,i,r,e){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),i&&(this.config=i),r&&(this.request=r),e&&(this.response=e)}k.inherits(ie,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:k.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Vc=ie.prototype,Yc={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Yc[t]={value:t}});Object.defineProperties(ie,Yc);Object.defineProperty(Vc,"isAxiosError",{value:!0});ie.from=(t,s,i,r,e,n)=>{const o=Object.create(Vc);return k.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),ie.call(o,t.message,s,i,r,e),o.cause=t,o.name=t.name,n&&Object.assign(o,n),o};const pv=null;function _o(t){return k.isPlainObject(t)||k.isArray(t)}function Xc(t){return k.endsWith(t,"[]")?t.slice(0,-2):t}function kl(t,s,i){return t?t.concat(s).map(function(e,n){return e=Xc(e),!i&&n?"["+e+"]":e}).join(i?".":""):s}function vv(t){return k.isArray(t)&&!t.some(_o)}const gv=k.toFlatObject(k,{},null,function(s){return/^is[A-Z]/.test(s)});function Ds(t,s,i){if(!k.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,i=k.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,m){return!k.isUndefined(m[y])});const r=i.metaTokens,e=i.visitor||c,n=i.dots,o=i.indexes,l=(i.Blob||typeof Blob<"u"&&Blob)&&k.isSpecCompliantForm(s);if(!k.isFunction(e))throw new TypeError("visitor must be a function");function u(g){if(g===null)return"";if(k.isDate(g))return g.toISOString();if(!l&&k.isBlob(g))throw new ie("Blob is not supported. Use a Buffer instead.");return k.isArrayBuffer(g)||k.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function c(g,y,m){let E=g;if(g&&!m&&typeof g=="object"){if(k.endsWith(y,"{}"))y=r?y:y.slice(0,-2),g=JSON.stringify(g);else if(k.isArray(g)&&vv(g)||(k.isFileList(g)||k.endsWith(y,"[]"))&&(E=k.toArray(g)))return y=Xc(y),E.forEach(function(C,S){!(k.isUndefined(C)||C===null)&&s.append(o===!0?kl([y],S,n):o===null?y:y+"[]",u(C))}),!1}return _o(g)?!0:(s.append(kl(m,y,n),u(g)),!1)}const h=[],d=Object.assign(gv,{defaultVisitor:c,convertValue:u,isVisitable:_o});function p(g,y){if(!k.isUndefined(g)){if(h.indexOf(g)!==-1)throw Error("Circular reference detected in "+y.join("."));h.push(g),k.forEach(g,function(E,b){(!(k.isUndefined(E)||E===null)&&e.call(s,E,k.isString(b)?b.trim():b,y,d))===!0&&p(E,y?y.concat(b):[b])}),h.pop()}}if(!k.isObject(t))throw new TypeError("data must be an object");return p(t),s}function Tl(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return s[r]})}function ca(t,s){this._pairs=[],t&&Ds(t,this,s)}const $c=ca.prototype;$c.append=function(s,i){this._pairs.push([s,i])};$c.toString=function(s){const i=s?function(r){return s.call(this,r,Tl)}:Tl;return this._pairs.map(function(e){return i(e[0])+"="+i(e[1])},"").join("&")};function yv(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Wc(t,s,i){if(!s)return t;const r=i&&i.encode||yv,e=i&&i.serialize;let n;if(e?n=e(s,i):n=k.isURLSearchParams(s)?s.toString():new ca(s,i).toString(r),n){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+n}return t}class mv{constructor(){this.handlers=[]}use(s,i,r){return this.handlers.push({fulfilled:s,rejected:i,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){k.forEach(this.handlers,function(r){r!==null&&s(r)})}}const Al=mv,zc={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},_v=typeof URLSearchParams<"u"?URLSearchParams:ca,Ev=typeof FormData<"u"?FormData:null,bv=typeof Blob<"u"?Blob:null,Cv=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),xv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),St={isBrowser:!0,classes:{URLSearchParams:_v,FormData:Ev,Blob:bv},isStandardBrowserEnv:Cv,isStandardBrowserWebWorkerEnv:xv,protocols:["http","https","file","blob","url","data"]};function Sv(t,s){return Ds(t,new St.classes.URLSearchParams,Object.assign({visitor:function(i,r,e,n){return St.isNode&&k.isBuffer(i)?(this.append(r,i.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},s))}function Pv(t){return k.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function kv(t){const s={},i=Object.keys(t);let r;const e=i.length;let n;for(r=0;r<e;r++)n=i[r],s[n]=t[n];return s}function qc(t){function s(i,r,e,n){let o=i[n++];const a=Number.isFinite(+o),l=n>=i.length;return o=!o&&k.isArray(e)?e.length:o,l?(k.hasOwnProp(e,o)?e[o]=[e[o],r]:e[o]=r,!a):((!e[o]||!k.isObject(e[o]))&&(e[o]=[]),s(i,r,e[o],n)&&k.isArray(e[o])&&(e[o]=kv(e[o])),!a)}if(k.isFormData(t)&&k.isFunction(t.entries)){const i={};return k.forEachEntry(t,(r,e)=>{s(Pv(r),e,i,0)}),i}return null}const Tv={"Content-Type":void 0};function Av(t,s,i){if(k.isString(t))try{return(s||JSON.parse)(t),k.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(i||JSON.stringify)(t)}const Ms={transitional:zc,adapter:["xhr","http"],transformRequest:[function(s,i){const r=i.getContentType()||"",e=r.indexOf("application/json")>-1,n=k.isObject(s);if(n&&k.isHTMLForm(s)&&(s=new FormData(s)),k.isFormData(s))return e&&e?JSON.stringify(qc(s)):s;if(k.isArrayBuffer(s)||k.isBuffer(s)||k.isStream(s)||k.isFile(s)||k.isBlob(s))return s;if(k.isArrayBufferView(s))return s.buffer;if(k.isURLSearchParams(s))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let a;if(n){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Sv(s,this.formSerializer).toString();if((a=k.isFileList(s))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Ds(a?{"files[]":s}:s,l&&new l,this.formSerializer)}}return n||e?(i.setContentType("application/json",!1),Av(s)):s}],transformResponse:[function(s){const i=this.transitional||Ms.transitional,r=i&&i.forcedJSONParsing,e=this.responseType==="json";if(s&&k.isString(s)&&(r&&!this.responseType||e)){const o=!(i&&i.silentJSONParsing)&&e;try{return JSON.parse(s)}catch(a){if(o)throw a.name==="SyntaxError"?ie.from(a,ie.ERR_BAD_RESPONSE,this,null,this.response):a}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:St.classes.FormData,Blob:St.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};k.forEach(["delete","get","head"],function(s){Ms.headers[s]={}});k.forEach(["post","put","patch"],function(s){Ms.headers[s]=k.merge(Tv)});const ha=Ms,Ov=k.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),wv=t=>{const s={};let i,r,e;return t&&t.split(`
`).forEach(function(o){e=o.indexOf(":"),i=o.substring(0,e).trim().toLowerCase(),r=o.substring(e+1).trim(),!(!i||s[i]&&Ov[i])&&(i==="set-cookie"?s[i]?s[i].push(r):s[i]=[r]:s[i]=s[i]?s[i]+", "+r:r)}),s},Ol=Symbol("internals");function Ei(t){return t&&String(t).trim().toLowerCase()}function Lr(t){return t===!1||t==null?t:k.isArray(t)?t.map(Lr):String(t)}function Dv(t){const s=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=i.exec(t);)s[r[1]]=r[2];return s}const Mv=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Ws(t,s,i,r,e){if(k.isFunction(r))return r.call(this,s,i);if(e&&(s=i),!!k.isString(s)){if(k.isString(r))return s.indexOf(r)!==-1;if(k.isRegExp(r))return r.test(s)}}function Iv(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,i,r)=>i.toUpperCase()+r)}function Lv(t,s){const i=k.toCamelCase(" "+s);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+i,{value:function(e,n,o){return this[r].call(this,s,e,n,o)},configurable:!0})})}class Is{constructor(s){s&&this.set(s)}set(s,i,r){const e=this;function n(a,l,u){const c=Ei(l);if(!c)throw new Error("header name must be a non-empty string");const h=k.findKey(e,c);(!h||e[h]===void 0||u===!0||u===void 0&&e[h]!==!1)&&(e[h||l]=Lr(a))}const o=(a,l)=>k.forEach(a,(u,c)=>n(u,c,l));return k.isPlainObject(s)||s instanceof this.constructor?o(s,i):k.isString(s)&&(s=s.trim())&&!Mv(s)?o(wv(s),i):s!=null&&n(i,s,r),this}get(s,i){if(s=Ei(s),s){const r=k.findKey(this,s);if(r){const e=this[r];if(!i)return e;if(i===!0)return Dv(e);if(k.isFunction(i))return i.call(this,e,r);if(k.isRegExp(i))return i.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,i){if(s=Ei(s),s){const r=k.findKey(this,s);return!!(r&&this[r]!==void 0&&(!i||Ws(this,this[r],r,i)))}return!1}delete(s,i){const r=this;let e=!1;function n(o){if(o=Ei(o),o){const a=k.findKey(r,o);a&&(!i||Ws(r,r[a],a,i))&&(delete r[a],e=!0)}}return k.isArray(s)?s.forEach(n):n(s),e}clear(s){const i=Object.keys(this);let r=i.length,e=!1;for(;r--;){const n=i[r];(!s||Ws(this,this[n],n,s,!0))&&(delete this[n],e=!0)}return e}normalize(s){const i=this,r={};return k.forEach(this,(e,n)=>{const o=k.findKey(r,n);if(o){i[o]=Lr(e),delete i[n];return}const a=s?Iv(n):String(n).trim();a!==n&&delete i[n],i[a]=Lr(e),r[a]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const i=Object.create(null);return k.forEach(this,(r,e)=>{r!=null&&r!==!1&&(i[e]=s&&k.isArray(r)?r.join(", "):r)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,i])=>s+": "+i).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...i){const r=new this(s);return i.forEach(e=>r.set(e)),r}static accessor(s){const r=(this[Ol]=this[Ol]={accessors:{}}).accessors,e=this.prototype;function n(o){const a=Ei(o);r[a]||(Lv(e,o),r[a]=!0)}return k.isArray(s)?s.forEach(n):n(s),this}}Is.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);k.freezeMethods(Is.prototype);k.freezeMethods(Is);const Nt=Is;function zs(t,s){const i=this||ha,r=s||i,e=Nt.from(r.headers);let n=r.data;return k.forEach(t,function(a){n=a.call(i,n,e.normalize(),s?s.status:void 0)}),e.normalize(),n}function Kc(t){return!!(t&&t.__CANCEL__)}function rr(t,s,i){ie.call(this,t??"canceled",ie.ERR_CANCELED,s,i),this.name="CanceledError"}k.inherits(rr,ie,{__CANCEL__:!0});function Nv(t,s,i){const r=i.config.validateStatus;!i.status||!r||r(i.status)?t(i):s(new ie("Request failed with status code "+i.status,[ie.ERR_BAD_REQUEST,ie.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}const Rv=St.isStandardBrowserEnv?function(){return{write:function(i,r,e,n,o,a){const l=[];l.push(i+"="+encodeURIComponent(r)),k.isNumber(e)&&l.push("expires="+new Date(e).toGMTString()),k.isString(n)&&l.push("path="+n),k.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(i){const r=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(i){this.write(i,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Fv(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Gv(t,s){return s?t.replace(/\/+$/,"")+"/"+s.replace(/^\/+/,""):t}function Jc(t,s){return t&&!Fv(s)?Gv(t,s):s}const jv=St.isStandardBrowserEnv?function(){const s=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");let r;function e(n){let o=n;return s&&(i.setAttribute("href",o),o=i.href),i.setAttribute("href",o),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return r=e(window.location.href),function(o){const a=k.isString(o)?e(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function Bv(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function Hv(t,s){t=t||10;const i=new Array(t),r=new Array(t);let e=0,n=0,o;return s=s!==void 0?s:1e3,function(l){const u=Date.now(),c=r[n];o||(o=u),i[e]=l,r[e]=u;let h=n,d=0;for(;h!==e;)d+=i[h++],h=h%t;if(e=(e+1)%t,e===n&&(n=(n+1)%t),u-o<s)return;const p=c&&u-c;return p?Math.round(d*1e3/p):void 0}}function wl(t,s){let i=0;const r=Hv(50,250);return e=>{const n=e.loaded,o=e.lengthComputable?e.total:void 0,a=n-i,l=r(a),u=n<=o;i=n;const c={loaded:n,total:o,progress:o?n/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&u?(o-n)/l:void 0,event:e};c[s?"download":"upload"]=!0,t(c)}}const Uv=typeof XMLHttpRequest<"u",Vv=Uv&&function(t){return new Promise(function(i,r){let e=t.data;const n=Nt.from(t.headers).normalize(),o=t.responseType;let a;function l(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}k.isFormData(e)&&(St.isStandardBrowserEnv||St.isStandardBrowserWebWorkerEnv?n.setContentType(!1):n.setContentType("multipart/form-data;",!1));let u=new XMLHttpRequest;if(t.auth){const p=t.auth.username||"",g=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";n.set("Authorization","Basic "+btoa(p+":"+g))}const c=Jc(t.baseURL,t.url);u.open(t.method.toUpperCase(),Wc(c,t.params,t.paramsSerializer),!0),u.timeout=t.timeout;function h(){if(!u)return;const p=Nt.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),y={data:!o||o==="text"||o==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:p,config:t,request:u};Nv(function(E){i(E),l()},function(E){r(E),l()},y),u=null}if("onloadend"in u?u.onloadend=h:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(h)},u.onabort=function(){u&&(r(new ie("Request aborted",ie.ECONNABORTED,t,u)),u=null)},u.onerror=function(){r(new ie("Network Error",ie.ERR_NETWORK,t,u)),u=null},u.ontimeout=function(){let g=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const y=t.transitional||zc;t.timeoutErrorMessage&&(g=t.timeoutErrorMessage),r(new ie(g,y.clarifyTimeoutError?ie.ETIMEDOUT:ie.ECONNABORTED,t,u)),u=null},St.isStandardBrowserEnv){const p=(t.withCredentials||jv(c))&&t.xsrfCookieName&&Rv.read(t.xsrfCookieName);p&&n.set(t.xsrfHeaderName,p)}e===void 0&&n.setContentType(null),"setRequestHeader"in u&&k.forEach(n.toJSON(),function(g,y){u.setRequestHeader(y,g)}),k.isUndefined(t.withCredentials)||(u.withCredentials=!!t.withCredentials),o&&o!=="json"&&(u.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&u.addEventListener("progress",wl(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",wl(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=p=>{u&&(r(!p||p.type?new rr(null,t,u):p),u.abort(),u=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const d=Bv(c);if(d&&St.protocols.indexOf(d)===-1){r(new ie("Unsupported protocol "+d+":",ie.ERR_BAD_REQUEST,t));return}u.send(e||null)})},Nr={http:pv,xhr:Vv};k.forEach(Nr,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const Yv={getAdapter:t=>{t=k.isArray(t)?t:[t];const{length:s}=t;let i,r;for(let e=0;e<s&&(i=t[e],!(r=k.isString(i)?Nr[i.toLowerCase()]:i));e++);if(!r)throw r===!1?new ie(`Adapter ${i} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(k.hasOwnProp(Nr,i)?`Adapter '${i}' is not available in the build`:`Unknown adapter '${i}'`);if(!k.isFunction(r))throw new TypeError("adapter is not a function");return r},adapters:Nr};function qs(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new rr(null,t)}function Dl(t){return qs(t),t.headers=Nt.from(t.headers),t.data=zs.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Yv.getAdapter(t.adapter||ha.adapter)(t).then(function(r){return qs(t),r.data=zs.call(t,t.transformResponse,r),r.headers=Nt.from(r.headers),r},function(r){return Kc(r)||(qs(t),r&&r.response&&(r.response.data=zs.call(t,t.transformResponse,r.response),r.response.headers=Nt.from(r.response.headers))),Promise.reject(r)})}const Ml=t=>t instanceof Nt?t.toJSON():t;function ti(t,s){s=s||{};const i={};function r(u,c,h){return k.isPlainObject(u)&&k.isPlainObject(c)?k.merge.call({caseless:h},u,c):k.isPlainObject(c)?k.merge({},c):k.isArray(c)?c.slice():c}function e(u,c,h){if(k.isUndefined(c)){if(!k.isUndefined(u))return r(void 0,u,h)}else return r(u,c,h)}function n(u,c){if(!k.isUndefined(c))return r(void 0,c)}function o(u,c){if(k.isUndefined(c)){if(!k.isUndefined(u))return r(void 0,u)}else return r(void 0,c)}function a(u,c,h){if(h in s)return r(u,c);if(h in t)return r(void 0,u)}const l={url:n,method:n,data:n,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,c)=>e(Ml(u),Ml(c),!0)};return k.forEach(Object.keys(Object.assign({},t,s)),function(c){const h=l[c]||e,d=h(t[c],s[c],c);k.isUndefined(d)&&h!==a||(i[c]=d)}),i}const Zc="1.4.0",fa={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{fa[t]=function(r){return typeof r===t||"a"+(s<1?"n ":" ")+t}});const Il={};fa.transitional=function(s,i,r){function e(n,o){return"[Axios v"+Zc+"] Transitional option '"+n+"'"+o+(r?". "+r:"")}return(n,o,a)=>{if(s===!1)throw new ie(e(o," has been removed"+(i?" in "+i:"")),ie.ERR_DEPRECATED);return i&&!Il[o]&&(Il[o]=!0,console.warn(e(o," has been deprecated since v"+i+" and will be removed in the near future"))),s?s(n,o,a):!0}};function Xv(t,s,i){if(typeof t!="object")throw new ie("options must be an object",ie.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let e=r.length;for(;e-- >0;){const n=r[e],o=s[n];if(o){const a=t[n],l=a===void 0||o(a,n,t);if(l!==!0)throw new ie("option "+n+" must be "+l,ie.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new ie("Unknown option "+n,ie.ERR_BAD_OPTION)}}const Eo={assertOptions:Xv,validators:fa},Ut=Eo.validators;class Zr{constructor(s){this.defaults=s,this.interceptors={request:new Al,response:new Al}}request(s,i){typeof s=="string"?(i=i||{},i.url=s):i=s||{},i=ti(this.defaults,i);const{transitional:r,paramsSerializer:e,headers:n}=i;r!==void 0&&Eo.assertOptions(r,{silentJSONParsing:Ut.transitional(Ut.boolean),forcedJSONParsing:Ut.transitional(Ut.boolean),clarifyTimeoutError:Ut.transitional(Ut.boolean)},!1),e!=null&&(k.isFunction(e)?i.paramsSerializer={serialize:e}:Eo.assertOptions(e,{encode:Ut.function,serialize:Ut.function},!0)),i.method=(i.method||this.defaults.method||"get").toLowerCase();let o;o=n&&k.merge(n.common,n[i.method]),o&&k.forEach(["delete","get","head","post","put","patch","common"],g=>{delete n[g]}),i.headers=Nt.concat(o,n);const a=[];let l=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(i)===!1||(l=l&&y.synchronous,a.unshift(y.fulfilled,y.rejected))});const u=[];this.interceptors.response.forEach(function(y){u.push(y.fulfilled,y.rejected)});let c,h=0,d;if(!l){const g=[Dl.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,u),d=g.length,c=Promise.resolve(i);h<d;)c=c.then(g[h++],g[h++]);return c}d=a.length;let p=i;for(h=0;h<d;){const g=a[h++],y=a[h++];try{p=g(p)}catch(m){y.call(this,m);break}}try{c=Dl.call(this,p)}catch(g){return Promise.reject(g)}for(h=0,d=u.length;h<d;)c=c.then(u[h++],u[h++]);return c}getUri(s){s=ti(this.defaults,s);const i=Jc(s.baseURL,s.url);return Wc(i,s.params,s.paramsSerializer)}}k.forEach(["delete","get","head","options"],function(s){Zr.prototype[s]=function(i,r){return this.request(ti(r||{},{method:s,url:i,data:(r||{}).data}))}});k.forEach(["post","put","patch"],function(s){function i(r){return function(n,o,a){return this.request(ti(a||{},{method:s,headers:r?{"Content-Type":"multipart/form-data"}:{},url:n,data:o}))}}Zr.prototype[s]=i(),Zr.prototype[s+"Form"]=i(!0)});const Rr=Zr;class da{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(n){i=n});const r=this;this.promise.then(e=>{if(!r._listeners)return;let n=r._listeners.length;for(;n-- >0;)r._listeners[n](e);r._listeners=null}),this.promise.then=e=>{let n;const o=new Promise(a=>{r.subscribe(a),n=a}).then(e);return o.cancel=function(){r.unsubscribe(n)},o},s(function(n,o,a){r.reason||(r.reason=new rr(n,o,a),i(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const i=this._listeners.indexOf(s);i!==-1&&this._listeners.splice(i,1)}static source(){let s;return{token:new da(function(e){s=e}),cancel:s}}}const $v=da;function Wv(t){return function(i){return t.apply(null,i)}}function zv(t){return k.isObject(t)&&t.isAxiosError===!0}const bo={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(bo).forEach(([t,s])=>{bo[s]=t});const qv=bo;function Qc(t){const s=new Rr(t),i=Nc(Rr.prototype.request,s);return k.extend(i,Rr.prototype,s,{allOwnKeys:!0}),k.extend(i,s,null,{allOwnKeys:!0}),i.create=function(e){return Qc(ti(t,e))},i}const ke=Qc(ha);ke.Axios=Rr;ke.CanceledError=rr;ke.CancelToken=$v;ke.isCancel=Kc;ke.VERSION=Zc;ke.toFormData=Ds;ke.AxiosError=ie;ke.Cancel=ke.CanceledError;ke.all=function(s){return Promise.all(s)};ke.spread=Wv;ke.isAxiosError=zv;ke.mergeConfig=ti;ke.AxiosHeaders=Nt;ke.formToJSON=t=>qc(k.isHTMLForm(t)?new FormData(t):t);ke.HttpStatusCode=qv;ke.default=ke;const Kv=ke;const pa=(t,s)=>{const i=t.__vccOpts||t;for(const[r,e]of s)i[r]=e;return i},ye=t=>(ia("data-v-fce7e8a1"),t=t(),ra(),t),Jv={id:"addElements",class:"settings"},Zv={style:{display:"flex"}},Qv={style:{float:"left"}},eg=ye(()=>j("span",{class:"close-icons"},"X",-1)),tg=[eg],ng=ye(()=>j("br",null,null,-1)),ig=["value"],rg=ye(()=>j("option",{value:"new"},"add new to server",-1)),sg=ye(()=>j("span",{class:"reload"},"↻",-1)),og=[sg],ag={key:0},lg=ye(()=>j("legend",null,"Add new Ontology to server: ",-1)),ug=ye(()=>j("span",null,"Please enter a valid path to either an Ontologie File or URL",-1)),cg=ye(()=>j("br",null,null,-1)),hg=ye(()=>j("label",{for:"url_input"},"Select URL: ",-1)),fg=ye(()=>j("input",{type:"url",id:"url_input"},null,-1)),dg=ye(()=>j("br",null,null,-1)),pg=ye(()=>j("span",null,"OR",-1)),vg=ye(()=>j("br",null,null,-1)),gg=ye(()=>j("label",{for:"file_input"},"Select File: ",-1)),yg=ye(()=>j("br",null,null,-1)),mg=ye(()=>j("label",{for:"add_to_server_btt"},"Add Ontology to Server: ",-1)),_g=ye(()=>j("h5",null,"ADD Ontology to Server",-1)),Eg=[_g],bg=ye(()=>j("br",null,null,-1)),Cg=ye(()=>j("label",{for:"super_class_select"},"Select Ontology to add: ",-1)),xg=["value"],Sg=ye(()=>j("br",null,null,-1)),Pg=ye(()=>j("label",{for:"relation_input"},"Name of Relation: ",-1)),kg=ye(()=>j("input",{id:"relation_input",type:"text",value:"subclass_of"},null,-1)),Tg=ye(()=>j("br",null,null,-1)),Ag=ye(()=>j("br",null,null,-1)),Og={__name:"addDialog",props:{element_type:String},emits:["close","add"],setup(t,{emit:s}){const i=t,{element_type:r}=lc(i),e=qe(""),n=qe(""),o=qe([""]),a=qe([]);qe({});const l=qe({}),u=Kv.create({baseURL:""});function c(){u.get("/onto").then(E=>{console.log(E.data),console.log("test"),o.value=E.data,console.log(o.value),console.log("test2")}).catch(E=>{console.log(E.response)})}function h(){s("close")}function d(E,b){console.log("adding started"),console.log(E+b);let C=g(E,b);console.log(C),s("add",C)}function p(E){E!=="new"&&u.get("/onto/"+E+"/classes").then(b=>{console.log(b.data),console.log("test"),a.value=b.data,console.log(o.value),console.log("test2")}).catch(b=>{console.log(b.response)})}function g(E,b){u.get("/onto/"+E+"/"+b+"/subclasses").then(C=>{console.log(C.data),C.data,s("add",C.data)}).catch(C=>{console.log(C.response)})}function y(E){const b=E.target;b&&b.files&&(l.value=b.files[0])}function m(E,b){var C=new FormData;C.append("file",b),console.log("test"),u.post("/onto",C,{headers:{"Content-Type":"multipart/form-data"}}).then(S=>{console.log(S.data),console.log("test")}).catch(S=>{console.log(S.response)})}return c(),(E,b)=>(Ae(),Me("div",Jv,[j("div",Zv,[j("h3",Qv,"Add "+Mt(it(r)),1),j("button",{onClick:h},tg)]),ng,j("form",null,[j("span",null,"Select Ontology to add "+Mt(it(r))+": ",1),Wr(j("select",{"onUpdate:modelValue":b[0]||(b[0]=C=>e.value=C),name:"Ontology",id:"ontoSelect",onChange:b[1]||(b[1]=C=>p(e.value))},[(Ae(!0),Me(Be,null,Xi(o.value,C=>(Ae(),Me("option",{value:C},Mt(C),9,ig))),256)),rg],544),[[bl,e.value]]),j("button",{onClick:c},og),e.value==="new"?(Ae(),Me("fieldset",ag,[lg,ug,cg,hg,fg,dg,pg,vg,gg,j("input",{onChange:b[2]||(b[2]=C=>y(C)),type:"file",id:"file_input",enctype:"multipart/form-data/"},null,32),yg,mg,j("button",{class:"button",type:"button",onClick:b[3]||(b[3]=C=>m("test.owl",l.value))},Eg)])):Wd("",!0),bg,Cg,Wr(j("select",{id:"super_class_select","onUpdate:modelValue":b[4]||(b[4]=C=>n.value=C),name:"super-class"},[(Ae(!0),Me(Be,null,Xi(a.value,C=>(Ae(),Me("option",{value:C},Mt(C),9,xg))),256))],512),[[bl,n.value]]),Sg,Pg,kg,Tg,Ag]),j("button",{class:"button",type:"button",onClick:b[5]||(b[5]=C=>d(e.value,n.value))},[j("h5",null,"ADD "+Mt(it(r))+" to Sidebar",1)])]))}},wg=pa(Og,[["__scopeId","data-v-fce7e8a1"]]);const sr=t=>(ia("data-v-51801a2b"),t=t(),ra(),t),Dg={id:"elements_window"},Mg={id:"elements_heading"},Ig={style:{float:"left"}},Lg=sr(()=>j("span",{class:"toggle-icons"},"+",-1)),Ng=[Lg],Rg=sr(()=>j("div",{class:"element_spacer"},null,-1)),Fg={id:"elements"},Gg=sr(()=>j("div",{class:"element_spacer"},null,-1)),jg={id:"child_wrapper"},Bg=["onDragstart"],Hg=sr(()=>j("div",{class:"element_spacer"},null,-1)),Ug=sr(()=>j("div",{class:"element_spacer"},null,-1)),Vg={__name:"elementWindow",props:{element_type:String},setup(t){const s=t,{element_type:i}=lc(s);let r=qe({});var e="";i.value==="Processes"?(e="process_element sidebar_element",r.value={OperationChangingMaterial:{type:"process_package",name:"OperationChangingMaterial",children:[{type:"process",name:"Combining"},{type:"process",name:"Separating"},{type:"process",name:"Agglomerating"},{type:"process",name:"Dividing"},{type:"process",name:"Changing_the_enthalpy"}]}}):i.value==="Materials"?(e="material_element sidebar_element",r={Grundmaterialien:{type:"materials_package",name:"foundation_materials",children:[{type:"material",name:"Eingangsmaterial"},{type:"material",name:"Zwischenprodukt"},{type:"material",name:"Endprodukt"}]}}):console.log("unknown element type: "+i);let n=qe(!1);function o(u){console.log("materials in sidebar"),r.value=u}const a=()=>{n.value=!n.value},l=(u,c,h,d)=>{console.log("dragstart"),u.dataTransfer.dropEffect="copy",u.dataTransfer.effectAllowed="copy",u.dataTransfer.setData("itemID",c),u.dataTransfer.setData("itemName",h),u.dataTransfer.setData("itemClasses",d)};return(u,c)=>(Ae(),Me(Be,null,[j("div",Dg,[j("div",Mg,[j("div",Ig,[j("h4",null,Mt(it(i)),1)]),j("button",{onClick:a},Ng)]),Rg,j("div",Fg,[(Ae(!0),Me(Be,null,Xi(it(r),(h,d)=>(Ae(),Me("div",null,[j("div",null,Mt(d),1),Gg,(Ae(!0),Me(Be,null,Xi(h.children,p=>(Ae(),Me("div",jg,[j("div",{id:"{{element.name}}",class:hi(it(e)),onDragstart:g=>l(g,"testId",p.name,it(e)),draggable:"true"},Mt(p.name),43,Bg),Hg]))),256)),Ug]))),256))])]),Wr(Ue(wg,{element_type:it(i),onClose:c[0]||(c[0]=h=>we(n)?n.value=!1:n=!1),onAdd:o},null,8,["element_type"]),[[Lc,it(n)]])],64))}},Ll=pa(Vg,[["__scopeId","data-v-51801a2b"]]);const va=t=>(ia("data-v-33058346"),t=t(),ra(),t),Yg={class:"logo"},Xg=["src"],$g=va(()=>j("span",{class:"material-icons"},">>",-1)),Wg=[$g],zg=va(()=>j("div",{class:"element_spacer"},null,-1)),qg=va(()=>j("div",{class:"element_spacer"},null,-1)),Kg={__name:"Sidebar",setup(t){const s=qe(localStorage.getItem("is_expanded")==="true"),i=()=>{s.value=!s.value,localStorage.setItem("is_expanded",s.value)};return(r,e)=>(Ae(),Me("aside",{class:hi(`${s.value?"is-expanded":""}`),onDrop:e[0]||(e[0]=n=>r.onDrop(n)),onDragenter:e[1]||(e[1]=Jr(()=>{},["prevent"])),onDragover:e[2]||(e[2]=Jr(()=>{},["prevent"]))},[j("div",Yg,[j("img",{src:it(Ip),alt:"Vue"},null,8,Xg)]),j("div",{class:"menu-toggle-wrap"},[j("button",{class:"menu-toggle",onClick:i},Wg)]),Wr(j("div",null,[zg,Ue(Ll,{element_type:"Materials"},{default:uo(()=>[go(" Test ")]),_:1}),qg,Ue(Ll,{element_type:"Processes"},{default:uo(()=>[go(" Test ")]),_:1})],512),[[Lc,s.value]])],34))}},Jg=pa(Kg,[["__scopeId","data-v-33058346"]]);function zn(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?zn=function(s){return typeof s}:zn=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},zn(t)}function H(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Nl(t,s){for(var i=0;i<s.length;i++){var r=s[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function z(t,s,i){return s&&Nl(t.prototype,s),i&&Nl(t,i),t}function f(t,s,i){return s in t?Object.defineProperty(t,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[s]=i,t}function oe(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),s&&Co(t,s)}function ge(t){return ge=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},ge(t)}function Co(t,s){return Co=Object.setPrototypeOf||function(r,e){return r.__proto__=e,r},Co(t,s)}function Zg(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function v(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qg(t,s){return s&&(typeof s=="object"||typeof s=="function")?s:v(t)}function ae(t){var s=Zg();return function(){var r=ge(t),e;if(s){var n=ge(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return Qg(this,e)}}function ey(t,s){for(;!Object.prototype.hasOwnProperty.call(t,s)&&(t=ge(t),t!==null););return t}function _e(t,s,i){return typeof Reflect<"u"&&Reflect.get?_e=Reflect.get:_e=function(e,n,o){var a=ey(e,n);if(a){var l=Object.getOwnPropertyDescriptor(a,n);return l.get?l.get.call(o):l.value}},_e(t,s,i||t)}function Fr(t,s){return ny(t)||ry(t,s)||eh(t,s)||oy()}function ni(t){return ty(t)||iy(t)||eh(t)||sy()}function ty(t){if(Array.isArray(t))return xo(t)}function ny(t){if(Array.isArray(t))return t}function iy(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ry(t,s){var i=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(i!=null){var r=[],e=!0,n=!1,o,a;try{for(i=i.call(t);!(e=(o=i.next()).done)&&(r.push(o.value),!(s&&r.length===s));e=!0);}catch(l){n=!0,a=l}finally{try{!e&&i.return!=null&&i.return()}finally{if(n)throw a}}return r}}function eh(t,s){if(t){if(typeof t=="string")return xo(t,s);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return xo(t,s)}}function xo(t,s){(s==null||s>t.length)&&(s=t.length);for(var i=0,r=new Array(s);i<s;i++)r[i]=t[i];return r}function sy(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oy(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function an(t,s,i){return t==="*"?!0:t.length>0?t.indexOf(s)!==-1:!i}function U(t,s,i){var r;t=t||{},s=s||{};var e=t,n=s;if(i)for(r=0;r<i.length;r++)e[i[r]]=n[i[r]];else for(r in n)e[r]=n[r];return t}function So(t){return Object.prototype.toString.call(t)==="[object Number]"}function Ee(t){return typeof t=="string"}function th(t){return typeof t=="boolean"}function ii(t){return t==null?!1:Object.prototype.toString.call(t)==="[object Object]"}function ay(t){return Object.prototype.toString.call(t)==="[object Date]"}function Cn(t){return Object.prototype.toString.call(t)==="[object Function]"}function Qr(t){if(Ee(t))return""+t;if(th(t))return!!t;if(ay(t))return new Date(t.getTime());if(Cn(t))return t;if(Array.isArray(t)){for(var s=[],i=0;i<t.length;i++)s.push(Qr(t[i]));return s}else if(ii(t)){var r={};for(var e in t)r[e]=Qr(t[e]);return r}else return t}function es(t,s,i,r){var e={},n,o,a={};for(i=i||[],r=r||[],o=0;o<i.length;o++)e[i[o]]=!0;for(o=0;o<r.length;o++)a[r[o]]=!0;var l=Qr(t);for(o in s)if(l[o]==null||a[o])l[o]=s[o];else if(e[o])n=[],n.push.apply(n,Array.isArray(l[o])?l[o]:[l[o]]),n.push(s[o]),l[o]=n;else if(Ee(s[o])||th(s[o])||Cn(s[o])||So(s[o]))l[o]=s[o];else if(Array.isArray(s[o]))n=[],Array.isArray(l[o])&&n.push.apply(n,l[o]),n.push.apply(n,s[o]),l[o]=n;else if(ii(s[o])){ii(l[o])||(l[o]={});for(var u in s[o])l[o][u]=s[o][u]}return l}function nh(t,s,i){for(var r=0;r<i.length;r++){var e=i[r][0][i[r][1]].apply(i[r][0],i[r][2]);if(e===s)return e}return t}function ly(t,s,i,r){var e=function(a){var l=a.match(/(\${.*?})/g);if(l!=null)for(var u=0;u<l.length;u++){var c=s[l[u].substring(2,l[u].length-1)]||"";c!=null&&(a=a.replace(l[u],c))}if(l=a.match(/({{.*?}})/g),l!=null)for(var h=0;h<l.length;h++){var d=s[l[h].substring(2,l[h].length-2)]||"";d!=null&&(a=a.replace(l[h],d))}return a},n=function o(a){if(a!=null){if(Ee(a))return e(a);if(Cn(a)&&!r&&(i==null||(a.name||"").indexOf(i)===0))return a(s);if(Array.isArray(a)){for(var l=[],u=0;u<a.length;u++)l.push(o(a[u]));return l}else if(ii(a)){var c={};for(var h in a)c[h]=o(a[h]);return c}else return a}};return n(t)}function X(t,s){if(t)for(var i=0;i<t.length;i++)s(t[i]);else return null}function tn(t,s){if(t){for(var i=0;i<t.length;i++)if(s(t[i]))return i}return-1}function uy(t,s){var i=[];if(t)for(var r=0;r<t.length;r++)s(t[r])&&i.push(r);return i}function ga(t,s){var i=tn(t,s);return i===-1?null:t[i]}function cy(t,s){var i=uy(t,s);return i.map(function(r){return t[r]})}function ih(t,s){var i=null;return t.forEach(function(r){s(r)&&(i=r)}),i}function hy(t){var s=[];return t.forEach(function(i){s.push(i)}),s}function Oe(t,s){var i=tn(t,s);return i>-1&&t.splice(i,1),i!==-1}function gr(t){if(Array.fromArray!=null)return Array.from(t);var s=[];return Array.prototype.push.apply(s,t),s}function Rl(t,s){var i=t.indexOf(s);return i>-1&&t.splice(i,1),i!==-1}function rh(t,s,i,r){var e=t[s];return e==null&&(e=[],t[s]=e),e[r?"unshift":"push"](i),e}function bi(t,s,i){return t.indexOf(s)===-1?(i?t.unshift(s):t.push(s),!0):!1}var De=[];for(var Ci=0;Ci<256;Ci++)De[Ci]=(Ci<16?"0":"")+Ci.toString(16);function Se(){var t=Math.random()*4294967295|0,s=Math.random()*4294967295|0,i=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return De[t&255]+De[t>>8&255]+De[t>>16&255]+De[t>>24&255]+"-"+De[s&255]+De[s>>8&255]+"-"+De[s>>16&15|64]+De[s>>24&255]+"-"+De[i&63|128]+De[i>>8&255]+"-"+De[i>>16&255]+De[i>>24&255]+De[r&255]+De[r>>8&255]+De[r>>16&255]+De[r>>24&255]}function ts(t,s,i){var r={x:t.x-s.x,y:t.y-s.y},e=Math.cos(i/360*Math.PI*2),n=Math.sin(i/360*Math.PI*2);return{x:r.x*e-r.y*n+s.x,y:r.y*e+r.x*n+s.y,cr:e,sr:n}}function ya(t){if(t==null)return null;for(var s=t.replace(/^\s\s*/,""),i=/\s/,r=s.length;i.test(s.charAt(--r)););return s.slice(0,r+1)}function fy(t,s){t=t.length==null||typeof t=="string"?[t]:t;for(var i=0;i<t.length;i++)s(t[i])}function sh(t,s){for(var i=[],r=0;r<t.length;r++)i.push(s(t[r]));return i}function xe(){for(var t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];if(typeof console<"u")try{var r=arguments[arguments.length-1];console.log(r)}catch{}}function ns(t){return t<0?-1:t>0?1:0}function yr(t,s,i){return function(){var r=null;try{s!=null&&(r=s.apply(this,arguments))}catch(e){xe("jsPlumb function failed : "+e)}if(t!=null&&(i==null||r!==i))try{r=t.apply(this,arguments)}catch(e){xe("wrapped function failed : "+e)}return r}}function Fl(t,s,i){return t.has(s)||t.set(s,i()),t.get(s)}function oh(t,s){for(var i=t.__proto__;i!=null;){if(i instanceof s)return!0;i=i.__proto__}return!1}function dy(t,s,i,r){if(s.length===0)s.push(t);else{for(var e=r?-1:1,n=0,o=s.length,a=Math.floor((n+o)/2);o>n;){var l=i(t,s[a])*e;l<0?o=a:n=a+1,a=Math.floor((n+o)/2)}s.splice(a,0,t)}}function xn(t,s,i){i=i||t.parentNode;for(var r=i.querySelectorAll(s),e=0;e<r.length;e++)if(r[e]===t)return!0;return!1}function qi(t,s){t.stopPropagation?t.stopPropagation():t.returnValue=!1,!s&&t.preventDefault&&t.preventDefault()}function Dt(t,s,i,r){if(r&&xn(t,s,i))return t;for(t=t.parentNode;t!=null&&t!==i;){if(xn(t,s))return t;t=t.parentNode}}function We(t){return t.srcElement||t.target}function py(t,s,i){s=ya(s),typeof t.className.baseVal<"u"?t.className.baseVal=s:t.className=s;try{var r=t.classList;if(r!=null){for(;r.length>0;)r.remove(r.item(0));for(var e=0;e<i.length;e++)i[e]&&r.add(i[e])}}catch(n){xe("WARN: cannot set class list",n)}}function ma(t){return t.className!=null?typeof t.className.baseVal>"u"?t.className:t.className.baseVal:""}function ah(t,s,i){var r=s==null?[]:Array.isArray(s)?s:s.split(/\s+/),e=i==null?[]:Array.isArray(i)?i:i.split(/\s+/),n=ma(t),o=n.split(/\s+/),a=function(u,c){for(var h=0;h<c.length;h++)if(u)o.indexOf(c[h])===-1&&o.push(c[h]);else{var d=o.indexOf(c[h]);d!==-1&&o.splice(d,1)}};a(!0,r),a(!1,e),py(t,o.join(" "),o)}function Ki(t){return!Ee(t)&&!Array.isArray(t)&&t.length!=null&&t.documentElement==null&&t.nodeType==null}function vy(t){return ma(t)}function pn(t,s){var i=function(e,n){if(e!=null&&n!=null&&n.length>0)if(e.classList){var o=ya(n).split(/\s+/);X(o,function(a){e.classList.add(a)})}else ah(e,n)};Ki(t)?X(t,function(r){return i(r,s)}):i(t,s)}function gy(t,s){return t.classList?t.classList.contains(s):ma(t).indexOf(s)!==-1}function Po(t,s){var i=function(e,n){if(e!=null&&n!=null&&n.length>0)if(e.classList){var o=ya(n).split(/\s+/);o.forEach(function(a){e.classList.remove(a)})}else ah(e,null,n)};Ki(t)?X(t,function(r){return i(r,s)}):i(t,s)}function yy(t,s){var i=this,r=function(n,o){n!=null&&o!=null&&o.length>0&&(n.classList?n.classList.toggle(o):i.hasClass(n,o)?i.removeClass(n,o):i.addClass(n,o))};Ki(t)?X(t,function(e){return r(e,s)}):r(t,s)}function lh(t,s,i,r){return uh(null,t,s,i,r)}function uh(t,s,i,r,e){var n=t==null?document.createElement(s):document.createElementNS(t,s),o;i=i||{};for(o in i)n.style[o]=i[o];r&&(n.className=r),e=e||{};for(o in e)n.setAttribute(o,""+e[o]);return n}function Hn(t){var s=t.getBoundingClientRect(),i=document.body,r=document.documentElement,e=window.pageYOffset||r.scrollTop||i.scrollTop,n=window.pageXOffset||r.scrollLeft||i.scrollLeft,o=r.clientTop||i.clientTop||0,a=r.clientLeft||i.clientLeft||0,l=s.top+e-o,u=s.left+n-a;return{x:Math.round(u),y:Math.round(l)}}function my(t){return{w:t.offsetWidth,h:t.offsetHeight}}function _y(t){try{return{w:parseFloat(t.width.baseVal.value),h:parseFloat(t.height.baseVal.value)}}catch{return{w:0,h:0}}}function Ey(t){try{return{x:parseFloat(t.x.baseVal.value),y:parseFloat(t.y.baseVal.value)}}catch{return{x:0,y:0}}}function mr(t,s){var i=s.getContainer().getBoundingClientRect(),r=t.getBoundingClientRect(),e=s.currentZoom;return{x:(r.left-i.left)/e,y:(r.top-i.top)/e}}function xi(t,s){var i=t.getBoundingClientRect(),r=s.currentZoom;return{w:i.width/r,h:i.height/r}}var Sn;(function(t){t.SVG="SVG",t.HTML="HTML"})(Sn||(Sn={}));function ko(t){return t instanceof SVGElement?Sn.SVG:Sn.HTML}function by(t){return ko(t)===Sn.SVG}function Pn(){for(var t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return s.map(function(r){return"."+r}).join(",")}function Cy(){for(var t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return s.join(" ")}function Ls(){for(var t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return s.map(function(r){return"["+r+"]"}).join(",")}var To="source",ch="target",Ao="block",ri="none",Ji="absolute",Gl="fixed",xy="static",hh="data-jtk-group",zt="data-jtk-managed",Gr="data-jtk-not-draggable",jl="tabindex",Sy="data-jtk-scope",fh=Sy+"-",dh="checkCondition",Py="checkDropAllowed",_a="jtk-connector",ky="jtk-connector-outline",Ty="jtk-connected",qn="jtk-endpoint",Ay="jtk-endpoint-connected",Oy="jtk-endpoint-full",Ea="jtk-floating-endpoint",wy="jtk-endpoint-drop-allowed",Dy="jtk-endpoint-drop-forbidden",My="jtk-endpoint-anchor",_r="jtk-group-collapsed",Si="jtk-group-expanded",Ns="jtk-overlay",Iy="anchor:changed",ph="connection",vh="internal.connection",Ly="connection:detach",gh="connection:move",Ny="container:change",Ry="endpoint:replaced",yh="internal.endpoint:unregistered",ba="internal.connection:detached",mh="element:manage",Fy="group:added",Gy="group:collapse",jy="group:expand",By="group:member:added",Hy="group:member:removed",Uy="group:removed",_h="maxConnections",Vy="group:nested:added",Yy="group:nested:removed",Eh="element:unmanage",bh="zoom",Kn="isDetachAllowed",Xy="beforeDrag",Ch="beforeDrop",xh="beforeDetach",$y="beforeStartDetach",ve=Ls(zt),Wy="Cannot establish connection: source endpoint is full",zy="Cannot establish connection: target endpoint is full",qy="Cannot establish connection: source does not exist",Ky="Cannot establish connection: target does not exist",Jy="connectionOverlays",Bl={"stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},Pi="stroke-dasharray",Ks="dashstyle",Zy="fill",Qy="stroke",em="stroke-width",tm="strokeWidth",Sh="svg",Oo="path",Hl={svg:"http://www.w3.org/2000/svg"};function Ft(t,s){for(var i in s)t.setAttribute(i,""+s[i])}function Gt(t,s){return s=s||{},s.version="1.1",s.xmlns=Hl.svg,uh(Hl.svg,t,null,null,s)}function Ph(t){return"position:absolute;left:"+t[0]+"px;top:"+t[1]+"px"}function wo(t,s,i){if(s.setAttribute(Zy,i.fill?i.fill:ri),s.setAttribute(Qy,i.stroke?i.stroke:ri),i.strokeWidth&&s.setAttribute(em,i.strokeWidth),i[Ks]&&i[tm]&&!i[Pi]){var r=i[Ks].indexOf(",")===-1?" ":",",e=i[Ks].split(r),n="";X(e,function(a){n+=Math.floor(a*i.strokeWidth)+r}),s.setAttribute(Pi,n)}else i[Pi]&&s.setAttribute(Pi,i[Pi]);for(var o in Bl)i[o]&&s.setAttribute(Bl[o],i[o])}function jr(t,s,i){t.childNodes.length>i?t.insertBefore(s,t.childNodes[i]):t.appendChild(s)}function ce(t,s,i){var r=[t,s];return i&&r.push(i),r.join(":")}var Ul="data-jtk-container",nm="data-jtk-group-content",Er="data-jtk-enabled",Js="data-jtk-scope",Bt="endpoint",Tt="element",At="connection",kh="div",je="click",It="contextmenu",ze="dblclick",Qe="dbltap",im="focus",ee="mousedown",Ca="mouseenter",xa="mouseexit",Te="mousemove",te="mouseup",et="mouseout",tt="mouseover",nt="tap",rm="touchstart",sm="touchend",om="touchmove",am="drag:move",lm="drag:stop",um="drag:start",is="revert",cm="connection:abort",Vl="connection:drag",Yl=ce(Tt,je),hm=ce(Tt,ze),Xl=ce(Tt,Qe),fm=ce(Tt,et),dm=ce(Tt,tt),pm=ce(Tt,Te),vm=ce(Tt,te),gm=ce(Tt,ee),ym=ce(Tt,It),$l=ce(Tt,nt),mm=ce(Bt,je),_m=ce(Bt,ze);ce(Bt,Qe);var Em=ce(Bt,et),bm=ce(Bt,tt),Cm=ce(Bt,te),xm=ce(Bt,ee);ce(Bt,nt);var Sm=ce(At,je),Pm=ce(At,ze),km=ce(At,Qe),Tm=ce(At,et),Am=ce(At,tt),Om=ce(At,te),wm=ce(At,ee),Dm=ce(At,It),Mm=ce(At,nt),Wl="position",lt=Pn(_a),ln=Pn(qn),Im=Ls(hh),Lm=Ls(nm),Ot=Pn(Ns),nn;(function(t){t.Circle="Circle",t.Ellipse="Ellipse",t.Triangle="Triangle",t.Diamond="Diamond",t.Rectangle="Rectangle",t.Square="Square"})(nn||(nn={}));var Pt;(function(t){t.Assign="Assign",t.AutoDefault="AutoDefault",t.Bottom="Bottom",t.BottomLeft="BottomLeft",t.BottomRight="BottomRight",t.Center="Center",t.Continuous="Continuous",t.ContinuousBottom="ContinuousBottom",t.ContinuousLeft="ContinuousLeft",t.ContinuousRight="ContinuousRight",t.ContinuousTop="ContinuousTop",t.ContinuousLeftRight="ContinuousLeftRight",t.ContinuousTopBottom="ContinuousTopBottom",t.Left="Left",t.Perimeter="Perimeter",t.Right="Right",t.Top="Top",t.TopLeft="TopLeft",t.TopRight="TopRight"})(Pt||(Pt={}));function Nm(){return{d:1/0,x:null,y:null,l:null,x1:null,y1:null,x2:null,y2:null}}function rs(){return{xmin:1/0,xmax:-1/0,ymin:1/0,ymax:-1/0}}var Sa=function(){function t(s){H(this,t),this.params=s,f(this,"x1",void 0),f(this,"x2",void 0),f(this,"y1",void 0),f(this,"y2",void 0),f(this,"extents",rs()),f(this,"type",void 0),this.x1=s.x1,this.y1=s.y1,this.x2=s.x2,this.y2=s.y2}return z(t,[{key:"findClosestPointOnPath",value:function(i,r){return Nm()}},{key:"lineIntersection",value:function(i,r,e,n){return[]}},{key:"boxIntersection",value:function(i,r,e,n){var o=[];return o.push.apply(o,this.lineIntersection(i,r,i+e,r)),o.push.apply(o,this.lineIntersection(i+e,r,i+e,r+n)),o.push.apply(o,this.lineIntersection(i+e,r+n,i,r+n)),o.push.apply(o,this.lineIntersection(i,r+n,i,r)),o}},{key:"boundingBoxIntersection",value:function(i){return this.boxIntersection(i.x,i.y,i.w,i.h)}}]),t}(),Th="undefined",ss="default",Ah="true",Un="false",yn="*",ki,Ti;function Rm(t,s,i,r,e,n,o){return new Touch({target:t,identifier:Se(),pageX:s,pageY:i,screenX:r,screenY:e,clientX:n||r,clientY:o||e})}function Fm(){var t=[];return t.push.apply(t,arguments),t.item=function(s){return this[s]},t}function Gm(t,s,i,r,e,n,o){return Fm(Rm(t,s,i,r,e,n,o))}function si(t,s,i){i=i||t.parentNode;for(var r=i.querySelectorAll(s),e=0;e<r.length;e++)if(r[e]===t)return!0;return!1}function Zi(t){return t.srcElement||t.target}function Do(t,s,i,r){if(r){var e=t.composedPath?t.composedPath():t.path;if(typeof e<"u"&&e.indexOf)return{path:e,end:e.indexOf(i)};var n={path:[],end:-1},o=function a(l){n.path.push(l),l===i?n.end=n.path.length-1:l.parentNode!=null&&a(l.parentNode)};return o(s),n}else return{path:[s],end:1}}function jm(t,s){var i=0,r;for(i=0,r=t.length;i<r&&t[i][0]!==s;i++);i<t.length&&t.splice(i,1)}var Bm=1;function Gi(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints!=null&&navigator.maxTouchPoints>0}function Br(){return"onmousedown"in document.documentElement}var Lt=(ki={},f(ki,ee,rm),f(ki,te,sm),f(ki,Te,om),ki),Hm="page",Um="screen",Vm="client";function Pa(t,s){if(t==null)return{x:0,y:0};var i=Oh(t),r=$m(i,0);return{x:r[s+"X"],y:r[s+"Y"]}}function os(t){return Pa(t,Hm)}function Ym(t){return Pa(t,Um)}function Xm(t){return Pa(t,Vm)}function $m(t,s){return t.item?t.item(s):t[s]}function Oh(t){return t.touches&&t.touches.length>0?t.touches:t.changedTouches&&t.changedTouches.length>0?t.changedTouches:t.targetTouches&&t.targetTouches.length>0?t.targetTouches:[t]}function Wm(t){return Oh(t).length}function as(t,s,i,r,e){if(Dh(t,s,i),r.__tauid=i.__tauid,t.addEventListener)t.addEventListener(s,i,!1,e);else if(t.attachEvent){var n=s+i.__tauid;t["e"+n]=i,t[n]=function(){t["e"+n]&&t["e"+n](window.event)},t.attachEvent("on"+s,t[n])}}function Qi(t,s,i){var r=this;i!=null&&wh(t,function(e){if(zm(e,s,i),i.__tauid!=null){if(e.removeEventListener)e.removeEventListener(s,i,!1),Gi()&&Lt[s]&&e.removeEventListener(Lt[s],i,!1);else if(r.detachEvent){var n=s+i.__tauid;e[n]&&e.detachEvent("on"+s,e[n]),e[n]=null,e["e"+n]=null}}i.__taTouchProxy&&Qi(t,i.__taTouchProxy[1],i.__taTouchProxy[0])})}function wh(t,s){if(t!=null)for(var i=typeof t=="string"?document.querySelectorAll(t):t.length!=null?t:[t],r=0;r<i.length;r++)s(i[r])}function Dh(t,s,i){var r=Bm++;return t.__ta=t.__ta||{},t.__ta[s]=t.__ta[s]||{},t.__ta[s][r]=i,i.__tauid=r,r}function zm(t,s,i){if(t.__ta&&t.__ta[s]&&delete t.__ta[s][i.__tauid],i.__taExtra){for(var r=0;r<i.__taExtra.length;r++)Qi(t,i.__taExtra[r][0],i.__taExtra[r][1]);i.__taExtra.length=0}i.__taUnstore&&i.__taUnstore()}var qm=/:not\(([^)]+)\)/;function ls(t,s,i,r){if(t==null)return i;var e=t.split(","),n=[],o=[];X(e,function(l){var u=l.match(qm);u!=null?o.push(u[1]):n.push(l)}),o.length>0&&n.length===0&&n.push(yn);var a=function l(u){l.__tauid=i.__tauid;var c=Zi(u),h=!1,d=c,p=Do(u,c,s,t!=null);if(p.end!=-1)for(var g=0;!h&&g<p.end;g++){d=p.path[g];for(var y=0;y<o.length;y++)if(si(d,o[y],s))return;for(var m=0;!h&&m<n.length;m++)if(si(d,n[m],s)){i.apply(d,[u,d]),h=!0;break}}};return Km(i,r,a),a}function Km(t,s,i){t.__taExtra=t.__taExtra||[],t.__taExtra.push([s,i])}var Hr=function(s,i,r,e,n){if(Gi()&&Lt[i]){var o=ls(e,s,r,Lt[i]);as(s,Lt[i],o,r,n)}i===im&&s.getAttribute(jl)==null&&s.setAttribute(jl,"1"),as(s,i,ls(e,s,r,i),r,n)},Zs=(Ti={},f(Ti,nt,{touches:1,taps:1}),f(Ti,Qe,{touches:1,taps:2}),f(Ti,It,{touches:2,taps:1}),Ti);function zl(t,s,i,r){for(var e in i.__tamee[t])i.__tamee[t].hasOwnProperty(e)&&i.__tamee[t][e].apply(r,[s])}var Jm=function(){function t(){H(this,t)}return z(t,null,[{key:"generate",value:function(i,r){return function(e,n,o,a){if(n==It&&Br())Hr(e,n,o,a);else{if(e.__taTapHandler==null){var l=e.__taTapHandler={tap:[],dbltap:[],down:!1,taps:0,downSelectors:[]},u=function(g){for(var y=Zi(g),m=Do(g,y,e,a!=null),E=!1,b=0;b<m.end;b++){if(E)return;y=m.path[b];for(var C=0;C<l.downSelectors.length;C++)if(l.downSelectors[C]==null||si(y,l.downSelectors[C],e)){l.down=!0,setTimeout(h,i),setTimeout(d,r),E=!0;break}}},c=function(g){if(l.down){var y=Zi(g),m,E;l.taps++;var b=Wm(g);for(var C in Zs)if(Zs.hasOwnProperty(C)){var S=Zs[C];if(S.touches===b&&(S.taps===1||S.taps===l.taps))for(var N=0;N<l[C].length;N++){E=Do(g,y,e,l[C][N][1]!=null);for(var G=0;G<E.end;G++)if(m=E.path[G],l[C][N][1]==null||si(m,l[C][N][1],e)){l[C][N][0].apply(m,[g,m]);break}}}}},h=function(){l.down=!1},d=function(){l.taps=0};e.__taTapHandler.downHandler=u,e.__taTapHandler.upHandler=c,Hr(e,ee,u),Hr(e,te,c)}e.__taTapHandler.downSelectors.push(a),e.__taTapHandler[n].push([o,a]),o.__taUnstore=function(){e.__taTapHandler!=null&&(Oe(e.__taTapHandler.downSelectors,function(p){return p===a}),jm(e.__taTapHandler[n],o),e.__taTapHandler.downSelectors.length===0&&(Qi(e,ee,e.__taTapHandler.downHandler),Qi(e,te,e.__taTapHandler.upHandler),delete e.__taTapHandler))}}}}}]),t}(),Zm=function(){function t(){H(this,t)}return z(t,null,[{key:"generate",value:function(){var i=[];return function(r,e,n,o){if(!r.__tamee){r.__tamee={over:!1,mouseenter:[],mouseexit:[]};var a=function(c){var h=Zi(c);(o==null&&h==r&&!r.__tamee.over||si(h,o,r)&&(h.__tamee==null||!h.__tamee.over))&&(zl(Ca,c,r,h),h.__tamee=h.__tamee||{},h.__tamee.over=!0,i.push(h))},l=function(c){for(var h=Zi(c),d=0;d<i.length;d++)h==i[d]&&!si(c.relatedTarget||c.toElement,"*",h)&&(h.__tamee.over=!1,i.splice(d,1),zl(xa,c,r,h))};as(r,tt,ls(o,r,a,tt),a),as(r,et,ls(o,r,l,et),l)}n.__taUnstore=function(){delete r.__tamee[e][n.__tauid]},Dh(r,e,n),r.__tamee[e][n.__tauid]=n}}}]),t}(),ka=function(){function t(s){H(this,t),f(this,"clickThreshold",void 0),f(this,"dblClickThreshold",void 0),f(this,"tapHandler",void 0),f(this,"mouseEnterExitHandler",void 0),s=s||{},this.clickThreshold=s.clickThreshold||250,this.dblClickThreshold=s.dblClickThreshold||450,this.mouseEnterExitHandler=Zm.generate(),this.tapHandler=Jm.generate(this.clickThreshold,this.dblClickThreshold)}return z(t,[{key:"_doBind",value:function(i,r,e,n,o){if(e!=null){var a=i;r===nt||r===Qe||r===It?this.tapHandler(a,r,e,n,o):r===Ca||r==xa?this.mouseEnterExitHandler(a,r,e,n,o):Hr(a,r,e,n,o)}}},{key:"on",value:function(i,r,e,n,o){var a=n==null?null:e,l=n??e;return this._doBind(i,r,l,a,o),this}},{key:"off",value:function(i,r,e){return Qi(i,r,e),this}},{key:"trigger",value:function(i,r,e,n,o){var a=Br()&&(typeof MouseEvent>"u"||e==null||e.constructor===MouseEvent),l=Gi()&&!Br()&&Lt[r]?Lt[r]:r,u=!(Gi()&&!Br()&&Lt[r]),c=os(e),h=Ym(e),d=Xm(e);return wh(i,function(p){var g;e=e||{screenX:h.x,screenY:h.y,clientX:d.x,clientY:d.y};var y=function(S){n&&(S.payload=n)},m={TouchEvent:function(S){var N=Gm(p,c.x,c.y,h.x,h.y,d.x,d.y),G=S.initTouchEvent||S.initEvent;G(l,!0,!0,window,null,h.x,h.y,d.x,d.y,!1,!1,!1,!1,N,N,N,1,0)},MouseEvents:function(S){S.initMouseEvent(l,!0,!0,window,o??1,h.x,h.y,d.x,d.y,!1,!1,!1,!1,1,p)}},E=!u&&!a&&Gi()&&Lt[r],b=E?"TouchEvent":"MouseEvents";g=document.createEvent(b),m[b](g),y(g),p.dispatchEvent(g)}),this}}]),t}(),Qm=[null,[1,-1],[1,1],[-1,1],[-1,-1]],e_=[null,[-1,-1],[-1,1],[1,1],[1,-1]],un=2*Math.PI;function oi(t,s){return s.x===t.x?s.y>t.y?1/0:-1/0:s.y===t.y?s.x>t.x?0:-0:(s.y-t.y)/(s.x-t.x)}function t_(t,s){return-1/oi(t,s)}function Mo(t,s){return Math.sqrt(Math.pow(s.y-t.y,2)+Math.pow(s.x-t.x,2))}function Ta(t,s){return s.x>t.x||s.x==t.x?s.y>t.y?2:1:s.y>t.y?3:4}function n_(t,s){var i=oi(t,s),r=Math.atan(i),e=Ta(t,s);return(e==4||e==3)&&(r+=Math.PI),r<0&&(r+=2*Math.PI),r}function Mh(t,s){var i=t.x,r=t.x+t.w,e=t.y,n=t.y+t.h,o=s.x,a=s.x+s.w,l=s.y,u=s.y+s.h;return i<=o&&o<=r&&e<=l&&l<=n||i<=a&&a<=r&&e<=l&&l<=n||i<=o&&o<=r&&e<=u&&u<=n||i<=a&&o<=r&&e<=u&&u<=n||o<=i&&i<=a&&l<=e&&e<=u||o<=r&&r<=a&&l<=e&&e<=u||o<=i&&i<=a&&l<=n&&n<=u||o<=r&&i<=a&&l<=n&&n<=u}function vn(t,s,i){var r=oi(t,s),e=Ta(t,s),n=i>0?Qm[e]:e_[e],o=Math.atan(r),a=Math.abs(i*Math.sin(o))*n[1],l=Math.abs(i*Math.cos(o))*n[0];return{x:t.x+l,y:t.y+a}}function i_(t,s,i){var r=oi(t,s),e=Math.atan(-1/r),n=i/2*Math.sin(e),o=i/2*Math.cos(e);return[{x:s.x+o,y:s.y+n},{x:s.x-o,y:s.y-n}]}function r_(t,s,i,r){i=i??(s.thresholdX==null?s.w/2:s.thresholdX),r=r??(s.thresholdY==null?s.h/2:s.thresholdY);var e=Math.floor(t.x/s.w),n=s.w*e,o=n+s.w,a=Math.abs(t.x-n)<=i?n:Math.abs(o-t.x)<=i?o:t.x,l=Math.floor(t.y/s.h),u=s.h*l,c=u+s.h,h=Math.abs(t.y-u)<=r?u:Math.abs(c-t.y)<=r?c:t.y;return{x:a,y:h}}function s_(t,s,i){if(xn(s,i,t))return s;for(var r=s.parentNode;r!=null&&r!==t;){if(xn(r,i,t))return r;r=r.parentNode}}function o_(t){return typeof t=="function"?(t._katavorioId=Se(),t._katavorioId):t}function ql(t,s,i){var r=s.parentNode,e=t.getSize(r),n=t.getSize(s),o=i.x,a=o+n.w,l=i.y,u=l+n.h;return a>0&&o<e.w&&u>0&&l<e.h}function a_(t,s,i){for(var r=null,e=s.getAttribute("katavorio-draggable"),n=e!=null?"[katavorio-draggable='"+e+"'] ":"",o=0;o<t.length;o++)if(r=s_(s,i,n+t[o].selector),r!=null){if(t[o].filter){var a=xn(i,t[o].filter,r),l=t[o].filterExclude===!0;if(l&&!a||a)return null}return[t[o],r]}return null}var Ih="start",Lh="beforeStart",Nh="drag",l_="drop",u_="over",c_="out",Rh="stop",Fh="katavorio-draggable",h_=Fh,f_=10,d_=10,Qs=function(){return!0},p_=function(){return!1},Di={delegatedDraggable:"katavorio-delegated-draggable",draggable:h_,drag:"katavorio-drag",selected:"katavorio-drag-selected",noSelect:"katavorio-drag-no-select",ghostProxy:"katavorio-ghost-proxy",clonedDrag:"katavorio-clone-drag"},gt;(function(t){t.absolutePosition="absolutePosition",t.transform="transform",t.xyAttributes="xyAttributes"})(gt||(gt={}));var Aa=new Map;Aa.set(gt.absolutePosition,function(t,s){t.style.left="".concat(s.x,"px"),t.style.top="".concat(s.y,"px")});Aa.set(gt.xyAttributes,function(t,s){t.setAttribute("x","".concat(s.x)),t.setAttribute("y","".concat(s.y))});var Oa=new Map;Oa.set(gt.absolutePosition,function(t){return{x:t.offsetLeft,y:t.offsetTop}});Oa.set(gt.xyAttributes,function(t){return{x:parseFloat(t.getAttribute("x")),y:parseFloat(t.getAttribute("y"))}});var wa=new Map;wa.set(gt.absolutePosition,function(t,s){t.style.width="".concat(s.w,"px"),t.style.height="".concat(s.h,"px")});wa.set(gt.xyAttributes,function(t,s){t.setAttribute("width","".concat(s.w)),t.setAttribute("height","".concat(s.h))});var Da=new Map;Da.set(gt.absolutePosition,function(t){return{w:t.offsetWidth,h:t.offsetHeight}});Da.set(gt.xyAttributes,function(t){return{w:parseFloat(t.getAttribute("width")),h:parseFloat(t.getAttribute("height"))}});var eo=[Rh,Ih,Nh,l_,u_,c_,Lh],v_=function(){},Mn=function(s,i){if(s!=null){s=!Ee(s)&&s.tagName==null&&s.length!=null?s:[s];for(var r=0;r<s.length;r++)i.apply(s[r],[s[r]])}},g_=function(s,i,r){var e=s.srcElement||s.target;return!xn(e,r.getInputFilterSelector(),i)},y_=function(){function t(s,i){H(this,t),this.el=s,this.manager=i,f(this,"_class",void 0),f(this,"uuid",Se()),f(this,"enabled",!0),f(this,"scopes",[]),f(this,"eventManager",void 0),this.eventManager=i.eventManager}return z(t,[{key:"setEnabled",value:function(i){this.enabled=i}},{key:"isEnabled",value:function(){return this.enabled}},{key:"toggleEnabled",value:function(){this.enabled=!this.enabled}},{key:"addScope",value:function(i){var r={};Mn(this.scopes,function(n){r[n]=!0}),Mn(i?i.split(/\s+/):[],function(n){r[n]=!0}),this.scopes.length=0;for(var e in r)this.scopes.push(e)}},{key:"removeScope",value:function(i){var r={};Mn(this.scopes,function(n){r[n]=!0}),Mn(i?i.split(/\s+/):[],function(n){delete r[n]}),this.scopes.length=0;for(var e in r)this.scopes.push(e)}},{key:"toggleScope",value:function(i){var r={};Mn(this.scopes,function(n){r[n]=!0}),Mn(i?i.split(/\s+/):[],function(n){r[n]?delete r[n]:r[n]=!0}),this.scopes.length=0;for(var e in r)this.scopes.push(e)}}]),t}();function m_(t){return{w:t.parentNode.offsetWidth+t.parentNode.scrollLeft,h:t.parentNode.offsetHeight+t.parentNode.scrollTop}}var ji;(function(t){t.notNegative="notNegative",t.parent="parent",t.parentEnclosed="parentEnclosed"})(ji||(ji={}));var __=function(t){oe(i,t);var s=ae(i);function i(r,e,n){var o;if(H(this,i),o=s.call(this,r,n),f(v(o),"_class",void 0),f(v(o),"rightButtonCanDrag",void 0),f(v(o),"consumeStartEvent",void 0),f(v(o),"clone",void 0),f(v(o),"scroll",void 0),f(v(o),"trackScroll",void 0),f(v(o),"_downAt",void 0),f(v(o),"_posAtDown",void 0),f(v(o),"_pagePosAtDown",void 0),f(v(o),"_pageDelta",{x:0,y:0}),f(v(o),"_moving",void 0),f(v(o),"_lastPosition",void 0),f(v(o),"_lastScrollValues",{x:0,y:0}),f(v(o),"_initialScroll",{x:0,y:0}),f(v(o),"_size",void 0),f(v(o),"_currentParentPosition",void 0),f(v(o),"_ghostParentPosition",void 0),f(v(o),"_dragEl",void 0),f(v(o),"_multipleDrop",void 0),f(v(o),"_ghostProxyOffsets",void 0),f(v(o),"_ghostDx",void 0),f(v(o),"_ghostDy",void 0),f(v(o),"_isConstrained",!1),f(v(o),"_ghostProxyParent",void 0),f(v(o),"_useGhostProxy",void 0),f(v(o),"_ghostProxyFunction",void 0),f(v(o),"_activeSelectorParams",void 0),f(v(o),"_availableSelectors",[]),f(v(o),"_canDrag",void 0),f(v(o),"_consumeFilteredEvents",void 0),f(v(o),"_parent",void 0),f(v(o),"_ignoreZoom",void 0),f(v(o),"_filters",{}),f(v(o),"_constrainRect",void 0),f(v(o),"_elementToDrag",void 0),f(v(o),"downListener",void 0),f(v(o),"moveListener",void 0),f(v(o),"upListener",void 0),f(v(o),"scrollTracker",void 0),f(v(o),"listeners",{start:[],drag:[],stop:[],over:[],out:[],beforeStart:[],revert:[]}),o._class=o.manager.css.draggable,pn(o.el,o._class),o.downListener=o._downListener.bind(v(o)),o.upListener=o._upListener.bind(v(o)),o.moveListener=o._moveListener.bind(v(o)),o.rightButtonCanDrag=e.rightButtonCanDrag===!0,o.consumeStartEvent=e.consumeStartEvent!==!1,o._dragEl=o.el,o.clone=e.clone===!0,o.scroll=e.scroll===!0,o.trackScroll=e.trackScroll!==!1,o._multipleDrop=e.multipleDrop!==!1,o._canDrag=e.canDrag||Qs,o._consumeFilteredEvents=e.consumeFilteredEvents,o._parent=e.parent,o._ignoreZoom=e.ignoreZoom===!0,o._ghostProxyParent=e.ghostProxyParent,o.trackScroll&&(o.scrollTracker=o._trackScroll.bind(v(o)),document.addEventListener("scroll",o.scrollTracker)),e.ghostProxy===!0?o._useGhostProxy=Qs:e.ghostProxy&&typeof e.ghostProxy=="function"?o._useGhostProxy=e.ghostProxy:o._useGhostProxy=function(l,u){return o._activeSelectorParams&&o._activeSelectorParams.useGhostProxy?o._activeSelectorParams.useGhostProxy(l,u):!1},e.makeGhostProxy?o._ghostProxyFunction=e.makeGhostProxy:o._ghostProxyFunction=function(l){return o._activeSelectorParams&&o._activeSelectorParams.makeGhostProxy?o._activeSelectorParams.makeGhostProxy(l):l.cloneNode(!0)},e.selector){var a=o.el.getAttribute(Fh);a==null&&(a=""+new Date().getTime(),o.el.setAttribute("katavorio-draggable",a)),o._availableSelectors.push(e)}return o.eventManager.on(o.el,ee,o.downListener),o}return z(i,[{key:"_trackScroll",value:function(e){if(this._moving){var n={x:document.documentElement.scrollLeft,y:document.documentElement.scrollTop},o=n.x-this._lastScrollValues.x,a=n.y-this._lastScrollValues.y,l={x:o+this._lastPosition.x,y:a+this._lastPosition.y},u=l.x-this._downAt.x,c=l.y-this._downAt.y,h=this._ignoreZoom?1:this.manager.getZoom();this._dragEl&&this._dragEl.parentNode&&(u+=this._dragEl.parentNode.scrollLeft-this._initialScroll.x,c+=this._dragEl.parentNode.scrollTop-this._initialScroll.y),u/=h,c/=h,this.moveBy(u,c,e),this._lastPosition=l,this._lastScrollValues=n}}},{key:"on",value:function(e,n){this.listeners[e]&&this.listeners[e].push(n)}},{key:"off",value:function(e,n){if(this.listeners[e]){for(var o=[],a=0;a<this.listeners[e].length;a++)this.listeners[e][a]!==n&&o.push(this.listeners[e][a]);this.listeners[e]=o}}},{key:"_upListener",value:function(e){this._downAt&&(this._downAt=null,this.eventManager.off(document,Te,this.moveListener),this.eventManager.off(document,te,this.upListener),Po(document.body,Di.noSelect),this.unmark(e),this.stop(e),this._moving=!1,this.clone?(this._dragEl&&this._dragEl.parentNode&&this._dragEl.parentNode.removeChild(this._dragEl),this._dragEl=null):this._activeSelectorParams&&this._activeSelectorParams.revertFunction&&this._activeSelectorParams.revertFunction(this._dragEl,this.manager.getPosition(this._dragEl))===!0&&(this.manager.setPosition(this._dragEl,this._posAtDown),this._dispatch(is,this._dragEl)))}},{key:"_downListener",value:function(e){if(!e.defaultPrevented){var n=this.rightButtonCanDrag||e.which!==3&&e.button!==2;if(n&&this.isEnabled()&&this._canDrag()){var o=this._testFilter(e)&&g_(e,this.el,this.manager);if(o){this._activeSelectorParams=null,this._elementToDrag=null,this._availableSelectors.length===0&&console.log("JSPLUMB: no available drag selectors");var a=e.target||e.srcElement,l=a_(this._availableSelectors,this.el,a);if(l!=null&&(this._activeSelectorParams=l[0],this._elementToDrag=l[1]),this._activeSelectorParams==null||this._elementToDrag==null)return;var u=this._activeSelectorParams.dragInit?this._activeSelectorParams.dragInit(this._elementToDrag,e):null;if(u!=null&&(this._elementToDrag=u),this.clone)if(this._dragEl=this._elementToDrag.cloneNode(!0),pn(this._dragEl,Di.clonedDrag),this._dragEl.setAttribute("id",null),this._dragEl.style.position="absolute",this._parent!=null){var c=this.manager.getPosition(this.el);this._dragEl.style.left=c.x+"px",this._dragEl.style.top=c.y+"px",this._parent.appendChild(this._dragEl)}else{var h=Hn(this._elementToDrag);this._dragEl.style.left=h.x+"px",this._dragEl.style.top=h.y+"px",document.body.appendChild(this._dragEl)}else this._dragEl=this._elementToDrag;this.consumeStartEvent&&qi(e),this._downAt=os(e),this._dragEl&&this._dragEl.parentNode&&(this._initialScroll={x:this._dragEl.parentNode.scrollLeft,y:this._dragEl.parentNode.scrollTop}),this._posAtDown=this.manager.getPosition(this._dragEl),this._pagePosAtDown=Hn(this._dragEl),this._pageDelta={x:this._pagePosAtDown.x-this._posAtDown.x,y:this._pagePosAtDown.y-this._posAtDown.y},this._size=this.manager.getSize(this._dragEl),this.eventManager.on(document,Te,this.moveListener),this.eventManager.on(document,te,this.upListener),pn(document.body,Di.noSelect),this._dispatch(Lh,{el:this.el,pos:this._posAtDown,e,drag:this,size:this._size})}else this._consumeFilteredEvents&&qi(e)}}}},{key:"_moveListener",value:function(e){if(this._downAt){if(!this._moving){var n=this._dispatch(Ih,{el:this.el,pos:this._posAtDown,e,drag:this,size:this._size});if(n!==!1){if(!this._downAt)return;this.mark(n),this._moving=!0}else this.abort()}if(this._downAt){var o=os(e),a=o.x-this._downAt.x,l=o.y-this._downAt.y,u=this._ignoreZoom?1:this.manager.getZoom();this._lastPosition={x:o.x,y:o.y},this._lastScrollValues={x:document.documentElement.scrollLeft,y:document.documentElement.scrollTop},this._dragEl&&this._dragEl.parentNode&&(a+=this._dragEl.parentNode.scrollLeft-this._initialScroll.x,l+=this._dragEl.parentNode.scrollTop-this._initialScroll.y),a/=u,l/=u,this.moveBy(a,l,e)}}}},{key:"getDragDelta",value:function(){return this._posAtDown!=null&&this._downAt!=null?{x:this._downAt.x-this._posAtDown.x,y:this._downAt.y-this._posAtDown.y}:{x:0,y:0}}},{key:"mark",value:function(e){this._posAtDown=this.manager.getPosition(this._dragEl),this._pagePosAtDown=Hn(this._dragEl),this._pageDelta={x:this._pagePosAtDown.x-this._posAtDown.x,y:this._pagePosAtDown.y-this._posAtDown.y},this._size=this.manager.getSize(this._dragEl),pn(this._dragEl,this.manager.css.drag),this._constrainRect=m_(this._dragEl),this._ghostDx=0,this._ghostDy=0}},{key:"unmark",value:function(e){this._isConstrained&&this._useGhostProxy(this._elementToDrag,this._dragEl)?(this._ghostProxyOffsets={x:this._dragEl.offsetLeft-this._ghostDx,y:this._dragEl.offsetTop-this._ghostDy},this._dragEl.parentNode.removeChild(this._dragEl),this._dragEl=this._elementToDrag):this._ghostProxyOffsets=null,Po(this._dragEl,this.manager.css.drag),this._isConstrained=!1}},{key:"moveBy",value:function(e,n,o){var a=this.toGrid({x:this._posAtDown.x+e,y:this._posAtDown.y+n}),l=this._doConstrain(a,this._dragEl,this._constrainRect,this._size,o);if(l!=null){if(this._useGhostProxy(this.el,this._dragEl))if(a.x!==l.x||a.y!==l.y){if(!this._isConstrained){var u=this._ghostProxyFunction(this._elementToDrag);pn(u,Di.ghostProxy),this._ghostProxyParent?(this._ghostProxyParent.appendChild(u),this._currentParentPosition=Hn(this._elementToDrag.parentNode),this._ghostParentPosition=Hn(this._ghostProxyParent),this._ghostDx=this._currentParentPosition.x-this._ghostParentPosition.x,this._ghostDy=this._currentParentPosition.y-this._ghostParentPosition.y):this._elementToDrag.parentNode.appendChild(u),this._dragEl=u,this._isConstrained=!0}l=a}else this._isConstrained&&(this._dragEl.parentNode.removeChild(this._dragEl),this._dragEl=this._elementToDrag,this._isConstrained=!1,this._currentParentPosition=null,this._ghostParentPosition=null,this._ghostDx=0,this._ghostDy=0);this.manager.setPosition(this._dragEl,{x:l.x+this._ghostDx,y:l.y+this._ghostDy}),this._dispatch(Nh,{el:this.el,pos:l,e:o,drag:this,size:this._size,originalPos:this._posAtDown})}}},{key:"abort",value:function(){this._downAt!=null&&this._upListener()}},{key:"getDragElement",value:function(e){return e?this._elementToDrag||this.el:this._dragEl||this.el}},{key:"stop",value:function(e,n){if(n||this._moving){var o=[],a=this.manager.getPosition(this._dragEl);o.push([this._dragEl,a,this,this._size]),this._dispatch(Rh,{el:this._dragEl,pos:this._ghostProxyOffsets||a,finalPos:a,e,drag:this,selection:o,size:this._size,originalPos:{x:this._posAtDown.x,y:this._posAtDown.y}})}else this._moving||this._activeSelectorParams.dragAbort&&this._activeSelectorParams.dragAbort(this._elementToDrag)}},{key:"_dispatch",value:function(e,n){var o=null;if(this._activeSelectorParams&&this._activeSelectorParams[e])o=this._activeSelectorParams[e](n);else if(this.listeners[e])for(var a=0;a<this.listeners[e].length;a++)try{var l=this.listeners[e][a](n);l!=null&&(o=l)}catch{}return o}},{key:"resolveGrid",value:function(){var e={grid:null,thresholdX:f_/2,thresholdY:d_/2};return this._activeSelectorParams!=null&&this._activeSelectorParams.grid!=null&&(e.grid=this._activeSelectorParams.grid,this._activeSelectorParams.snapThreshold!=null&&(e.thresholdX=this._activeSelectorParams.snapThreshold,e.thresholdY=this._activeSelectorParams.snapThreshold)),e}},{key:"toGrid",value:function(e){var n=this.resolveGrid(),o=n.grid,a=n.thresholdX,l=n.thresholdY;if(o==null)return e;var u=o?o.w/2:a,c=o?o.h/2:l;return r_(e,o,u,c)}},{key:"setUseGhostProxy",value:function(e){this._useGhostProxy=e?Qs:p_}},{key:"_doConstrain",value:function(e,n,o,a,l){return this._activeSelectorParams!=null&&this._activeSelectorParams.constrainFunction&&typeof this._activeSelectorParams.constrainFunction=="function"?this._activeSelectorParams.constrainFunction(e,n,o,a,l):e}},{key:"_testFilter",value:function(e){for(var n in this._filters){var o=this._filters[n],a=o[0](e);if(o[1]&&(a=!a),!a)return!1}return!0}},{key:"addFilter",value:function(e,n){var o=this;if(e){var a=o_(e);this._filters[a]=[function(l){var u=l.srcElement||l.target,c;return Ee(e)?c=xn(u,e,o.el):typeof e=="function"&&(c=e(l,o.el)),c},n!==!1]}}},{key:"removeFilter",value:function(e){var n=typeof e=="function"?e._katavorioId:e;delete this._filters[n]}},{key:"clearAllFilters",value:function(){this._filters={}}},{key:"addSelector",value:function(e,n){e.selector&&(n?this._availableSelectors.unshift(e):this._availableSelectors.push(e))}},{key:"destroy",value:function(){this.eventManager.off(this.el,ee,this.downListener),this.eventManager.off(document,Te,this.moveListener),this.eventManager.off(document,te,this.upListener),this.downListener=null,this.upListener=null,this.moveListener=null,this.scrollTracker!=null&&document.removeEventListener("scroll",this.scrollTracker)}}]),i}(y_),E_=["input","textarea","select","button","option"],b_=E_.join(","),C_=function(){function t(s){H(this,t),f(this,"eventManager",void 0),f(this,"zoom",1),f(this,"css",{}),f(this,"inputFilterSelector",void 0),f(this,"positioningStrategy",void 0),f(this,"_positionSetter",void 0),f(this,"_positionGetter",void 0),f(this,"_sizeSetter",void 0),f(this,"_sizeGetter",void 0),s=s||{},this.inputFilterSelector=s.inputFilterSelector||b_,this.eventManager=new ka,this.zoom=s.zoom||1,this.positioningStrategy=s.positioningStrategy||gt.absolutePosition,this._positionGetter=Oa.get(this.positioningStrategy),this._positionSetter=Aa.get(this.positioningStrategy),this._sizeGetter=Da.get(this.positioningStrategy),this._sizeSetter=wa.get(this.positioningStrategy);var i=s.css||{};U(this.css,i)}return z(t,[{key:"getPosition",value:function(i){return this._positionGetter(i)}},{key:"setPosition",value:function(i,r){this._positionSetter(i,r)}},{key:"getSize",value:function(i){return this._sizeGetter(i)}},{key:"getZoom",value:function(){return this.zoom}},{key:"setZoom",value:function(i){this.zoom=i}},{key:"_prepareParams",value:function(i){i=i||{};var r={events:{}},e;for(e in i)r[e]=i[e];for(e=0;e<eo.length;e++)r.events[eo[e]]=i[eo[e]]||v_;return r}},{key:"getInputFilterSelector",value:function(){return this.inputFilterSelector}},{key:"setInputFilterSelector",value:function(i){return this.inputFilterSelector=i,this}},{key:"draggable",value:function(i,r){if(i._katavorioDrag==null){var e=this._prepareParams(r),n=new __(i,e,this);return pn(i,Di.delegatedDraggable),i._katavorioDrag=n,n}else return i._katavorioDrag}},{key:"destroyDraggable",value:function(i){i._katavorioDrag&&(i._katavorioDrag.destroy(),delete i._katavorioDrag)}}]),t}(),Ur="jtk-drag-selected",x_=function(){function t(s){H(this,t),this.instance=s,f(this,"_dragSelection",[]),f(this,"_dragSizes",new Map),f(this,"_dragElements",new Map),f(this,"_dragElementStartPositions",new Map),f(this,"_dragElementPositions",new Map),f(this,"__activeSet",void 0)}return z(t,[{key:"_activeSet",get:function(){return this.__activeSet==null?this._dragSelection:this.__activeSet}},{key:"length",get:function(){return this._dragSelection.length}},{key:"filterActiveSet",value:function(i){var r=this;this.__activeSet=[],X(this._dragSelection,function(e){i(e)&&r.__activeSet.push(e)})}},{key:"clear",value:function(){var i=this;this.reset(),X(this._dragSelection,function(r){return i.instance.removeClass(r.jel,Ur)}),this._dragSelection.length=0}},{key:"reset",value:function(){this._dragElementStartPositions.clear(),this._dragElementPositions.clear(),this._dragSizes.clear(),this._dragElements.clear(),this.__activeSet=null}},{key:"initialisePositions",value:function(){var i=this;X(this._activeSet,function(r){var e=i.instance.viewport.getPosition(r.id),n={x:parseInt(""+r.jel.offsetLeft,10),y:parseInt(""+r.jel.offsetTop,10)};i._dragElementStartPositions.set(r.id,n),i._dragElementPositions.set(r.id,n),i._dragSizes.set(r.id,{w:e.w,h:e.h})})}},{key:"updatePositions",value:function(i,r,e){var n=this,o=i.x-r.x,a=i.y-r.y;X(this._activeSet,function(l){var u=n._dragElementStartPositions.get(l.id);if(u){var c=u.x+o,h=u.y+a,d=n._dragSizes.get(l.id),p={x:c,y:h,w:d.w,h:d.h};if(l.jel._jsPlumbParentGroup&&l.jel._jsPlumbParentGroup.constrain){var g={w:l.jel.parentNode.offsetWidth+l.jel.parentNode.scrollLeft,h:l.jel.parentNode.offsetHeight+l.jel.parentNode.scrollTop};p.x=Math.max(p.x,0),p.y=Math.max(p.y,0),p.x=Math.min(p.x,g.w-d.w),p.y=Math.min(p.y,g.h-d.h)}n._dragElementPositions.set(l.id,{x:c,y:h}),l.jel.style.left=p.x+"px",l.jel.style.top=p.y+"px",e(l.jel,l.id,d,p)}})}},{key:"each",value:function(i){var r=this;X(this._activeSet,function(e){var n=r._dragSizes.get(e.id),o=r._dragElementPositions.get(e.id),a=r._dragElementStartPositions.get(e.id);i(e.jel,e.id,o,n,a)})}},{key:"add",value:function(i,r){var e=i;r=r||this.instance.getId(e);var n=tn(this._dragSelection,function(o){return o.id===r});n===-1&&(this.instance.addClass(i,Ur),this._dragSelection.push({id:r,jel:e}))}},{key:"remove",value:function(i){var r=this,e=i;this._dragSelection=this._dragSelection.filter(function(n){var o=n.jel!==e;return o||r.instance.removeClass(n.jel,Ur),o})}},{key:"toggle",value:function(i){var r=i,e=tn(this._dragSelection,function(n){return n.jel===r});e!==-1?this.remove(r):this.add(i)}}]),t}(),S_="jtk-delegated-draggable",P_="jtk-draggable",k_="jtk-drag",T_="jtk-ghost-proxy",qt="jtk-drag-active",A_="jtk-dragged",Zt="jtk-drag-hover",O_=function(){function t(s,i,r){var e=this;H(this,t),this.instance=s,this.dragSelection=i,f(this,"collicat",void 0),f(this,"drag",void 0),f(this,"_draggables",{}),f(this,"_dlist",[]),f(this,"_elementsWithEndpoints",{}),f(this,"_draggablesForElements",{}),f(this,"handlers",[]),f(this,"_trackScroll",void 0),f(this,"_filtersToAdd",[]),this.collicat=new C_({zoom:this.instance.currentZoom,css:{noSelect:this.instance.dragSelectClass,delegatedDraggable:S_,draggable:P_,drag:k_,selected:Ur,active:qt,hover:Zt,ghostProxy:T_}}),this.instance.bind(bh,function(n){e.collicat.setZoom(n)}),r=r||{},this._trackScroll=r.trackScroll!==!1}return z(t,[{key:"addHandler",value:function(i,r){var e=this,n=U({selector:i.selector},r||{});n.start=yr(n.start,function(l){return i.onStart(l)},!1),n.drag=yr(n.drag,function(l){return i.onDrag(l)}),n.stop=yr(n.stop,function(l){return i.onStop(l)});var o=(i.onBeforeStart||function(l){}).bind(i);if(n.beforeStart=yr(n.beforeStart,function(l){return o(l)}),n.dragInit=function(l,u){return i.onDragInit(l,u)},n.dragAbort=function(l){return i.onDragAbort(l)},i.useGhostProxy&&(n.useGhostProxy=i.useGhostProxy,n.makeGhostProxy=i.makeGhostProxy),n.constrainFunction==null&&n.containment!=null)switch(n.containment){case ji.notNegative:{n.constrainFunction=function(l,u,c,h){return{x:Math.max(0,Math.min(l.x)),y:Math.max(0,Math.min(l.y))}};break}case ji.parent:{var a=n.containmentPadding||5;n.constrainFunction=function(l,u,c,h){var d=l.x<0?0:l.x>c.w-a?c.w-a:l.x,p=l.y<0?0:l.y>c.h-a?c.h-a:l.y;return{x:d,y:p}};break}case ji.parentEnclosed:{n.constrainFunction=function(l,u,c,h){var d=l.x<0?0:l.x+h.w>c.w?c.w-h.w:l.x,p=l.y<0?0:l.y+h.h>c.h?c.h-h.h:l.y;return{x:d,y:p}};break}}this.drag==null?(n.trackScroll=this._trackScroll,this.drag=this.collicat.draggable(this.instance.getContainer(),n),X(this._filtersToAdd,function(l){return e.drag.addFilter(l[0],l[1])}),this.drag.on(is,function(l){e.instance.revalidate(l)})):this.drag.addSelector(n),this.handlers.push({handler:i,options:n}),i.init(this.drag)}},{key:"addSelector",value:function(i,r){this.drag&&this.drag.addSelector(i,r)}},{key:"addFilter",value:function(i,r){this.drag==null?this._filtersToAdd.push([i,r===!0]):this.drag.addFilter(i,r)}},{key:"removeFilter",value:function(i){this.drag!=null&&this.drag.removeFilter(i)}},{key:"setFilters",value:function(i){var r=this;X(i,function(e){r.drag.addFilter(e[0],e[1])})}},{key:"reset",value:function(){var i=[];if(X(this.handlers,function(n){n.handler.reset()}),this.handlers.length=0,this.drag!=null){var r=this.drag._filters;for(var e in r)i.push([e,r[e][1]]);this.collicat.destroyDraggable(this.instance.getContainer())}return delete this.drag,i}},{key:"setOption",value:function(i,r){var e=ga(this.handlers,function(n){return n.handler===i});e!=null&&U(e.options,r||{})}}]),t}();function w_(t,s){return Ee(s)?{id:s,active:!0}:{id:s.id,active:s.active}}function D_(t,s){var i=ih(t.members,function(r){return r.el===s});return i!==null?i.active===!0:!1}function M_(t){for(var s=[],i=t._jsPlumbParentGroup;i!=null;)s.push(i.el),i=i.group;return s}var Io=function(){function t(s,i){H(this,t),this.instance=s,this._dragSelection=i,f(this,"selector","> "+ve+":not("+Pn(Ns)+")"),f(this,"_dragOffset",null),f(this,"_groupLocations",[]),f(this,"_intersectingGroups",[]),f(this,"_currentDragParentGroup",null),f(this,"_dragGroupByElementIdMap",{}),f(this,"_dragGroupMap",{}),f(this,"_currentDragGroup",null),f(this,"_currentDragGroupOffsets",new Map),f(this,"_currentDragGroupSizes",new Map),f(this,"_currentDragGroupOriginalPositions",new Map),f(this,"_dragPayload",null),f(this,"drag",void 0),f(this,"originalPosition",void 0)}return z(t,[{key:"onDragInit",value:function(i){return null}},{key:"onDragAbort",value:function(i){return null}},{key:"getDropGroup",value:function(){var i=null;if(this._intersectingGroups.length>0){var r=this._intersectingGroups[0].groupLoc.group,e=this._intersectingGroups[0].intersectingElement,n=e._jsPlumbParentGroup;n!==r&&(n==null||!n.overrideDrop(e,r))&&(i=this._intersectingGroups[0])}return i}},{key:"onStop",value:function(i){var r,e=this,n=i.drag.getDragElement(),o=this.getDropGroup(),a=[];a.push({el:n,id:this.instance.getId(n),pos:i.finalPos,originalGroup:n._jsPlumbParentGroup,redrawResult:null,originalPos:i.originalPos,reverted:!1,dropGroup:o!=null?o.groupLoc.group:null});function l(g,y,m,E,b){var C=m.x,S=m.y;if(g._jsPlumbParentGroup&&g._jsPlumbParentGroup.constrain){var N={w:g.parentNode.offsetWidth+g.parentNode.scrollLeft,h:g.parentNode.offsetHeight+g.parentNode.scrollTop};C=Math.max(C,0),S=Math.max(S,0),C=Math.min(C,N.w-E.w),S=Math.min(S,N.h-E.h),m.x=C,m.y=S}a.push({el:g,id:y,pos:m,originalPos:b,originalGroup:g._jsPlumbParentGroup,redrawResult:null,reverted:!1,dropGroup:o==null?void 0:o.groupLoc.group})}if(this._dragSelection.each(function(g,y,m,E,b){g!==i.el&&l(g,y,{x:m.x,y:m.y},E,b)}),(r=this._currentDragGroup)===null||r===void 0||r.members.forEach(function(g){if(g.el!==i.el){var y=e._currentDragGroupOffsets.get(g.elId),m=e._currentDragGroupSizes.get(g.elId),E={x:i.finalPos.x+y[0].x,y:i.finalPos.y+y[0].y};l(g.el,g.elId,E,m,e._currentDragGroupOriginalPositions.get(g.elId))}}),X(a,function(g){var y=g.originalGroup!=null,m=y&&ql(e.instance,g.el,g.pos),E={x:0,y:0};if(y&&!m){if(o==null){var b=e._pruneOrOrphan(g,!0,!0);b.pos!=null?g.pos=b.pos.pos:!b.pruned&&g.originalGroup.revert&&(g.pos=g.originalPos,g.reverted=!0)}}else y&&m&&(E=e._computeOffsetByParentGroup(g.originalGroup));o!=null&&!m?e.instance.groupManager.addToGroup(o.groupLoc.group,!1,g.el):g.dropGroup=null,g.reverted&&e.instance.setPosition(g.el,g.pos),g.redrawResult=e.instance.setElementPosition(g.el,g.pos.x+E.x,g.pos.y+E.y),e.instance.removeClass(g.el,A_),e.instance.select({source:g.el}).removeClass(e.instance.elementDraggingClass+" "+e.instance.sourceElementDraggingClass,!0),e.instance.select({target:g.el}).removeClass(e.instance.elementDraggingClass+" "+e.instance.targetElementDraggingClass,!0)}),a[0].originalGroup!=null){var u=n._jsPlumbParentGroup;if(u!==a[0].originalGroup){var c=i.drag.getDragElement(!0);if(a[0].originalGroup.ghost){var h=this.instance.getPosition(this.instance.getGroupContentArea(u)),d=this.instance.getPosition(this.instance.getGroupContentArea(a[0].originalGroup)),p={x:d.x+i.pos.x-h.x,y:d.y+i.pos.y-h.y};c.style.left=p.x+"px",c.style.top=p.y+"px",this.instance.revalidate(c)}}}this.instance.fire(lm,{elements:a,e:i.e,el:n,payload:this._dragPayload}),this._cleanup()}},{key:"_cleanup",value:function(){var i=this;X(this._groupLocations,function(r){i.instance.removeClass(r.el,qt),i.instance.removeClass(r.el,Zt)}),this._currentDragParentGroup=null,this._groupLocations.length=0,this.instance.hoverSuspended=!1,this._dragOffset=null,this._dragSelection.reset(),this._dragPayload=null,this._currentDragGroupOffsets.clear(),this._currentDragGroupSizes.clear(),this._currentDragGroupOriginalPositions.clear(),this._currentDragGroup=null}},{key:"reset",value:function(){}},{key:"init",value:function(i){this.drag=i}},{key:"onDrag",value:function(i){var r=this,e=i.drag.getDragElement(),n=this.instance.getId(e),o=i.pos,a=this.instance.viewport.getPosition(n),l={x:o.x,y:o.y};this._intersectingGroups.length=0,this._dragOffset!=null&&(l.x+=this._dragOffset.x,l.y+=this._dragOffset.y);var u=function(d,p,g){if(g){var y=new Set;X(r._groupLocations,function(m){!y.has(m.group.id)&&Mh(p,m.r)?(m.group!==r._currentDragParentGroup&&r.instance.addClass(m.el,Zt),r._intersectingGroups.push({groupLoc:m,intersectingElement:i.drag.getDragElement(!0),d:0}),X(r.instance.groupManager.getAncestors(m.group),function(E){return y.add(E.id)})):r.instance.removeClass(m.el,Zt)})}r.instance.setElementPosition(d,p.x,p.y),r.instance.fire(am,{el:d,e:i.e,pos:{x:p.x,y:p.y},originalPosition:r.originalPosition,payload:r._dragPayload})},c={x:l.x,y:l.y,w:a.w,h:a.h};u(e,c,!0),this._dragSelection.updatePositions(o,this.originalPosition,function(h,d,p,g){u(h,g,!1)}),this._currentDragGroupOffsets.forEach(function(h,d){var p=r._currentDragGroupSizes.get(d),g={x:c.x+h[0].x,y:c.y+h[0].y,w:p.w,h:p.h};h[1].style.left=g.x+"px",h[1].style.top=g.y+"px",u(h[1],g,!1)})}},{key:"_computeOffsetByParentGroup",value:function(i){var r=this.instance.getPosition(i.el),e=i.contentArea;if(e!==i.el){var n=this.instance.getPosition(e);r.x+=n.x,r.y+=n.y}if(i.el._jsPlumbParentGroup){var o=this._computeOffsetByParentGroup(i.el._jsPlumbParentGroup);r.x+=o.x,r.y+=o.y}return r}},{key:"onStart",value:function(i){var r=this,e=i.drag.getDragElement(),n=this.instance.getPosition(e);this.originalPosition={x:i.pos.x,y:i.pos.y},e._jsPlumbParentGroup&&(this._dragOffset=this._computeOffsetByParentGroup(e._jsPlumbParentGroup),this._currentDragParentGroup=e._jsPlumbParentGroup);var o=!0,a=e.getAttribute(Gr);if((this.instance.elementsDraggable===!1||a!=null&&a!==Un)&&(o=!1),o){this._groupLocations.length=0,this._intersectingGroups.length=0,this.instance.hoverSuspended=!0;var l=i.drag.getDragElement(!0),u=l.querySelectorAll(ve),c=M_(l),h=[];Array.prototype.push.apply(h,u),Array.prototype.push.apply(h,c),this._dragSelection.filterActiveSet(function(y){return h.indexOf(y.jel)===-1}),this._dragSelection.initialisePositions();var d=function(m,E,b){if(!m._isJsPlumbGroup||r.instance.allowNestedGroups){var C=!m._jsPlumbParentGroup,S=C||m._jsPlumbParentGroup.dropOverride!==!0,N=!C&&(m._jsPlumbParentGroup.ghost||m._jsPlumbParentGroup.constrain!==!0);(C||S&&N)&&(X(r.instance.groupManager.getGroups(),function(G){var I=m._jsPlumbGroup;if(G.droppable!==!1&&G.enabled!==!1&&m._jsPlumbGroup!==G&&!r.instance.groupManager.isDescendant(G,I)){var T=G.el,K=r.instance.getId(T),$=r.instance.viewport.getPosition(K),Z={x:$.x,y:$.y,w:$.w,h:$.h},R={el:T,r:Z,group:G};r._groupLocations.push(R),G!==r._currentDragParentGroup&&r.instance.addClass(T,qt)}}),r._groupLocations.sort(function(G,I){return r.instance.groupManager.isDescendant(G.group,I.group)?-1:r.instance.groupManager.isAncestor(I.group,G.group)?1:0}))}return r.instance.select({source:m}).addClass(r.instance.elementDraggingClass+" "+r.instance.sourceElementDraggingClass,!0),r.instance.select({target:m}).addClass(r.instance.elementDraggingClass+" "+r.instance.targetElementDraggingClass,!0),r.instance.fire(um,{el:m,e:i.e,originalPosition:r.originalPosition,pos:r.originalPosition,dragGroup:E,dragGroupMemberSpec:b})},p=this.instance.getId(e);this._currentDragGroup=this._dragGroupByElementIdMap[p],this._currentDragGroup&&!D_(this._currentDragGroup,e)&&(this._currentDragGroup=null);var g=d(e);if(g===!1)return this._cleanup(),!1;this._dragPayload=g,this._currentDragGroup!=null&&(this._currentDragGroupOffsets.clear(),this._currentDragGroupSizes.clear(),this._currentDragGroup.members.forEach(function(y){var m=r.instance.viewport.getPosition(y.elId);r._currentDragGroupOffsets.set(y.elId,[{x:m.x-n.x,y:m.y-n.y},y.el]),r._currentDragGroupSizes.set(y.elId,m),r._currentDragGroupOriginalPositions.set(y.elId,{x:m.x,y:m.y}),d(y.el,r._currentDragGroup,y)}))}return o}},{key:"addToDragGroup",value:function(i){var r=this,e=w_(this.instance,i),n=this._dragGroupMap[e.id];n==null&&(n={id:e.id,members:new Set},this._dragGroupMap[e.id]=n);for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];this.removeFromDragGroup.apply(this,a),X(a,function(u){var c=r.instance.getId(u);n.members.add({elId:c,el:u,active:e.active}),r._dragGroupByElementIdMap[c]=n})}},{key:"removeFromDragGroup",value:function(){for(var i=this,r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];X(e,function(o){var a=i.instance.getId(o),l=i._dragGroupByElementIdMap[a];if(l!=null){var u=new Set;l.members.forEach(function(c){c.el!==o&&u.add(c)}),l.members=u,delete i._dragGroupByElementIdMap[a]}})}},{key:"setDragGroupState",value:function(i){for(var r=this,e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];var a=n.map(function(l){return r.instance.getId(l)});X(a,function(l){var u=r._dragGroupByElementIdMap[l];if(u!=null){var c=ih(u.members,function(h){return h.elId===l});c!=null&&(c.active=i)}})}},{key:"clearDragGroup",value:function(i){var r=this,e=this._dragGroupMap[i];e!=null&&(e.members.forEach(function(n){delete r._dragGroupByElementIdMap[n.elId]}),e.members.clear())}},{key:"_pruneOrOrphan",value:function(i,r,e){var n=i.el,o={pruned:!1,pos:null};if(e||!ql(this.instance,n,i.pos)){var a=n._jsPlumbParentGroup;a.prune?(n._isJsPlumbGroup?this.instance.removeGroup(n._jsPlumbGroup):a.remove(i.el,!0),o.pruned=!0):a.orphan&&(o.pos=this.instance.groupManager.orphan(i.el,r),n._isJsPlumbGroup?a.removeGroup(n._jsPlumbGroup):a.remove(i.el))}return o}}]),t}(),Kl={},Jl={},Zl={},Qt={get:function(s,i,r){var e=Kl[i];if(e)return new e(s,r);throw{message:"jsPlumb: unknown endpoint type '"+i+"'"}},clone:function(s){var i=Zl[s.type];return Qt.get(s.endpoint,s.type,i.getParams(s))},compute:function(s,i,r,e){var n=Jl[s.type];if(n!=null)return n(s,i,r,e);xe("jsPlumb: cannot find endpoint calculator for endpoint of type ",s.type)},registerHandler:function(s){Zl[s.type]=s,Kl[s.type]=s.cls,Jl[s.type]=s.compute}},vi=function(){function t(s,i){H(this,t),this.endpoint=s,f(this,"typeId",void 0),f(this,"x",void 0),f(this,"y",void 0),f(this,"w",void 0),f(this,"h",void 0),f(this,"computedValue",void 0),f(this,"bounds",rs()),f(this,"classes",[]),f(this,"instance",void 0),f(this,"type",void 0),i=i||{},this.instance=s.instance,s.cssClass&&this.classes.push(s.cssClass),i.cssClass&&this.classes.push(i.cssClass)}return z(t,[{key:"addClass",value:function(i){this.classes.push(i),this.instance.addEndpointClass(this.endpoint,i)}},{key:"removeClass",value:function(i){this.classes=this.classes.filter(function(r){return r!==i}),this.instance.removeEndpointClass(this.endpoint,i)}},{key:"compute",value:function(i,r,e){this.computedValue=Qt.compute(this,i,r,e),this.bounds.xmin=this.x,this.bounds.ymin=this.y,this.bounds.xmax=this.x+this.w,this.bounds.ymax=this.y+this.h}},{key:"setVisible",value:function(i){this.instance.setEndpointVisible(this.endpoint,i)}}]),t}(),In,Ln,Nn,ai;(function(t){t.top="top",t.left="left",t.right="right",t.bottom="bottom"})(ai||(ai={}));var be=ai.top,Fe=ai.left,Ie=ai.right,He=ai.bottom,I_=[Fe,Ie],L_=[be,He],N_=function(){function t(s,i,r){H(this,t),this.instance=s,this.element=i,f(this,"isFloating",!0),f(this,"isContinuous",void 0),f(this,"isDynamic",void 0),f(this,"locations",[]),f(this,"currentLocation",0),f(this,"locked",!1),f(this,"cssClass",""),f(this,"timestamp",null),f(this,"type","Floating"),f(this,"id",Se()),f(this,"orientation",[0,0]),f(this,"size",void 0),this.size=s.viewport.getPosition(r),this.locations.push({x:.5,y:.5,ox:this.orientation[0],oy:this.orientation[1],offx:0,offy:0,iox:this.orientation[0],ioy:this.orientation[1],cls:""})}return z(t,[{key:"_updateOrientationInRouter",value:function(){this.instance.router.setAnchorOrientation(this,[this.locations[0].ox,this.locations[0].oy])}},{key:"over",value:function(i){this.orientation=this.instance.router.getEndpointOrientation(i),this.locations[0].ox=this.orientation[0],this.locations[0].oy=this.orientation[1],this._updateOrientationInRouter()}},{key:"out",value:function(){this.orientation=null,this.locations[0].ox=this.locations[0].iox,this.locations[0].oy=this.locations[0].ioy,this._updateOrientationInRouter()}}]),t}(),Ql=(In={},f(In,be,He),f(In,Ie,Fe),f(In,Fe,Ie),f(In,He,be),In),Gh=(Ln={},f(Ln,be,Ie),f(Ln,Ie,He),f(Ln,Fe,be),f(Ln,He,Fe),Ln),jh=(Nn={},f(Nn,be,Fe),f(Nn,Ie,be),f(Nn,Fe,He),f(Nn,He,Ie),Nn);function R_(t){return t.faces.length===0?be:t.faces[0]}function Mi(t,s){return t.faces.indexOf(s)!==-1}function F_(t,s){return(t.clockwise?Gh:jh)[s]}function G_(t,s){return(t.clockwise?jh:Gh)[s]}function eu(t,s){return t.lockedAxis==null?t.lockedFace==null?Mi(t,s)===!0:t.lockedFace===s:t.lockedAxis.indexOf(s)!==-1}function j_(t,s){if(Mi(t,s))return s;if(Mi(t,Ql[s]))return Ql[s];var i=F_(t,s);if(Mi(t,i))return i;var r=G_(t,s);return Mi(t,r)?r:s}var tu={x:.5,y:0,ox:0,oy:-1,offx:0,offy:0},nu={x:.5,y:1,ox:0,oy:1,offx:0,offy:0},iu={x:0,y:.5,ox:-1,oy:0,offx:0,offy:0},ru={x:1,y:.5,ox:1,oy:0,offx:0,offy:0},B_={x:0,y:0,ox:0,oy:-1,offx:0,offy:0},H_={x:1,y:0,ox:1,oy:-1,offx:0,offy:0},U_={x:0,y:1,ox:0,oy:1,offx:0,offy:0},V_={x:1,y:1,ox:0,oy:1,offx:0,offy:0},Y_={x:.5,y:.5,ox:0,oy:0,offx:0,offy:0},Bh={Top:[tu],Bottom:[nu],Left:[iu],Right:[ru],TopLeft:[B_],TopRight:[H_],BottomLeft:[U_],BottomRight:[V_],Center:[Y_],AutoDefault:[tu,iu,nu,ru]},X_={Continuous:{faces:[be,Fe,He,Ie]},ContinuousTop:{faces:[be]},ContinuousRight:{faces:[Ie]},ContinuousBottom:{faces:[He]},ContinuousLeft:{faces:[Fe]},ContinuousLeftRight:{faces:[Fe,Ie]},ContinuousTopBottom:{faces:[be,He]}};function su(t,s){if(s=s||{},t===Pt.Perimeter)return Q_(s);var i=Bh[t];if(i!=null)return us(t,sh(i,function(r){return U({iox:r.ox,ioy:r.oy},r)}),s);if(i=X_[t],i!=null)return z_(t,i.faces,s);throw{message:"jsPlumb: unknown anchor type '"+t+"'"}}function us(t,s,i){return{type:t,locations:s,currentLocation:0,locked:!1,id:Se(),isFloating:!1,isContinuous:!1,isDynamic:s.length>1,timestamp:null,cssClass:i.cssClass||""}}function $_(t,s,i){return new N_(t,s,i)}var W_="currentFace";function z_(t,s,i){var r={type:t,locations:[],currentLocation:0,locked:!1,id:Se(),cssClass:i.cssClass||"",isFloating:!1,isContinuous:!0,timestamp:null,faces:i.faces||s,lockedFace:null,lockedAxis:null,clockwise:i.clockwise!==!1,__currentFace:null};return Object.defineProperty(r,W_,{get:function(){return this.__currentFace},set:function(n){this.__currentFace=j_(this,n)}}),r}function ou(t){return t.length<7&&t.every(So)||t.length===7&&t.slice(0,5).every(So)&&Ee(t[6])}function Ii(t){if(Ee(t))return su(t,null);if(Array.isArray(t))if(ou(t)){var s=t;return us(null,[{x:s[0],y:s[1],ox:s[2],oy:s[3],offx:s[4]==null?0:s[4],offy:s[5]==null?0:s[5],iox:s[2],ioy:s[3],cls:s[6]||""}],{cssClass:s[6]||""})}else{var i=sh(t,function(e){if(Ee(e)){var n=Bh[e];return n!=null?U({iox:n[0].ox,ioy:n[0].oy,cls:""},n[0]):null}else if(ou(e))return{x:e[0],y:e[1],ox:e[2],oy:e[3],offx:e[4]==null?0:e[4],offy:e[5]==null?0:e[5],iox:e[2],ioy:e[3],cls:e[6]||""}}).filter(function(e){return e!=null});return us("Dynamic",i,{})}else{var r=t;return su(r.type,r.options)}}function Hh(t){for(var s=.5,i=Math.PI*2/t,r=[],e=0,n=0;n<t;n++){var o=s+s*Math.sin(e),a=s+s*Math.cos(e);r.push({x:o,y:a,ox:0,oy:0,offx:0,offy:0,iox:0,ioy:0,cls:""}),e+=i}return r}function q_(t,s){for(var i=s/t.length,r=[],e=function(a,l,u,c,h,d,p){i=s*h;for(var g=(u-a)/i,y=(c-l)/i,m=0;m<i;m++)r.push({x:a+g*m,y:l+y*m,ox:d??0,oy:p??0,offx:0,offy:0,iox:0,ioy:0,cls:""})},n=0;n<t.length;n++)e.apply(null,t[n]);return r}function Ma(t,s){for(var i=[],r=0;r<t.length;r++)i.push([t[r][0],t[r][1],t[r][2],t[r][3],1/t.length,t[r][4],t[r][5]]);return q_(i,s)}function Uh(t){return Ma([[0,0,1,0,0,-1],[1,0,1,1,1,0],[1,1,0,1,0,1],[0,1,0,0,-1,0]],t)}function K_(t){return Ma([[.5,0,1,.5],[1,.5,.5,1],[.5,1,0,.5],[0,.5,.5,0]],t)}function J_(t){return Ma([[.5,0,1,1],[1,1,0,1],[0,1,.5,0]],t)}function Z_(t,s){for(var i=[],r=s/180*Math.PI,e=0;e<t.length;e++){var n=t[e].x-.5,o=t[e].y-.5;i.push({x:.5+(n*Math.cos(r)-o*Math.sin(r)),y:.5+(n*Math.sin(r)+o*Math.cos(r)),ox:t[e].ox,oy:t[e].oy,offx:0,offy:0,iox:0,ioy:0,cls:""})}return i}var rn=new Map;rn.set(nn.Circle,Hh);rn.set(nn.Ellipse,Hh);rn.set(nn.Rectangle,Uh);rn.set(nn.Square,Uh);rn.set(nn.Diamond,K_);rn.set(nn.Triangle,J_);function Q_(t){t=t||{};var s=t.anchorCount||60,i=t.shape;if(!i)throw new Error("no shape supplied to Perimeter Anchor type");if(!rn.has(i))throw new Error("Shape ["+i+"] is unknown by Perimeter Anchor type");var r=rn.get(i)(s);t.rotation&&(r=Z_(r,t.rotation));var e=us(Pt.Perimeter,r,t),n=U(e,{shape:i});return n}var au=function(){function t(s,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;H(this,t),this.selector=s,this.def=i,this.exclude=r,f(this,"id",void 0),f(this,"redrop",void 0),this.id=Se(),this.redrop=i.def.redrop||Vh}return z(t,[{key:"setEnabled",value:function(i){this.def.enabled=i}},{key:"isEnabled",value:function(){return this.def.enabled!==!1}}]),t}(),Vh="strict",e0="any",t0="anySource",n0="anyTarget",i0="anySourceOrTarget";function r0(t,s,i,r,e,n){var o=$_(n,r,e),a={paintStyle:t.getPaintStyle(),preparedAnchor:o,element:r,scope:t.scope,cssClass:[Ea,t.cssClass].join(" ")};s!=null&&(oh(s,vi)?a.existingEndpoint=s:a.endpoint=s);var l=n._internal_newEndpoint(a);return n._paintEndpoint(l,{}),l}function s0(t,s,i,r,e){for(var n=t.target||t.srcElement,o=!1,a=r.getSelector(s,i),l=0;l<a.length;l++)if(a[l]===n){o=!0;break}return e?!o:o}var o0=Pn(qt,Zt),lu="sourceSelectorEndpoint",uu=function(){function t(s){H(this,t),this.instance=s,f(this,"jpc",void 0),f(this,"existingJpc",void 0),f(this,"_originalAnchorSpec",void 0),f(this,"ep",void 0),f(this,"endpointRepresentation",void 0),f(this,"canvasElement",void 0),f(this,"_activeDefinition",void 0),f(this,"placeholderInfo",{id:null,element:null}),f(this,"floatingIndex",void 0),f(this,"floatingId",void 0),f(this,"floatingElement",void 0),f(this,"floatingEndpoint",void 0),f(this,"floatingAnchor",void 0),f(this,"_stopped",void 0),f(this,"inPlaceCopy",void 0),f(this,"endpointDropTargets",[]),f(this,"currentDropTarget",null),f(this,"payload",void 0),f(this,"floatingConnections",{}),f(this,"_forceReattach",void 0),f(this,"_forceDetach",void 0),f(this,"mousedownHandler",void 0),f(this,"mouseupHandler",void 0),f(this,"selector",Pn(qn));var i=s.getContainer();this.mousedownHandler=this._mousedownHandler.bind(this),this.mouseupHandler=this._mouseupHandler.bind(this),s.on(i,ee,ve,this.mousedownHandler),s.on(i,te,[ve,Pn(qn)].join(","),this.mouseupHandler)}return z(t,[{key:"_resolveDragParent",value:function(i,r){var e=this.instance.getContainer(),n=Dt(r,ve,e,!0);if(i.parentSelector!=null){var o=Dt(r,i.parentSelector,e,!0);return o!=null&&(n=Dt(o.parentNode,ve,e,!1)),o||n}else return n}},{key:"_mousedownHandler",value:function(i){var r,e;if(!(i.which===3||i.button===2)){var n=i.target||i.srcElement;if(e=this._getSourceDefinition(i),!(e!=null&&(r=this._resolveDragParent(e.def.def,n),r==null||r.getAttribute(Er)===Un))&&e){var o=i.currentTarget,a;if(n.getAttribute(Er)!==Un){if(qi(i),this._activeDefinition=e,a=e.def.def,a.canAcceptNewConnection!=null&&!a.canAcceptNewConnection(r,i))return!1;var l=Pu(i,r,this.instance.currentZoom),u={element:r};if(U(u,a),u.isTemporarySource=!0,a.scope)u.scope=a.scope;else{var c=n.getAttribute(Js);c!=null&&(u.scope=c)}var h=a.parameterExtractor?a.parameterExtractor(r,n,i):{};if(u=es(u,h),u.maxConnections!=null&&u.maxConnections>=0){var d=this.instance.select({source:r}).length;if(d>=u.maxConnections)return qi(i),a.onMaxConnections&&a.onMaxConnections({element:r,maxConnections:u.maxConnections},i),i.stopImmediatePropagation&&i.stopImmediatePropagation(),!1}if(a.anchorPositionFinder){var p=a.anchorPositionFinder(r,l,a,i);p!=null&&(u.anchor=p)}this._originalAnchorSpec=u.anchor||(this.instance.areDefaultAnchorsSet()?this.instance.defaults.anchors[0]:this.instance.defaults.anchor);var g=this.instance.router.prepareAnchor(this._originalAnchorSpec),y=[l.x,l.y,0,0];if(g.locations.length>0)y[2]=g.locations[0].ox,y[3]=g.locations[0].oy;else if(g.isContinuous){var m=l.x<.5?l.x:1-l.x,E=l.y<.5?l.y:1-l.y;y[2]=m<E?l.x<.5?-1:1:0,y[3]=E<m?l.y<.5?-1:1:0}u.anchor=y,u.deleteOnEmpty=!0,this.ep=this.instance._internal_newEndpoint(u);var b={};if(a.extract){for(var C in a.extract){var S=n.getAttribute(C);S&&(b[a.extract[C]]=S)}this.ep.mergeParameters(b)}if(u.uniqueEndpoint){var N=this.ep.elementId,G=this.instance.getManagedData(N,lu,e.id);G==null?(this.instance.setManagedData(N,lu,e.id,this.ep),this.ep.deleteOnEmpty=!1):this.ep.finalEndpoint=G}o._jsPlumbOrphanedEndpoints=o._jsPlumbOrphanedEndpoints||[],o._jsPlumbOrphanedEndpoints.push(this.ep),this.instance.trigger(this.ep.endpoint.canvas,ee,i,b)}}}}},{key:"_mouseupHandler",value:function(i){var r=i.currentTarget||i.srcElement;r._jsPlumbOrphanedEndpoints&&(fy(r._jsPlumbOrphanedEndpoints,this.instance._maybePruneEndpoint.bind(this.instance)),r._jsPlumbOrphanedEndpoints.length=0),this._activeDefinition=null}},{key:"onDragInit",value:function(i){var r=mr(i,this.instance),e=xi(i,this.instance);return this._makeDraggablePlaceholder(r,e),this.placeholderInfo.element.jtk=i.jtk,this.placeholderInfo.element}},{key:"onDragAbort",value:function(i){this._cleanupDraggablePlaceholder()}},{key:"_makeDraggablePlaceholder",value:function(i,r){this.placeholderInfo=this.placeholderInfo||{};var e=lh(kh,{position:"absolute"});this.instance._appendElementToContainer(e);var n=this.instance.getId(e);return this.instance.setPosition(e,i),e.style.width=r.w+"px",e.style.height=r.h+"px",this.instance.manage(e),this.placeholderInfo.id=n,this.placeholderInfo.element=e,e}},{key:"_cleanupDraggablePlaceholder",value:function(){this.placeholderInfo.element&&(this.instance.unmanage(this.placeholderInfo.element,!0),delete this.placeholderInfo.element,delete this.placeholderInfo.id)}},{key:"reset",value:function(){var i=this.instance.getContainer();this.instance.off(i,te,this.mouseupHandler),this.instance.off(i,ee,this.mousedownHandler)}},{key:"init",value:function(i){}},{key:"startNewConnectionDrag",value:function(i,r){this.jpc=this.instance._newConnection({sourceEndpoint:this.ep,targetEndpoint:this.floatingEndpoint,source:this.ep.element,target:this.placeholderInfo.element,paintStyle:this.ep.connectorStyle,hoverPaintStyle:this.ep.connectorHoverStyle,connector:this.ep.connector,overlays:this.ep.connectorOverlays,type:this.ep.edgeType,cssClass:this.ep.connectorClass,hoverClass:this.ep.connectorHoverClass,scope:i,data:r}),this.jpc.pending=!0,this.jpc.addClass(this.instance.draggingClass),this.ep.addClass(this.instance.draggingClass),this.instance.fire(Vl,this.jpc)}},{key:"startExistingConnectionDrag",value:function(){this.existingJpc=!0,this.instance.setHover(this.jpc,!1);var i=this.jpc.endpoints[0].id===this.ep.id?0:1;this.ep.detachFromConnection(this.jpc,null,!0),this.floatingEndpoint.addConnection(this.jpc),this.instance.fire(Vl,this.jpc),this.instance.sourceOrTargetChanged(this.jpc.endpoints[i].elementId,this.placeholderInfo.id,this.jpc,this.placeholderInfo.element,i),this.jpc.suspendedEndpoint=this.jpc.endpoints[i],this.jpc.suspendedElement=this.jpc.endpoints[i].element,this.jpc.suspendedElementId=this.jpc.endpoints[i].elementId,this.jpc.suspendedElementType=i===0?To:ch,this.instance.setHover(this.jpc.suspendedEndpoint,!1),this.floatingEndpoint.referenceEndpoint=this.jpc.suspendedEndpoint,this.floatingEndpoint.mergeParameters(this.jpc.suspendedEndpoint.parameters),this.jpc.endpoints[i]=this.floatingEndpoint,this.jpc.addClass(this.instance.draggingClass),this.floatingId=this.placeholderInfo.id,this.floatingIndex=i,this.instance._refreshEndpoint(this.ep)}},{key:"_shouldStartDrag",value:function(){var i=!0;this.ep.enabled||(i=!1),this.jpc==null&&!this.ep.isSource&&!this.ep.isTemporarySource&&(i=!1),this.ep.isSource&&this.ep.isFull()&&!(this.jpc!=null&&this.ep.dragAllowedWhenFull)&&(i=!1),this.jpc!=null&&!this.jpc.isDetachable(this.ep)&&(this.ep.isFull()?i=!1:this.jpc=null);var r={},e=this.instance.checkCondition(this.jpc==null?Xy:$y,{endpoint:this.ep,source:this.ep.element,sourceId:this.ep.elementId,connection:this.jpc});return e===!1?i=!1:zn(e)==="object"?(r=e,U(r,this.payload||{})):r=this.payload||{},[i,r]}},{key:"_createFloatingEndpoint",value:function(i){var r=this.ep.endpoint;if(this.ep.edgeType!=null){var e=this.instance._deriveEndpointAndAnchorSpec(this.ep.edgeType);r=e.endpoints[1]}this.floatingEndpoint=r0(this.ep,r,i,this.placeholderInfo.element,this.placeholderInfo.id,this.instance),this.floatingAnchor=this.floatingEndpoint._anchor,this.floatingEndpoint.deleteOnEmpty=!0,this.floatingElement=this.floatingEndpoint.endpoint.canvas,this.floatingId=this.instance.getId(this.floatingElement)}},{key:"_populateTargets",value:function(i,r){var e=this,n=this.jpc&&this.jpc.endpoints[0]===this.ep,o,a=this.instance.getContainer().querySelectorAll([".",qn,"[",fh,this.ep.scope,"]:not(.",Ea,")"].join(""));if(X(a,function(h){if((e.jpc!=null||h!==i)&&h!==e.floatingElement&&(e.jpc!=null||!h.jtk.endpoint.isFull())&&(n&&h.jtk.endpoint.isSource||!n&&h.jtk.endpoint.isTarget)){var d=mr(h,e.instance),p=xi(h,e.instance);o={x:d.x,y:d.y,w:p.w,h:p.h},e.endpointDropTargets.push({el:h,targetEl:h,r:o,endpoint:h.jtk.endpoint,def:null}),e.instance.addClass(h,qt)}}),n){var l=ga(this.instance.sourceSelectors,function(h){return h.isEnabled()&&(h.def.def.scope==null||h.def.def.scope===e.ep.scope)});if(l!=null){var u=this._findTargetZones(l);X(u,function(h){if(h.getAttribute(Er)!==Un){var d=h.getAttribute(Js);if(d!=null&&d!==e.ep.scope)return;var p={r:null,el:h};p.targetEl=Dt(h,ve,e.instance.getContainer(),!0);var g=mr(p.el,e.instance),y=xi(p.el,e.instance);p.r={x:g.x,y:g.y,w:y.w,h:y.h},l.def.def.rank!=null&&(p.rank=l.def.def.rank),p.def=l.def,e.endpointDropTargets.push(p),e.instance.addClass(p.targetEl,qt)}})}}else{var c=cy(this.instance.targetSelectors,function(h){return h.isEnabled()});c.forEach(function(h){var d=e._findTargetZones(h);X(d,function(p){if(p.getAttribute(Er)!==Un){var g=p.getAttribute(Js);if(g!=null&&g!==e.ep.scope)return;var y={r:null,el:p};if(h.def.def.parentSelector!=null&&(y.targetEl=Dt(p,h.def.def.parentSelector,e.instance.getContainer(),!0)),y.targetEl==null&&(y.targetEl=Dt(p,ve,e.instance.getContainer(),!0)),(h.def.def.allowLoopback===!1||e._activeDefinition&&e._activeDefinition.def.def.allowLoopback===!1)&&y.targetEl===e.ep.element||h.def.def.canAcceptNewConnection!=null&&!h.def.def.canAcceptNewConnection(y.targetEl,r))return;var m=h.def.def.maxConnections;if(m!=null&&m!==-1&&e.instance.select({target:y.targetEl}).length>=m)return;var E=mr(p,e.instance),b=xi(p,e.instance);y.r={x:E.x,y:E.y,w:b.w,h:b.h},y.def=h.def,h.def.def.rank!=null&&(y.rank=h.def.def.rank),e.endpointDropTargets.push(y),e.instance.addClass(y.targetEl,qt)}})})}this.endpointDropTargets.sort(function(h,d){if(h.targetEl._isJsPlumbGroup&&!d.targetEl._isJsPlumbGroup)return 1;if(!h.targetEl._isJsPlumbGroup&&d.targetEl._isJsPlumbGroup)return-1;if(h.targetEl._isJsPlumbGroup&&d.targetEl._isJsPlumbGroup){if(e.instance.groupManager.isAncestor(h.targetEl._jsPlumbGroup,d.targetEl._jsPlumbGroup))return-1;if(e.instance.groupManager.isAncestor(d.targetEl._jsPlumbGroup,h.targetEl._jsPlumbGroup))return 1}else if(h.rank!=null&&d.rank!=null){if(h.rank>d.rank)return-1;if(h.rank<d.rank)return 1}else return 0})}},{key:"_findTargetZones",value:function(i){var r;if(i.redrop===e0){var e=this.instance.targetSelectors.map(function(o){return o.selector});e.push.apply(e,ni(this.instance.sourceSelectors.map(function(o){return o.selector}))),e.push(ve),r=e.join(",")}else if(i.redrop===Vh)r=i.selector;else if(i.redrop===t0)r=this.instance.sourceSelectors.map(function(o){return o.selector}).join(",");else if(i.redrop===n0)r=this.instance.targetSelectors.map(function(o){return o.selector}).join(",");else if(i.redrop===i0){var n=this.instance.targetSelectors.map(function(o){return o.selector});n.push.apply(n,ni(this.instance.sourceSelectors.map(function(o){return o.selector}))),r=n.join(",")}return this.instance.getContainer().querySelectorAll(r)}},{key:"onStart",value:function(i){this.endpointDropTargets.length=0,this.currentDropTarget=null,this._stopped=!1;var r=i.drag.getDragElement();if(this.ep=r.jtk.endpoint,!this.ep)return!1;this.endpointRepresentation=this.ep.endpoint,this.canvasElement=this.endpointRepresentation.canvas,this.jpc=this.ep.connectorSelector();var e=this._shouldStartDrag(),n=Fr(e,2),o=n[0],a=n[1];if(o===!1)return this._stopped=!0,!1;this.instance.setHover(this.ep,!1),this.instance.isConnectionBeingDragged=!0,this.jpc&&!this.ep.isFull()&&this.ep.isSource&&(this.jpc=null),this._createFloatingEndpoint(this.canvasElement),this._populateTargets(this.canvasElement,i.e),this.jpc==null?this.startNewConnectionDrag(this.ep.scope,a):this.startExistingConnectionDrag(),this._registerFloatingConnection(this.placeholderInfo,this.jpc),this.instance.currentlyDragging=!0}},{key:"onBeforeStart",value:function(i){this.payload=i.e.payload||{}}},{key:"onDrag",value:function(i){if(this._stopped)return!0;if(this.placeholderInfo.element){var r=xi(this.floatingElement,this.instance);this.instance.setElementPosition(this.placeholderInfo.element,i.pos.x,i.pos.y);for(var e={x:i.pos.x,y:i.pos.y,w:r.w,h:r.h},n,o,a,l=0;l<this.endpointDropTargets.length;l++)if(Mh(e,this.endpointDropTargets[l].r)){n=this.endpointDropTargets[l];break}if(n!==this.currentDropTarget&&this.currentDropTarget!=null&&(o=this._getFloatingAnchorIndex(),this.instance.removeClass(this.currentDropTarget.el,Zt),this.currentDropTarget.endpoint&&(this.currentDropTarget.endpoint.endpoint.removeClass(this.instance.endpointDropAllowedClass),this.currentDropTarget.endpoint.endpoint.removeClass(this.instance.endpointDropForbiddenClass)),this.floatingAnchor.out()),n!=null&&(this.instance.addClass(n.el,Zt),o=this._getFloatingAnchorIndex(),n.endpoint!=null))if(a=n.endpoint.isSource&&o===0||n.endpoint.isTarget&&o!==0||this.jpc.suspendedEndpoint&&n.endpoint.referenceEndpoint&&n.endpoint.referenceEndpoint.id===this.jpc.suspendedEndpoint.id,a){var u=this.instance.checkCondition(Py,{sourceEndpoint:this.jpc.endpoints[o],targetEndpoint:n.endpoint.endpoint,connection:this.jpc});u?(n.endpoint.endpoint.addClass(this.instance.endpointDropAllowedClass),n.endpoint.endpoint.removeClass(this.instance.endpointDropForbiddenClass)):(n.endpoint.endpoint.removeClass(this.instance.endpointDropAllowedClass),n.endpoint.endpoint.addClass(this.instance.endpointDropForbiddenClass)),this.floatingAnchor.over(n.endpoint),this.instance._paintConnection(this.jpc)}else n=null;this.currentDropTarget=n}}},{key:"_maybeCleanup",value:function(i){i._mtNew&&i.connections.length===0?this.instance.deleteEndpoint(i):delete i._mtNew}},{key:"_reattachOrDiscard",value:function(i){var r=this.jpc.suspendedEndpoint!=null,e=this._getFloatingAnchorIndex();return r&&this._shouldReattach()?(e===0?(this.jpc.source=this.jpc.suspendedElement,this.jpc.sourceId=this.jpc.suspendedElementId):(this.jpc.target=this.jpc.suspendedElement,this.jpc.targetId=this.jpc.suspendedElementId),this._doForceReattach(e),!0):(this._discard(e,i),!1)}},{key:"onStop",value:function(i){var r=this,e=i.e;this.instance.isConnectionBeingDragged=!1,this.instance.currentlyDragging=!1;var n=Cy(Zt,qt),o=this.instance.getContainer().querySelectorAll(o0);if(X(o,function(d){r.instance.removeClass(d,n)}),this.jpc&&this.jpc.endpoints!=null){var a=this.jpc.suspendedEndpoint!=null,l=this._getFloatingAnchorIndex(),u=this.jpc.suspendedEndpoint,c;if(this.currentDropTarget!=null)if(c=this._getDropEndpoint(i,this.jpc),c==null)this._reattachOrDiscard(i.e);else if(u&&u.id===c.id)this._doForceReattach(l);else if(!c.enabled)this._reattachOrDiscard(i.e);else if(c.isFull())c.fire(_h,{endpoint:this,connection:this.jpc,maxConnections:this.instance.defaults.maxConnections},e),this._reattachOrDiscard(i.e);else{l===0?(this.jpc.source=c.element,this.jpc.sourceId=c.elementId):(this.jpc.target=c.element,this.jpc.targetId=c.elementId);var h=!0;a&&this.jpc.suspendedEndpoint.id!==c.id&&(!this.jpc.isDetachAllowed(this.jpc)||!this.jpc.endpoints[l].isDetachAllowed(this.jpc)||!this.jpc.suspendedEndpoint.isDetachAllowed(this.jpc)||!this.instance.checkCondition("beforeDetach",this.jpc))&&(h=!1),h=h&&c.isDropAllowed(this.jpc.sourceId,this.jpc.targetId,this.jpc.scope,this.jpc,c),h?this._drop(c,l,e,h):this._reattachOrDiscard(i.e)}else this._reattachOrDiscard(i.e);this.instance._refreshEndpoint(this.ep),this.ep.removeClass(this.instance.draggingClass),this._cleanupDraggablePlaceholder(),this.jpc.removeClass(this.instance.draggingClass),delete this.jpc.suspendedEndpoint,delete this.jpc.suspendedElement,delete this.jpc.suspendedElementType,delete this.jpc.suspendedElementId,delete this.jpc.suspendedIndex,delete this.floatingId,delete this.floatingIndex,delete this.floatingElement,delete this.floatingEndpoint,delete this.floatingAnchor,delete this.jpc.pending,c!=null&&this._maybeCleanup(c)}}},{key:"_getSourceDefinition",value:function(i){for(var r,e=this.instance.getContainer(),n=0;n<this.instance.sourceSelectors.length;n++)if(r=this.instance.sourceSelectors[n],r.isEnabled()){var o=s0(i,e,r.selector,this.instance,r.exclude);if(o!==!1)return r}}},{key:"_getDropEndpoint",value:function(i,r){var e;if(this.currentDropTarget.endpoint==null){var n=this.currentDropTarget.def,o=i.e.target||i.e.srcElement;if(n==null)return null;var a=this.currentDropTarget.targetEl,l=Pu(i.e,a,this.instance.currentZoom),u=this.instance._deriveEndpointAndAnchorSpec(r.getType().join(" "),!0),c=u.endpoints?U(i,{endpoint:n.def.endpoint||u.endpoints[1],cssClass:n.def.cssClass||"",source:n.def.source===!0,target:n.def.target===!0}):i,h=this.instance.validAnchorsSpec(u.anchors)?u.anchors:this.instance.areDefaultAnchorsSet()?this.instance.defaults.anchors:null,d=n.def.anchor,p=n.def.anchorPositionFinder?n.def.anchorPositionFinder(a,l,n.def,i.e):null,g=p??d??(h!=null&&h[1]!=null?h[1]:null);g!=null&&(c=U(c,{anchor:g})),n.def.portId!=null&&(c.portId=n.def.portId);var y=n.def.parameterExtractor?n.def.parameterExtractor(this.currentDropTarget.el,o,i.e):{};if(c=es(c,y),c.element=a,e=this.instance._internal_newEndpoint(c),e._mtNew=!0,e.deleteOnEmpty=!0,n.def.parameters&&e.mergeParameters(n.def.parameters),n.def.extract){var m={};for(var E in n.def.extract){var b=this.currentDropTarget.el.getAttribute(E);b&&(m[n.def.extract[E]]=b)}e.mergeParameters(m)}}else e=this.currentDropTarget.endpoint;return e&&(e.removeClass(this.instance.endpointDropAllowedClass),e.removeClass(this.instance.endpointDropForbiddenClass)),e}},{key:"_doForceReattach",value:function(i){this.floatingEndpoint.detachFromConnection(this.jpc,null,!0),this.jpc.endpoints[i]=this.jpc.suspendedEndpoint,this.instance.setHover(this.jpc,!1),this.jpc._forceDetach=!0,this.jpc.suspendedEndpoint.addConnection(this.jpc),this.instance.sourceOrTargetChanged(this.floatingId,this.jpc.suspendedEndpoint.elementId,this.jpc,this.jpc.suspendedEndpoint.element,i),this.instance.deleteEndpoint(this.floatingEndpoint),this.instance.repaint(this.jpc.source),delete this.jpc._forceDetach}},{key:"_shouldReattach",value:function(){if(this.jpc.isReattach()||this.jpc._forceReattach)return!0;var i=this.jpc.suspendedEndpoint,r=this.jpc.suspendedElementType==To?1:0,e=this.jpc.endpoints[r];return!nh(!0,!1,[[i,Kn,[this.jpc]],[e,Kn,[this.jpc]],[this.jpc,Kn,[this.jpc]],[this.instance,dh,[xh,this.jpc]]])}},{key:"_discard",value:function(i,r){this.jpc.pending?this.instance.fire(cm,this.jpc,r):(i===0?(this.jpc.source=this.jpc.suspendedEndpoint.element,this.jpc.sourceId=this.jpc.suspendedEndpoint.elementId):(this.jpc.target=this.jpc.suspendedEndpoint.element,this.jpc.targetId=this.jpc.suspendedEndpoint.elementId),this.jpc.endpoints[i]=this.jpc.suspendedEndpoint),this.floatingEndpoint&&this.floatingEndpoint.detachFromConnection(this.jpc),this.instance.deleteConnection(this.jpc,{originalEvent:r,force:!0})}},{key:"_drop",value:function(i,r,e,n){if(this.jpc.endpoints[r].detachFromConnection(this.jpc),this.jpc.suspendedEndpoint&&this.jpc.suspendedEndpoint.detachFromConnection(this.jpc),this.jpc.endpoints[r]=i,i.addConnection(this.jpc),this.jpc.suspendedEndpoint){var o=this.jpc.suspendedEndpoint.elementId;this.instance.fireMoveEvent({index:r,originalSourceId:r===0?o:this.jpc.sourceId,newSourceId:r===0?i.elementId:this.jpc.sourceId,originalTargetId:r===1?o:this.jpc.targetId,newTargetId:r===1?i.elementId:this.jpc.targetId,originalEndpoint:this.jpc.suspendedEndpoint,connection:this.jpc,newEndpoint:i},e)}if(r===1?this.instance.sourceOrTargetChanged(this.floatingId,this.jpc.targetId,this.jpc,this.jpc.target,1):this.instance.sourceOrTargetChanged(this.floatingId,this.jpc.sourceId,this.jpc,this.jpc.source,0),this.jpc.endpoints[0].finalEndpoint){var a=this.jpc.endpoints[0];a.detachFromConnection(this.jpc),this.jpc.endpoints[0]=this.jpc.endpoints[0].finalEndpoint,this.jpc.endpoints[0].addConnection(this.jpc)}ii(n)&&this.jpc.mergeData(n),this._originalAnchorSpec&&(this.jpc.endpoints[0].setAnchor(this._originalAnchorSpec),this._originalAnchorSpec=null),this.instance._finaliseConnection(this.jpc,null,e),this.instance.setHover(this.jpc,!1),this.instance.revalidate(this.jpc.endpoints[0].element)}},{key:"_registerFloatingConnection",value:function(i,r){this.floatingConnections[i.id]=r}},{key:"_getFloatingAnchorIndex",value:function(){return this.floatingIndex==null?1:this.floatingIndex}}]),t}(),cu=function(t){oe(i,t);var s=ae(i);function i(r,e){var n;return H(this,i),n=s.call(this,r,e),n.instance=r,n.dragSelection=e,f(v(n),"selector",[">",Im,ve].join(" ")),f(v(n),"doRevalidate",void 0),n.doRevalidate=n._revalidate.bind(v(n)),n}return z(i,[{key:"reset",value:function(){this.drag.off(is,this.doRevalidate)}},{key:"_revalidate",value:function(e){this.instance.revalidate(e)}},{key:"init",value:function(e){this.drag=e,e.on(is,this.doRevalidate)}},{key:"useGhostProxy",value:function(e,n){var o=n._jsPlumbParentGroup;return o==null?!1:o.ghost===!0}},{key:"makeGhostProxy",value:function(e){var n=e,o=n.cloneNode(!0);return o._jsPlumbParentGroup=n._jsPlumbParentGroup,o}}]),i}(Io),Ia=function(){function t(s,i){H(this,t),this.instance=s,this.overlay=i,f(this,"htmlElementOverlay",void 0),this.htmlElementOverlay=i}return z(t,null,[{key:"getElement",value:function(i,r,e){if(i.canvas==null){if(e&&r){i.canvas=e(r);var n=i.instance.overlayClass+" "+(i.cssClass?i.cssClass:"");i.instance.addClass(i.canvas,n)}else i.canvas=lh(kh,{},i.instance.overlayClass+" "+(i.cssClass?i.cssClass:""));i.instance.setAttribute(i.canvas,"jtk-overlay-id",i.id);for(var o in i.attributes)i.instance.setAttribute(i.canvas,o,i.attributes[o]);i.canvas.style.position=Ji,i.instance._appendElement(i.canvas,i.instance.getContainer()),i.instance.getId(i.canvas);var a="translate(-50%, -50%)";i.canvas.style.webkitTransform=a,i.canvas.style.mozTransform=a,i.canvas.style.msTransform=a,i.canvas.style.oTransform=a,i.canvas.style.transform=a,i.isVisible()||(i.canvas.style.display=ri),i.canvas.jtk={overlay:i}}return i.canvas}},{key:"destroy",value:function(i){i.canvas&&i.canvas.parentNode&&i.canvas.parentNode.removeChild(i.canvas),delete i.canvas,delete i.cachedDimensions}},{key:"_getDimensions",value:function(i,r){return(i.cachedDimensions==null||r)&&(i.cachedDimensions={w:1,h:1}),i.cachedDimensions}}]),t}(),or=function(){function t(){H(this,t),f(this,"_listeners",{}),f(this,"eventsSuspended",!1),f(this,"tick",!1),f(this,"eventsToDieOn",{ready:!0}),f(this,"queue",[])}return z(t,[{key:"fire",value:function(i,r,e){var n=null;if(this.tick)this.queue.unshift(arguments);else{if(this.tick=!0,!this.eventsSuspended&&this._listeners[i]){var o=this._listeners[i].length,a=0,l=!1;if(!this.shouldFireEvent||this.shouldFireEvent(i,r,e))for(;!l&&a<o&&n!==!1;){if(this.eventsToDieOn[i])this._listeners[i][a](r,e);else try{n=this._listeners[i][a](r,e)}catch(u){xe("jsPlumb: fire failed for event "+i+" : "+(u.message||u))}a++,(this._listeners==null||this._listeners[i]==null)&&(l=!0)}}this.tick=!1,this._drain()}return n}},{key:"_drain",value:function(){var i=this.queue.pop();i&&this.fire.apply(this,i)}},{key:"unbind",value:function(i,r){if(arguments.length===0)this._listeners={};else if(arguments.length===1){if(typeof i=="string")delete this._listeners[i];else if(i.__jsPlumb){var e;for(var n in i.__jsPlumb)e=i.__jsPlumb[n],Rl(this._listeners[e]||[],i)}}else arguments.length===2&&Rl(this._listeners[i]||[],r);return this}},{key:"getListener",value:function(i){return this._listeners[i]||[]}},{key:"isSuspendEvents",value:function(){return this.eventsSuspended}},{key:"setSuspendEvents",value:function(i){this.eventsSuspended=i}},{key:"bind",value:function(i,r,e){var n=this,o=function(u){rh(n._listeners,u,r,e),r.__jsPlumb=r.__jsPlumb||{},r.__jsPlumb[Se()]=u};if(typeof i=="string")o(i);else if(i.length!=null)for(var a=0;a<i.length;a++)o(i[a]);return this}},{key:"silently",value:function(i){this.setSuspendEvents(!0);try{i()}catch(r){xe("Cannot execute silent function "+r)}this.setSuspendEvents(!1)}}]),t}();(function(t){oe(i,t);var s=ae(i);function i(){return H(this,i),s.apply(this,arguments)}return z(i,[{key:"shouldFireEvent",value:function(e,n,o){return!0}}]),i})(or);function Lo(t){var s=null;return Ee(t)?s={type:t,options:{}}:s=t,s.options.id=s.options.id||Se(),s}var Rs=function(t){oe(i,t);var s=ae(i);function i(r,e,n){var o;H(this,i),o=s.call(this),o.instance=r,o.component=e,f(v(o),"id",void 0),f(v(o),"type",void 0),f(v(o),"cssClass",void 0),f(v(o),"visible",!0),f(v(o),"location",void 0),f(v(o),"events",void 0),f(v(o),"attributes",void 0),n=n||{},o.id=n.id||Se(),o.cssClass=n.cssClass||"",o.setLocation(n.location),o.events=n.events||{},o.attributes=n.attributes||{};for(var a in o.events)o.bind(a,o.events[a]);return o}return z(i,[{key:"setLocation",value:function(e){var n=this.location==null?.5:this.location;if(e!=null)try{var o=typeof e=="string"?parseFloat(e):e;isNaN(o)||(n=o)}catch{}this.location=n}},{key:"shouldFireEvent",value:function(e,n,o){return!0}},{key:"setVisible",value:function(e){this.visible=e,this.instance.setOverlayVisible(this,e)}},{key:"isVisible",value:function(){return this.visible}}]),i}(or),hu={},kn={get:function(s,i,r,e){var n=hu[i];if(n)return new n(s,r,e);throw{message:"jsPlumb: unknown overlay type '"+i+"'"}},register:function(s,i){hu[s]=i}},Tn=function(t){oe(i,t);var s=ae(i);function i(r,e,n){var o;return H(this,i),o=s.call(this,r,e,n),o.instance=r,o.component=e,f(v(o),"label",void 0),f(v(o),"labelText",void 0),f(v(o),"type",i.type),f(v(o),"cachedDimensions",void 0),n=n||{label:""},o.setLabel(n.label),o}return z(i,[{key:"getLabel",value:function(){return Cn(this.label)?this.label(this):this.labelText}},{key:"setLabel",value:function(e){this.label=e,this.labelText=null,this.instance.updateLabel(this)}},{key:"getDimensions",value:function(){return{w:1,h:1}}},{key:"updateFrom",value:function(e){e.label!=null&&this.setLabel(e.label),e.location!=null&&(this.setLocation(e.location),this.instance.updateLabel(this))}}]),i}(Rs);f(Tn,"type","Label");function Vt(t){return t.type===Tn.type}kn.register(Tn.type,Tn);function br(t){return t==null?null:t.split(" ").filter(function(s){return s!=null&&s.length>0})}function fu(t,s,i){for(var r in s)t[r]=i}var a0="connector",l0="override",u0="cssClass",du="__default",c0="anchor",h0="anchors",Li="__label",f0="jtk-default-label",Yh="overlay",d0="labelLocation",pu="add",vu="remove";function Rn(t,s){if(t.getDefaultType){var i=t.getTypeDescriptor(),r={},e=t.getDefaultType(),n=U({},e);fu(r,e,du),t._types.forEach(function(o){if(o!==du){var a=t.instance.getType(o,i);if(a!=null){var l=new Set([a0,c0,h0]);if(a.mergeStrategy===l0)for(var u in a)l.add(u);n=es(n,a,[u0],hy(l)),fu(r,a,o)}}}),s&&(n=ly(n,s,"_")),t.applyType(n,r)}}function to(t,s){var i=t.instance.getType(s,t.getTypeDescriptor());i!=null&&i.cssClass&&t.removeClass(i.cssClass)}function gu(t){if(t.paintStyle&&t.hoverPaintStyle){var s={};U(s,t.paintStyle),U(s,t.hoverPaintStyle),t.hoverPaintStyle=s}}function p0(t,s){var i={cssClass:s.cssClass,id:Li,component:t},r=U(i,s);return new Tn(t.instance,t,r)}function v0(t,s){var i=null;if(Ee(s))i=kn.get(t.instance,s,t,{});else if(s.type!=null&&s.options!=null){var r=s,e=U({},r.options);i=kn.get(t.instance,r.type,t,e)}else i=s;return i.id=i.id||Se(),t.cacheTypeItem(Yh,i,i.id),t.overlays[i.id]=i,i}var Xh=function(t){oe(i,t);var s=ae(i);function i(r,e){var n;if(H(this,i),n=s.call(this),n.instance=r,f(v(n),"defaultLabelLocation",.5),f(v(n),"overlays",{}),f(v(n),"overlayPositions",{}),f(v(n),"overlayPlacements",{}),f(v(n),"clone",void 0),f(v(n),"deleted",void 0),f(v(n),"segment",void 0),f(v(n),"x",void 0),f(v(n),"y",void 0),f(v(n),"w",void 0),f(v(n),"h",void 0),f(v(n),"id",void 0),f(v(n),"visible",!0),f(v(n),"typeId",void 0),f(v(n),"params",{}),f(v(n),"paintStyle",void 0),f(v(n),"hoverPaintStyle",void 0),f(v(n),"paintStyleInUse",void 0),f(v(n),"_hover",!1),f(v(n),"lastPaintedAt",void 0),f(v(n),"data",void 0),f(v(n),"_defaultType",void 0),f(v(n),"events",void 0),f(v(n),"parameters",void 0),f(v(n),"_types",void 0),f(v(n),"_typeCache",void 0),f(v(n),"cssClass",void 0),f(v(n),"hoverClass",void 0),f(v(n),"beforeDetach",void 0),f(v(n),"beforeDrop",void 0),e=e||{},n.cssClass=e.cssClass||"",n.hoverClass=e.hoverClass||r.defaults.hoverClass,n.beforeDetach=e.beforeDetach,n.beforeDrop=e.beforeDrop,n._types=new Set,n._typeCache={},n.parameters=Qr(e.parameters||{}),n.id=e.id||n.getIdPrefix()+new Date().getTime(),n._defaultType={parameters:n.parameters,scope:e.scope||n.instance.defaultScope,overlays:{}},e.events)for(var o in e.events)n.bind(o,e.events[o]);n.clone=function(){var p=Object.create(n.constructor.prototype);return n.constructor.apply(p,[r,e]),p},n.overlays={},n.overlayPositions={};var a=e.overlays||[],l={},u=n.getDefaultOverlayKey();if(u){var c=n.instance.defaults[u];c&&a.push.apply(a,ni(c));for(var h=0;h<a.length;h++){var d=Lo(a[h]);l[d.options.id]=d}}return n._defaultType.overlays=l,e.label&&(n.getDefaultType().overlays[Li]={type:Tn.type,options:{label:e.label,location:e.labelLocation||n.defaultLabelLocation,id:Li,cssClass:f0}}),n}return z(i,[{key:"isDetachAllowed",value:function(e){var n=!0;if(this.beforeDetach)try{n=this.beforeDetach(e)}catch(o){xe("jsPlumb: beforeDetach callback failed",o)}return n}},{key:"isDropAllowed",value:function(e,n,o,a,l){var u,c={sourceId:e,targetId:n,scope:o,connection:a,dropEndpoint:l};if(this.beforeDrop)try{u=this.beforeDrop(c)}catch(h){xe("jsPlumb: beforeDrop callback failed",h)}else u=this.instance.checkCondition(Ch,c);return u}},{key:"getDefaultType",value:function(){return this._defaultType}},{key:"appendToDefaultType",value:function(e){for(var n in e)this._defaultType[n]=e[n]}},{key:"getId",value:function(){return this.id}},{key:"cacheTypeItem",value:function(e,n,o){this._typeCache[o]=this._typeCache[o]||{},this._typeCache[o][e]=n}},{key:"getCachedTypeItem",value:function(e,n){return this._typeCache[n]?this._typeCache[n][e]:null}},{key:"setType",value:function(e,n){this.clearTypes(),(br(e)||[]).forEach(this._types.add,this._types),Rn(this,n)}},{key:"getType",value:function(){return Array.from(this._types.keys())}},{key:"reapplyTypes",value:function(e){Rn(this,e)}},{key:"hasType",value:function(e){return this._types.has(e)}},{key:"addType",value:function(e,n){var o=br(e),a=!1;if(o!=null){for(var l=0,u=o.length;l<u;l++)this._types.has(o[l])||(this._types.add(o[l]),a=!0);a&&Rn(this,n)}}},{key:"removeType",value:function(e,n){var o=this,a=br(e),l=!1,u=function(p){return o._types.has(p)?(to(o,p),o._types.delete(p),!0):!1};if(a!=null){for(var c=0,h=a.length;c<h;c++)l=u(a[c])||l;l&&Rn(this,n)}}},{key:"clearTypes",value:function(e){var n=this;this._types.forEach(function(o){to(n,o)}),this._types.clear(),Rn(this,e)}},{key:"toggleType",value:function(e,n){var o=br(e);if(o!=null){for(var a=0,l=o.length;a<l;a++)this._types.has(o[a])?(to(this,o[a]),this._types.delete(o[a])):this._types.add(o[a]);Rn(this,n)}}},{key:"applyType",value:function(e,n){if(this.setPaintStyle(e.paintStyle),this.setHoverPaintStyle(e.hoverPaintStyle),this.mergeParameters(e.parameters),this.paintStyleInUse=this.getPaintStyle(),e.overlays){var o={},a;for(a in e.overlays){var l=this.overlays[e.overlays[a].options.id];if(l)l.updateFrom(e.overlays[a].options),o[e.overlays[a].options.id]=!0,this.instance.reattachOverlay(l,this);else{var u=this.getCachedTypeItem(Yh,e.overlays[a].options.id);u!=null?(this.instance.reattachOverlay(u,this),u.setVisible(!0),u.updateFrom(e.overlays[a].options),this.overlays[u.id]=u):u=this.addOverlay(e.overlays[a]),o[u.id]=!0}}for(a in this.overlays)o[this.overlays[a].id]==null&&this.removeOverlay(this.overlays[a].id,!0)}}},{key:"setPaintStyle",value:function(e){this.paintStyle=e,this.paintStyleInUse=this.paintStyle,gu(this)}},{key:"getPaintStyle",value:function(){return this.paintStyle}},{key:"setHoverPaintStyle",value:function(e){this.hoverPaintStyle=e,gu(this)}},{key:"getHoverPaintStyle",value:function(){return this.hoverPaintStyle}},{key:"destroy",value:function(){for(var e in this.overlays)this.instance.destroyOverlay(this.overlays[e]);this.overlays={},this.overlayPositions={},this.unbind(),this.clone=null}},{key:"isHover",value:function(){return this._hover}},{key:"mergeParameters",value:function(e){e!=null&&U(this.parameters,e)}},{key:"setVisible",value:function(e){this.visible=e,e?this.showOverlays():this.hideOverlays()}},{key:"isVisible",value:function(){return this.visible}},{key:"setAbsoluteOverlayPosition",value:function(e,n){this.overlayPositions[e.id]=n}},{key:"getAbsoluteOverlayPosition",value:function(e){return this.overlayPositions?this.overlayPositions[e.id]:null}},{key:"_clazzManip",value:function(e,n){for(var o in this.overlays)e===pu?this.instance.addOverlayClass(this.overlays[o],n):e===vu&&this.instance.removeOverlayClass(this.overlays[o],n)}},{key:"addClass",value:function(e,n){var o=(this.cssClass||"").split(" ");o.push(e),this.cssClass=o.join(" "),this._clazzManip(pu,e)}},{key:"removeClass",value:function(e,n){var o=(this.cssClass||"").split(" ");this.cssClass=o.filter(function(a){return a!==e}).join(" "),this._clazzManip(vu,e)}},{key:"getClass",value:function(){return this.cssClass}},{key:"shouldFireEvent",value:function(e,n,o){return!0}},{key:"getData",value:function(){return this.data}},{key:"setData",value:function(e){this.data=e||{}}},{key:"mergeData",value:function(e){this.data=U(this.data,e)}},{key:"addOverlay",value:function(e){var n=v0(this,e);if(this.getData&&n.type===Tn.type&&!Ee(e)){var o=this.getData(),a=e.options;if(o){var l=a.labelLocationAttribute||d0,u=o[l];u&&(n.location=u)}}return n}},{key:"getOverlay",value:function(e){return this.overlays[e]}},{key:"getOverlays",value:function(){return this.overlays}},{key:"hideOverlay",value:function(e){var n=this.getOverlay(e);n&&n.setVisible(!1)}},{key:"hideOverlays",value:function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];n=n||[];for(var a in this.overlays)(n.length===0||n.indexOf(a)!==-1)&&this.overlays[a].setVisible(!1)}},{key:"showOverlay",value:function(e){var n=this.getOverlay(e);n&&n.setVisible(!0)}},{key:"showOverlays",value:function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];n=n||[];for(var a in this.overlays)(n.length===0||n.indexOf(a)!==-1)&&this.overlays[a].setVisible(!0)}},{key:"removeAllOverlays",value:function(){for(var e in this.overlays)this.instance.destroyOverlay(this.overlays[e]);this.overlays={},this.overlayPositions=null,this.overlayPlacements={}}},{key:"removeOverlay",value:function(e,n){var o=this.overlays[e];o&&(o.setVisible(!1),n||this.instance.destroyOverlay(o),delete this.overlays[e],this.overlayPositions&&delete this.overlayPositions[e],this.overlayPlacements&&delete this.overlayPlacements[e])}},{key:"removeOverlays",value:function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];for(var a=0,l=n.length;a<l;a++)this.removeOverlay(arguments[a])}},{key:"getLabel",value:function(){var e=this.getLabelOverlay();return e!=null?e.getLabel():null}},{key:"getLabelOverlay",value:function(){return this.getOverlay(Li)}},{key:"setLabel",value:function(e){var n=this.getLabelOverlay();if(n)if(Ee(e)||Cn(e))n.setLabel(e);else{var a=e;a.label&&n.setLabel(a.label),a.location&&(n.location=a.location)}else{var o=Ee(e)||Cn(e)?{label:e}:e;n=p0(this,o),this.overlays[Li]=n}}}]),i}(or),g0=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"],Vn=function(t){oe(i,t);var s=ae(i);function i(r,e){var n;H(this,i),n=s.call(this,r,e),n.instance=r,f(v(n),"connections",[]),f(v(n),"endpoint",void 0),f(v(n),"element",void 0),f(v(n),"elementId",void 0),f(v(n),"dragAllowedWhenFull",!0),f(v(n),"timestamp",void 0),f(v(n),"portId",void 0),f(v(n),"maxConnections",void 0),f(v(n),"proxiedBy",void 0),f(v(n),"connectorClass",void 0),f(v(n),"connectorHoverClass",void 0),f(v(n),"finalEndpoint",void 0),f(v(n),"enabled",!0),f(v(n),"isSource",void 0),f(v(n),"isTarget",void 0),f(v(n),"isTemporarySource",void 0),f(v(n),"connectionCost",1),f(v(n),"connectionsDirected",void 0),f(v(n),"connectionsDetachable",void 0),f(v(n),"reattachConnections",void 0),f(v(n),"currentAnchorClass",void 0),f(v(n),"referenceEndpoint",void 0),f(v(n),"edgeType",void 0),f(v(n),"connector",void 0),f(v(n),"connectorOverlays",void 0),f(v(n),"connectorStyle",void 0),f(v(n),"connectorHoverStyle",void 0),f(v(n),"deleteOnEmpty",void 0),f(v(n),"uuid",void 0),f(v(n),"scope",void 0),f(v(n),"_anchor",void 0),f(v(n),"defaultLabelLocation",[.5,.5]),n.appendToDefaultType({edgeType:e.edgeType,maxConnections:e.maxConnections==null?n.instance.defaults.maxConnections:e.maxConnections,paintStyle:e.paintStyle||n.instance.defaults.endpointStyle,hoverPaintStyle:e.hoverPaintStyle||n.instance.defaults.endpointHoverStyle,connectorStyle:e.connectorStyle,connectorHoverStyle:e.connectorHoverStyle,connectorClass:e.connectorClass,connectorHoverClass:e.connectorHoverClass,connectorOverlays:e.connectorOverlays,connector:e.connector}),n.enabled=e.enabled!==!1,n.visible=!0,n.element=e.element,n.uuid=e.uuid,n.portId=e.portId,n.elementId=e.elementId,n.connectionCost=e.connectionCost==null?1:e.connectionCost,n.connectionsDirected=e.connectionsDirected,n.currentAnchorClass="",n.events={},n.connectorOverlays=e.connectorOverlays,n.connectorStyle=e.connectorStyle,n.connectorHoverStyle=e.connectorHoverStyle,n.connector=e.connector,n.edgeType=e.edgeType,n.connectorClass=e.connectorClass,n.connectorHoverClass=e.connectorHoverClass,n.deleteOnEmpty=e.deleteOnEmpty===!0,n.isSource=e.source||!1,n.isTemporarySource=e.isTemporarySource||!1,n.isTarget=e.target||!1,n.connections=e.connections||[],n.scope=e.scope||r.defaultScope,n.timestamp=null,n.reattachConnections=e.reattachConnections||r.defaults.reattachConnections,n.connectionsDetachable=r.defaults.connectionsDetachable,e.connectionsDetachable===!1&&(n.connectionsDetachable=!1),n.dragAllowedWhenFull=e.dragAllowedWhenFull!==!1,e.onMaxConnections&&n.bind(_h,e.onMaxConnections);var o=e.endpoint||e.existingEndpoint||r.defaults.endpoint;if(n.setEndpoint(o),e.preparedAnchor!=null)n.setPreparedAnchor(e.preparedAnchor);else{var a=e.anchor?e.anchor:e.anchors?e.anchors:r.defaults.anchor||Pt.Top;n.setAnchor(a)}var l=[ss,e.type||""].join(" ");return n.addType(l,e.data),n}return z(i,[{key:"getIdPrefix",value:function(){return"_jsplumb_e"}},{key:"getTypeDescriptor",value:function(){return"endpoint"}},{key:"getXY",value:function(){return{x:this.endpoint.x,y:this.endpoint.y}}},{key:"getDefaultOverlayKey",value:function(){return"endpointOverlays"}},{key:"_updateAnchorClass",value:function(){var e=this._anchor&&this._anchor.cssClass;if(e!=null&&e.length>0){var n=this.instance.endpointAnchorClassPrefix+"-"+this.currentAnchorClass;this.currentAnchorClass=e;var o=this.instance.endpointAnchorClassPrefix+(this.currentAnchorClass?"-"+this.currentAnchorClass:"");n!==o&&(this.removeClass(n),this.addClass(o),this.instance.removeClass(this.element,n),this.instance.addClass(this.element,o))}}},{key:"setPreparedAnchor",value:function(e){return this.instance.router.setAnchor(this,e),this._updateAnchorClass(),this}},{key:"_anchorLocationChanged",value:function(e){this.fire(Iy,{endpoint:this,anchor:e}),this._updateAnchorClass()}},{key:"setAnchor",value:function(e){var n=this.instance.router.prepareAnchor(e);return this.setPreparedAnchor(n),this}},{key:"addConnection",value:function(e){this.connections.push(e),this.instance._refreshEndpoint(this)}},{key:"detachFromConnection",value:function(e,n,o){n=n??this.connections.indexOf(e),n>=0&&(this.connections.splice(n,1),this.instance._refreshEndpoint(this)),!o&&this.deleteOnEmpty&&this.connections.length===0&&this.instance.deleteEndpoint(this)}},{key:"deleteEveryConnection",value:function(e){for(var n=this.connections.length,o=0;o<n;o++)this.instance.deleteConnection(this.connections[0],e)}},{key:"detachFrom",value:function(e){for(var n=[],o=0;o<this.connections.length;o++)(this.connections[o].endpoints[1]===e||this.connections[o].endpoints[0]===e)&&n.push(this.connections[o]);for(var a=0,l=n.length;a<l;a++)this.instance.deleteConnection(n[0]);return this}},{key:"setVisible",value:function(e,n,o){if(_e(ge(i.prototype),"setVisible",this).call(this,e),this.endpoint.setVisible(e),e?this.showOverlays():this.hideOverlays(),!n){for(var a=0;a<this.connections.length;a++)if(this.connections[a].setVisible(e),!o){var l=this===this.connections[a].endpoints[0]?1:0;this.connections[a].endpoints[l].connections.length===1&&this.connections[a].endpoints[l].setVisible(e,!0,!0)}}}},{key:"applyType",value:function(e,n){_e(ge(i.prototype),"applyType",this).call(this,e,n),this.setPaintStyle(e.endpointStyle||e.paintStyle),this.setHoverPaintStyle(e.endpointHoverStyle||e.hoverPaintStyle),this.connectorStyle=e.connectorStyle,this.connectorHoverStyle=e.connectorHoverStyle,this.connector=e.connector,this.connectorOverlays=e.connectorOverlays,this.edgeType=e.edgeType,e.maxConnections!=null&&(this.maxConnections=e.maxConnections),e.scope&&(this.scope=e.scope),U(e,g0),this.instance.applyEndpointType(this,e)}},{key:"destroy",value:function(){_e(ge(i.prototype),"destroy",this).call(this),this.deleted=!0,this.endpoint!=null&&this.instance.destroyEndpoint(this)}},{key:"isFull",value:function(){return this.maxConnections===0?!0:!(this.isFloating()||this.maxConnections<0||this.connections.length<this.maxConnections)}},{key:"isFloating",value:function(){return this.instance.router.isFloating(this)}},{key:"isConnectedTo",value:function(e){var n=!1;if(e){for(var o=0;o<this.connections.length;o++)if(this.connections[o].endpoints[1]===e||this.connections[o].endpoints[0]===e){n=!0;break}}return n}},{key:"setDragAllowedWhenFull",value:function(e){this.dragAllowedWhenFull=e}},{key:"getUuid",value:function(){return this.uuid}},{key:"connectorSelector",value:function(){return this.connections[0]}},{key:"prepareEndpoint",value:function(e,n){var o={cssClass:this.cssClass,endpoint:this},a;if(oh(e,vi)){var l=e;a=Qt.clone(l),a.classes=o.cssClass.split(" ")}else if(Ee(e))a=Qt.get(this,e,o);else{var u=e;U(o,u.options||{}),a=Qt.get(this,u.type,o)}return a.typeId=n,a}},{key:"setEndpoint",value:function(e){var n=this.prepareEndpoint(e);this.setPreparedEndpoint(n)}},{key:"setPreparedEndpoint",value:function(e){this.endpoint!=null&&this.instance.destroyEndpoint(this),this.endpoint=e}},{key:"addClass",value:function(e,n){_e(ge(i.prototype),"addClass",this).call(this,e,n),this.endpoint!=null&&this.endpoint.addClass(e)}},{key:"removeClass",value:function(e,n){_e(ge(i.prototype),"removeClass",this).call(this,e,n),this.endpoint!=null&&this.endpoint.removeClass(e)}}]),i}(Xh),Cr="anchors",no="connector";function yu(t,s,i,r,e,n,o){var a;if(s)t.endpoints[i]=s,s.addConnection(t);else{var l=o||t.endpointSpec||t.endpointsSpec[i]||t.instance.defaults.endpoints[i]||t.instance.defaults.endpoint,u=t.endpointStyles[i]||t.endpointStyle||t.instance.defaults.endpointStyles[i]||t.instance.defaults.endpointStyle;u.fill==null&&t.paintStyle!=null&&(u.fill=t.paintStyle.stroke),u.outlineStroke==null&&t.paintStyle!=null&&(u.outlineStroke=t.paintStyle.outlineStroke),u.outlineWidth==null&&t.paintStyle!=null&&(u.outlineWidth=t.paintStyle.outlineWidth);var c=t.endpointHoverStyles[i]||t.endpointHoverStyle||t.endpointHoverStyle||t.instance.defaults.endpointHoverStyles[i]||t.instance.defaults.endpointHoverStyle;t.hoverPaintStyle!=null&&(c==null&&(c={}),c.fill==null&&(c.fill=t.hoverPaintStyle.stroke));var h=t.uuids?t.uuids[i]:null;r=r??(t.instance.defaults.anchors!=null?t.instance.defaults.anchors[i]:t.instance.defaults.anchor),a=t.instance._internal_newEndpoint({paintStyle:u,hoverPaintStyle:c,endpoint:l,connections:[t],uuid:h,element:e,scope:t.scope,anchor:r,reattachConnections:t.reattach||t.instance.defaults.reattachConnections,connectionsDetachable:t.detachable||t.instance.defaults.connectionsDetachable}),t.instance._refreshEndpoint(a),s==null&&(a.deleteOnEmpty=!0),t.endpoints[i]=a}return a}var er=function(t){oe(i,t);var s=ae(i);function i(r,e){var n;H(this,i),n=s.call(this,r,e),n.instance=r,f(v(n),"connector",void 0),f(v(n),"defaultLabelLocation",.5),f(v(n),"scope",void 0),f(v(n),"typeId","_jsplumb_connection"),f(v(n),"previousConnection",void 0),f(v(n),"sourceId",void 0),f(v(n),"targetId",void 0),f(v(n),"source",void 0),f(v(n),"target",void 0),f(v(n),"detachable",!0),f(v(n),"reattach",!1),f(v(n),"uuids",void 0),f(v(n),"cost",1),f(v(n),"directed",void 0),f(v(n),"endpoints",[null,null]),f(v(n),"endpointStyles",void 0),f(v(n),"endpointSpec",void 0),f(v(n),"endpointsSpec",void 0),f(v(n),"endpointStyle",{}),f(v(n),"endpointHoverStyle",{}),f(v(n),"endpointHoverStyles",void 0),f(v(n),"suspendedEndpoint",void 0),f(v(n),"suspendedIndex",void 0),f(v(n),"suspendedElement",void 0),f(v(n),"suspendedElementId",void 0),f(v(n),"suspendedElementType",void 0),f(v(n),"_forceReattach",void 0),f(v(n),"_forceDetach",void 0),f(v(n),"proxies",[]),f(v(n),"pending",!1),n.id=e.id,n.previousConnection=e.previousConnection,n.source=e.source,n.target=e.target,e.sourceEndpoint?(n.source=e.sourceEndpoint.element,n.sourceId=e.sourceEndpoint.elementId):n.sourceId=r.getId(n.source),e.targetEndpoint?(n.target=e.targetEndpoint.element,n.targetId=e.targetEndpoint.elementId):n.targetId=r.getId(n.target),n.scope=e.scope;var o=e.anchors?e.anchors[0]:e.anchor,a=e.anchors?e.anchors[1]:e.anchor;r.manage(n.source),r.manage(n.target),n.visible=!0,n.params={cssClass:e.cssClass,hoverClass:e.hoverClass,"pointer-events":e["pointer-events"],overlays:e.overlays},n.lastPaintedAt=null,e.type&&(e.endpoints=e.endpoints||n.instance._deriveEndpointAndAnchorSpec(e.type).endpoints),n.endpointSpec=e.endpoint,n.endpointsSpec=e.endpoints||[null,null],n.endpointStyle=e.endpointStyle,n.endpointHoverStyle=e.endpointHoverStyle,n.endpointStyles=e.endpointStyles||[null,null],n.endpointHoverStyles=e.endpointHoverStyles||[null,null],n.paintStyle=e.paintStyle,n.hoverPaintStyle=e.hoverPaintStyle,n.uuids=e.uuids,n.makeEndpoint(!0,n.source,n.sourceId,o,e.sourceEndpoint),n.makeEndpoint(!1,n.target,n.targetId,a,e.targetEndpoint),n.scope||(n.scope=n.endpoints[0].scope),e.deleteEndpointsOnEmpty!=null&&(n.endpoints[0].deleteOnEmpty=e.deleteEndpointsOnEmpty,n.endpoints[1].deleteOnEmpty=e.deleteEndpointsOnEmpty);var l=n.instance.defaults.connectionsDetachable;e.detachable===!1&&(l=!1),n.endpoints[0].connectionsDetachable===!1&&(l=!1),n.endpoints[1].connectionsDetachable===!1&&(l=!1),n.endpointsSpec=e.endpoints||[null,null],n.endpointSpec=e.endpoint||null;var u=e.reattach||n.endpoints[0].reattachConnections||n.endpoints[1].reattachConnections||n.instance.defaults.reattachConnections,c=U({},n.endpoints[0].connectorStyle||n.endpoints[1].connectorStyle||e.paintStyle||n.instance.defaults.paintStyle);if(n.appendToDefaultType({detachable:l,reattach:u,paintStyle:c,hoverPaintStyle:U({},n.endpoints[0].connectorHoverStyle||n.endpoints[1].connectorHoverStyle||e.hoverPaintStyle||n.instance.defaults.hoverPaintStyle)}),e.outlineWidth&&(c.outlineWidth=e.outlineWidth),e.outlineColor&&(c.outlineStroke=e.outlineColor),e.lineWidth&&(c.strokeWidth=e.lineWidth),e.color&&(c.stroke=e.color),!n.instance._suspendDrawing){var h=n.instance._suspendedAt||Se();n.instance._paintEndpoint(n.endpoints[0],{timestamp:h}),n.instance._paintEndpoint(n.endpoints[1],{timestamp:h})}n.cost=e.cost||n.endpoints[0].connectionCost,n.directed=e.directed,e.directed==null&&(n.directed=n.endpoints[0].connectionsDirected);var d=U({},n.endpoints[1].parameters);U(d,n.endpoints[0].parameters),U(d,n.parameters),n.parameters=d,n.paintStyleInUse=n.getPaintStyle()||{},n._setConnector(n.endpoints[0].connector||n.endpoints[1].connector||e.connector||n.instance.defaults.connector,!0);var p=e.data==null||!ii(e.data)?{}:e.data;n.setData(p);var g=[ss,n.endpoints[0].edgeType,n.endpoints[1].edgeType,e.type].join(" ");return/[^\s]/.test(g)&&n.addType(g,e.data),n}return z(i,[{key:"getIdPrefix",value:function(){return"_jsPlumb_c"}},{key:"getDefaultOverlayKey",value:function(){return Jy}},{key:"getXY",value:function(){return{x:this.connector.x,y:this.connector.y}}},{key:"makeEndpoint",value:function(e,n,o,a,l){return o=o||this.instance.getId(n),yu(this,l,e?0:1,a,n)}},{key:"getTypeDescriptor",value:function(){return i.type}},{key:"isDetachable",value:function(e){return this.detachable===!1?!1:e!=null?e.connectionsDetachable===!0:this.detachable===!0}},{key:"setDetachable",value:function(e){this.detachable=e===!0}},{key:"isReattach",value:function(){return this.reattach===!0||this.endpoints[0].reattachConnections===!0||this.endpoints[1].reattachConnections===!0}},{key:"setReattach",value:function(e){this.reattach=e===!0}},{key:"applyType",value:function(e,n){var o=null;e.connector!=null&&(o=this.getCachedTypeItem(no,n.connector),o==null&&(o=this.prepareConnector(e.connector,n.connector),this.cacheTypeItem(no,o,n.connector)),this.setPreparedConnector(o)),_e(ge(i.prototype),"applyType",this).call(this,e,n),e.detachable!=null&&this.setDetachable(e.detachable),e.reattach!=null&&this.setReattach(e.reattach),e.scope&&(this.scope=e.scope);var a=null;e.anchor?(a=this.getCachedTypeItem(Cr,n.anchor),a==null&&(a=[Ii(e.anchor),Ii(e.anchor)],this.cacheTypeItem(Cr,a,n.anchor))):e.anchors&&(a=this.getCachedTypeItem(Cr,n.anchors),a==null&&(a=[Ii(e.anchors[0]),Ii(e.anchors[1])],this.cacheTypeItem(Cr,a,n.anchors))),a!=null&&(this.instance.router.setConnectionAnchors(this,a),this.instance.router.isDynamicAnchor(this.endpoints[1])&&this.instance.repaint(this.endpoints[1].element)),this.instance.applyConnectorType(this.connector,e)}},{key:"addClass",value:function(e,n){_e(ge(i.prototype),"addClass",this).call(this,e),n&&(this.endpoints[0].addClass(e),this.endpoints[1].addClass(e),this.suspendedEndpoint&&this.suspendedEndpoint.addClass(e)),this.connector&&this.instance.addConnectorClass(this.connector,e)}},{key:"removeClass",value:function(e,n){_e(ge(i.prototype),"removeClass",this).call(this,e),n&&(this.endpoints[0].removeClass(e),this.endpoints[1].removeClass(e),this.suspendedEndpoint&&this.suspendedEndpoint.removeClass(e)),this.connector&&this.instance.removeConnectorClass(this.connector,e)}},{key:"setVisible",value:function(e){_e(ge(i.prototype),"setVisible",this).call(this,e),this.connector&&this.instance.setConnectorVisible(this.connector,e),this.instance._paintConnection(this)}},{key:"destroy",value:function(){_e(ge(i.prototype),"destroy",this).call(this),this.endpoints=null,this.endpointStyles=null,this.source=null,this.target=null,this.instance.destroyConnector(this),this.connector=null,this.deleted=!0}},{key:"getUuids",value:function(){return[this.endpoints[0].getUuid(),this.endpoints[1].getUuid()]}},{key:"prepareConnector",value:function(e,n){var o={cssClass:this.params.cssClass,hoverClass:this.params.hoverClass,"pointer-events":this.params["pointer-events"]},a;if(Ee(e))a=this.instance._makeConnector(this,e,o);else{var l=e;a=this.instance._makeConnector(this,l.type,es(l.options||{},o))}return n!=null&&(a.typeId=n),a}},{key:"setPreparedConnector",value:function(e,n,o,a){if(this.connector!==e){var l,u="";if(this.connector!=null&&(l=this.connector,u=this.instance.getConnectorClass(this.connector),this.instance.destroyConnector(this)),this.connector=e,a&&this.cacheTypeItem(no,e,a),this.addClass(u),l!=null){var c=this.getOverlays();for(var h in c)this.instance.reattachOverlay(c[h],this)}n||this.instance._paintConnection(this)}}},{key:"_setConnector",value:function(e,n,o,a){var l=this.prepareConnector(e,a);this.setPreparedConnector(l,n,o,a)}},{key:"replaceEndpoint",value:function(e,n){var o=this.endpoints[e],a=o.elementId,l=this.instance.getEndpoints(o.element),u=l.indexOf(o),c=yu(this,null,e,null,o.element,a,n);this.endpoints[e]=c,l.splice(u,1,c),o.detachFromConnection(this),this.instance.deleteEndpoint(o),this.instance.fire(Ry,{previous:o,current:c})}}]),i}(Xh);f(er,"type","connection");function Ni(t){if(t.path==null){var s=U({"jtk-overlay-id":t.id},t.attributes);t.path=Gt(Oo,s);var i=t.instance.overlayClass+" "+(t.cssClass?t.cssClass:"");t.instance.addClass(t.path,i),t.path.jtk={overlay:t}}var r=t.path.parentNode;if(r==null){if(t.component instanceof er){var e=t.component.connector;r=e!=null?e.canvas:null}else if(t.component instanceof Vn){var n=t.component.endpoint;r=n!=null?n.canvas:n}r!=null&&jr(r,t.path,1)}return t.path}function y0(t,s,i,r){Ni(t);var e=[0,0];r.xmin<0&&(e[0]=-r.xmin),r.ymin<0&&(e[1]=-r.ymin);var n={d:s,stroke:i.stroke?i.stroke:null,fill:i.fill?i.fill:null,transform:"translate("+e[0]+","+e[1]+")","pointer-events":"visibleStroke"};Ft(t.path,n)}function m0(t,s){var i=t;i.path!=null&&i.path.parentNode!=null&&i.path.parentNode.removeChild(i.path),i.bgPath!=null&&i.bgPath.parentNode!=null&&i.bgPath.parentNode.removeChild(i.bgPath),delete i.path,delete i.bgPath}(function(t){oe(i,t);var s=ae(i);function i(){var r;H(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return r=s.call.apply(s,[this].concat(n)),f(v(r),"path",void 0),r}return i})(Rs);var $h=function(){function t(){H(this,t)}return z(t,null,[{key:"paint",value:function(i,r,e,n){if(e!=null){var o=[i.x,i.y],a=[i.w,i.h];if(n!=null&&(n.xmin<0&&(o[0]+=n.xmin),n.ymin<0&&(o[1]+=n.ymin),a[0]=n.xmax+(n.xmin<0?-n.xmin:0),a[1]=n.ymax+(n.ymin<0?-n.ymin:0)),isFinite(a[0])&&isFinite(a[1])){var l={width:""+(a[0]||0),height:""+(a[1]||0)};r.containerType===Sn.HTML?Ft(i.canvas,U(l,{style:Ph([o[0],o[1]])})):Ft(i.canvas,U(l,{x:o[0],y:o[1]}))}}}}]),t}();function _0(t,s,i,r){E0(t,s),$h.paint(s,t,i,r);var e="",n=[0,0];if(r.xmin<0&&(n[0]=-r.xmin),r.ymin<0&&(n[1]=-r.ymin),s.segments.length>0){e=t.getPathData(s);var o={d:e,transform:"translate("+n[0]+","+n[1]+")","pointer-events":"visibleStroke"},a=null;if(i.outlineStroke){var l=i.outlineWidth||1,u=i.strokeWidth+2*l;a=U({},i),a.stroke=i.outlineStroke,a.strokeWidth=u,s.bgPath==null?(s.bgPath=Gt(Oo,o),t.addClass(s.bgPath,t.connectorOutlineClass),jr(s.canvas,s.bgPath,0)):Ft(s.bgPath,o),wo(s.canvas,s.bgPath,a)}var c=s;c.path==null?(c.path=Gt(Oo,o),jr(c.canvas,c.path,i.outlineStroke?1:0)):(c.path.parentNode!==c.canvas&&jr(c.canvas,c.path,i.outlineStroke?1:0),Ft(s.path,o)),wo(s.canvas,s.path,i)}}function E0(t,s){if(s.canvas!=null)return s.canvas;var i=Gt(Sh,{style:"",width:"0",height:"0","pointer-events":ri,position:Ji});return s.canvas=i,t._appendElement(s.canvas,t.getContainer()),s.cssClass!=null&&t.addClass(i,s.cssClass),t.addClass(i,t.connectorClass),i.jtk=i.jtk||{},i.jtk.connector=s,i}var b0=function(){function t(){H(this,t)}return z(t,null,[{key:"getEndpointElement",value:function(i){if(i.canvas!=null)return i.canvas;var r=Gt(Sh,{style:"",width:"0",height:"0","pointer-events":"all",position:Ji});i.canvas=r;var e=i.classes.join(" ");i.instance.addClass(r,e);for(var n=i.endpoint.scope.split(/\s/),o=0;o<n.length;o++)i.instance.setAttribute(r,fh+n[o],Ah);return i.instance._appendElementToContainer(r),i.cssClass!=null&&i.instance.addClass(r,i.cssClass),i.instance.addClass(r,i.instance.endpointClass),r.jtk=r.jtk||{},r.jtk.endpoint=i.endpoint,r.style.display=i.endpoint.visible!==!1?Ao:ri,r}},{key:"paint",value:function(i,r,e){if(i.endpoint.deleted!==!0){this.getEndpointElement(i),$h.paint(i,i.instance,e);var n=U({},e);n.outlineStroke&&(n.stroke=n.outlineStroke),i.node==null?(i.node=r.makeNode(i,n),i.canvas.appendChild(i.node)):r.updateNode!=null&&r.updateNode(i,i.node),wo(i.canvas,i.node,n)}}}]),t}(),Fs=function(){function t(s,i){H(this,t),this.connection=s,f(this,"type",void 0),f(this,"edited",!1),f(this,"stub",void 0),f(this,"sourceStub",void 0),f(this,"targetStub",void 0),f(this,"maxStub",void 0),f(this,"typeId",void 0),f(this,"gap",void 0),f(this,"sourceGap",void 0),f(this,"targetGap",void 0),f(this,"segments",[]),f(this,"totalLength",0),f(this,"segmentProportions",[]),f(this,"segmentProportionalLengths",[]),f(this,"paintInfo",null),f(this,"strokeWidth",void 0),f(this,"x",void 0),f(this,"y",void 0),f(this,"w",void 0),f(this,"h",void 0),f(this,"segment",void 0),f(this,"bounds",rs()),f(this,"cssClass",void 0),f(this,"hoverClass",void 0),f(this,"geometry",void 0),this.stub=i.stub||this.getDefaultStubs(),this.sourceStub=Array.isArray(this.stub)?this.stub[0]:this.stub,this.targetStub=Array.isArray(this.stub)?this.stub[1]:this.stub,this.gap=i.gap||0,this.sourceGap=Array.isArray(this.gap)?this.gap[0]:this.gap,this.targetGap=Array.isArray(this.gap)?this.gap[1]:this.gap,this.maxStub=Math.max(this.sourceStub,this.targetStub),this.cssClass=i.cssClass||"",this.hoverClass=i.hoverClass||""}return z(t,[{key:"getTypeDescriptor",value:function(){return"connector"}},{key:"getIdPrefix",value:function(){return"_jsplumb_connector"}},{key:"setGeometry",value:function(i,r){this.geometry=i,this.edited=i!=null&&!r}},{key:"exportGeometry",value:function(){return this.geometry}},{key:"importGeometry",value:function(i){return this.geometry=i,!0}},{key:"resetGeometry",value:function(){this.geometry=null,this.edited=!1}},{key:"transformAnchorPlacement",value:function(i,r,e){return{x:i.x,y:i.y,ox:i.ox,oy:i.oy,curX:i.curX+r,curY:i.curY+e}}},{key:"resetBounds",value:function(){this.bounds=rs()}},{key:"findSegmentForPoint",value:function(i,r){for(var e={d:1/0,s:null,x:null,y:null,l:null,x1:null,y1:null,x2:null,y2:null,index:null,connectorLocation:null},n=0;n<this.segments.length;n++){var o=this.segments[n].findClosestPointOnPath(i,r);o.d<e.d&&(e.d=o.d,e.l=o.l,e.x=o.x,e.y=o.y,e.s=this.segments[n],e.x1=o.x1,e.x2=o.x2,e.y1=o.y1,e.y2=o.y2,e.index=n,e.connectorLocation=this.segmentProportions[n][0]+o.l*(this.segmentProportions[n][1]-this.segmentProportions[n][0]))}return e}},{key:"lineIntersection",value:function(i,r,e,n){for(var o=[],a=0;a<this.segments.length;a++)o.push.apply(o,this.segments[a].lineIntersection(i,r,e,n));return o}},{key:"boxIntersection",value:function(i,r,e,n){for(var o=[],a=0;a<this.segments.length;a++)o.push.apply(o,this.segments[a].boxIntersection(i,r,e,n));return o}},{key:"boundingBoxIntersection",value:function(i){for(var r=[],e=0;e<this.segments.length;e++)r.push.apply(r,this.segments[e].boundingBoxIntersection(i));return r}},{key:"_updateSegmentProportions",value:function(){for(var i=0,r=0;r<this.segments.length;r++){var e=this.segments[r].getLength();this.segmentProportionalLengths[r]=e/this.totalLength,this.segmentProportions[r]=[i,i+=e/this.totalLength]}}},{key:"_findSegmentForLocation",value:function(i,r){var e,n,o;if(r&&(i=i>0?i/this.totalLength:(this.totalLength+i)/this.totalLength),i===1)e=this.segments.length-1,o=1;else if(i===0)o=0,e=0;else if(i>=.5){for(e=0,o=0,n=this.segmentProportions.length-1;n>-1;n--)if(this.segmentProportions[n][1]>=i&&this.segmentProportions[n][0]<=i){e=n,o=(i-this.segmentProportions[n][0])/this.segmentProportionalLengths[n];break}}else for(e=this.segmentProportions.length-1,o=1,n=0;n<this.segmentProportions.length;n++)if(this.segmentProportions[n][1]>=i){e=n,o=(i-this.segmentProportions[n][0])/this.segmentProportionalLengths[n];break}return{segment:this.segments[e],proportion:o,index:e}}},{key:"_addSegment",value:function(i,r){if(!(r.x1===r.x2&&r.y1===r.y2)){var e=new i(r);this.segments.push(e),this.totalLength+=e.getLength(),this.updateBounds(e)}}},{key:"_clearSegments",value:function(){this.totalLength=0,this.segments.length=0,this.segmentProportions.length=0,this.segmentProportionalLengths.length=0}},{key:"getLength",value:function(){return this.totalLength}},{key:"_prepareCompute",value:function(i){this.strokeWidth=i.strokeWidth;var r=i.sourcePos.curX,e=i.targetPos.curX,n=i.sourcePos.curY,o=i.targetPos.curY,a=Ta({x:r,y:n},{x:e,y:o}),l=e<r,u=o<n,c=[i.sourcePos.ox,i.sourcePos.oy],h=[i.targetPos.ox,i.targetPos.oy],d=l?e:r,p=u?o:n,g=Math.abs(e-r),y=Math.abs(o-n),m=c[0]===0&&c[1]===0,E=h[0]===0&&h[1]===0;if(m||E){var b=g>y?0:1,C=[1,0][b],S=b===0?r:n,N=b===0?e:o;m&&(c[b]=S>N?-1:1,c[C]=0),E&&(h[b]=S>N?1:-1,h[C]=0)}var G=l?g+this.sourceGap*c[0]:this.sourceGap*c[0],I=u?y+this.sourceGap*c[1]:this.sourceGap*c[1],T=l?this.targetGap*h[0]:g+this.targetGap*h[0],K=u?this.targetGap*h[1]:y+this.targetGap*h[1],$=c[0]*h[0]+c[1]*h[1],Z={sx:G,sy:I,tx:T,ty:K,xSpan:Math.abs(T-G),ySpan:Math.abs(K-I),mx:(G+T)/2,my:(I+K)/2,so:c,to:h,x:d,y:p,w:g,h:y,segment:a,startStubX:G+c[0]*this.sourceStub,startStubY:I+c[1]*this.sourceStub,endStubX:T+h[0]*this.targetStub,endStubY:K+h[1]*this.targetStub,isXGreaterThanStubTimes2:Math.abs(G-T)>this.sourceStub+this.targetStub,isYGreaterThanStubTimes2:Math.abs(I-K)>this.sourceStub+this.targetStub,opposite:$===-1,perpendicular:$===0,orthogonal:$===1,sourceAxis:c[0]===0?"y":"x",points:[d,p,g,y,G,I,T,K],stubs:[this.sourceStub,this.targetStub]};return Z.anchorOrientation=Z.opposite?"opposite":Z.orthogonal?"orthogonal":"perpendicular",Z}},{key:"updateBounds",value:function(i){var r=i.extents;this.bounds.xmin=Math.min(this.bounds.xmin,r.xmin),this.bounds.xmax=Math.max(this.bounds.xmax,r.xmax),this.bounds.ymin=Math.min(this.bounds.ymin,r.ymin),this.bounds.ymax=Math.max(this.bounds.ymax,r.ymax)}},{key:"dumpSegmentsToConsole",value:function(){xe("SEGMENTS:");for(var i=0;i<this.segments.length;i++)xe(this.segments[i].type,""+this.segments[i].getLength(),""+this.segmentProportions[i])}},{key:"pointOnPath",value:function(i,r){var e=this._findSegmentForLocation(i,r);return e.segment&&e.segment.pointOnPath(e.proportion,!1)||{x:0,y:0}}},{key:"gradientAtPoint",value:function(i,r){var e=this._findSegmentForLocation(i,r);return e.segment&&e.segment.gradientAtPoint(e.proportion,!1)||0}},{key:"pointAlongPathFrom",value:function(i,r,e){var n=this._findSegmentForLocation(i,e);return n.segment&&n.segment.pointAlongPathFrom(n.proportion,r,!1)||{x:0,y:0}}},{key:"compute",value:function(i){this.paintInfo=this._prepareCompute(i),this._clearSegments(),this._compute(this.paintInfo,i),this.x=this.paintInfo.points[0],this.y=this.paintInfo.points[1],this.w=this.paintInfo.points[2],this.h=this.paintInfo.points[3],this.segment=this.paintInfo.segment,this._updateSegmentProportions()}},{key:"setAnchorOrientation",value:function(i,r){}}]),t}(),C0=20,x0=20,li=function(t){oe(i,t);var s=ae(i);function i(r,e,n){var o;return H(this,i),o=s.call(this,r,e,n),o.instance=r,o.component=e,f(v(o),"width",void 0),f(v(o),"length",void 0),f(v(o),"foldback",void 0),f(v(o),"direction",void 0),f(v(o),"location",.5),f(v(o),"paintStyle",void 0),f(v(o),"type",i.type),f(v(o),"cachedDimensions",void 0),n=n||{},o.width=n.width||C0,o.length=n.length||x0,o.direction=(n.direction||1)<0?-1:1,o.foldback=n.foldback||.623,o.paintStyle=n.paintStyle||{strokeWidth:1},o.location=n.location==null?o.location:Array.isArray(n.location)?n.location[0]:n.location,o}return z(i,[{key:"draw",value:function(e,n,o){if(e instanceof Fs){var a=e,l,u,c,h,d;if(this.location>1||this.location<0){var p=this.location<0?1:0;l=a.pointAlongPathFrom(p,this.location,!1),u=a.pointAlongPathFrom(p,this.location-this.direction*this.length/2,!1),c=vn(l,u,this.length)}else if(this.location===1){if(l=a.pointOnPath(this.location),u=a.pointAlongPathFrom(this.location,-this.length),c=vn(l,u,this.length),this.direction===-1){var g=c;c=l,l=g}}else if(this.location===0){if(c=a.pointOnPath(this.location),u=a.pointAlongPathFrom(this.location,this.length),l=vn(c,u,this.length),this.direction===-1){var y=c;c=l,l=y}}else l=a.pointAlongPathFrom(this.location,this.direction*this.length/2),u=a.pointOnPath(this.location),c=vn(l,u,this.length);h=i_(l,c,this.width),d=vn(l,c,this.foldback*this.length);var m={hxy:l,tail:h,cxy:d},E=this.paintStyle.stroke||n.stroke,b=this.paintStyle.fill||n.stroke,C=this.paintStyle.strokeWidth||n.strokeWidth;return{component:e,d:m,"stroke-width":C,stroke:E,fill:b,xmin:Math.min(l.x,h[0].x,h[1].x),xmax:Math.max(l.x,h[0].x,h[1].x),ymin:Math.min(l.y,h[0].y,h[1].y),ymax:Math.max(l.y,h[0].y,h[1].y)}}}},{key:"updateFrom",value:function(e){}}]),i}(Rs);f(li,"type","Arrow");function No(t){return t.type===li.type}kn.register(li.type,li);var cs=function(t){oe(i,t);var s=ae(i);function i(r,e,n){var o;return H(this,i),o=s.call(this,r,e,n),o.instance=r,f(v(o),"type",i.type),o.length=o.length/2,o.foldback=2,o}return i}(li);f(cs,"type","Diamond");function Ro(t){return t.type===cs.type}kn.register(cs.type,cs);var La=function(t){oe(i,t);var s=ae(i);function i(r,e,n){var o;return H(this,i),o=s.call(this,r,e,n),o.instance=r,f(v(o),"type",i.type),o.foldback=1,o}return i}(li);f(La,"type","PlainArrow");function Fo(t){return t.type===La.type}kn.register("PlainArrow",La);var hs=function(t){oe(i,t);var s=ae(i);function i(r,e,n){var o;return H(this,i),o=s.call(this,r,e,n),o.instance=r,o.component=e,f(v(o),"create",void 0),f(v(o),"type",i.type),o.create=n.create,o}return z(i,[{key:"updateFrom",value:function(e){}}]),i}(Rs);f(hs,"type","Custom");function Yt(t){return t.type===hs.type}kn.register(hs.type,hs);var S0="allowNestedGroups",Fn="paintStyle",P0="scope",ui=function(t){oe(i,t);var s=ae(i);function i(r,e){var n;return H(this,i),n=s.call(this,r,e),f(v(n),"radius",void 0),f(v(n),"defaultOffset",void 0),f(v(n),"defaultInnerRadius",void 0),f(v(n),"type",i.type),e=e||{},n.radius=e.radius||5,n.defaultOffset=.5*n.radius,n.defaultInnerRadius=n.radius/3,n}return i}(vi);f(ui,"type","Dot");var k0={type:ui.type,cls:ui,compute:function(s,i,r,e){var n=i.curX-s.radius,o=i.curY-s.radius,a=s.radius*2,l=s.radius*2;if(e&&e.stroke){var u=e.strokeWidth||1;n-=u,o-=u,a+=u*2,l+=u*2}return s.x=n,s.y=o,s.w=a,s.h=l,[n,o,a,l,s.radius]},getParams:function(s){return{radius:s.radius}}},io=function t(s,i){H(this,t),this.instance=s,this.el=i,f(this,"group",void 0)},T0=function(t){oe(i,t);var s=ae(i);function i(r,e,n){var o;H(this,i),o=s.call(this,r,e),o.instance=r,f(v(o),"children",[]),f(v(o),"collapsed",!1),f(v(o),"droppable",void 0),f(v(o),"enabled",void 0),f(v(o),"orphan",void 0),f(v(o),"constrain",void 0),f(v(o),"proxied",void 0),f(v(o),"ghost",void 0),f(v(o),"revert",void 0),f(v(o),"prune",void 0),f(v(o),"dropOverride",void 0),f(v(o),"anchor",void 0),f(v(o),"endpoint",void 0),f(v(o),"connections",{source:[],target:[],internal:[]}),f(v(o),"manager",void 0),f(v(o),"id",void 0),f(v(o),"elId",void 0);var a=o.el;return a._isJsPlumbGroup=!0,a._jsPlumbGroup=v(o),o.elId=r.getId(e),o.orphan=n.orphan===!0,o.revert=o.orphan===!0?!1:n.revert!==!1,o.droppable=n.droppable!==!1,o.ghost=n.ghost===!0,o.enabled=n.enabled!==!1,o.prune=o.orphan!==!0&&n.prune===!0,o.constrain=o.ghost||n.constrain===!0,o.proxied=n.proxied!==!1,o.id=n.id||Se(),o.dropOverride=n.dropOverride===!0,o.anchor=n.anchor,o.endpoint=n.endpoint,o.anchor=n.anchor,r.setAttribute(e,hh,""),o}return z(i,[{key:"contentArea",get:function(){return this.instance.getGroupContentArea(this)}},{key:"overrideDrop",value:function(e,n){return this.dropOverride&&(this.revert||this.prune||this.orphan)}},{key:"getAnchor",value:function(e,n){return this.anchor||"Continuous"}},{key:"getEndpoint",value:function(e,n){return this.endpoint||{type:ui.type,options:{radius:10}}}},{key:"add",value:function(e,n){var o=this.instance.getGroupContentArea(this),a=e;if(a._jsPlumbParentGroup!=null){if(a._jsPlumbParentGroup===this)return;a._jsPlumbParentGroup.remove(e,!0,n,!1)}a._jsPlumbParentGroup=this,this.children.push(new io(this.instance,e)),this.instance._appendElement(a,o),this.manager._updateConnectionsForGroup(this)}},{key:"resolveNode",value:function(e){return e==null?null:ga(this.children,function(n){return n.el===e})}},{key:"remove",value:function(e,n,o,a,l){var u=this.resolveNode(e);u!=null&&this._doRemove(u,n,o,a,l)}},{key:"_doRemove",value:function(e,n,o,a,l){var u=e.el;if(delete u._jsPlumbParentGroup,Oe(this.children,function(h){return h===e}),n)try{this.instance.getGroupContentArea(this).removeChild(u)}catch(h){xe("Could not remove element from Group "+h)}if(!o){var c={group:this,el:u};l&&(c.targetGroup=l),this.instance.fire(Hy,c)}a||this.manager._updateConnectionsForGroup(this)}},{key:"removeAll",value:function(e,n){for(var o=0,a=this.children.length;o<a;o++){var l=this.children[0];this._doRemove(l,e,n,!0),this.instance.unmanage(l.el,!0)}this.children.length=0,this.manager._updateConnectionsForGroup(this)}},{key:"orphanAll",value:function(){for(var e={},n=0;n<this.children.length;n++){var o=this.manager.orphan(this.children[n].el,!1);e[o.id]=o.pos}return this.children.length=0,e}},{key:"addGroup",value:function(e){if(this.instance.allowNestedGroups&&e!==this){if(this.instance.groupManager.isAncestor(this,e))return!1;e.group!=null&&e.group.removeGroup(e);var n=this.instance.getId(e.el),o=this.instance.getManagedElements()[n];o.group=this.elId;var a=this.instance.getOffsetRelativeToRoot(e.el),l=this.collapsed?this.instance.getOffsetRelativeToRoot(this.el):this.instance.getOffsetRelativeToRoot(this.instance.getGroupContentArea(this));e.el._jsPlumbParentGroup=this,this.children.push(e),this.instance._appendElementToGroup(this,e.el),e.group=this;var u={x:a.x-l.x,y:a.y-l.y};return this.instance.setPosition(e.el,u),this.instance.fire(Vy,{parent:this,child:e}),!0}else return!1}},{key:"removeGroup",value:function(e){if(e.group===this){var n=e.el,o=this.instance.getGroupContentArea(this);o===n.parentNode&&o.removeChild(e.el);var a=this.instance.getId(e.el),l=this.instance.getManagedElements()[a];l&&delete l.group,this.children=this.children.filter(function(u){return u.id!==e.id}),delete e.group,delete n._jsPlumbParentGroup,this.instance.fire(Yy,{parent:this,child:e})}}},{key:"getGroups",value:function(){return this.children.filter(function(e){return e.constructor===i})}},{key:"getNodes",value:function(){return this.children.filter(function(e){return e.constructor===io})}},{key:"collapseParent",get:function(){var e=null;if(this.group==null)return null;for(var n=this.group;n!=null;)n.collapsed&&(e=n),n=n.group;return e}}]),i}(io),A0=function(){function t(s){var i=this;H(this,t),this.instance=s,f(this,"groupMap",{}),f(this,"_connectionSourceMap",{}),f(this,"_connectionTargetMap",{}),s.bind(vh,function(r){var e=i.getGroupFor(r.source),n=i.getGroupFor(r.target);e!=null&&n!=null&&e===n?(i._connectionSourceMap[r.connection.id]=e,i._connectionTargetMap[r.connection.id]=e,bi(e.connections.internal,r.connection)):(e!=null&&(r.target._jsPlumbGroup===e?bi(e.connections.internal,r.connection):bi(e.connections.source,r.connection),i._connectionSourceMap[r.connection.id]=e),n!=null&&(r.source._jsPlumbGroup===n?bi(n.connections.internal,r.connection):bi(n.connections.target,r.connection),i._connectionTargetMap[r.connection.id]=n))}),s.bind(ba,function(r){i._cleanupDetachedConnection(r.connection)}),s.bind(gh,function(r){var e=r.originalEndpoint.element,n=i.getGroupFor(e),o=r.connection.endpoints[r.index],a=o.element,l=i.getGroupFor(a),u=r.index===0?i._connectionSourceMap:i._connectionTargetMap,c=r.index===0?i._connectionTargetMap:i._connectionSourceMap;l!=null?(u[r.connection.id]=l,r.connection.source===r.connection.target&&(c[r.connection.id]=l)):(delete u[r.connection.id],r.connection.source===r.connection.target&&delete c[r.connection.id]),n!=null&&i._updateConnectionsForGroup(n),l!=null&&i._updateConnectionsForGroup(l)})}return z(t,[{key:"_cleanupDetachedConnection",value:function(i){i.proxies.length=0;var r=this._connectionSourceMap[i.id],e;r!=null&&(e=function(o){return o.id===i.id},Oe(r.connections.source,e),Oe(r.connections.target,e),Oe(r.connections.internal,e),delete this._connectionSourceMap[i.id]),r=this._connectionTargetMap[i.id],r!=null&&(e=function(o){return o.id===i.id},Oe(r.connections.source,e),Oe(r.connections.target,e),Oe(r.connections.internal,e),delete this._connectionTargetMap[i.id])}},{key:"addGroup",value:function(i){var r=i.el;if(this.groupMap[i.id]!=null)throw new Error("cannot create Group ["+i.id+"]; a Group with that ID exists");if(r._isJsPlumbGroup!=null)throw new Error("cannot create Group ["+i.id+"]; the given element is already a Group");var e=new T0(this.instance,i.el,i);return this.groupMap[e.id]=e,i.collapsed&&this.collapseGroup(e),this.instance.manage(e.el),this.instance.addClass(e.el,Si),e.manager=this,this._updateConnectionsForGroup(e),this.instance.fire(Fy,{group:e}),e}},{key:"getGroup",value:function(i){var r=i;if(Ee(i)&&(r=this.groupMap[i],r==null))throw new Error("No such group ["+i+"]");return r}},{key:"getGroupFor",value:function(i){for(var r=i,e=this.instance.getContainer(),n=!1,o=null;!n;)r==null||r===e?n=!0:r._jsPlumbParentGroup?(o=r._jsPlumbParentGroup,n=!0):r=r.parentNode;return o}},{key:"getGroups",value:function(){var i=[];for(var r in this.groupMap)i.push(this.groupMap[r]);return i}},{key:"removeGroup",value:function(i,r,e,n){var o=this,a=this.getGroup(i);this.expandGroup(a,!0);var l={};return X(a.children,function(u){var c=o.instance.getManagedElements()[o.instance.getId(u.el)];c&&delete c.group}),r?(X(a.getGroups(),function(u){return o.removeGroup(u,r,e)}),a.removeAll(e,n)):(a.group&&X(a.children,function(u){return a.group.add(u.el)}),l=a.orphanAll()),a.group&&a.group.removeGroup(a),this.instance.unmanage(a.el,!0),delete this.groupMap[a.id],this.instance.fire(Uy,{group:a}),l}},{key:"removeAllGroups",value:function(i,r,e){for(var n in this.groupMap)this.removeGroup(this.groupMap[n],i,r,e)}},{key:"forEach",value:function(i){for(var r in this.groupMap)i(this.groupMap[r])}},{key:"orphan",value:function(i,r){var e=i;if(e._jsPlumbParentGroup){var n=e._jsPlumbParentGroup,o=this.instance.getId(e),a=this.instance.getOffset(i);return r!==!0&&n.group?this.instance._appendElementToGroup(n.group,i):this.instance._appendElementToContainer(i),this.instance.setPosition(i,a),delete e._jsPlumbParentGroup,{id:o,pos:a}}}},{key:"_updateConnectionsForGroup",value:function(i){var r=this;i.connections.source.length=0,i.connections.target.length=0,i.connections.internal.length=0;var e=i.children.slice().map(function(d){return d.el}),n=[];if(X(e,function(d){Array.prototype.push.apply(n,r.instance.getSelector(d,ve))}),Array.prototype.push.apply(e,n),e.length>0){var o=this.instance.getConnections({source:e,scope:yn},!0),a=this.instance.getConnections({target:e,scope:yn},!0),l={},u,c,h=function(p){for(var g=0;g<p.length;g++)l[p[g].id]||(l[p[g].id]=!0,u=r.getGroupFor(p[g].source),c=r.getGroupFor(p[g].target),p[g].source===i.el&&c===i||p[g].target===i.el&&u===i?i.connections.internal.push(p[g]):u===i?(c!==i?i.connections.source.push(p[g]):i.connections.internal.push(p[g]),r._connectionSourceMap[p[g].id]=i):c===i&&(i.connections.target.push(p[g]),r._connectionTargetMap[p[g].id]=i))};h(o),h(a)}}},{key:"_collapseConnection",value:function(i,r,e){var n=i.endpoints[r===0?1:0].element;if(n._jsPlumbParentGroup&&!n._jsPlumbParentGroup.proxied&&n._jsPlumbParentGroup.collapsed)return!1;var o=i.endpoints[0].element,a=o._jsPlumbParentGroup,l=a!=null?a.collapseParent||a:null,u=i.endpoints[1].element,c=u._jsPlumbParentGroup,h=c!=null?c.collapseParent||c:null;if(l==null||h==null||l.id!==h.id){var d=e.el;return this.instance.getId(d),this.instance.proxyConnection(i,r,d,function(p,g){return e.getEndpoint(p,g)},function(p,g){return e.getAnchor(p,g)}),!0}else return!1}},{key:"_expandConnection",value:function(i,r,e){this.instance.unproxyConnection(i,r)}},{key:"isElementDescendant",value:function(i,r){for(var e=this.instance.getContainer(),n=!1;!n;){if(i==null||i===e)return!1;if(i===r)return!0;i=i.parentNode}}},{key:"collapseGroup",value:function(i){var r=this,e=this.getGroup(i);if(!(e==null||e.collapsed)){var n=e.el;if(e.collapseParent==null){if(this.instance.setGroupVisible(e,!1),e.collapsed=!0,this.instance.removeClass(n,Si),this.instance.addClass(n,_r),e.proxied){var o=new Set,a=function(u,c){for(var h=0;h<u.length;h++){var d=u[h];r._collapseConnection(d,c,e)===!0&&o.add(d.id)}};a(e.connections.source,0),a(e.connections.target,1),X(e.getGroups(),function(l){r.cascadeCollapse(e,l,o)})}this.instance.revalidate(n),this.repaintGroup(e),this.instance.fire(Gy,{group:e})}else e.collapsed=!0,this.instance.removeClass(n,Si),this.instance.addClass(n,_r)}}},{key:"cascadeCollapse",value:function(i,r,e){var n=this;if(i.proxied){var o=function(l,u){for(var c=0;c<l.length;c++){var h=l[c];e.has(h.id)||n._collapseConnection(h,u,i)===!0&&e.add(h.id)}};o(r.connections.source,0),o(r.connections.target,1)}X(r.getGroups(),function(a){n.cascadeCollapse(i,a,e)})}},{key:"expandGroup",value:function(i,r){var e=this,n=this.getGroup(i);if(n!=null){var o=n.el;if(n.collapseParent==null){if(this.instance.setGroupVisible(n,!0),n.collapsed=!1,this.instance.addClass(o,Si),this.instance.removeClass(o,_r),n.proxied){var a=function(c,h){for(var d=0;d<c.length;d++){var p=c[d];e._expandConnection(p,h,n)}};a(n.connections.source,0),a(n.connections.target,1);var l=function u(c,h){if(h||c.collapsed){var d=function(g,y){for(var m=0;m<g.length;m++){var E=g[m];e._collapseConnection(E,y,c.collapseParent||c)}};d(c.connections.source,0),d(c.connections.target,1),X(c.connections.internal,function(p){return p.setVisible(!1)}),X(c.getGroups(),function(p){return u(p,!0)})}else e.expandGroup(c,!0)};X(n.getGroups(),l)}this.instance.revalidate(o),this.repaintGroup(n),r||this.instance.fire(jy,{group:n})}else n.collapsed=!1,this.instance.addClass(o,Si),this.instance.removeClass(o,_r)}}},{key:"toggleGroup",value:function(i){i=this.getGroup(i),i!=null&&(i.collapsed?this.expandGroup(i):this.collapseGroup(i))}},{key:"repaintGroup",value:function(i){for(var r=this.getGroup(i),e=r.children,n=0;n<e.length;n++)this.instance.revalidate(e[n].el)}},{key:"addToGroup",value:function(i,r){var e=this,n=this.getGroup(i);if(n){for(var o=n.el,a=function(d){var p=d,g=p._isJsPlumbGroup!=null,y=p._jsPlumbGroup,m=p._jsPlumbParentGroup;if(m!==n){var E=e.instance.manage(d),b=e.instance.getOffset(d),C=n.collapsed?e.instance.getOffsetRelativeToRoot(o):e.instance.getOffset(e.instance.getGroupContentArea(n));E.group=n.elId,m!=null&&(m.remove(d,!1,r,!1,n),e._updateConnectionsForGroup(m)),g?n.addGroup(y):n.add(d,r);var S=function(T,K){var $=K===0?1:0;T.each(function(Z){Z.setVisible(!1),Z.endpoints[$].element._jsPlumbGroup===n?(Z.endpoints[$].setVisible(!1),e._expandConnection(Z,$,n)):(Z.endpoints[K].setVisible(!1),e._collapseConnection(Z,K,n))})};n.collapsed&&(S(e.instance.select({source:d}),0),S(e.instance.select({target:d}),1)),e.instance.getId(d);var N={x:b.x-C.x,y:b.y-C.y};if(e.instance.setPosition(d,N),e._updateConnectionsForGroup(n),e.instance.revalidate(d),!r){var G={group:n,el:d,pos:N};m&&(G.sourceGroup=m),e.instance.fire(By,G)}}},l=arguments.length,u=new Array(l>2?l-2:0),c=2;c<l;c++)u[c-2]=arguments[c];X(u,a)}}},{key:"removeFromGroup",value:function(i,r){var e=this,n=this.getGroup(i);if(n){for(var o=function(h){if(n.collapsed){var d=function(y,m){for(var E=0;E<y.length;E++){var b=y[E];if(b.proxies){for(var C=0;C<b.proxies.length;C++)if(b.proxies[C]!=null){var S=b.proxies[C].originalEp.element;(S===h||e.isElementDescendant(S,h))&&e._expandConnection(b,m,n)}}}};d(n.connections.source.slice(),0),d(n.connections.target.slice(),1)}n.remove(h,null,r);var p=e.instance.getManagedElements()[e.instance.getId(h)];p&&delete p.group},a=arguments.length,l=new Array(a>2?a-2:0),u=2;u<a;u++)l[u-2]=arguments[u];X(l,o)}}},{key:"getAncestors",value:function(i){for(var r=[],e=i.group;e!=null;)r.push(e),e=e.group;return r}},{key:"isAncestor",value:function(i,r){return i==null||r==null?!1:this.getAncestors(i).indexOf(r)!==-1}},{key:"getDescendants",value:function(i){var r=[],e=function n(o){var a=o.getGroups();r.push.apply(r,ni(a)),X(a,n)};return e(i),r}},{key:"isDescendant",value:function(i,r){return i==null||r==null?!1:this.getDescendants(r).indexOf(i)!==-1}},{key:"reset",value:function(){this._connectionSourceMap={},this._connectionTargetMap={},this.groupMap={}}}]),t}(),Wh=function(){function t(s,i){H(this,t),this.instance=s,this.entries=i}return z(t,[{key:"length",get:function(){return this.entries.length}},{key:"each",value:function(i){return X(this.entries,function(r){return i(r)}),this}},{key:"get",value:function(i){return this.entries[i]}},{key:"addClass",value:function(i,r){return this.each(function(e){return e.addClass(i,r)}),this}},{key:"removeClass",value:function(i,r){return this.each(function(e){return e.removeClass(i,r)}),this}},{key:"removeAllOverlays",value:function(){return this.each(function(i){return i.removeAllOverlays()}),this}},{key:"setLabel",value:function(i){return this.each(function(r){return r.setLabel(i)}),this}},{key:"clear",value:function(){return this.entries.length=0,this}},{key:"map",value:function(i){var r=[];return this.each(function(e){return r.push(i(e))}),r}},{key:"addOverlay",value:function(i){return this.each(function(r){return r.addOverlay(i)}),this}},{key:"removeOverlay",value:function(i){return this.each(function(r){return r.removeOverlay(i)}),this}},{key:"removeOverlays",value:function(){return this.each(function(i){return i.removeOverlays()}),this}},{key:"showOverlay",value:function(i){return this.each(function(r){return r.showOverlay(i)}),this}},{key:"hideOverlay",value:function(i){return this.each(function(r){return r.hideOverlay(i)}),this}},{key:"setPaintStyle",value:function(i){return this.each(function(r){return r.setPaintStyle(i)}),this}},{key:"setHoverPaintStyle",value:function(i){return this.each(function(r){return r.setHoverPaintStyle(i)}),this}},{key:"setSuspendEvents",value:function(i){return this.each(function(r){return r.setSuspendEvents(i)}),this}},{key:"setParameter",value:function(i,r){return this.each(function(e){return e.parameters[i]=r}),this}},{key:"setParameters",value:function(i){return this.each(function(r){return r.parameters=i}),this}},{key:"setVisible",value:function(i){return this.each(function(r){return r.setVisible(i)}),this}},{key:"addType",value:function(i){return this.each(function(r){return r.addType(i)}),this}},{key:"toggleType",value:function(i){return this.each(function(r){return r.toggleType(i)}),this}},{key:"removeType",value:function(i){return this.each(function(r){return r.removeType(i)}),this}},{key:"bind",value:function(i,r){return this.each(function(e){return e.bind(i,r)}),this}},{key:"unbind",value:function(i,r){return this.each(function(e){return e.unbind(i,r)}),this}},{key:"setHover",value:function(i){var r=this;return this.each(function(e){return r.instance.setHover(e,i)}),this}}]),t}(),O0=function(t){oe(i,t);var s=ae(i);function i(){return H(this,i),s.apply(this,arguments)}return z(i,[{key:"setEnabled",value:function(e){return this.each(function(n){return n.enabled=e}),this}},{key:"setAnchor",value:function(e){return this.each(function(n){return n.setAnchor(e)}),this}},{key:"deleteEveryConnection",value:function(){return this.each(function(e){return e.deleteEveryConnection()}),this}},{key:"deleteAll",value:function(){var e=this;return this.each(function(n){return e.instance.deleteEndpoint(n)}),this.clear(),this}}]),i}(Wh),w0=function(t){oe(i,t);var s=ae(i);function i(){return H(this,i),s.apply(this,arguments)}return z(i,[{key:"setDetachable",value:function(e){return this.each(function(n){return n.setDetachable(e)}),this}},{key:"setReattach",value:function(e){return this.each(function(n){return n.setReattach(e)}),this}},{key:"setConnector",value:function(e){return this.each(function(n){return n._setConnector(e)}),this}},{key:"deleteAll",value:function(){var e=this;this.each(function(n){return e.instance.deleteConnection(n)}),this.clear()}},{key:"repaint",value:function(){var e=this;return this.each(function(n){return e.instance._paintConnection(n)}),this}}]),i}(Wh),D0=function t(){H(this,t),f(this,"affectedElements",new Set)};function mu(){return{x:0,y:0,w:0,h:0,r:0,c:{x:0,y:0},x2:0,y2:0,t:{x:0,y:0,c:{x:0,y:0},w:0,h:0,r:0,x2:0,y2:0,cr:0,sr:0},dirty:!0}}function M0(t,s,i,r,e){var n={x:t+i/2,y:s+r/2},o=Math.cos(e/360*Math.PI*2),a=Math.sin(e/360*Math.PI*2),l=function(C,S){return{x:n.x+Math.round((C-n.x)*o-(S-n.y)*a),y:n.y+Math.round((S-n.y)*o-(C-n.x)*a)}},u=l(t,s),c=l(t+i,s),h=l(t+i,s+r),d=l(t,s+r),p=l(t+i/2,s+r/2),g=Math.min(u.x,c.x,h.x,d.x),y=Math.max(u.x,c.x,h.x,d.x),m=Math.min(u.y,c.y,h.y,d.y),E=Math.max(u.y,c.y,h.y,d.y);return{x:g,y:m,w:y-g,h:E-m,c:p,r:e,x2:y,y2:E,cr:o,sr:a}}var fs=function(s,i){var r=0;return i[1]>s[1]?r=-1:i[1]<s[1]&&(r=1),r},_u=function(s,i){return fs(s,i)*-1};function xr(t,s,i,r){dy([t,s],i,fs,r)}function Xt(t,s){var i=tn(s,function(r){return r[0]===t});i>-1&&s.splice(i,1)}var I0=function(t){oe(i,t);var s=ae(i);function i(r){var e;return H(this,i),e=s.call(this),e.instance=r,f(v(e),"_currentTransaction",null),f(v(e),"_sortedElements",{xmin:[],xmax:[],ymin:[],ymax:[]}),f(v(e),"_elementMap",new Map),f(v(e),"_transformedElementMap",new Map),f(v(e),"_bounds",{minx:0,maxx:0,miny:0,maxy:0}),e}return z(i,[{key:"_updateBounds",value:function(e,n,o){n!=null&&(Xt(e,this._sortedElements.xmin),Xt(e,this._sortedElements.xmax),Xt(e,this._sortedElements.ymin),Xt(e,this._sortedElements.ymax),xr(e,n.t.x,this._sortedElements.xmin,!1),xr(e,n.t.x+n.t.w,this._sortedElements.xmax,!0),xr(e,n.t.y,this._sortedElements.ymin,!1),xr(e,n.t.y+n.t.h,this._sortedElements.ymax,!0),o!==!0&&this._recalculateBounds())}},{key:"_recalculateBounds",value:function(){this._bounds.minx=this._sortedElements.xmin.length>0?this._sortedElements.xmin[0][1]:0,this._bounds.maxx=this._sortedElements.xmax.length>0?this._sortedElements.xmax[0][1]:0,this._bounds.miny=this._sortedElements.ymin.length>0?this._sortedElements.ymin[0][1]:0,this._bounds.maxy=this._sortedElements.ymax.length>0?this._sortedElements.ymax[0][1]:0}},{key:"recomputeBounds",value:function(){var e=this;this._sortedElements.xmin.length=0,this._sortedElements.xmax.length=0,this._sortedElements.ymin.length=0,this._sortedElements.ymax.length=0,this._elementMap.forEach(function(n,o){e._sortedElements.xmin.push([o,n.t.x]),e._sortedElements.xmax.push([o,n.t.x+n.t.w]),e._sortedElements.ymin.push([o,n.t.y]),e._sortedElements.ymax.push([o,n.t.y+n.t.h])}),this._sortedElements.xmin.sort(fs),this._sortedElements.ymin.sort(fs),this._sortedElements.xmax.sort(_u),this._sortedElements.ymax.sort(_u),this._recalculateBounds()}},{key:"_finaliseUpdate",value:function(e,n,o){n.t=M0(n.x,n.y,n.w,n.h,n.r),this._transformedElementMap.set(e,n.t),o!==!0&&this._updateBounds(e,n,o)}},{key:"shouldFireEvent",value:function(e,n,o){return!0}},{key:"startTransaction",value:function(){if(this._currentTransaction!=null)throw new Error("Viewport: cannot start transaction; a transaction is currently active.");this._currentTransaction=new D0}},{key:"endTransaction",value:function(){var e=this;this._currentTransaction!=null&&(this._currentTransaction.affectedElements.forEach(function(n){var o=e.getPosition(n);e._finaliseUpdate(n,o,!0)}),this.recomputeBounds(),this._currentTransaction=null)}},{key:"updateElements",value:function(e){var n=this;X(e,function(o){return n.updateElement(o.id,o.x,o.y,o.width,o.height,o.rotation)})}},{key:"updateElement",value:function(e,n,o,a,l,u,c){var h=Fl(this._elementMap,e,mu);return h.dirty=n==null&&h.x==null||o==null&&h.y==null||a==null&&h.w==null||l==null&&h.h==null,n!=null&&(h.x=n),o!=null&&(h.y=o),a!=null&&(h.w=a),l!=null&&(h.h=l),u!=null&&(h.r=u||0),h.c.x=h.x+h.w/2,h.c.y=h.y+h.h/2,h.x2=h.x+h.w,h.y2=h.y+h.h,this._currentTransaction==null?this._finaliseUpdate(e,h,c):this._currentTransaction.affectedElements.add(e),h}},{key:"refreshElement",value:function(e,n){var o=this.instance.getManagedElements(),a=o[e]?o[e].el:null;if(a!=null){var l=this.getSize(a),u=this.getOffset(a);return this.updateElement(e,u.x,u.y,l.w,l.h,null,n)}else return null}},{key:"getSize",value:function(e){return this.instance.getSize(e)}},{key:"getOffset",value:function(e){return this.instance.getOffset(e)}},{key:"registerElement",value:function(e,n){return this.updateElement(e,0,0,0,0,0,n)}},{key:"addElement",value:function(e,n,o,a,l,u){return this.updateElement(e,n,o,a,l,u)}},{key:"rotateElement",value:function(e,n){var o=Fl(this._elementMap,e,mu);return o.r=n||0,this._finaliseUpdate(e,o),o}},{key:"getBoundsWidth",value:function(){return this._bounds.maxx-this._bounds.minx}},{key:"getBoundsHeight",value:function(){return this._bounds.maxy-this._bounds.miny}},{key:"getX",value:function(){return this._bounds.minx}},{key:"getY",value:function(){return this._bounds.miny}},{key:"setSize",value:function(e,n,o){if(this._elementMap.has(e))return this.updateElement(e,null,null,n,o,null)}},{key:"setPosition",value:function(e,n,o){if(this._elementMap.has(e))return this.updateElement(e,n,o,null,null,null)}},{key:"reset",value:function(){this._sortedElements.xmin.length=0,this._sortedElements.xmax.length=0,this._sortedElements.ymin.length=0,this._sortedElements.ymax.length=0,this._elementMap.clear(),this._transformedElementMap.clear(),this._recalculateBounds()}},{key:"remove",value:function(e){Xt(e,this._sortedElements.xmin),Xt(e,this._sortedElements.xmax),Xt(e,this._sortedElements.ymin),Xt(e,this._sortedElements.ymax),this._elementMap.delete(e),this._transformedElementMap.delete(e),this._recalculateBounds()}},{key:"getPosition",value:function(e){return this._elementMap.get(e)}},{key:"getElements",value:function(){return this._elementMap}},{key:"isEmpty",value:function(){return this._elementMap.size===0}}]),i}(or),Gn;function L0(t,s,i,r,e){for(var n=i?t.w:t.h,o=i?t.h:t.w,a=[],l=n/(s.length+1),u=0;u<s.length;u++){var c=(u+1)*l,h=r*o;e&&(c=n-c);var d=i?c:h,p=t.x+d,g=d/t.w,y=i?h:c,m=t.y+y,E=y/t.h;if(t.r!==0&&t.r!=null){var b=ts({x:p,y:m},t.c,t.r);p=b.x,m=b.y}a.push({x:p,y:m,xLoc:g,yLoc:E,c:s[u].c})}return a}function Eu(t,s){return s.theta-t.theta}function bu(t,s){var i=t.theta<0?-Math.PI-t.theta:Math.PI-t.theta,r=s.theta<0?-Math.PI-s.theta:Math.PI-s.theta;return i-r}var N0=(Gn={},f(Gn,be,bu),f(Gn,Ie,Eu),f(Gn,He,Eu),f(Gn,Fe,bu),Gn);function $t(t){return t.isContinuous===!0}function Cu(t){return t.isContinuous===!0}function R0(t){return t.locations.length>1}function xu(t){return[t.currentLocation,t.locations[t.currentLocation]]}var F0=function(){function t(s){var i=this;H(this,t),this.instance=s,f(this,"anchorLists",new Map),f(this,"anchorLocations",new Map),s.bind(ba,function(r){r.sourceEndpoint._anchor.isContinuous&&i._removeEndpointFromAnchorLists(r.sourceEndpoint),r.targetEndpoint._anchor.isContinuous&&i._removeEndpointFromAnchorLists(r.targetEndpoint)}),s.bind(yh,function(r){i._removeEndpointFromAnchorLists(r)})}return z(t,[{key:"getAnchorOrientation",value:function(i){var r=this.anchorLocations.get(i.id);return r?[r.ox,r.oy]:[0,0]}},{key:"_distance",value:function(i,r,e,n,o,a,l){var u=n.x+i.x*o.w,c=n.y+i.y*o.h,h=n.x+o.w/2,d=n.y+o.h/2;if(a!=null&&a.length>0){var p=this.instance._applyRotations([u,c,0,0],a);u=p.x,c=p.y}return Math.sqrt(Math.pow(r-u,2)+Math.pow(e-c,2))+Math.sqrt(Math.pow(h-u,2)+Math.pow(d-c,2))}},{key:"_anchorSelector",value:function(i,r,e,n,o,a,l){for(var u=e.x+n.w/2,c=e.y+n.h/2,h=-1,d=1/0,p=0;p<l.length;p++){var g=this._distance(l[p],u,c,i,r,o,a);g<d&&(h=p+0,d=g)}return[h,l[h]]}},{key:"_floatingAnchorCompute",value:function(i,r){var e=r.xy,n={curX:e.x+i.size.w/2,curY:e.y+i.size.h/2,x:0,y:0,ox:0,oy:0};return this._setComputedPosition(i,n)}},{key:"_setComputedPosition",value:function(i,r,e){return this.anchorLocations.set(i.id,r),i.computedPosition=r,e&&(i.timestamp=e),r}},{key:"_computeSingleLocation",value:function(i,r,e,n){var o,a=n.rotation,l={curX:r.x+i.x*e.w+i.offx,curY:r.y+i.y*e.h+i.offy,x:i.x,y:i.y,ox:0,oy:0};if(a!=null&&a.length>0){var u=[i.iox,i.ioy],c={x:l.curX,y:l.curY,cr:0,sr:0};X(a,function(h){c=ts(c,h.c,h.r);var d=[Math.round(u[0]*c.cr-u[1]*c.sr),Math.round(u[1]*c.cr+u[0]*c.sr)];u=d.slice()}),i.ox=u[0],i.oy=u[1],o={curX:c.x,curY:c.y,x:i.x,y:i.y,ox:u[0],oy:u[1]}}else i.ox=i.iox,i.oy=i.ioy,o=U({ox:i.iox,oy:i.ioy},l);return o}},{key:"_singleAnchorCompute",value:function(i,r){var e=r.xy,n=r.wh,o=r.timestamp,a=this.anchorLocations.get(i.id);if(a!=null&&o&&o===i.timestamp)return a;var l=xu(i),u=Fr(l,2);u[0];var c=u[1];return a=this._computeSingleLocation(c,e,n,r),this._setComputedPosition(i,a,o)}},{key:"_defaultAnchorCompute",value:function(i,r){var e;if(i.locations.length===1)return this._singleAnchorCompute(i,r);var n=r.xy,o=r.wh,a=r.txy,l=r.twh,u=xu(i),c=Fr(u,2),h=c[0],d=c[1];if(i.locked||a==null||l==null)e=this._computeSingleLocation(d,n,o,r);else{var p=this._anchorSelector(n,o,a,l,r.rotation,r.tRotation,i.locations),g=Fr(p,2),y=g[0],m=g[1];i.currentLocation=y,y!==h&&(i.cssClass=m.cls||i.cssClass,r.element._anchorLocationChanged(i)),e=this._computeSingleLocation(m,n,o,r)}return this._setComputedPosition(i,e,r.timestamp)}},{key:"_placeAnchors",value:function(i,r){var e=this,n=this.instance.viewport.getPosition(i),o=function(l,u,c,h,d,p){if(c.length>0)for(var g=c.sort(N0[l]),y=l===Ie||l===be,m=L0(n,g,h,d,y),E=0;E<m.length;E++){var b=m[E].c,C=b.endpoints[0].elementId===i,S=C?b.endpoints[0]:b.endpoints[1];e._setComputedPosition(S._anchor,{curX:m[E].x,curY:m[E].y,x:m[E].xLoc,y:m[E].yLoc,ox:p[0],oy:p[1]})}};o(He,n,r.bottom,!0,1,[0,1]),o(be,n,r.top,!0,0,[0,-1]),o(Fe,n,r.left,!1,0,[-1,0]),o(Ie,n,r.right,!1,1,[1,0])}},{key:"_updateAnchorList",value:function(i,r,e,n,o,a,l,u,c,h,d){var p=n.endpoints[l],g=p.id,y=[1,0][l],m={theta:r,order:e,c:n,b:o,elId:a,epId:g},E=i[c],b=p._continuousAnchorEdge?i[p._continuousAnchorEdge]:null,C;if(b){var S=tn(b,function(T){return T.epId===g});if(S!==-1){b.splice(S,1);for(var N=0;N<b.length;N++)C=b[N].c,C.placeholder!==!0&&h.add(C),d.add(b[N].c.endpoints[l]),d.add(b[N].c.endpoints[y])}}for(var G=0;G<E.length;G++)C=E[G].c,C.placeholder!==!0&&h.add(C),d.add(E[G].c.endpoints[l]),d.add(E[G].c.endpoints[y]);{var I=u?0:E.length;E.splice(I,0,m)}p._continuousAnchorEdge=c}},{key:"_removeEndpointFromAnchorLists",value:function(i){var r=this.anchorLists.get(i.elementId),e=0;(function(n,o){if(n){var a=function(u){return u.epId===o};Oe(n.top,a),Oe(n.left,a),Oe(n.bottom,a),Oe(n.right,a),e+=n.top.length,e+=n.left.length,e+=n.bottom.length,e+=n.right.length}})(r,i.id),e===0&&this.anchorLists.delete(i.elementId),this.anchorLocations.delete(i._anchor.id)}},{key:"computeAnchorLocation",value:function(i,r){var e;return $t(i)?e=this.anchorLocations.get(i.id)||{curX:0,curY:0,x:0,y:0,ox:0,oy:0}:Cu(i)?e=this._floatingAnchorCompute(i,r):e=this._defaultAnchorCompute(i,r),i.timestamp=r.timestamp,e}},{key:"computePath",value:function(i,r){var e=this.instance.viewport.getPosition(i.sourceId),n=this.instance.viewport.getPosition(i.targetId),o=i.endpoints[0],a=i.endpoints[1],l=this.getEndpointLocation(o,{xy:e,wh:e,element:o,timestamp:r,rotation:this.instance._getRotations(i.sourceId)}),u=this.getEndpointLocation(a,{xy:n,wh:n,element:a,timestamp:r,rotation:this.instance._getRotations(i.targetId)});i.connector.resetBounds(),i.connector.compute({sourcePos:l,targetPos:u,sourceEndpoint:i.endpoints[0],targetEndpoint:i.endpoints[1],strokeWidth:i.paintStyleInUse.strokeWidth,sourceInfo:e,targetInfo:n})}},{key:"getEndpointLocation",value:function(i,r){r=r||{};var e=i._anchor,n=this.anchorLocations.get(e.id);return(n==null||r.timestamp!=null&&e.timestamp!==r.timestamp)&&(n=this.computeAnchorLocation(e,r),this._setComputedPosition(e,n,r.timestamp)),n}},{key:"getEndpointOrientation",value:function(i){return i._anchor?this.getAnchorOrientation(i._anchor):[0,0]}},{key:"setAnchorOrientation",value:function(i,r){var e=this.anchorLocations.get(i.id);e!=null&&(e.ox=r[0],e.oy=r[1])}},{key:"isDynamicAnchor",value:function(i){return i._anchor?!$t(i._anchor)&&i._anchor.locations.length>1:!1}},{key:"isFloating",value:function(i){return i._anchor?Cu(i._anchor):!1}},{key:"prepareAnchor",value:function(i){return Ii(i)}},{key:"redraw",value:function(i,r,e){var n=this,o=new Set,a=new Set,l=new Set;if(!this.instance._suspendDrawing){var u=this.instance.endpointsByElement[i]||[];r=r||Se();for(var c={},h,d,p=0;p<u.length;p++)if(d=u[p],d.visible!==!1)if(a.add(d),h=d._anchor,d.connections.length===0)$t(h)&&(this.anchorLists.has(i)||this.anchorLists.set(i,{top:[],right:[],bottom:[],left:[]}),this._updateAnchorList(this.anchorLists.get(i),-Math.PI/2,0,{endpoints:[d,d],placeholder:!0},!1,i,0,!1,R_(h),o,a),l.add(i));else for(var g=0;g<d.connections.length;g++){var y=d.connections[g],m=y.sourceId,E=y.targetId,b=$t(y.endpoints[0]._anchor),C=$t(y.endpoints[1]._anchor);if(b||C){var S=(y.endpoints[0]._anchor.faces||[]).join("-"),N=(y.endpoints[1]._anchor.faces||[]).join("-"),G=[m,S,E,N].join("-"),I=c[G],T=y.sourceId===i?1:0;b&&!this.anchorLists.has(m)&&this.anchorLists.set(m,{top:[],right:[],bottom:[],left:[]}),C&&!this.anchorLists.has(E)&&this.anchorLists.set(E,{top:[],right:[],bottom:[],left:[]});var K=this.instance.viewport.getPosition(E),$=this.instance.viewport.getPosition(m);if(E===m&&(b||C))this._updateAnchorList(this.anchorLists.get(m),-Math.PI/2,0,y,!1,E,0,!1,be,o,a),this._updateAnchorList(this.anchorLists.get(E),-Math.PI/2,0,y,!1,m,1,!1,be,o,a);else{var Z=this.instance._getRotations(m),R=this.instance._getRotations(E);I||(I=this._calculateOrientation(m,E,$,K,y.endpoints[0]._anchor,y.endpoints[1]._anchor,Z,R),c[G]=I),b&&this._updateAnchorList(this.anchorLists.get(m),I.theta,0,y,!1,E,0,!1,I.a[0],o,a),C&&this._updateAnchorList(this.anchorLists.get(E),I.theta2,-1,y,!0,m,1,!0,I.a[1],o,a)}b&&l.add(m),C&&l.add(E),o.add(y),(b&&T===0||C&&T===1)&&a.add(y.endpoints[T])}else{var me=d.connections[g].endpoints[y.sourceId===i?1:0],yt=me._anchor;if(R0(yt)){this.instance._paintEndpoint(me,{elementWithPrecedence:i,timestamp:r}),o.add(d.connections[g]);for(var st=0;st<me.connections.length;st++)me.connections[st]!==d.connections[g]&&o.add(me.connections[st])}else o.add(d.connections[g])}}l.forEach(function(se){n._placeAnchors(se,n.anchorLists.get(se))}),a.forEach(function(se){var he=n.instance.viewport.getPosition(se.elementId);n.instance._paintEndpoint(se,{timestamp:r,offset:he})}),o.forEach(function(se){n.instance._paintConnection(se,{timestamp:r})})}return{c:o,e:a}}},{key:"reset",value:function(){this.anchorLocations.clear(),this.anchorLists.clear()}},{key:"setAnchor",value:function(i,r){r!=null&&(i._anchor=r)}},{key:"setConnectionAnchors",value:function(i,r){i.endpoints[0]._anchor=r[0],i.endpoints[1]._anchor=r[1]}},{key:"_calculateOrientation",value:function(i,r,e,n,o,a,l,u){var c=this,h={HORIZONTAL:"horizontal",VERTICAL:"vertical",DIAGONAL:"diagonal",IDENTITY:"identity"};if(i===r)return{orientation:h.IDENTITY,a:[be,be]};var d=Math.atan2(n.c.y-e.c.y,n.c.x-e.c.x),p=Math.atan2(e.c.y-n.c.y,e.c.x-n.c.x),g=[],y={};(function(G,I){for(var T=0;T<G.length;T++){var K;if(y[G[T]]=(K={},f(K,Fe,{x:I[T][0].x,y:I[T][0].c.y}),f(K,Ie,{x:I[T][0].x+I[T][0].w,y:I[T][0].c.y}),f(K,be,{x:I[T][0].c.x,y:I[T][0].y}),f(K,He,{x:I[T][0].c.x,y:I[T][0].y+I[T][0].h}),K),I[T][1]!=null&&I[T][1].length>0)for(var $ in y[G[T]])y[G[T]][$]=c.instance._applyRotationsXY(y[G[T]][$],I[T][1])}})([To,ch],[[e,l],[n,u]]);for(var m=[be,Fe,Ie,He],E=0;E<m.length;E++)for(var b=0;b<m.length;b++)g.push({source:m[E],target:m[b],dist:Mo(y.source[m[E]],y.target[m[b]])});g.sort(function(G,I){if(G.dist<I.dist)return-1;if(I.dist<G.dist)return 1;var T,K=(T={},f(T,Fe,0),f(T,be,1),f(T,Ie,2),f(T,He,3),T),$=K[G.source],Z=K[I.source],R=K[G.target],me=K[I.target];return $<Z?-1:Z<$?1:R<me?-1:me<R?1:0});for(var C=g[0].source,S=g[0].target,N=0;N<g.length&&($t(o)&&o.locked?C=o.currentFace:!o.isContinuous||eu(o,g[N].source)?C=g[N].source:C=null,a.isContinuous&&a.locked?S=a.currentFace:!a.isContinuous||eu(a,g[N].target)?S=g[N].target:S=null,!(C!=null&&S!=null));N++);return o.isContinuous&&this.setCurrentFace(o,C),a.isContinuous&&this.setCurrentFace(a,S),{a:[C,S],theta:d,theta2:p}}},{key:"setCurrentFace",value:function(i,r,e){i.currentFace=r,e&&i.lockedFace!=null&&(i.lockedFace=i.currentFace)}},{key:"lock",value:function(i){i.locked=!0,$t(i)&&(i.lockedFace=i.currentFace)}},{key:"unlock",value:function(i){i.locked=!1,$t(i)&&(i.lockedFace=null)}},{key:"selectAnchorLocation",value:function(i,r){var e=tn(i.locations,function(n){return n.x===r.x&&n.y===r.y});return e!==-1?(i.currentLocation=e,!0):!1}},{key:"lockCurrentAxis",value:function(i){i.currentFace!=null&&(i.lockedAxis=i.currentFace===Fe||i.currentFace===Ie?I_:L_)}},{key:"unlockCurrentAxis",value:function(i){i.lockedAxis=null}},{key:"anchorsEqual",value:function(i,r){if(!i||!r)return!1;var e=i.locations[i.currentLocation],n=r.locations[r.currentLocation];return e.x===n.x&&e.y===n.y&&e.offx===n.offx&&e.offy===n.offy&&e.ox===n.ox&&e.oy===n.oy}}]),t}(),Su={},ar={get:function(s,i,r){var e=Su[i];if(e)return new e(s,r);throw{message:"jsPlumb: unknown connector type '"+i+"'"}},register:function(s,i){Su[s]=i}},En=function(t){oe(i,t);var s=ae(i);function i(r){var e;return H(this,i),e=s.call(this,r),f(v(e),"length",void 0),f(v(e),"m",void 0),f(v(e),"m2",void 0),f(v(e),"type",i.segmentType),e._setCoordinates({x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2}),e}return z(i,[{key:"getPath",value:function(e){return(e?"M "+this.x1+" "+this.y1+" ":"")+"L "+this.x2+" "+this.y2}},{key:"_recalc",value:function(){this.length=Math.sqrt(Math.pow(this.x2-this.x1,2)+Math.pow(this.y2-this.y1,2)),this.m=oi({x:this.x1,y:this.y1},{x:this.x2,y:this.y2}),this.m2=-1/this.m,this.extents={xmin:Math.min(this.x1,this.x2),ymin:Math.min(this.y1,this.y2),xmax:Math.max(this.x1,this.x2),ymax:Math.max(this.y1,this.y2)}}},{key:"getLength",value:function(){return this.length}},{key:"getGradient",value:function(){return this.m}},{key:"_setCoordinates",value:function(e){this.x1=e.x1,this.y1=e.y1,this.x2=e.x2,this.y2=e.y2,this._recalc()}},{key:"pointOnPath",value:function(e,n){if(e===0&&!n)return{x:this.x1,y:this.y1};if(e===1&&!n)return{x:this.x2,y:this.y2};var o=n?e>0?e:this.length+e:e*this.length;return vn({x:this.x1,y:this.y1},{x:this.x2,y:this.y2},o)}},{key:"gradientAtPoint",value:function(e,n){return this.m}},{key:"pointAlongPathFrom",value:function(e,n,o){var a=this.pointOnPath(e,o),l=n<=0?{x:this.x1,y:this.y1}:{x:this.x2,y:this.y2};return n<=0&&Math.abs(n)>1&&(n*=-1),vn(a,l,n)}},{key:"within",value:function(e,n,o){return o>=Math.min(e,n)&&o<=Math.max(e,n)}},{key:"closest",value:function(e,n,o){return Math.abs(o-e)<Math.abs(o-n)?e:n}},{key:"findClosestPointOnPath",value:function(e,n){var o={d:1/0,x:null,y:null,l:null,x1:this.x1,x2:this.x2,y1:this.y1,y2:this.y2};if(this.m===0)o.y=this.y1,o.x=this.within(this.x1,this.x2,e)?e:this.closest(this.x1,this.x2,e);else if(this.m===1/0||this.m===-1/0)o.x=this.x1,o.y=this.within(this.y1,this.y2,n)?n:this.closest(this.y1,this.y2,n);else{var a=this.y1-this.m*this.x1,l=n-this.m2*e,u=(l-a)/(this.m-this.m2),c=this.m*u+a;o.x=this.within(this.x1,this.x2,u)?u:this.closest(this.x1,this.x2,u),o.y=this.within(this.y1,this.y2,c)?c:this.closest(this.y1,this.y2,c)}var h=Mo({x:o.x,y:o.y},{x:this.x1,y:this.y1});return o.d=Mo({x:e,y:n},o),o.l=h/length,o}},{key:"_pointLiesBetween",value:function(e,n,o){return o>n?n<=e&&e<=o:n>=e&&e>=o}},{key:"lineIntersection",value:function(e,n,o,a){var l=Math.abs(oi({x:e,y:n},{x:o,y:a})),u=Math.abs(this.m),c=u===1/0?this.x1:this.y1-u*this.x1,h=[],d=l===1/0?e:n-l*e;if(l!==u)if(l===1/0&&u===0)this._pointLiesBetween(e,this.x1,this.x2)&&this._pointLiesBetween(this.y1,n,a)&&h.push({x:e,y:this.y1});else if(l===0&&u===1/0)this._pointLiesBetween(n,this.y1,this.y2)&&this._pointLiesBetween(this.x1,e,o)&&h.push({x:this.x1,y:n});else{var p,g;l===1/0?(p=e,this._pointLiesBetween(p,this.x1,this.x2)&&(g=u*e+c,this._pointLiesBetween(g,n,a)&&h.push({x:p,y:g}))):l===0?(g=n,this._pointLiesBetween(g,this.y1,this.y2)&&(p=(n-c)/u,this._pointLiesBetween(p,e,o)&&h.push({x:p,y:g}))):(p=(d-c)/(u-l),g=u*p+c,this._pointLiesBetween(p,this.x1,this.x2)&&this._pointLiesBetween(g,this.y1,this.y2)&&h.push({x:p,y:g}))}return h}},{key:"boxIntersection",value:function(e,n,o,a){var l=[];return l.push.apply(l,this.lineIntersection(e,n,e+o,n)),l.push.apply(l,this.lineIntersection(e+o,n,e+o,n+a)),l.push.apply(l,this.lineIntersection(e+o,n+a,e,n+a)),l.push.apply(l,this.lineIntersection(e,n+a,e,n)),l}}]),i}(Sa);f(En,"segmentType","Straight");var ds=function(t){oe(i,t);var s=ae(i);function i(){var r;H(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return r=s.call.apply(s,[this].concat(n)),f(v(r),"type",i.type),r}return z(i,[{key:"getDefaultStubs",value:function(){return[0,0]}},{key:"_compute",value:function(e,n){this._addSegment(En,{x1:e.sx,y1:e.sy,x2:e.startStubX,y2:e.startStubY}),this._addSegment(En,{x1:e.startStubX,y1:e.startStubY,x2:e.endStubX,y2:e.endStubY}),this._addSegment(En,{x1:e.endStubX,y1:e.endStubY,x2:e.tx,y2:e.ty}),this.geometry={source:n.sourcePos,target:n.targetPos}}},{key:"transformGeometry",value:function(e,n,o){return{source:this.transformAnchorPlacement(e.source,n,o),target:this.transformAnchorPlacement(e.target,n,o)}}}]),i}(Fs);f(ds,"type","Straight");function G0(t,s){for(var i=t.scope.split(/\s/),r=s.scope.split(/\s/),e=0;e<i.length;e++)for(var n=0;n<r.length;n++)if(r[n]===i[e])return!0;return!1}function cn(t,s,i){var r=[],e=function(a){return Ee(a)?a:t.getId(a)};if(s)if(typeof s=="string"){if(s==="*")return s;r.push(s)}else if(i)r=s;else if(s.length!=null){var n;(n=r).push.apply(n,ni(ni(s).map(e)))}else r.push(e(s));return r}function j0(t,s){t!=null&&t.endpoints.push(s)}function B0(t,s){t!=null&&Oe(t.endpoints,function(i){return i===s})}function Sr(t,s,i){s!=null&&(s.connections.push(t),s.connections.length===1&&t.instance.addClass(t.source,t.instance.connectedClass)),i!=null&&(s==null||t.sourceId!==t.targetId)&&(i.connections.push(t),i.connections.length===1&&t.instance.addClass(t.target,t.instance.connectedClass))}function Pr(t,s,i){if(s!=null){var r=s.connections.length;Oe(s.connections,function(n){return t.id===n.id}),r>0&&s.connections.length===0&&t.instance.removeClass(t.source,t.instance.connectedClass)}if(i!=null){var e=i.connections.length;(s==null||t.sourceId!==t.targetId)&&Oe(i.connections,function(n){return t.id===n.id}),e>0&&i.connections.length===0&&t.instance.removeClass(t.target,t.instance.connectedClass)}}var H0=function(t){oe(i,t);var s=ae(i);function i(r,e){var n;return H(this,i),n=s.call(this),n._instanceIndex=r,f(v(n),"defaults",void 0),f(v(n),"_initialDefaults",{}),f(v(n),"isConnectionBeingDragged",!1),f(v(n),"currentlyDragging",!1),f(v(n),"hoverSuspended",!1),f(v(n),"_suspendDrawing",!1),f(v(n),"_suspendedAt",null),f(v(n),"connectorClass",_a),f(v(n),"connectorOutlineClass",ky),f(v(n),"connectedClass",Ty),f(v(n),"endpointClass",qn),f(v(n),"endpointConnectedClass",Ay),f(v(n),"endpointFullClass",Oy),f(v(n),"endpointFloatingClass",Ea),f(v(n),"endpointDropAllowedClass",wy),f(v(n),"endpointDropForbiddenClass",Dy),f(v(n),"endpointAnchorClassPrefix",My),f(v(n),"overlayClass",Ns),f(v(n),"connections",[]),f(v(n),"endpointsByElement",{}),f(v(n),"endpointsByUUID",new Map),f(v(n),"sourceSelectors",[]),f(v(n),"targetSelectors",[]),f(v(n),"allowNestedGroups",void 0),f(v(n),"_curIdStamp",1),f(v(n),"viewport",new I0(v(n))),f(v(n),"router",void 0),f(v(n),"groupManager",void 0),f(v(n),"_connectionTypes",new Map),f(v(n),"_endpointTypes",new Map),f(v(n),"_container",void 0),f(v(n),"_managedElements",{}),f(v(n),"DEFAULT_SCOPE",void 0),f(v(n),"_zoom",1),n.defaults={anchor:Pt.Bottom,anchors:[null,null],connectionsDetachable:!0,connectionOverlays:[],connector:ds.type,container:null,endpoint:ui.type,endpointOverlays:[],endpoints:[null,null],endpointStyle:{fill:"#456"},endpointStyles:[null,null],endpointHoverStyle:null,endpointHoverStyles:[null,null],hoverPaintStyle:null,listStyle:{},maxConnections:1,paintStyle:{strokeWidth:2,stroke:"#456"},reattachConnections:!1,scope:"jsplumb_defaultscope",allowNestedGroups:!0},e&&U(n.defaults,e),U(n._initialDefaults,n.defaults),n._initialDefaults[Fn]!=null&&(n._initialDefaults[Fn].strokeWidth=n._initialDefaults[Fn].strokeWidth||2),n.DEFAULT_SCOPE=n.defaults[P0],n.allowNestedGroups=n._initialDefaults[S0]!==!1,n.router=new F0(v(n)),n.groupManager=new A0(v(n)),n.setContainer(n._initialDefaults.container),n}return z(i,[{key:"defaultScope",get:function(){return this.DEFAULT_SCOPE}},{key:"currentZoom",get:function(){return this._zoom}},{key:"areDefaultAnchorsSet",value:function(){return this.validAnchorsSpec(this.defaults.anchors)}},{key:"validAnchorsSpec",value:function(e){return e!=null&&e[0]!=null&&e[1]!=null}},{key:"getContainer",value:function(){return this._container}},{key:"setZoom",value:function(e,n){return this._zoom=e,this.fire(bh,this._zoom),n&&this.repaintEverything(),!0}},{key:"_idstamp",value:function(){return""+this._curIdStamp++}},{key:"checkCondition",value:function(e,n){var o=this.getListener(e),a=!0;if(o&&o.length>0){var l=Array.prototype.slice.call(arguments,1);try{for(var u=0,c=o.length;u<c;u++)a=a&&o[u].apply(o[u],l)}catch(h){xe("cannot check condition ["+e+"]"+h)}}return a}},{key:"getId",value:function(e,n){if(e==null)return null;var o=this.getAttribute(e,zt);return(!o||o==="undefined")&&(arguments.length===2&&arguments[1]!==void 0?o=n:(arguments.length===1||arguments.length===3&&!arguments[2])&&(o="jsplumb-"+this._instanceIndex+"-"+this._idstamp()),this.setAttribute(e,zt,o)),o}},{key:"getConnections",value:function(e,n){e?e.constructor===String&&(e={scope:e}):e={};for(var o=e.scope||this.defaultScope,a=cn(this,o,!0),l=cn(this,e.source),u=cn(this,e.target),c=!n&&a.length>1?{}:[],h=function(b,C){if(!n&&a.length>1){var S=c[b];S==null&&(S=c[b]=[]),S.push(C)}else c.push(C)},d=0,p=this.connections.length;d<p;d++){var g=this.connections[d],y=g.proxies&&g.proxies[0]?g.proxies[0].originalEp.elementId:g.sourceId,m=g.proxies&&g.proxies[1]?g.proxies[1].originalEp.elementId:g.targetId;an(a,g.scope)&&an(l,y)&&an(u,m)&&h(g.scope,g)}return c}},{key:"select",value:function(e){return e=e||{},e.scope=e.scope||"*",new w0(this,e.connections||this.getConnections(e,!0))}},{key:"selectEndpoints",value:function(e){e=e||{},e.scope=e.scope||yn;var n=!e.element&&!e.source&&!e.target,o=n?yn:cn(this,e.element),a=n?yn:cn(this,e.source),l=n?yn:cn(this,e.target),u=cn(this,e.scope,!0),c=[];for(var h in this.endpointsByElement){var d=an(o,h,!0),p=an(a,h,!0),g=a!=="*",y=an(l,h,!0),m=l!=="*";if(d||p||y)e:for(var E=0,b=this.endpointsByElement[h].length;E<b;E++){var C=this.endpointsByElement[h][E];if(an(u,C.scope,!0)){var S=g&&a.length>0&&!C.isSource,N=m&&l.length>0&&!C.isTarget;if(S||N)continue e;c.push(C)}}}return new O0(this,c)}},{key:"setContainer",value:function(e){this._container=e,this.fire(Ny,this._container)}},{key:"_set",value:function(e,n,o){var a=[{el:"source",elId:"sourceId"},{el:"target",elId:"targetId"}],l,u=a[o],c=e[u.elId],h,d=e.endpoints[o],p={index:o,originalEndpoint:d,originalSourceId:o===0?c:e.sourceId,newSourceId:e.sourceId,originalTargetId:o===1?c:e.targetId,newTargetId:e.targetId,connection:e,newEndpoint:d};return n instanceof Vn?(l=n,l.addConnection(e)):(h=this.getId(n),h===e[u.elId]?l=null:l=e.makeEndpoint(o===0,n,h)),l!=null&&(p.newEndpoint=l,d.detachFromConnection(e),e.endpoints[o]=l,e[u.el]=l.element,e[u.elId]=l.elementId,p[o===0?"newSourceId":"newTargetId"]=l.elementId,this.fireMoveEvent(p),this._paintConnection(e)),p}},{key:"setSource",value:function(e,n){Pr(e,this._managedElements[e.sourceId]);var o=this._set(e,n,0);Sr(e,this._managedElements[o.newSourceId])}},{key:"setTarget",value:function(e,n){Pr(e,this._managedElements[e.targetId]);var o=this._set(e,n,1);Sr(e,this._managedElements[o.newTargetId])}},{key:"setConnectionType",value:function(e,n,o){e.setType(n,o),this._paintConnection(e)}},{key:"isHoverSuspended",value:function(){return this.hoverSuspended}},{key:"setSuspendDrawing",value:function(e,n){var o=this._suspendDrawing;return this._suspendDrawing=e,e?this._suspendedAt=""+new Date().getTime():(this._suspendedAt=null,this.viewport.recomputeBounds()),n&&this.repaintEverything(),o}},{key:"getSuspendedAt",value:function(){return this._suspendedAt}},{key:"batch",value:function(e,n){var o=this._suspendDrawing===!0;o||this.setSuspendDrawing(!0),e(),o||this.setSuspendDrawing(!1,!n)}},{key:"each",value:function(e,n){if(e!=null){if(e.length!=null)for(var o=0;o<e.length;o++)n(e[o]);else n(e);return this}}},{key:"updateOffset",value:function(e){var n=e.elId;return e.recalc?this.viewport.refreshElement(n):this.viewport.getPosition(n)}},{key:"deleteConnection",value:function(e,n){if(e!=null&&e.deleted!==!0&&(n=n||{},n.force||nh(!0,!1,[[e.endpoints[0],Kn,[e]],[e.endpoints[1],Kn,[e]],[e,Kn,[e]],[this,dh,[xh,e]]]))){Pr(e,this._managedElements[e.sourceId],this._managedElements[e.targetId]),this.fireDetachEvent(e,!e.pending&&n.fireEvent!==!1,n.originalEvent);var o=e.endpoints[0],a=e.endpoints[1];return o!==n.endpointToIgnore&&o.detachFromConnection(e,null,!0),a!==n.endpointToIgnore&&a.detachFromConnection(e,null,!0),Oe(this.connections,function(l){return e.id===l.id}),e.destroy(),o!==n.endpointToIgnore&&o.deleteOnEmpty&&o.connections.length===0&&this.deleteEndpoint(o),a!==n.endpointToIgnore&&a.deleteOnEmpty&&a.connections.length===0&&this.deleteEndpoint(a),!0}return!1}},{key:"deleteEveryConnection",value:function(e){var n=this;e=e||{};var o=this.connections.length,a=0;return this.batch(function(){for(var l=0;l<o;l++)a+=n.deleteConnection(n.connections[0],e)?1:0}),a}},{key:"deleteConnectionsForElement",value:function(e,n){var o=this.getId(e),a=this._managedElements[o];if(a)for(var l=a.connections.length,u=0;u<l;u++)this.deleteConnection(a.connections[0],n);return this}},{key:"fireDetachEvent",value:function(e,n,o){var a=e.id!=null,l=a?{connection:e,source:e.source,target:e.target,sourceId:e.sourceId,targetId:e.targetId,sourceEndpoint:e.endpoints[0],targetEndpoint:e.endpoints[1]}:e;n&&this.fire(Ly,l,o),this.fire(ba,l,o)}},{key:"fireMoveEvent",value:function(e,n){this.fire(gh,e,n)}},{key:"manageAll",value:function(e,n){for(var o=Ee(e)?this.getSelector(this.getContainer(),e):e,a=0;a<o.length;a++)this.manage(o[a],null,n)}},{key:"manage",value:function(e,n,o){this.getAttribute(e,zt)==null&&(n=n||this.getAttribute(e,"id")||Se(),this.setAttribute(e,zt,n));var a=this.getId(e);if(this._managedElements[a])o&&(this._managedElements[a].viewportElement=this.updateOffset({elId:a,timestamp:null,recalc:!0}));else{var l={el:e,endpoints:[],connections:[],rotation:0,data:{}};this._managedElements[a]=l,this._suspendDrawing?l.viewportElement=this.viewport.registerElement(a,!0):l.viewportElement=this.updateOffset({elId:a,recalc:!0}),this.fire(mh,{el:e})}return this._managedElements[a]}},{key:"getManagedData",value:function(e,n,o){if(this._managedElements[e]){var a=this._managedElements[e].data[n];return a!=null?a[o]:null}}},{key:"setManagedData",value:function(e,n,o,a){this._managedElements[e]&&(this._managedElements[e].data[n]=this._managedElements[e].data[n]||{},this._managedElements[e].data[n][o]=a)}},{key:"getManagedElement",value:function(e){return this._managedElements[e]?this._managedElements[e].el:null}},{key:"unmanage",value:function(e,n){var o=this;this.removeAllEndpoints(e,!0);var a=function(u){var c=o.getId(u);o.removeAttribute(u,zt),delete o._managedElements[c],o.viewport.remove(c),o.fire(Eh,{el:u,id:c}),u&&n&&o._removeElement(u)};this._getAssociatedElements(e).map(a),a(e)}},{key:"rotate",value:function(e,n,o){var a=this.getId(e);return this._managedElements[a]&&(this._managedElements[a].rotation=n,this.viewport.rotateElement(a,n),o!==!0)?this.revalidate(e):{c:new Set,e:new Set}}},{key:"_getRotation",value:function(e){var n=this._managedElements[e];return n!=null&&n.rotation||0}},{key:"_getRotations",value:function(e){var n=this,o=[],a=this._managedElements[e],l=function u(c){if(c.group!=null){var h=n._managedElements[c.group];h!=null&&(o.push({r:h.viewportElement.r,c:h.viewportElement.c}),u(h))}};return a!=null&&(o.push({r:a.viewportElement.r||0,c:a.viewportElement.c}),l(a)),o}},{key:"_applyRotations",value:function(e,n){var o=e.slice(),a={x:o[0],y:o[1],cr:0,sr:0};return X(n,function(l){a=ts(a,l.c,l.r)}),a}},{key:"_applyRotationsXY",value:function(e,n){return X(n,function(o){e=ts(e,o.c,o.r)}),e}},{key:"_internal_newEndpoint",value:function(e){var n=U({},e),o=this.manage(n.element);n.elementId=this.getId(n.element),n.id="ep_"+this._idstamp();var a=new Vn(this,n);return j0(o,a),e.uuid&&this.endpointsByUUID.set(e.uuid,a),rh(this.endpointsByElement,a.elementId,a),this._suspendDrawing||this._paintEndpoint(a,{timestamp:this._suspendedAt}),a}},{key:"_deriveEndpointAndAnchorSpec",value:function(e,n){for(var o=((n?"":"default ")+e).split(/[\s]/),a=null,l=null,u=null,c=null,h=0;h<o.length;h++){var d=this.getConnectionType(o[h]);d&&(d.endpoints&&(a=d.endpoints),d.endpoint&&(l=d.endpoint),d.anchors&&(c=d.anchors),d.anchor&&(u=d.anchor))}return{endpoints:a||[l,l],anchors:c||[u,u]}}},{key:"revalidate",value:function(e,n){var o=this.getId(e);return this.updateOffset({elId:o,recalc:!0,timestamp:n}),this.repaint(e)}},{key:"repaintEverything",value:function(){var e=Se(),n;for(n in this._managedElements)this.viewport.refreshElement(n,!0);this.viewport.recomputeBounds();for(n in this._managedElements)this.repaint(this._managedElements[n].el,e,!0);return this}},{key:"setElementPosition",value:function(e,n,o){var a=this.getId(e);return this.viewport.setPosition(a,n,o),this.repaint(e)}},{key:"repaint",value:function(e,n,o){var a={c:new Set,e:new Set},l=function(g){g.c.forEach(function(y){return a.c.add(y)}),g.e.forEach(function(y){return a.e.add(y)})};if(!this._suspendDrawing){var u=this.getId(e);if(e!=null){var c=this._getAssociatedElements(e);if(n==null&&(n=Se()),!o)for(var h=0;h<c.length;h++)this.updateOffset({elId:this.getId(c[h]),recalc:!0,timestamp:n});if(l(this.router.redraw(u,n,null)),c.length>0)for(var d=0;d<c.length;d++)l(this.router.redraw(this.getId(c[d]),n,null))}}return a}},{key:"unregisterEndpoint",value:function(e){var n=e.getUuid();n&&this.endpointsByUUID.delete(n),B0(this._managedElements[e.elementId],e);var o=this.endpointsByElement[e.elementId];o!=null&&(this.endpointsByElement[e.elementId]=o.filter(function(a){return a!==e})),this.fire(yh,e)}},{key:"_maybePruneEndpoint",value:function(e){return e.deleteOnEmpty&&e.connections.length===0?(this.deleteEndpoint(e),!0):!1}},{key:"deleteEndpoint",value:function(e){var n=this,o=typeof e=="string"?this.endpointsByUUID.get(e):e;if(o){var a=o.proxiedBy,l=o.connections.slice();X(l,function(u){o.detachFromConnection(u,null,!0)}),this.unregisterEndpoint(o),o.destroy(),X(l,function(u){n.deleteConnection(u,{force:!0,endpointToIgnore:o})}),a!=null&&this.deleteEndpoint(a)}return this}},{key:"addEndpoint",value:function(e,n,o){o=o||{};var a=U({},o);U(a,n||{});var l=U({element:e},a);return this._internal_newEndpoint(l)}},{key:"addEndpoints",value:function(e,n,o){for(var a=[],l=0,u=n.length;l<u;l++)a.push(this.addEndpoint(e,n[l],o));return a}},{key:"reset",value:function(){var e=this;this.silently(function(){e.endpointsByElement={},e._managedElements={},e.endpointsByUUID.clear(),e.viewport.reset(),e.router.reset(),e.groupManager.reset(),e.connections.length=0})}},{key:"destroy",value:function(){this.reset(),this.unbind(),this.sourceSelectors.length=0,this.targetSelectors.length=0,this._connectionTypes.clear(),this._endpointTypes.clear()}},{key:"getEndpoints",value:function(e){return this.endpointsByElement[this.getId(e)]||[]}},{key:"getEndpoint",value:function(e){return this.endpointsByUUID.get(e)}},{key:"setEndpointUuid",value:function(e,n){e.uuid&&this.endpointsByUUID.delete(e.uuid),e.uuid=n,this.endpointsByUUID.set(n,e)}},{key:"connect",value:function(e,n){try{var o=this._prepareConnectionParams(e,n),a=this._newConnection(o);return this._finaliseConnection(a,o),a}catch(l){xe(l);return}}},{key:"_prepareConnectionParams",value:function(e,n){var o=U({},e);n&&U(o,n);var a=o;if(a.source&&a.source.endpoint&&(a.sourceEndpoint=a.source),a.target&&a.target.endpoint&&(a.targetEndpoint=a.target),e.uuids&&(a.sourceEndpoint=this.getEndpoint(e.uuids[0]),a.targetEndpoint=this.getEndpoint(e.uuids[1])),a.sourceEndpoint!=null){if(a.sourceEndpoint.isFull())throw Wy;if(a.type||(a.type=a.sourceEndpoint.edgeType),a.sourceEndpoint.connectorOverlays){a.overlays=a.overlays||[];for(var l=0,u=a.sourceEndpoint.connectorOverlays.length;l<u;l++)a.overlays.push(a.sourceEndpoint.connectorOverlays[l])}a.sourceEndpoint.scope&&(a.scope=a.sourceEndpoint.scope)}else if(a.source==null)throw qy;if(a.targetEndpoint!=null){if(a.targetEndpoint.isFull())throw zy}else if(a.target==null)throw Ky;if(a.sourceEndpoint&&a.targetEndpoint&&!G0(a.sourceEndpoint,a.targetEndpoint))throw"Cannot establish connection: scopes do not match";return a}},{key:"_newConnection",value:function(e){e.id="con_"+this._idstamp();var n=new er(this,e);return Sr(n,this._managedElements[n.sourceId],this._managedElements[n.targetId]),this._paintConnection(n),n}},{key:"_finaliseConnection",value:function(e,n,o){n=n||{},e.suspendedEndpoint||this.connections.push(e),e.pending=null,e.endpoints[0].isTemporarySource=!1,this.repaint(e.source);var a={connection:e,source:e.source,target:e.target,sourceId:e.sourceId,targetId:e.targetId,sourceEndpoint:e.endpoints[0],targetEndpoint:e.endpoints[1]};this.fire(vh,a,o),!n.doNotFireConnectionEvent&&n.fireEvent!==!1&&this.fire(ph,a,o)}},{key:"removeAllEndpoints",value:function(e,n){var o=this,a=function(u){var c=o.getId(u),h=o.endpointsByElement[c],d,p;if(h)for(d=0,p=h.length;d<p;d++)o.deleteEndpoint(h[d]);delete o.endpointsByElement[c]};return n&&this._getAssociatedElements(e).map(a),a(e),this}},{key:"_createSourceDefinition",value:function(e,n){var o=U({},n);U(o,e),o.edgeType=o.edgeType||ss;var a=this._deriveEndpointAndAnchorSpec(o.edgeType);o.endpoint=o.endpoint||a.endpoints[0],o.anchor=o.anchor||a.anchors[0];var l=o.maxConnections||-1,u={def:U({},o),uniqueEndpoint:o.uniqueEndpoint,maxConnections:l,enabled:!0,endpoint:null};return u}},{key:"addSourceSelector",value:function(e,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=this._createSourceDefinition(n),l=new au(e,a,o);return this.sourceSelectors.push(l),l}},{key:"removeSourceSelector",value:function(e){Oe(this.sourceSelectors,function(n){return n===e})}},{key:"removeTargetSelector",value:function(e){Oe(this.targetSelectors,function(n){return n===e})}},{key:"addTargetSelector",value:function(e,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=this._createTargetDefinition(n),l=new au(e,a,o);return this.targetSelectors.push(l),l}},{key:"_createTargetDefinition",value:function(e,n){var o=U({},n);U(o,e),o.edgeType=o.edgeType||ss;var a=o.maxConnections||-1,l={def:U({},o),uniqueEndpoint:o.uniqueEndpoint,maxConnections:a,enabled:!0,endpoint:null};return l}},{key:"show",value:function(e,n){return this._setVisible(e,Ao,n)}},{key:"hide",value:function(e,n){return this._setVisible(e,ri,n)}},{key:"_setVisible",value:function(e,n,o){var a=n===Ao,l=null;o&&(l=function(h){h.setVisible(a,!0,!0)});var u=this.getId(e);return this._operation(e,function(c){if(a&&o){var h=c.sourceId===u?1:0;c.endpoints[h].isVisible()&&c.setVisible(!0)}else c.setVisible(a)},l),this}},{key:"toggleVisible",value:function(e,n){var o=null;n&&(o=function(l){var u=l.isVisible();l.setVisible(!u)}),this._operation(e,function(a){var l=a.isVisible();a.setVisible(!l)},o)}},{key:"_operation",value:function(e,n,o){var a=this.getId(e),l=this.endpointsByElement[a];if(l&&l.length)for(var u=0,c=l.length;u<c;u++){for(var h=0,d=l[u].connections.length;h<d;h++){var p=n(l[u].connections[h]);if(p)return}o&&o(l[u])}}},{key:"registerConnectionType",value:function(e,n){if(this._connectionTypes.set(e,U({},n)),n.overlays){for(var o={},a=0;a<n.overlays.length;a++){var l=Lo(n.overlays[a]);o[l.options.id]=l}this._connectionTypes.get(e).overlays=o}}},{key:"registerConnectionTypes",value:function(e){for(var n in e)this.registerConnectionType(n,e[n])}},{key:"registerEndpointType",value:function(e,n){if(this._endpointTypes.set(e,U({},n)),n.overlays){for(var o={},a=0;a<n.overlays.length;a++){var l=Lo(n.overlays[a]);o[l.options.id]=l}this._endpointTypes.get(e).overlays=o}}},{key:"registerEndpointTypes",value:function(e){for(var n in e)this.registerEndpointType(n,e[n])}},{key:"getType",value:function(e,n){return n==="connection"?this.getConnectionType(e):this.getEndpointType(e)}},{key:"getConnectionType",value:function(e){return this._connectionTypes.get(e)}},{key:"getEndpointType",value:function(e){return this._endpointTypes.get(e)}},{key:"importDefaults",value:function(e){for(var n in e)this.defaults[n]=e[n];return this.defaults[Fn]!=null&&(this.defaults[Fn].strokeWidth=this.defaults[Fn].strokeWidth||2),e.container&&this.setContainer(e.container),this}},{key:"restoreDefaults",value:function(){return this.defaults=U({},this._initialDefaults),this}},{key:"getManagedElements",value:function(){return this._managedElements}},{key:"proxyConnection",value:function(e,n,o,a,l){var u=e.proxies[n]!=null,c,h=u?e.proxies[n].originalEp.elementId:e.endpoints[n].elementId,d=u?e.proxies[n].originalEp:e.endpoints[n],p=this.getId(o);e.proxies[n]?e.proxies[n].ep.elementId===p?c=e.proxies[n].ep:(e.proxies[n].ep.detachFromConnection(e,n),c=this._internal_newEndpoint({element:o,endpoint:a(e,n),anchor:l(e,n),parameters:{isProxyEndpoint:!0}})):c=this._internal_newEndpoint({element:o,endpoint:a(e,n),anchor:l(e,n),parameters:{isProxyEndpoint:!0}}),c.deleteOnEmpty=!0,e.proxies[n]={ep:c,originalEp:d},this.sourceOrTargetChanged(h,p,e,o,n),d.detachFromConnection(e,null,!0),c.connections=[e],e.endpoints[n]=c,d.proxiedBy=c,d.setVisible(!1),e.setVisible(!0),this.revalidate(o)}},{key:"unproxyConnection",value:function(e,n){if(!(e.proxies==null||e.proxies[n]==null)){var o=e.proxies[n].originalEp.element,a=e.proxies[n].originalEp.elementId,l=e.proxies[n].ep.elementId;e.endpoints[n]=e.proxies[n].originalEp,delete e.proxies[n].originalEp.proxiedBy,this.sourceOrTargetChanged(l,a,e,o,n),e.proxies[n].ep.detachFromConnection(e,null),e.proxies[n].originalEp.addConnection(e),e.isVisible()&&e.proxies[n].originalEp.setVisible(!0),e.proxies[n]=null,tn(e.proxies,function(u){return u!=null})===-1&&(e.proxies.length=0)}}},{key:"sourceOrTargetChanged",value:function(e,n,o,a,l){e!==n&&(l===0?(o.sourceId=n,o.source=a):l===1&&(o.targetId=n,o.target=a),Pr(o,this._managedElements[e]),Sr(o,this._managedElements[n]))}},{key:"getGroup",value:function(e){return this.groupManager.getGroup(e)}},{key:"getGroupFor",value:function(e){return this.groupManager.getGroupFor(e)}},{key:"addGroup",value:function(e){return this.groupManager.addGroup(e)}},{key:"addToGroup",value:function(e){for(var n,o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return(n=this.groupManager).addToGroup.apply(n,[e,!1].concat(a))}},{key:"collapseGroup",value:function(e){this.groupManager.collapseGroup(e)}},{key:"expandGroup",value:function(e){this.groupManager.expandGroup(e)}},{key:"toggleGroup",value:function(e){this.groupManager.toggleGroup(e)}},{key:"removeGroup",value:function(e,n,o,a){return this.groupManager.removeGroup(e,n,o,a)}},{key:"removeAllGroups",value:function(e,n){this.groupManager.removeAllGroups(e,n,!1)}},{key:"removeFromGroup",value:function(e,n,o){this.groupManager.removeFromGroup(e,o,n),this._appendElement(n,this.getContainer()),this.updateOffset({recalc:!0,elId:this.getId(n)})}},{key:"_paintEndpoint",value:function(e,n){function o(C){var S=0;if(n.elementWithPrecedence!=null){for(var N=0;N<C.connections.length;N++)if(C.connections[N].sourceId===n.elementWithPrecedence||C.connections[N].targetId===n.elementWithPrecedence){S=N;break}}return C.connections[S]}n=n||{};var a=n.timestamp,l=n.recalc!==!1;if(!a||e.timestamp!==a){var u=this.viewport.getPosition(e.elementId),c=n.offset?{x:n.offset.x,y:n.offset.y}:{x:u.x,y:u.y};if(c!=null){var h=n.anchorLoc;if(h==null){var d={xy:c,wh:u,element:e,timestamp:a};if(l&&this.router.isDynamicAnchor(e)&&e.connections.length>0){var p=o(e),g=p.endpoints[0]===e?1:0,y=g===0?p.sourceId:p.targetId,m=this.viewport.getPosition(y);d.index=g===0?1:0,d.connection=p,d.txy=m,d.twh=m,d.tElement=p.endpoints[g],d.tRotation=this._getRotations(y)}else e.connections.length>0&&(d.connection=e.connections[0]);d.rotation=this._getRotations(e.elementId),h=this.router.computeAnchorLocation(e._anchor,d)}e.endpoint.compute(h,this.router.getEndpointOrientation(e),e.paintStyleInUse),this.renderEndpoint(e,e.paintStyleInUse),e.timestamp=a;for(var E in e.overlays)if(e.overlays.hasOwnProperty(E)){var b=e.overlays[E];b.isVisible()&&(e.overlayPlacements[E]=this.drawOverlay(b,e.endpoint,e.paintStyleInUse,e.getAbsoluteOverlayPosition(b)),this._paintOverlay(b,e.overlayPlacements[E],{xmin:0,ymin:0}))}}}}},{key:"_paintConnection",value:function(e,n){if(!this._suspendDrawing&&e.visible!==!1){n=n||{};var o=n.timestamp;if(o!=null&&o===e.lastPaintedAt)return;if(o==null||o!==e.lastPaintedAt){this.router.computePath(e,o);var a={xmin:1/0,ymin:1/0,xmax:-1/0,ymax:-1/0};for(var l in e.overlays)if(e.overlays.hasOwnProperty(l)){var u=e.overlays[l];u.isVisible()&&(e.overlayPlacements[l]=this.drawOverlay(u,e.connector,e.paintStyleInUse,e.getAbsoluteOverlayPosition(u)),a.xmin=Math.min(a.xmin,e.overlayPlacements[l].xmin),a.xmax=Math.max(a.xmax,e.overlayPlacements[l].xmax),a.ymin=Math.min(a.ymin,e.overlayPlacements[l].ymin),a.ymax=Math.max(a.ymax,e.overlayPlacements[l].ymax))}var c=parseFloat(""+e.paintStyleInUse.strokeWidth||"1")/2,h=parseFloat(""+e.paintStyleInUse.strokeWidth||"0"),d={xmin:Math.min(e.connector.bounds.xmin-(c+h),a.xmin),ymin:Math.min(e.connector.bounds.ymin-(c+h),a.ymin),xmax:Math.max(e.connector.bounds.xmax+(c+h),a.xmax),ymax:Math.max(e.connector.bounds.ymax+(c+h),a.ymax)};this.paintConnector(e.connector,e.paintStyleInUse,d);for(var p in e.overlays)if(e.overlays.hasOwnProperty(p)){var g=e.overlays[p];g.isVisible()&&this._paintOverlay(g,e.overlayPlacements[p],d)}}e.lastPaintedAt=o}}},{key:"_refreshEndpoint",value:function(e){e._anchor.isFloating||(e.connections.length>0?this.addEndpointClass(e,this.endpointConnectedClass):this.removeEndpointClass(e,this.endpointConnectedClass),e.isFull()?this.addEndpointClass(e,this.endpointFullClass):this.removeEndpointClass(e,this.endpointFullClass))}},{key:"_makeConnector",value:function(e,n,o){return ar.get(e,n,o)}},{key:"addOverlay",value:function(e,n,o){if(e.addOverlay(n),!o){var a=e instanceof Vn?e.element:e.source;this.revalidate(a)}}},{key:"removeOverlay",value:function(e,n){e.removeOverlay(n);var o=e instanceof Vn?e.element:e.source;this.revalidate(o)}},{key:"setOutlineColor",value:function(e,n){e.paintStyleInUse.outlineStroke=n,this._paintConnection(e)}},{key:"setOutlineWidth",value:function(e,n){e.paintStyleInUse.outlineWidth=n,this._paintConnection(e)}},{key:"setColor",value:function(e,n){e.paintStyleInUse.stroke=n,this._paintConnection(e)}},{key:"setLineWidth",value:function(e,n){e.paintStyleInUse.strokeWidth=n,this._paintConnection(e)}},{key:"setLineStyle",value:function(e,n){n.lineWidth!=null&&(e.paintStyleInUse.strokeWidth=n.lineWidth),n.outlineWidth!=null&&(e.paintStyleInUse.outlineWidth=n.outlineWidth),n.color!=null&&(e.paintStyleInUse.stroke=n.color),n.outlineColor!=null&&(e.paintStyleInUse.outlineStroke=n.outlineColor),this._paintConnection(e)}},{key:"getPathData",value:function(e){for(var n="",o=0;o<e.segments.length;o++)n+=e.segments[o].getPath(o===0),n+=" ";return n}}]),i}(or),zh={};function Na(t,s){zh[t]=s}function Pu(t,s,i){var r=s,e=zn(s.getBoundingClientRect)!==Th?s.getBoundingClientRect():{left:0,top:0,width:0,height:0},n=document.body,o=document.documentElement,a=window.pageYOffset||o.scrollTop||n.scrollTop,l=window.pageXOffset||o.scrollLeft||n.scrollLeft,u=o.clientTop||n.clientTop||0,c=o.clientLeft||n.clientLeft||0,h=0,d=0,p=e.top+a-u+h*i,g=e.left+l-c+d*i,y=os(t),m=e.width||r.offsetWidth*i,E=e.height||r.offsetHeight*i,b=(y.x-g)/m,C=(y.y-p)/E;return{x:b,y:C}}function jn(t){return No(t)||Ro(t)||Fo(t)}function ku(t,s){t.canvas&&(t.canvas.style.display=s?"block":"none")}function Tu(t){t.canvas&&t.canvas.parentNode.removeChild(t.canvas),delete t.canvas}function Ai(t){return t.canvas}function ut(t){return Ia.getElement(t)}function hn(t){return Ia.getElement(t,t.component,function(s){var i=t.create(s);return t.instance.addClass(i,t.instance.overlayClass),i})}function U0(t,s,i,r){var e=t.x,n=t.y;return s._jsPlumbParentGroup&&s._jsPlumbParentGroup.constrain&&(e=Math.max(t.x,0),n=Math.max(t.y,0),e=Math.min(e,i.w-r.w),n=Math.min(n,i.h-r.h)),{x:e,y:n}}var V0=function(t){oe(i,t);var s=ae(i);function i(r,e){var n;if(H(this,i),n=s.call(this,r,e),n._instanceIndex=r,f(v(n),"containerType",null),f(v(n),"dragSelection",void 0),f(v(n),"dragManager",void 0),f(v(n),"_connectorClick",void 0),f(v(n),"_connectorDblClick",void 0),f(v(n),"_connectorTap",void 0),f(v(n),"_connectorDblTap",void 0),f(v(n),"_endpointClick",void 0),f(v(n),"_endpointDblClick",void 0),f(v(n),"_overlayClick",void 0),f(v(n),"_overlayDblClick",void 0),f(v(n),"_overlayTap",void 0),f(v(n),"_overlayDblTap",void 0),f(v(n),"_connectorMouseover",void 0),f(v(n),"_connectorMouseout",void 0),f(v(n),"_endpointMouseover",void 0),f(v(n),"_endpointMouseout",void 0),f(v(n),"_connectorContextmenu",void 0),f(v(n),"_connectorMousedown",void 0),f(v(n),"_connectorMouseup",void 0),f(v(n),"_endpointMousedown",void 0),f(v(n),"_endpointMouseup",void 0),f(v(n),"_overlayMouseover",void 0),f(v(n),"_overlayMouseout",void 0),f(v(n),"_elementClick",void 0),f(v(n),"_elementTap",void 0),f(v(n),"_elementDblTap",void 0),f(v(n),"_elementMouseenter",void 0),f(v(n),"_elementMouseexit",void 0),f(v(n),"_elementMousemove",void 0),f(v(n),"_elementMouseup",void 0),f(v(n),"_elementMousedown",void 0),f(v(n),"_elementContextmenu",void 0),f(v(n),"_resizeObserver",void 0),f(v(n),"eventManager",void 0),f(v(n),"draggingClass","jtk-dragging"),f(v(n),"elementDraggingClass","jtk-element-dragging"),f(v(n),"hoverClass","jtk-hover"),f(v(n),"sourceElementDraggingClass","jtk-source-element-dragging"),f(v(n),"targetElementDraggingClass","jtk-target-element-dragging"),f(v(n),"hoverSourceClass","jtk-source-hover"),f(v(n),"hoverTargetClass","jtk-target-hover"),f(v(n),"dragSelectClass","jtk-drag-select"),f(v(n),"managedElementsSelector",void 0),f(v(n),"elementsDraggable",void 0),f(v(n),"elementDragHandler",void 0),f(v(n),"groupDragOptions",void 0),f(v(n),"elementDragOptions",void 0),f(v(n),"svg",{node:function(a,l){return Gt(a,l)},attr:function(a,l){return Ft(a,l)},pos:function(a){return Ph(a)}}),e=e||{},n.containerType=ko(n.getContainer()),n.elementsDraggable=e&&e.elementsDraggable!==!1,n.managedElementsSelector=e&&e.managedElementsSelector||ve,n.eventManager=new ka,n.dragSelection=new x_(v(n)),n.dragManager=new O_(v(n),n.dragSelection),n.dragManager.addHandler(new uu(v(n))),n.groupDragOptions={constrainFunction:U0},n.dragManager.addHandler(new cu(v(n),n.dragSelection),n.groupDragOptions),n.elementDragHandler=new Io(v(n),n.dragSelection),n.elementDragOptions=e&&e.dragOptions||{},n.dragManager.addHandler(n.elementDragHandler,n.elementDragOptions),e&&e.dragOptions&&e.dragOptions.filter&&n.dragManager.addFilter(e.dragOptions.filter),n._createEventListeners(),n._attachEventDelegates(),e.resizeObserver!==!1)try{n._resizeObserver=new ResizeObserver(function(o){var a=o.filter(function(l){var u=n.getAttribute(l.target,zt);if(u!=null){var c=n.viewport._elementMap.get(u);return c?c.w!==l.contentRect.width||c.h!==l.contentRect.height:!1}else return!1});a.forEach(function(l){return n.revalidate(l.target)})})}catch{xe("WARN: ResizeObserver could not be attached.")}return n}return z(i,[{key:"fireOverlayMethod",value:function(e,n,o){var a=e.component instanceof er?At:Bt,l=ce(a,n);o._jsPlumbOverlay=e,e.fire(n,{e:o,overlay:e}),this.fire(l,e.component,o)}},{key:"addDragFilter",value:function(e,n){this.dragManager.addFilter(e,n)}},{key:"removeDragFilter",value:function(e){this.dragManager.removeFilter(e)}},{key:"setDragGrid",value:function(e){this.dragManager.setOption(this.elementDragHandler,{grid:e})}},{key:"setDragConstrainFunction",value:function(e){this.dragManager.setOption(this.elementDragHandler,{constrainFunction:e})}},{key:"_removeElement",value:function(e){e.parentNode&&e.parentNode.removeChild(e)}},{key:"_appendElement",value:function(e,n){n&&n.appendChild(e)}},{key:"_appendElementToGroup",value:function(e,n){this.getGroupContentArea(e).appendChild(n)}},{key:"_appendElementToContainer",value:function(e){this._appendElement(e,this.getContainer())}},{key:"_getAssociatedElements",value:function(e){var n=[];if(e.nodeType!==3&&e.nodeType!==8){var o=e.querySelectorAll(ve);Array.prototype.push.apply(n,o)}return n.filter(function(a){return a.nodeType!==3&&a.nodeType!==8})}},{key:"shouldFireEvent",value:function(e,n,o){return!0}},{key:"getClass",value:function(e){return vy(e)}},{key:"addClass",value:function(e,n){pn(e,n)}},{key:"hasClass",value:function(e,n){return gy(e,n)}},{key:"removeClass",value:function(e,n){Po(e,n)}},{key:"toggleClass",value:function(e,n){yy(e,n)}},{key:"setAttribute",value:function(e,n,o){e.setAttribute(n,o)}},{key:"getAttribute",value:function(e,n){return e.getAttribute(n)}},{key:"setAttributes",value:function(e,n){for(var o in n)e.setAttribute(o,n[o])}},{key:"removeAttribute",value:function(e,n){e.removeAttribute&&e.removeAttribute(n)}},{key:"on",value:function(e,n,o,a){var l=this,u=function(h){a==null?l.eventManager.on(h,n,o):l.eventManager.on(h,n,o,a)};return Ki(e)?X(e,function(c){return u(c)}):u(e),this}},{key:"off",value:function(e,n,o){var a=this;return Ki(e)?X(e,function(l){return a.eventManager.off(l,n,o)}):this.eventManager.off(e,n,o),this}},{key:"trigger",value:function(e,n,o,a,l){this.eventManager.trigger(e,n,o,a,l)}},{key:"getOffsetRelativeToRoot",value:function(e){return Hn(e)}},{key:"getOffset",value:function(e){for(var n=e,o=this.getContainer(),a=this.getPosition(n),l=e!==o&&n.offsetParent!==o?n.offsetParent:null,u=function(p){p!=null&&p!==document.body&&(p.scrollTop>0||p.scrollLeft>0)&&(a.x-=p.scrollLeft,a.y-=p.scrollTop)};l!=null;)a.x+=l.offsetLeft,a.y+=l.offsetTop,u(l),l=l.offsetParent===o?null:l.offsetParent;if(o!=null&&(o.scrollTop>0||o.scrollLeft>0)){var c=n.offsetParent!=null?this.getStyle(n.offsetParent,Wl):xy,h=this.getStyle(n,Wl);h!==Ji&&h!==Gl&&c!==Ji&&c!==Gl&&(a.x-=o.scrollLeft,a.y-=o.scrollTop)}return a}},{key:"getSize",value:function(e){var n=e;if(n.offsetWidth!=null)return my(e);if(n.width&&n.width.baseVal)return _y(n)}},{key:"getPosition",value:function(e){var n=e;if(n.offsetLeft!=null)return{x:parseFloat(n.offsetLeft),y:parseFloat(n.offsetTop)};if(n.x&&n.x.baseVal)return Ey(n)}},{key:"getStyle",value:function(e,n){return zn(window.getComputedStyle)!==Th?getComputedStyle(e,null).getPropertyValue(n):e.currentStyle[n]}},{key:"getGroupContentArea",value:function(e){var n=this.getSelector(e.el,Lm);return n&&n.length>0?n[0]:e.el}},{key:"getSelector",value:function(e,n){var o=null;if(arguments.length===1){if(!Ee(e)){var a=document.createDocumentFragment();return a.appendChild(e),gr(a.childNodes)}o=gr(document.querySelectorAll(e))}else o=gr(e.querySelectorAll(n));return o}},{key:"setPosition",value:function(e,n){var o=e;o.style.left=n.x+"px",o.style.top=n.y+"px"}},{key:"setDraggable",value:function(e,n){n?this.removeAttribute(e,Gr):this.setAttribute(e,Gr,Ah)}},{key:"isDraggable",value:function(e){var n=this.getAttribute(e,Gr);return n==null||n===Un}},{key:"toggleDraggable",value:function(e){var n=this.isDraggable(e);return this.setDraggable(e,!n),!n}},{key:"_createEventListeners",value:function(){var e=function(E,b){if(!b.defaultPrevented&&b._jsPlumbOverlay==null){var C=Dt(We(b),lt,this.getContainer(),!0);this.fire(E,C.jtk.connector.connection,b)}};this._connectorClick=e.bind(this,Sm),this._connectorDblClick=e.bind(this,Pm),this._connectorTap=e.bind(this,Mm),this._connectorDblTap=e.bind(this,km);var n=function(E,b){var C=We(b).parentNode;if(C.jtk&&C.jtk.connector){var S=C.jtk.connector,N=S.connection;this.setConnectorHover(S,E),E?(this.addClass(N.source,this.hoverSourceClass),this.addClass(N.target,this.hoverTargetClass)):(this.removeClass(N.source,this.hoverSourceClass),this.removeClass(N.target,this.hoverTargetClass)),this.fire(E?Am:Tm,C.jtk.connector.connection,b)}};this._connectorMouseover=n.bind(this,!0),this._connectorMouseout=n.bind(this,!1);var o=function(E,b){var C=We(b).parentNode;C.jtk&&C.jtk.connector&&this.fire(E?Om:wm,C.jtk.connector.connection,b)};this._connectorMouseup=o.bind(this,!0),this._connectorMousedown=o.bind(this,!1),this._connectorContextmenu=function(m){var E=We(m).parentNode;E.jtk&&E.jtk.connector&&this.fire(Dm,E.jtk.connector.connection,m)}.bind(this);var a=function(E,b,C){!b.defaultPrevented&&b._jsPlumbOverlay==null&&this.fire(E,C.jtk.endpoint,b)};this._endpointClick=a.bind(this,mm),this._endpointDblClick=a.bind(this,_m);var l=function(E,b){var C=We(b);C.jtk&&C.jtk.endpoint&&(this.setEndpointHover(C.jtk.endpoint,E),this.fire(E?bm:Em,C.jtk.endpoint,b))};this._endpointMouseover=l.bind(this,!0),this._endpointMouseout=l.bind(this,!1);var u=function(E,b){var C=We(b);C.jtk&&C.jtk.endpoint&&this.fire(E?Cm:xm,C.jtk.endpoint,b)};this._endpointMouseup=u.bind(this,!0),this._endpointMousedown=u.bind(this,!1);var c=function(m,E){var b=Dt(We(E),Ot,this.getContainer(),!0),C=b.jtk.overlay;C&&this.fireOverlayMethod(C,m,E)}.bind(this);this._overlayClick=c.bind(this,je),this._overlayDblClick=c.bind(this,ze),this._overlayTap=c.bind(this,nt),this._overlayDblTap=c.bind(this,Qe);var h=function(E,b){var C=Dt(We(b),Ot,this.getContainer(),!0),S=C.jtk.overlay;S&&this.setOverlayHover(S,E)};this._overlayMouseover=h.bind(this,!0),this._overlayMouseout=h.bind(this,!1);var d=function(E,b,C){b.defaultPrevented||this.fire(b.detail===1?Yl:hm,C,b)};this._elementClick=d.bind(this,Yl);var p=function(E,b,C){b.defaultPrevented||this.fire($l,C,b)};this._elementTap=p.bind(this,$l);var g=function(E,b,C){b.defaultPrevented||this.fire(Xl,C,b)};this._elementDblTap=g.bind(this,Xl);var y=function(E,b){this.fire(E?dm:fm,We(b),b)};this._elementMouseenter=y.bind(this,!0),this._elementMouseexit=y.bind(this,!1),this._elementMousemove=function(m){this.fire(pm,We(m),m)}.bind(this),this._elementMouseup=function(m){this.fire(vm,We(m),m)}.bind(this),this._elementMousedown=function(m){this.fire(gm,We(m),m)}.bind(this),this._elementContextmenu=function(m){this.fire(ym,We(m),m)}.bind(this)}},{key:"_attachEventDelegates",value:function(){var e=this.getContainer();this.eventManager.on(e,je,Ot,this._overlayClick),this.eventManager.on(e,ze,Ot,this._overlayDblClick),this.eventManager.on(e,nt,Ot,this._overlayTap),this.eventManager.on(e,Qe,Ot,this._overlayDblTap),this.eventManager.on(e,je,lt,this._connectorClick),this.eventManager.on(e,ze,lt,this._connectorDblClick),this.eventManager.on(e,nt,lt,this._connectorTap),this.eventManager.on(e,Qe,lt,this._connectorDblTap),this.eventManager.on(e,je,ln,this._endpointClick),this.eventManager.on(e,ze,ln,this._endpointDblClick),this.eventManager.on(e,je,this.managedElementsSelector,this._elementClick),this.eventManager.on(e,nt,this.managedElementsSelector,this._elementTap),this.eventManager.on(e,Qe,this.managedElementsSelector,this._elementDblTap),this.eventManager.on(e,tt,lt,this._connectorMouseover),this.eventManager.on(e,et,lt,this._connectorMouseout),this.eventManager.on(e,It,lt,this._connectorContextmenu),this.eventManager.on(e,te,lt,this._connectorMouseup),this.eventManager.on(e,ee,lt,this._connectorMousedown),this.eventManager.on(e,tt,ln,this._endpointMouseover),this.eventManager.on(e,et,ln,this._endpointMouseout),this.eventManager.on(e,te,ln,this._endpointMouseup),this.eventManager.on(e,ee,ln,this._endpointMousedown),this.eventManager.on(e,tt,Ot,this._overlayMouseover),this.eventManager.on(e,et,Ot,this._overlayMouseout),this.eventManager.on(e,tt,ve,this._elementMouseenter),this.eventManager.on(e,et,ve,this._elementMouseexit),this.eventManager.on(e,Te,ve,this._elementMousemove),this.eventManager.on(e,te,ve,this._elementMouseup),this.eventManager.on(e,ee,ve,this._elementMousedown),this.eventManager.on(e,It,ve,this._elementContextmenu)}},{key:"_detachEventDelegates",value:function(){var e=this.getContainer();e&&(this.eventManager.off(e,je,this._connectorClick),this.eventManager.off(e,ze,this._connectorDblClick),this.eventManager.off(e,nt,this._connectorTap),this.eventManager.off(e,Qe,this._connectorDblTap),this.eventManager.off(e,je,this._endpointClick),this.eventManager.off(e,ze,this._endpointDblClick),this.eventManager.off(e,je,this._overlayClick),this.eventManager.off(e,ze,this._overlayDblClick),this.eventManager.off(e,nt,this._overlayTap),this.eventManager.off(e,Qe,this._overlayDblTap),this.eventManager.off(e,je,this._elementClick),this.eventManager.off(e,nt,this._elementTap),this.eventManager.off(e,Qe,this._elementDblTap),this.eventManager.off(e,tt,this._connectorMouseover),this.eventManager.off(e,et,this._connectorMouseout),this.eventManager.off(e,It,this._connectorContextmenu),this.eventManager.off(e,te,this._connectorMouseup),this.eventManager.off(e,ee,this._connectorMousedown),this.eventManager.off(e,tt,this._endpointMouseover),this.eventManager.off(e,et,this._endpointMouseout),this.eventManager.off(e,te,this._endpointMouseup),this.eventManager.off(e,ee,this._endpointMousedown),this.eventManager.off(e,tt,this._overlayMouseover),this.eventManager.off(e,et,this._overlayMouseout),this.eventManager.off(e,Ca,this._elementMouseenter),this.eventManager.off(e,xa,this._elementMouseexit),this.eventManager.off(e,Te,this._elementMousemove),this.eventManager.off(e,te,this._elementMouseup),this.eventManager.off(e,ee,this._elementMousedown),this.eventManager.off(e,It,this._elementContextmenu))}},{key:"setContainer",value:function(e){var n=this;if(e===document||e===document.body)throw new Error("Cannot set document or document.body as container element");this._detachEventDelegates();var o;this.dragManager!=null&&(o=this.dragManager.reset()),this.setAttribute(e,Ul,Se().replace("-",""));var a=this.getContainer();if(a!=null){a.removeAttribute(Ul);var l=gr(a.childNodes).filter(function(u){return u!=null&&(n.hasClass(u,_a)||n.hasClass(u,qn)||n.hasClass(u,Ns)||u.getAttribute&&u.getAttribute(zt)!=null)});X(l,function(u){e.appendChild(u)})}_e(ge(i.prototype),"setContainer",this).call(this,e),this.containerType=ko(e),this.eventManager!=null&&this._attachEventDelegates(),this.dragManager!=null&&(this.dragManager.addHandler(new uu(this)),this.dragManager.addHandler(new cu(this,this.dragSelection),this.groupDragOptions),this.elementDragHandler=new Io(this,this.dragSelection),this.dragManager.addHandler(this.elementDragHandler,this.elementDragOptions),o!=null&&this.dragManager.setFilters(o))}},{key:"reset",value:function(){_e(ge(i.prototype),"reset",this).call(this),this._resizeObserver&&this._resizeObserver.disconnect();var e=this.getContainer(),n=e.querySelectorAll([ve,ln,lt,Ot].join(","));X(n,function(o){return o.parentNode&&o.parentNode.removeChild(o)})}},{key:"destroy",value:function(){this._detachEventDelegates(),this.dragManager!=null&&this.dragManager.reset(),this.clearDragSelection(),_e(ge(i.prototype),"destroy",this).call(this)}},{key:"unmanage",value:function(e,n){this._resizeObserver!=null&&this._resizeObserver.unobserve(e),this.removeFromDragSelection(e),_e(ge(i.prototype),"unmanage",this).call(this,e,n)}},{key:"addToDragSelection",value:function(){for(var e=this,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];X(o,function(l){return e.dragSelection.add(l)})}},{key:"clearDragSelection",value:function(){this.dragSelection.clear()}},{key:"removeFromDragSelection",value:function(){for(var e=this,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];X(o,function(l){return e.dragSelection.remove(l)})}},{key:"toggleDragSelection",value:function(){for(var e=this,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];X(o,function(l){return e.dragSelection.toggle(l)})}},{key:"addToDragGroup",value:function(e){for(var n,o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];(n=this.elementDragHandler).addToDragGroup.apply(n,[e].concat(a))}},{key:"removeFromDragGroup",value:function(){var e;(e=this.elementDragHandler).removeFromDragGroup.apply(e,arguments)}},{key:"setDragGroupState",value:function(e){for(var n,o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];(n=this.elementDragHandler).setDragGroupState.apply(n,[e].concat(a))}},{key:"clearDragGroup",value:function(e){this.elementDragHandler.clearDragGroup(e)}},{key:"consume",value:function(e,n){qi(e,n)}},{key:"rotate",value:function(e,n,o){var a=this.getId(e);return this._managedElements[a]?(this._managedElements[a].el.style.transform="rotate("+n+"deg)",this._managedElements[a].el.style.transformOrigin="center center",_e(ge(i.prototype),"rotate",this).call(this,e,n,o)):{c:new Set,e:new Set}}},{key:"addOverlayClass",value:function(e,n){if(Vt(e))e.instance.addClass(ut(e),n);else if(jn(e))e.instance.addClass(Ni(e),n);else if(Yt(e))e.instance.addClass(hn(e),n);else throw"Could not add class to overlay of type ["+e.type+"]"}},{key:"removeOverlayClass",value:function(e,n){if(Vt(e))e.instance.removeClass(ut(e),n);else if(jn(e))e.instance.removeClass(Ni(e),n);else if(Yt(e))e.instance.removeClass(hn(e),n);else throw"Could not remove class from overlay of type ["+e.type+"]"}},{key:"_paintOverlay",value:function(e,n,o){if(Vt(e)){ut(e);var a=e.component.getXY();e.canvas.style.left=a.x+n.d.minx+"px",e.canvas.style.top=a.y+n.d.miny+"px"}else if(jn(e)){var l=isNaN(n.d.cxy.x)||isNaN(n.d.cxy.y)?"M 0 0":"M"+n.d.hxy.x+","+n.d.hxy.y+" L"+n.d.tail[0].x+","+n.d.tail[0].y+" L"+n.d.cxy.x+","+n.d.cxy.y+" L"+n.d.tail[1].x+","+n.d.tail[1].y+" Z";y0(e,l,n,o)}else if(Yt(e)){hn(e);var u=e.component.getXY();e.canvas.style.left=u.x+n.d.minx+"px",e.canvas.style.top=u.y+n.d.miny+"px"}else throw"Could not paint overlay of type ["+e.type+"]"}},{key:"setOverlayVisible",value:function(e,n){var o=n?"block":"none";function a(l){l!=null&&(l.style.display=o)}Vt(e)?a(ut(e)):Yt(e)?a(hn(e)):jn(e)&&a(e.path)}},{key:"reattachOverlay",value:function(e,n){Vt(e)?e.instance._appendElement(ut(e),this.getContainer()):Yt(e)?e.instance._appendElement(hn(e),this.getContainer()):jn(e)&&this._appendElement(Ni(e),n.connector.canvas)}},{key:"setOverlayHover",value:function(e,n){var o;Vt(e)?o=ut(e):Yt(e)?o=hn(e):jn(e)&&(o=Ni(e)),o!=null&&(this.hoverClass!=null&&(n?this.addClass(o,this.hoverClass):this.removeClass(o,this.hoverClass)),this.setHover(e.component,n))}},{key:"destroyOverlay",value:function(e){if(Vt(e)){var n=ut(e);n.parentNode.removeChild(n),delete e.canvas,delete e.cachedDimensions}else if(No(e)||Ro(e)||Fo(e))m0(e);else if(Yt(e)){var o=hn(e);o.parentNode.removeChild(o),delete e.canvas,delete e.cachedDimensions}}},{key:"drawOverlay",value:function(e,n,o,a){if(Vt(e)||Yt(e)){var l=Ia._getDimensions(e);if(l!=null&&l.w!=null&&l.h!=null){var u={x:0,y:0};if(a)u={x:a.x,y:a.y};else if(n instanceof vi){var c=Array.isArray(e.location)?e.location:[e.location,e.location];u={x:c[0]*n.w,y:c[1]*n.h}}else{var h=e.location,d=!1;(Ee(e.location)||e.location<0||e.location>1)&&(h=parseInt(""+e.location,10),d=!0),u=n.pointOnPath(h,d)}var p=u.x-l.w/2,g=u.y-l.h/2;return{component:e,d:{minx:p,miny:g,td:l,cxy:u},xmin:p,xmax:p+l.w,ymin:g,ymax:g+l.h}}else return{xmin:0,xmax:0,ymin:0,ymax:0}}else{if(No(e)||Ro(e)||Fo(e))return e.draw(n,o,a);throw"Could not draw overlay of type ["+e.type+"]"}}},{key:"updateLabel",value:function(e){if(Cn(e.label)){var n=e.label(this);n!=null?ut(e).innerText=n:ut(e).innerText=""}else e.labelText==null&&(e.labelText=e.label,e.labelText!=null?ut(e).innerText=e.labelText:ut(e).innerText="")}},{key:"setHover",value:function(e,n){e._hover=n,e instanceof Vn&&e.endpoint!=null?this.setEndpointHover(e,n,-1):e instanceof er&&e.connector!=null&&this.setConnectorHover(e.connector,n)}},{key:"paintConnector",value:function(e,n,o){_0(this,e,n,o)}},{key:"setConnectorHover",value:function(e,n,o){if(n===!1||!this.currentlyDragging&&!this.isHoverSuspended()){var a=e.canvas;a!=null&&(e.hoverClass!=null&&(n?this.addClass(a,e.hoverClass):this.removeClass(a,e.hoverClass)),n?this.addClass(a,this.hoverClass):this.removeClass(a,this.hoverClass)),e.connection.hoverPaintStyle!=null&&(e.connection.paintStyleInUse=n?e.connection.hoverPaintStyle:e.connection.paintStyle,this._suspendDrawing||this._paintConnection(e.connection)),e.connection.endpoints[0]!==o&&this.setEndpointHover(e.connection.endpoints[0],n,0,!0),e.connection.endpoints[1]!==o&&this.setEndpointHover(e.connection.endpoints[1],n,1,!0)}}},{key:"destroyConnector",value:function(e){e.connector!=null&&Tu(e.connector)}},{key:"addConnectorClass",value:function(e,n){e.canvas&&this.addClass(e.canvas,n)}},{key:"removeConnectorClass",value:function(e,n){e.canvas&&this.removeClass(e.canvas,n)}},{key:"getConnectorClass",value:function(e){return e.canvas?e.canvas.className.baseVal:""}},{key:"setConnectorVisible",value:function(e,n){ku(e,n)}},{key:"applyConnectorType",value:function(e,n){if(e.canvas&&n.cssClass){var o=Array.isArray(n.cssClass)?n.cssClass:[n.cssClass];this.addClass(e.canvas,o.join(" "))}}},{key:"addEndpointClass",value:function(e,n){var o=Ai(e.endpoint);o!=null&&this.addClass(o,n)}},{key:"applyEndpointType",value:function(e,n){if(n.cssClass){var o=Ai(e.endpoint);if(o){var a=Array.isArray(n.cssClass)?n.cssClass:[n.cssClass];this.addClass(o,a.join(" "))}}}},{key:"destroyEndpoint",value:function(e){var n=this.endpointAnchorClassPrefix+(e.currentAnchorClass?"-"+e.currentAnchorClass:"");this.removeClass(e.element,n),Tu(e.endpoint)}},{key:"renderEndpoint",value:function(e,n){var o=zh[e.endpoint.type];o!=null?b0.paint(e.endpoint,o,n):xe("jsPlumb: no endpoint renderer found for type ["+e.endpoint.type+"]")}},{key:"removeEndpointClass",value:function(e,n){var o=Ai(e.endpoint);o!=null&&this.removeClass(o,n)}},{key:"getEndpointClass",value:function(e){var n=Ai(e.endpoint);return n!=null?n.className:""}},{key:"setEndpointHover",value:function(e,n,o,a){if(e!=null&&(n===!1||!this.currentlyDragging&&!this.isHoverSuspended())){var l=Ai(e.endpoint);if(l!=null&&(e.hoverClass!=null&&(n?this.addClass(l,e.hoverClass):this.removeClass(l,e.hoverClass)),o===0||o===1)){var u=o===0?this.hoverSourceClass:this.hoverTargetClass;n?this.addClass(l,u):this.removeClass(l,u)}if(e.hoverPaintStyle!=null&&(e.paintStyleInUse=n?e.hoverPaintStyle:e.paintStyle,this._suspendDrawing||this.renderEndpoint(e,e.paintStyleInUse)),!a)for(var c=0;c<e.connections.length;c++)this.setConnectorHover(e.connections[c].connector,n,e)}}},{key:"setEndpointVisible",value:function(e,n){ku(e.endpoint,n)}},{key:"setGroupVisible",value:function(e,n){for(var o=e.el.querySelectorAll(ve),a=0;a<o.length;a++)n?this.show(o[a],!0):this.hide(o[a],!0)}},{key:"deleteConnection",value:function(e,n){return e!=null&&e.deleted!==!0?(e.endpoints[0].deleted!==!0&&this.setEndpointHover(e.endpoints[0],!1,0,!0),e.endpoints[1].deleted!==!0&&this.setEndpointHover(e.endpoints[1],!1,1,!0),_e(ge(i.prototype),"deleteConnection",this).call(this,e,n)):!1}},{key:"addSourceSelector",value:function(e,n,o){return this.addDragFilter(e),_e(ge(i.prototype),"addSourceSelector",this).call(this,e,n,o)}},{key:"removeSourceSelector",value:function(e){this.removeDragFilter(e.selector),_e(ge(i.prototype),"removeSourceSelector",this).call(this,e)}},{key:"manage",value:function(e,n,o){if(this.containerType===Sn.SVG&&!by(e))throw new Error("ERROR: cannot manage non-svg element when container is an SVG element.");var a=_e(ge(i.prototype),"manage",this).call(this,e,n,o);return a!=null&&this._resizeObserver!=null&&this._resizeObserver.observe(a.el),a}}]),i}(H0),Y0="circle",X0=function(){Na(ui.type,{makeNode:function(i,r){return Gt(Y0,{cx:i.w/2,cy:i.h/2,r:i.radius})},updateNode:function(i,r){Ft(r,{cx:""+i.w/2,cy:""+i.h/2,r:""+i.radius})}})},ps=function(t){oe(i,t);var s=ae(i);function i(r,e){var n;return H(this,i),n=s.call(this,r,e),f(v(n),"width",void 0),f(v(n),"height",void 0),f(v(n),"type",i.type),e=e||{},n.width=e.width||10,n.height=e.height||10,n}return z(i,null,[{key:"_getParams",value:function(e){return{width:e.width,height:e.height}}}]),i}(vi);f(ps,"type","Rectangle");var $0={type:ps.type,cls:ps,compute:function(s,i,r,e){var n=e.width||s.width,o=e.height||s.height,a=i.curX-n/2,l=i.curY-o/2;return s.x=a,s.y=l,s.w=n,s.h=o,[a,l,n,o]},getParams:function(s){return{width:s.width,height:s.height}}},W0="rect",z0=function(){Na(ps.type,{makeNode:function(i,r){return Gt(W0,{width:i.w,height:i.h})},updateNode:function(i,r){Ft(r,{width:i.w,height:i.h})}})},vs=function(t){oe(i,t);var s=ae(i);function i(r,e){var n;return H(this,i),n=s.call(this,r,e),f(v(n),"type",i.type),n}return i}(vi);f(vs,"type","Blank");var q0={type:vs.type,cls:vs,compute:function(s,i,r,e){return s.x=i.curX,s.y=i.curY,s.w=10,s.h=0,[i.curX,i.curY,10,0]},getParams:function(s){return{}}},Au={width:10,height:0,fill:"transparent",stroke:"transparent"},K0=function(){Na(vs.type,{makeNode:function(i,r){return Gt("rect",Au)},updateNode:function(i,r){Ft(r,Au)}})};X0();K0();z0();var bt;(function(t){t[t.top=0]="top",t[t.bottom=1]="bottom"})(bt||(bt={}));var Ra=new Map;Ra.set(bt.top,[Pt.TopRight,Pt.TopLeft]);Ra.set(bt.bottom,[Pt.BottomRight,Pt.BottomLeft]);var J0={deriveAnchor:function(s,i,r,e){return Ra.get(s)[i]}},Fa="jtk-scrollable-list",Z0=Ls(Fa),Ou="scroll";(function(){function t(s,i){var r=this;H(this,t),this.instance=s,f(this,"options",void 0),f(this,"count",void 0),f(this,"lists",void 0),this.count=0,this.lists={},this.options=i||{},this.instance.bind(mh,function(e){for(var n=r.instance.getSelector(e.el,Z0),o=0;o<n.length;o++)r.addList(n[o])}),this.instance.bind(Eh,function(e){r.removeList(e.el)}),this.instance.bind(ph,function(e,n){if(n==null){var o=r.findParentList(e.target);o!=null&&o.newConnection(e.connection,e.target,1);var a=r.findParentList(e.source);a!=null&&a.newConnection(e.connection,e.source,0)}}),this.instance.bind(Ch,function(e){var n=e.dropEndpoint.element,o=r.findParentList(n);return o==null||n.offsetTop>=o.domElement.scrollTop&&n.offsetTop+n.offsetHeight<=o.domElement.scrollTop+o.domElement.offsetHeight})}return z(t,[{key:"addList",value:function(i,r){var e=U({},J0);U(e,this.options),r=U(e,r||{});var n=[this.instance._instanceIndex,this.count++].join("_");return this.lists[n]=new Q0(this.instance,i,r,n),this.lists[n]}},{key:"getList",value:function(i){var r=this.instance.getAttribute(i,Fa);if(r!=null)return this.lists[r]}},{key:"removeList",value:function(i){var r=this.getList(i);r&&(r.destroy(),delete this.lists[r.id])}},{key:"findParentList",value:function(i){for(var r=i.parentNode,e=this.instance.getContainer(),n;r!=null&&r!==e&&r!==document;){if(n=this.getList(r),n!=null)return n;r=r.parentNode}}}]),t})();var Q0=function(){function t(s,i,r,e){H(this,t),this.instance=s,this.el=i,this.options=r,this.id=e,f(this,"_scrollHandler",void 0),f(this,"domElement",void 0),f(this,"elId",void 0),this.domElement=i,this.elId=this.instance.getId(i),s.setAttribute(i,Fa,e),this._scrollHandler=this.scrollHandler.bind(this),this.domElement._jsPlumbScrollHandler=this._scrollHandler,s.on(i,Ou,this._scrollHandler),this._scrollHandler()}return z(t,[{key:"deriveAnchor",value:function(i,r,e,n){return this.options.anchor?this.options.anchor:this.options.deriveAnchor(i,r,e,n)}},{key:"deriveEndpoint",value:function(i,r,e,n){return this.options.deriveEndpoint?this.options.deriveEndpoint(i,r,e,n):this.options.endpoint?this.options.endpoint:e.endpoint.type}},{key:"newConnection",value:function(i,r,e){r.offsetTop<this.el.scrollTop?this._proxyConnection(r,i,e,bt.top):r.offsetTop+r.offsetHeight>this.el.scrollTop+this.domElement.offsetHeight&&this._proxyConnection(r,i,e,bt.bottom)}},{key:"scrollHandler",value:function(){for(var i=this,r=this.instance.getSelector(this.el,ve),e=function(a){if(r[a].offsetTop<i.el.scrollTop)r[a]._jsPlumbProxies=r[a]._jsPlumbProxies||[],i.instance.select({source:r[a]}).each(function(u){i._proxyConnection(r[a],u,0,bt.top)}),i.instance.select({target:r[a]}).each(function(u){i._proxyConnection(r[a],u,1,bt.top)});else if(r[a].offsetTop+r[a].offsetHeight>i.el.scrollTop+i.domElement.offsetHeight)r[a]._jsPlumbProxies=r[a]._jsPlumbProxies||[],i.instance.select({source:r[a]}).each(function(u){i._proxyConnection(r[a],u,0,bt.bottom)}),i.instance.select({target:r[a]}).each(function(u){i._proxyConnection(r[a],u,1,bt.bottom)});else if(r[a]._jsPlumbProxies){for(var l=0;l<r[a]._jsPlumbProxies.length;l++)i.instance.unproxyConnection(r[a]._jsPlumbProxies[l][0],r[a]._jsPlumbProxies[l][1]);delete r[a]._jsPlumbProxies}i.instance.revalidate(r[a])},n=0;n<r.length;n++)e(n)}},{key:"_proxyConnection",value:function(i,r,e,n){var o=this;this.instance.proxyConnection(r,e,this.domElement,function(a,l){return o.deriveEndpoint(n,l,r.endpoints[l],r)},function(a,l){return o.deriveAnchor(n,l,r.endpoints[l],r)}),i._jsPlumbProxies=i._jsPlumbProxies||[],i._jsPlumbProxies.push([r,e])}},{key:"destroy",value:function(){this.instance.off(this.el,Ou,this._scrollHandler),delete this.domElement._jsPlumbScrollHandler;for(var i=this.instance.getSelector(this.el,ve),r=0;r<i.length;r++)if(i[r]._jsPlumbProxies){for(var e=0;e<i[r]._jsPlumbProxies.length;e++)this.instance.unproxyConnection(i[r]._jsPlumbProxies[e][0],i[r]._jsPlumbProxies[e][1]);delete i[r]._jsPlumbProxies}}}]),t}(),wu=1e-10;function Du(t){var s=Math.floor(t),i=Math.ceil(t);return t-s<wu?s:i-t<wu?i:t}var Ga=function(t){oe(i,t);var s=ae(i);function i(r){var e;H(this,i),e=s.call(this,r),f(v(e),"type",i.segmentType),f(v(e),"cx",void 0),f(v(e),"cy",void 0),f(v(e),"radius",void 0),f(v(e),"anticlockwise",void 0),f(v(e),"startAngle",void 0),f(v(e),"endAngle",void 0),f(v(e),"sweep",void 0),f(v(e),"length",void 0),f(v(e),"circumference",void 0),f(v(e),"frac",void 0),e.cx=r.cx,e.cy=r.cy,e.radius=r.r,e.anticlockwise=r.ac,r.startAngle&&r.endAngle?(e.startAngle=r.startAngle,e.endAngle=r.endAngle,e.x1=e.cx+e.radius*Math.cos(e.startAngle),e.y1=e.cy+e.radius*Math.sin(e.startAngle),e.x2=e.cx+e.radius*Math.cos(e.endAngle),e.y2=e.cy+e.radius*Math.sin(e.endAngle)):(e.startAngle=e._calcAngle(e.x1,e.y1),e.endAngle=e._calcAngle(e.x2,e.y2)),e.endAngle<0&&(e.endAngle+=un),e.startAngle<0&&(e.startAngle+=un);var n=e.endAngle<e.startAngle?e.endAngle+un:e.endAngle;return e.sweep=Math.abs(n-e.startAngle),e.anticlockwise&&(e.sweep=un-e.sweep),e.circumference=2*Math.PI*e.radius,e.frac=e.sweep/un,e.length=e.circumference*e.frac,e.extents={xmin:e.cx-e.radius,xmax:e.cx+e.radius,ymin:e.cy-e.radius,ymax:e.cy+e.radius},e}return z(i,[{key:"_calcAngle",value:function(e,n){return n_({x:this.cx,y:this.cy},{x:e,y:n})}},{key:"_calcAngleForLocation",value:function(e,n){if(e.anticlockwise){var o=e.startAngle<e.endAngle?e.startAngle+un:e.startAngle,a=Math.abs(o-e.endAngle);return o-a*n}else{var l=e.endAngle<e.startAngle?e.endAngle+un:e.endAngle,u=Math.abs(l-e.startAngle);return e.startAngle+u*n}}},{key:"getPath",value:function(e){var n=this.sweep>Math.PI?1:0,o=this.anticlockwise?0:1;return(e?"M"+this.x1+" "+this.y1+" ":"")+"A "+this.radius+" "+this.radius+" 0 "+n+","+o+" "+this.x2+" "+this.y2}},{key:"getLength",value:function(){return this.length}},{key:"pointOnPath",value:function(e,n){if(e===0)return{x:this.x1,y:this.y1,theta:this.startAngle};if(e===1)return{x:this.x2,y:this.y2,theta:this.endAngle};n&&(e=e/length);var o=this._calcAngleForLocation(this,e),a=this.cx+this.radius*Math.cos(o),l=this.cy+this.radius*Math.sin(o);return{x:Du(a),y:Du(l),theta:o}}},{key:"gradientAtPoint",value:function(e,n){var o=this.pointOnPath(e,n),a=t_({x:this.cx,y:this.cy},o);return!this.anticlockwise&&(a===1/0||a===-1/0)&&(a*=-1),a}},{key:"pointAlongPathFrom",value:function(e,n,o){var a=this.pointOnPath(e,o),l=n/this.circumference*2*Math.PI,u=this.anticlockwise?-1:1,c=a.theta+u*l,h=this.cx+this.radius*Math.cos(c),d=this.cy+this.radius*Math.sin(c);return{x:h,y:d}}}]),i}(Sa);f(Ga,"segmentType","Arc");var qh=function(t){oe(i,t);var s=ae(i);function i(r,e){var n;return H(this,i),n=s.call(this,r,e),n.connection=r,f(v(n),"showLoopback",void 0),f(v(n),"curviness",void 0),f(v(n),"margin",void 0),f(v(n),"proximityLimit",void 0),f(v(n),"orientation",void 0),f(v(n),"loopbackRadius",void 0),f(v(n),"clockwise",void 0),f(v(n),"isLoopbackCurrently",void 0),f(v(n),"geometry",null),e=e||{},n.showLoopback=e.showLoopback!==!1,n.curviness=e.curviness||10,n.margin=e.margin||5,n.proximityLimit=e.proximityLimit||80,n.clockwise=e.orientation&&e.orientation==="clockwise",n.loopbackRadius=e.loopbackRadius||25,n.isLoopbackCurrently=!1,n}return z(i,[{key:"getDefaultStubs",value:function(){return[0,0]}},{key:"_compute",value:function(e,n){var o=n.sourcePos,a=n.targetPos,l=Math.abs(o.curX-a.curX),u=Math.abs(o.curY-a.curY);if(!this.showLoopback||n.sourceEndpoint.elementId!==n.targetEndpoint.elementId)this.isLoopbackCurrently=!1,this._computeBezier(e,n,o,a,l,u);else{this.isLoopbackCurrently=!0;var c=n.sourcePos.curX,h=n.sourcePos.curY-this.margin,d=c,p=h-this.loopbackRadius,g=d-this.loopbackRadius,y=p-this.loopbackRadius;l=2*this.loopbackRadius,u=2*this.loopbackRadius,e.points[0]=g,e.points[1]=y,e.points[2]=l,e.points[3]=u,this._addSegment(Ga,{loopback:!0,x1:c-g+4,y1:h-y,startAngle:0,endAngle:2*Math.PI,r:this.loopbackRadius,ac:!this.clockwise,x2:c-g-4,y2:h-y,cx:d-g,cy:p-y})}}},{key:"exportGeometry",value:function(){return this.geometry==null?null:{controlPoints:[U({},this.geometry.controlPoints[0]),U({},this.geometry.controlPoints[1])],source:U({},this.geometry.source),target:U({},this.geometry.target)}}},{key:"transformGeometry",value:function(e,n,o){return{controlPoints:[{x:e.controlPoints[0].x+n,y:e.controlPoints[0].y+o},{x:e.controlPoints[1].x+n,y:e.controlPoints[1].y+o}],source:this.transformAnchorPlacement(e.source,n,o),target:this.transformAnchorPlacement(e.target,n,o)}}},{key:"importGeometry",value:function(e){return e!=null?e.controlPoints==null||e.controlPoints.length!=2?(xe("jsPlumb Bezier: cannot import geometry; controlPoints missing or does not have length 2"),this.setGeometry(null,!0),!1):e.controlPoints[0].x==null||e.controlPoints[0].y==null||e.controlPoints[1].x==null||e.controlPoints[1].y==null?(xe("jsPlumb Bezier: cannot import geometry; controlPoints malformed"),this.setGeometry(null,!0),!1):e.source==null||e.source.curX==null||e.source.curY==null?(xe("jsPlumb Bezier: cannot import geometry; source missing or malformed"),this.setGeometry(null,!0),!1):e.target==null||e.target.curX==null||e.target.curY==null?(xe("jsPlumb Bezier: cannot import geometry; target missing or malformed"),this.setGeometry(null,!0),!1):(this.setGeometry(e,!1),!0):!1}}]),i}(Fs),Ct={subtract:function(s,i){return{x:s.x-i.x,y:s.y-i.y}},dotProduct:function(s,i){return s.x*i.x+s.y*i.y},square:function(s){return Math.sqrt(s.x*s.x+s.y*s.y)},scale:function(s,i){return{x:s.x*i,y:s.y*i}}},Kh=64,eE=Math.pow(2,-Kh-1);function tE(t,s){for(var i=[],r=iE(t,s),e=s.length-1,n=2*e-1,o=Go(r,n,i,0),a=Ct.subtract(t,s[0]),l=Ct.square(a),u=0,c,h=0;h<o;h++)a=Ct.subtract(t,ja(s,e,i[h],null,null)),c=Ct.square(a),c<l&&(l=c,u=i[h]);return a=Ct.subtract(t,s[e]),c=Ct.square(a),c<l&&(l=c,u=1),{location:u,distance:l}}function nE(t,s){var i=tE(t,s);return{point:ja(s,s.length-1,i.location,null,null),location:i.location}}function iE(t,s){for(var i=s.length-1,r=2*i-1,e=[],n=[],o=[],a=[],l=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],u=0;u<=i;u++)e[u]=Ct.subtract(s[u],t);for(var c=0;c<=i-1;c++)n[c]=Ct.subtract(s[c+1],s[c]),n[c]=Ct.scale(n[c],3);for(var h=0;h<=i-1;h++)for(var d=0;d<=i;d++)o[h]||(o[h]=[]),o[h][d]=Ct.dotProduct(n[h],e[d]);for(var p=0;p<=r;p++)a[p]||(a[p]=[]),a[p].y=0,a[p].x=parseFloat(""+p)/r;for(var g=i,y=i-1,m=0;m<=g+y;m++)for(var E=Math.max(0,m-y),b=Math.min(m,g),C=E;C<=b;C++){var S=m-C;a[C+S].y+=o[S][C]*l[S][C]}return a}function Go(t,s,i,r){var e=[],n=[],o,a,l=[],u=[];switch(rE(t,s)){case 0:return 0;case 1:{if(r>=Kh)return i[0]=(t[0].x+t[s].x)/2,1;if(sE(t,s))return i[0]=oE(t,s),1;break}}ja(t,s,.5,e,n),o=Go(e,s,l,r+1),a=Go(n,s,u,r+1);for(var c=0;c<o;c++)i[c]=l[c];for(var h=0;h<a;h++)i[h+o]=u[h];return o+a}function rE(t,s){var i=0,r,e;r=e=ns(t[0].y);for(var n=1;n<=s;n++)r=ns(t[n].y),r!=e&&i++,e=r;return i}function sE(t,s){var i,r,e,n,o,a,l,u,c,h,d,p,g,y,m,E;a=t[0].y-t[s].y,l=t[s].x-t[0].x,u=t[0].x*t[s].y-t[s].x*t[0].y;var b,C;b=C=0;for(var S=1;S<s;S++){var N=a*t[S].x+l*t[S].y+u;N>b?b=N:N<C&&(C=N)}return d=0,p=1,g=0,y=a,m=l,E=u-b,c=d*m-y*p,h=1/c,r=(p*E-m*g)*h,y=a,m=l,E=u-C,c=d*m-y*p,h=1/c,e=(p*E-m*g)*h,n=Math.min(r,e),o=Math.max(r,e),i=o-n,i<eE?1:0}function oE(t,s){var i=1,r=0,e=t[s].x-t[0].x,n=t[s].y-t[0].y,o=t[0].x-0,a=t[0].y-0,l=e*r-n*i,u=1/l,c=(e*a-n*o)*u;return 0+i*c}function ja(t,s,i,r,e){for(var n=[[]],o=0;o<=s;o++)n[0][o]=t[o];for(var a=1;a<=s;a++)for(var l=0;l<=s-a;l++)n[a]||(n[a]=[]),n[a][l]||(n[a][l]={}),n[a][l].x=(1-i)*n[a-1][l].x+i*n[a-1][l+1].x,n[a][l].y=(1-i)*n[a-1][l].y+i*n[a-1][l+1].y;if(r!=null)for(var u=0;u<=s;u++)r[u]=n[u][0];if(e!=null)for(var c=0;c<=s;c++)e[c]=n[s-c][c];return n[s][0]}function aE(t,s){var i=[];t--;for(var r=0;r<=t;r++)i.push(lE(r/t,s));return i}function lE(t,s){var i={x:0,y:0};if(t===0)return s[0];var r=s.length-1;if(t===1)return s[r];var e=s,n=1-t;if(r===0)return s[0];if(r===1)return{x:n*e[0].x+t*e[1].x,y:n*e[0].y+t*e[1].y};if(4>r){var o=n*n,a=t*t,l=0,u,c,h;return r===2?(e=[e[0],e[1],e[2],i],u=o,c=2*(n*t),h=a):r===3&&(u=o*n,c=3*(o*t),h=3*(n*a),l=t*a),{x:u*e[0].x+c*e[1].x+h*e[2].x+l*e[3].x,y:u*e[0].y+c*e[1].y+h*e[2].y+l*e[3].y}}else return i}function uE(t){var s=0;if(!Zh(t))for(var i=16,r=aE(i,t),e=0;e<i-1;e++){var n=r[e],o=r[e+1];s+=Jh(n,o)}return s}var Mu=new Map;function cE(t){var s=Mu.get(t);if(!s){s=[];var i=function(){return function(p){return Math.pow(p,t)}},r=function(){return function(p){return Math.pow(1-p,t)}},e=function(p){return function(g){return p}},n=function(){return function(p){return p}},o=function(){return function(p){return 1-p}},a=function(p){return function(g){for(var y=1,m=0;m<p.length;m++)y=y*p[m](g);return y}};s.push(i());for(var l=1;l<t;l++){for(var u=[e(t)],c=0;c<t-l;c++)u.push(n());for(var h=0;h<l;h++)u.push(o());s.push(a(u))}s.push(r()),Mu.set(t,s)}return s}function tr(t,s){for(var i=cE(t.length-1),r=0,e=0,n=0;n<t.length;n++)r=r+t[n].x*i[n](s),e=e+t[n].y*i[n](s);return{x:r,y:e}}function Jh(t,s){return Math.sqrt(Math.pow(t.x-s.x,2)+Math.pow(t.y-s.y,2))}function Zh(t){return t[0].x===t[1].x&&t[0].y===t[1].y}function Qh(t,s,i){if(Zh(t))return{point:t[0],location:s};for(var r=tr(t,s),e=0,n=s,o=i>0?1:-1,a=null;e<Math.abs(i);)n+=.005*o,a=tr(t,n),e+=Jh(a,r),r=a;return{point:a,location:n}}function hE(t,s,i){return Qh(t,s,i).point}function fE(t,s,i){return Qh(t,s,i).location}function dE(t,s){var i=tr(t,s),r=tr(t.slice(0,t.length-1),s),e=r.y-i.y,n=r.x-i.x;return e===0?1/0:Math.atan(e/n)}function pE(t,s,i,r,e){var n=r-s,o=t-i,a=t*(s-r)+s*(i-t),l=vE(e),u=[n*l[0][0]+o*l[1][0],n*l[0][1]+o*l[1][1],n*l[0][2]+o*l[1][2],n*l[0][3]+o*l[1][3]+a],c=gE.apply(null,u),h=[];if(c!=null)for(var d=0;d<3;d++){var p=c[d],g=Math.pow(p,2),y=Math.pow(p,3),m={x:l[0][0]*y+l[0][1]*g+l[0][2]*p+l[0][3],y:l[1][0]*y+l[1][1]*g+l[1][2]*p+l[1][3]},E=void 0;i-t!==0?E=(m[0]-t)/(i-t):E=(m[1]-s)/(r-s),p>=0&&p<=1&&E>=0&&E<=1&&h.push(m)}return h}function Iu(t,s){return[-t[0][s]+3*t[1][s]+-3*t[2][s]+t[3][s],3*t[0][s]-6*t[1][s]+3*t[2][s],-3*t[0][s]+3*t[1][s],t[0][s]]}function vE(t){return[Iu(t,"x"),Iu(t,"y")]}function gE(t,s,i,r){var e=s/t,n=i/t,o=r/t,a=(3*n-Math.pow(e,2))/9,l=(9*e*n-27*o-2*Math.pow(e,3))/54,u=Math.pow(a,3)+Math.pow(l,2),c,h,d=[0,0,0];if(u>=0)c=ns(l+Math.sqrt(u))*Math.pow(Math.abs(l+Math.sqrt(u)),1/3),h=ns(l-Math.sqrt(u))*Math.pow(Math.abs(l-Math.sqrt(u)),1/3),d[0]=-e/3+(c+h),d[1]=-e/3-(c+h)/2,d[2]=-e/3-(c+h)/2,Math.abs(Math.sqrt(3)*(c-h)/2)!==0&&(d[1]=-1,d[2]=-1);else{var p=Math.acos(l/Math.sqrt(-Math.pow(a,3)));d[0]=2*Math.sqrt(-a)*Math.cos(p/3)-e/3,d[1]=2*Math.sqrt(-a)*Math.cos((p+2*Math.PI)/3)-e/3,d[2]=2*Math.sqrt(-a)*Math.cos((p+4*Math.PI)/3)-e/3}for(var g=0;g<3;g++)(d[g]<0||d[g]>1)&&(d[g]=-1);return d}var Ba=function(t){oe(i,t);var s=ae(i);function i(r){var e;return H(this,i),e=s.call(this,r),f(v(e),"curve",void 0),f(v(e),"cp1x",void 0),f(v(e),"cp1y",void 0),f(v(e),"cp2x",void 0),f(v(e),"cp2y",void 0),f(v(e),"length",0),f(v(e),"type",i.segmentType),e.cp1x=r.cp1x,e.cp1y=r.cp1y,e.cp2x=r.cp2x,e.cp2y=r.cp2y,e.x1=r.x1,e.x2=r.x2,e.y1=r.y1,e.y2=r.y2,e.curve=[{x:e.x1,y:e.y1},{x:e.cp1x,y:e.cp1y},{x:e.cp2x,y:e.cp2y},{x:e.x2,y:e.y2}],e.extents={xmin:Math.min(e.x1,e.x2,e.cp1x,e.cp2x),ymin:Math.min(e.y1,e.y2,e.cp1y,e.cp2y),xmax:Math.max(e.x1,e.x2,e.cp1x,e.cp2x),ymax:Math.max(e.y1,e.y2,e.cp1y,e.cp2y)},e}return z(i,[{key:"getPath",value:function(e){return(e?"M "+this.x2+" "+this.y2+" ":"")+"C "+this.cp2x+" "+this.cp2y+" "+this.cp1x+" "+this.cp1y+" "+this.x1+" "+this.y1}},{key:"pointOnPath",value:function(e,n){return e=i._translateLocation(this.curve,e,n),tr(this.curve,e)}},{key:"gradientAtPoint",value:function(e,n){return e=i._translateLocation(this.curve,e,n),dE(this.curve,e)}},{key:"pointAlongPathFrom",value:function(e,n,o){return e=i._translateLocation(this.curve,e,o),hE(this.curve,e,n)}},{key:"getLength",value:function(){return(this.length==null||this.length===0)&&(this.length=uE(this.curve)),this.length}},{key:"findClosestPointOnPath",value:function(e,n){var o=nE({x:e,y:n},this.curve);return{d:Math.sqrt(Math.pow(o.point.x-e,2)+Math.pow(o.point.y-n,2)),x:o.point.x,y:o.point.y,l:1-o.location,s:this,x1:null,y1:null,x2:null,y2:null}}},{key:"lineIntersection",value:function(e,n,o,a){return pE(e,n,o,a,this.curve)}}],[{key:"_translateLocation",value:function(e,n,o){return o&&(n=fE(e,n>0?0:1,n)),n}}]),i}(Sa);f(Ba,"segmentType","Bezier");var jo=function(t){oe(i,t);var s=ae(i);function i(r,e){var n;return H(this,i),n=s.call(this,r,e),n.connection=r,f(v(n),"type",i.type),f(v(n),"majorAnchor",void 0),f(v(n),"minorAnchor",void 0),e=e||{},n.majorAnchor=e.curviness||150,n.minorAnchor=10,n}return z(i,[{key:"getCurviness",value:function(){return this.majorAnchor}},{key:"_findControlPoint",value:function(e,n,o,a,l){var u=a[0]!==l[0]||a[1]===l[1],c={x:0,y:0};return u?(l[0]===0?c.x=o.curX<n.curX?e.x+this.minorAnchor:e.x-this.minorAnchor:c.x=e.x+this.majorAnchor*l[0],l[1]===0?c.y=o.curY<n.curY?e.y+this.minorAnchor:e.y-this.minorAnchor:c.y=e.y+this.majorAnchor*a[1]):(a[0]===0?c.x=n.curX<o.curX?e.x+this.minorAnchor:e.x-this.minorAnchor:c.x=e.x-this.majorAnchor*a[0],a[1]===0?c.y=n.curY<o.curY?e.y+this.minorAnchor:e.y-this.minorAnchor:c.y=e.y+this.majorAnchor*l[1]),c}},{key:"_computeBezier",value:function(e,n,o,a,l,u){var c,h,d=o.curX<a.curX?l:0,p=o.curY<a.curY?u:0,g=o.curX<a.curX?0:l,y=o.curY<a.curY?0:u;this.edited!==!0?(c=this._findControlPoint({x:d,y:p},o,a,e.so,e.to),h=this._findControlPoint({x:g,y},a,o,e.to,e.so)):(c=this.geometry.controlPoints[0],h=this.geometry.controlPoints[1]),this.geometry={controlPoints:[c,h],source:n.sourcePos,target:n.targetPos},this._addSegment(Ba,{x1:d,y1:p,x2:g,y2:y,cp1x:c.x,cp1y:c.y,cp2x:h.x,cp2y:h.y})}}]),i}(qh);f(jo,"type","Bezier");function yE(t,s,i,r){return t<=i&&r<=s?1:t<=i&&s<=r?2:i<=t&&r>=s?3:4}function mE(t,s,i,r,e,n,o,a,l){if(a<=l)return{x:t,y:s};if(i===1)return r.curY<=0&&e.curY>=1?{x:t+(r.x<.5?-1*n:n),y:s}:r.curX>=1&&e.curX<=0?{x:t,y:s+(r.y<.5?-1*o:o)}:{x:t+-1*n,y:s+-1*o};if(i===2)return r.curY>=1&&e.curY<=0?{x:t+(r.x<.5?-1*n:n),y:s}:r.curX>=1&&e.curX<=0?{x:t,y:s+(r.y<.5?-1*o:o)}:{x:t+n,y:s+-1*o};if(i===3)return r.curY>=1&&e.curY<=0?{x:t+(r.x<.5?-1*n:n),y:s}:r.curX<=0&&e.curX>=1?{x:t,y:s+(r.y<.5?-1*o:o)}:{x:t+-1*n,y:s+-1*o};if(i===4)return r.curY<=0&&e.curY>=1?{x:t+(r.x<.5?-1*n:n),y:s}:r.curX<=0&&e.curX>=1?{x:t,y:s+(r.y<.5?-1*o:o)}:{x:t+n,y:s+-1*o}}var Bo=function(t){oe(i,t);var s=ae(i);function i(r,e){var n;return H(this,i),n=s.call(this,r,e),n.connection=r,f(v(n),"type",i.type),f(v(n),"_controlPoint",void 0),n.curviness=e.curviness||10,n.margin=e.margin||5,n.proximityLimit=e.proximityLimit||80,n.clockwise=e.orientation&&e.orientation==="clockwise",n}return z(i,[{key:"_computeBezier",value:function(e,n,o,a,l,u){var c=o.curX<a.curX?0:l,h=o.curY<a.curY?0:u,d=o.curX<a.curX?l:0,p=o.curY<a.curY?u:0;if(o.x===0&&(c-=this.margin),o.x===1&&(c+=this.margin),o.y===0&&(h-=this.margin),o.y===1&&(h+=this.margin),a.x===0&&(d-=this.margin),a.x===1&&(d+=this.margin),a.y===0&&(p-=this.margin),a.y===1&&(p+=this.margin),this.edited!==!0){var g=(c+d)/2,y=(h+p)/2,m=yE(c,h,d,p),E=Math.sqrt(Math.pow(d-c,2)+Math.pow(p-h,2));this._controlPoint=mE(g,y,m,n.sourcePos,n.targetPos,this.curviness,this.curviness,E,this.proximityLimit)}else this._controlPoint=this.geometry.controlPoints[0];var b,C,S,N;b=this._controlPoint.x,C=this._controlPoint.x,S=this._controlPoint.y,N=this._controlPoint.y,this.geometry={controlPoints:[this._controlPoint,this._controlPoint],source:n.sourcePos,target:n.targetPos},this._addSegment(Ba,{x1:d,y1:p,x2:c,y2:h,cp1x:b,cp1y:S,cp2x:C,cp2y:N})}}]),i}(qh);f(Bo,"type","StateMachine");ar.register(jo.type,jo);ar.register(Bo.type,Bo);function Lu(t){return t<0?-1:t===0?0:1}function Nu(t){return[Lu(t[2]-t[0]),Lu(t[3]-t[1])]}function Ru(t){return Math.sqrt(Math.pow(t[0]-t[2],2)+Math.pow(t[1]-t[3],2))}function Fu(t){var s=[];return s.push.apply(s,t),s}var Ho=function(t){oe(i,t);var s=ae(i);function i(r,e){var n;return H(this,i),n=s.call(this,r,e),n.connection=r,f(v(n),"type",i.type),f(v(n),"internalSegments",[]),f(v(n),"midpoint",void 0),f(v(n),"alwaysRespectStubs",void 0),f(v(n),"cornerRadius",void 0),f(v(n),"lastx",void 0),f(v(n),"lasty",void 0),f(v(n),"lastOrientation",void 0),f(v(n),"loopbackRadius",void 0),f(v(n),"isLoopbackCurrently",void 0),n.midpoint=e.midpoint==null||isNaN(e.midpoint)?.5:e.midpoint,n.cornerRadius=e.cornerRadius!=null?e.cornerRadius:0,n.alwaysRespectStubs=e.alwaysRespectStubs===!0,n.lastx=null,n.lasty=null,n.lastOrientation=null,n.loopbackRadius=e.loopbackRadius||25,n.isLoopbackCurrently=!1,n}return z(i,[{key:"getDefaultStubs",value:function(){return[30,30]}},{key:"addASegment",value:function(e,n,o){if(!(this.lastx===e&&this.lasty===n)){var a=this.lastx==null?o.sx:this.lastx,l=this.lasty==null?o.sy:this.lasty,u=a===e?"v":"h";this.lastx=e,this.lasty=n,this.internalSegments.push([a,l,e,n,u])}}},{key:"writeSegments",value:function(e){for(var n=null,o,a,l,u=0;u<this.internalSegments.length-1;u++){if(n=n||Fu(this.internalSegments[u]),o=Fu(this.internalSegments[u+1]),a=Nu(n),l=Nu(o),this.cornerRadius>0&&n[4]!==o[4]){var c=Math.min(Ru(n),Ru(o)),h=Math.min(this.cornerRadius,c/2);n[2]-=a[0]*h,n[3]-=a[1]*h,o[0]+=l[0]*h,o[1]+=l[1]*h;var d=a[1]===l[0]&&l[0]===1||a[1]===l[0]&&l[0]===0&&a[0]!==l[1]||a[1]===l[0]&&l[0]===-1,p=o[1]>n[3]?1:-1,g=o[0]>n[2]?1:-1,y=p===g,m=y&&d||!y&&!d?o[0]:n[2],E=y&&d||!y&&!d?n[3]:o[1];this._addSegment(En,{x1:n[0],y1:n[1],x2:n[2],y2:n[3]}),this._addSegment(Ga,{r:h,x1:n[2],y1:n[3],x2:o[0],y2:o[1],cx:m,cy:E,ac:d})}else this._addSegment(En,{x1:n[0],y1:n[1],x2:n[2],y2:n[3]});n=o}o!=null&&this._addSegment(En,{x1:o[0],y1:o[1],x2:o[2],y2:o[3]})}},{key:"_compute",value:function(e,n){var o=this;this.internalSegments.length=0,this.lastx=null,this.lasty=null,this.lastOrientation=null;var a=function(I){return[e.startStubX,e.startStubY,e.endStubX,e.endStubY]},l={perpendicular:a,orthogonal:a,opposite:function(I){var T=e,K=I==="x"?0:1,$={x:function(){return T.so[K]===1&&(T.startStubX>T.endStubX&&T.tx>T.startStubX||T.sx>T.endStubX&&T.tx>T.sx)||T.so[K]===-1&&(T.startStubX<T.endStubX&&T.tx<T.startStubX||T.sx<T.endStubX&&T.tx<T.sx)},y:function(){return T.so[K]===1&&(T.startStubY>T.endStubY&&T.ty>T.startStubY||T.sy>T.endStubY&&T.ty>T.sy)||T.so[K]===-1&&(T.startStubY<T.endStubY&&T.ty<T.startStubY||T.sy<T.endStubY&&T.ty<T.sy)}};return!o.alwaysRespectStubs&&$[I]()?{x:[(e.sx+e.tx)/2,e.startStubY,(e.sx+e.tx)/2,e.endStubY],y:[e.startStubX,(e.sy+e.ty)/2,e.endStubX,(e.sy+e.ty)/2]}[I]:[e.startStubX,e.startStubY,e.endStubX,e.endStubY]}},u=l[e.anchorOrientation](e.sourceAxis),c=e.sourceAxis==="x"?0:1,h=e.sourceAxis==="x"?1:0,d=u[c],p=u[h],g=u[c+2],y=u[h+2];this.addASegment(u[0],u[1],e);var m=e.startStubX+(e.endStubX-e.startStubX)*this.midpoint,E=e.startStubY+(e.endStubY-e.startStubY)*this.midpoint,b={x:[0,1],y:[1,0]},C={perpendicular:function(I,T,K,$,Z){var R=e,me={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]},yt={x:[[R.startStubX,R.endStubX],null,[R.endStubX,R.startStubX]],y:[[R.startStubY,R.endStubY],null,[R.endStubY,R.startStubY]]},st={x:[[m,R.startStubY],[m,R.endStubY]],y:[[R.startStubX,E],[R.endStubX,E]]},se={x:[[R.endStubX,R.startStubY]],y:[[R.startStubX,R.endStubY]]},he={x:[[R.startStubX,R.endStubY],[R.endStubX,R.endStubY]],y:[[R.endStubX,R.startStubY],[R.endStubX,R.endStubY]]},le={x:[[R.startStubX,E],[R.endStubX,E],[R.endStubX,R.endStubY]],y:[[m,R.startStubY],[m,R.endStubY],[R.endStubX,R.endStubY]]},Ke={x:[R.startStubY,R.endStubY],y:[R.startStubX,R.endStubX]},An=b[I][0],ot=b[I][1],Ve=R.so[An]+1,lr=R.to[ot]+1,gi=R.to[ot]===-1&&Ke[I][1]<Ke[I][0]||R.to[ot]===1&&Ke[I][1]>Ke[I][0],ur=yt[I][Ve][0],Je=yt[I][Ve][1],Ze=me[I][Ve][lr];if(R.segment===Ze[3]||R.segment===Ze[2]&&gi)return st[I];if(R.segment===Ze[2]&&Je<ur)return se[I];if(R.segment===Ze[2]&&Je>=ur||R.segment===Ze[1]&&!gi)return le[I];if(R.segment===Ze[0]||R.segment===Ze[1]&&gi)return he[I]},orthogonal:function(I,T,K,$,Z){var R=e,me={x:R.so[0]===-1?Math.min(T,$):Math.max(T,$),y:R.so[1]===-1?Math.min(T,$):Math.max(T,$)}[I];return{x:[[me,K],[me,Z],[$,Z]],y:[[K,me],[Z,me],[Z,$]]}[I]},opposite:function(I,T,K,$,Z){var R=e,me={x:"y",y:"x"}[I],yt={x:"h",y:"w"}[I],st=R["is"+I.toUpperCase()+"GreaterThanStubTimes2"];if(n.sourceEndpoint.elementId===n.targetEndpoint.elementId){var se=K+(1-n.sourceEndpoint._anchor.computedPosition[me])*n.sourceInfo[yt]+o.maxStub;return{x:[[T,se],[$,se]],y:[[se,T],[se,$]]}[I]}else{if(!st||R.so[c]===1&&T>$||R.so[c]===-1&&T<$)return{x:[[T,E],[$,E]],y:[[m,T],[m,$]]}[I];if(R.so[c]===1&&T<$||R.so[c]===-1&&T>$)return{x:[[m,R.sy],[m,R.ty]],y:[[R.sx,E],[R.tx,E]]}[I]}}},S=C[e.anchorOrientation](e.sourceAxis,d,p,g,y);if(S)for(var N=0;N<S.length;N++)this.addASegment(S[N][0],S[N][1],e);this.addASegment(u[2],u[3],e),this.addASegment(e.tx,e.ty,e),this.writeSegments(e)}},{key:"transformGeometry",value:function(e,n,o){return e}}]),i}(Fs);f(Ho,"type","Flowchart");ar.register(Ho.type,Ho);Qt.registerHandler(k0);Qt.registerHandler($0);Qt.registerHandler(q0);ar.register(ds.type,ds);function _E(){var t=Math.floor(Math.random()*2e3),s=Math.floor(Math.random()*2e3);return{clientX:t,clientY:s,screenX:t,screenY:s,pageX:t,pageY:s}}var Bn={clientX:5e4,clientY:5e4,screenX:5e4,screenY:5e4,pageX:5e4,pageY:5e4};for(var kr=0;kr<256;kr++)(kr<16?"0":"")+kr.toString(16);var EE=1e-11;(function(){function t(s,i,r){H(this,t),this._jsPlumb=s,this.ok=i,this.equal=r,f(this,"_divs",[]),f(this,"mottle",void 0),this.mottle=new ka}return z(t,[{key:"_t",value:function(i,r,e,n){this.mottle.trigger(i,r,{pageX:e,pageY:n,screenX:e,screenY:n,clientX:e,clientY:n})}},{key:"addDiv",value:function(i,r,e,n,o,a,l){var u=document.createElement("div");return u.style.position="absolute",u.innerHTML=i,r?r.appendChild(u):this._jsPlumb.getContainer().appendChild(u),u.setAttribute("id",i),u.style.left=(n??Math.floor(Math.random()*1e3))+"px",u.style.top=(o??Math.floor(Math.random()*1e3))+"px",e&&(u.className=e),a&&(u.style.width=a+"px"),l&&(u.style.height=l+"px"),this._divs.push(i),u}},{key:"addDivs",value:function(i,r){for(var e=0;e<i.length;e++)this.addDiv(i[e],r)}},{key:"assertEndpointCount",value:function(i,r){var e=this._jsPlumb.getEndpoints(i),n=e?e.length:0;this.equal(n,r,i.getAttribute("data-jtk-managed")+" has "+r+(r>1||r==0?" endpoints":" endpoint"))}},{key:"_assertManagedEndpointCount",value:function(i,r){var e=this._jsPlumb.getId(i),n=this._jsPlumb._managedElements[e];this.equal(n.endpoints.length,r,e+" has "+r+" endpoints in managed record")}},{key:"_assertManagedConnectionCount",value:function(i,r){var e=this._jsPlumb.getId(i),n=this._jsPlumb._managedElements[e];this.equal(n.connections.length,r,e+" has "+r+" connections in managed record")}},{key:"_registerDiv",value:function(i){this._divs.push(i)}},{key:"makeDragStartEvt",value:function(i){var r=this.makeEvent(i),e=this._jsPlumb.getContainer();return r.clientX+=e.offsetLeft,r.screenX+=e.offsetLeft,r.pageX+=e.offsetLeft,r.clientY+=e.offsetTop,r.screenY+=e.offsetTop,r.pageY+=e.offsetTop,r}},{key:"getAttribute",value:function(i,r){return i.getAttribute(r)}},{key:"dragNodeBy",value:function(i,r,e,n){n=n||{},n.before&&n.before();var o=this.makeEvent(i);this._jsPlumb.trigger(i,ee,o),n.beforeMouseMove&&n.beforeMouseMove(),this._t(document,Te,o.pageX+r,o.pageY+e),n.beforeMouseUp&&n.beforeMouseUp(),this.mottle.trigger(document,te,null),n.after&&n.after()}},{key:"dragNodeTo",value:function(i,r,e,n){n=n||{};var o=this._jsPlumb.viewport.getPosition(this._jsPlumb.getId(i));n.before&&n.before();var a=this.makeEvent(i);this._jsPlumb.trigger(i,ee,a);var l=this._jsPlumb.getContainer().getBoundingClientRect();n.beforeMouseMove&&n.beforeMouseMove(),this._t(document,Te,l.x+r+o.w/2,l.y+e+o.h/2),n.beforeMouseUp&&n.beforeMouseUp(),this.mottle.trigger(document,te,null),n.after&&n.after()}},{key:"dragToGroup",value:function(i,r,e){var n=this._jsPlumb.getGroup(r),o=this._jsPlumb.viewport.getPosition(n.elId),a=o.x+o.w/2,l=o.y+o.h/2;this.dragNodeTo(i,a,l,e)}},{key:"aSyncDragNodeBy",value:function(i,r,e,n){var o=this;n=n||{},n.before&&n.before();var a=this.makeEvent(i);this._jsPlumb.trigger(i,ee,a),n.beforeMouseMove&&n.beforeMouseMove(),setTimeout(function(){o._t(document,Te,a.pageX+r,a.pageY+e),n.beforeMouseUp&&n.beforeMouseUp(),setTimeout(function(){o.mottle.trigger(document,te,null),n.after&&n.after()},45)},45)}},{key:"dragANodeAround",value:function(i,r,e){this._jsPlumb.trigger(i,ee,this.makeEvent(i));for(var n=Math.random()*50,o=0;o<n;o++){var a=_E();i.style.left=a.screenX+"px",i.style.top=a.screenY+"px",this._jsPlumb.trigger(document,Te,a)}r&&this.ok(r(),e||"while dragging assert"),this._jsPlumb.trigger(document,te,Bn)}},{key:"dragConnection",value:function(i,r,e,n){var o=this.getCanvas(i),a=this.getCanvas(r),l=this.makeEvent(o),u=this.makeEvent(a);n=n||{};var c=this._jsPlumb.select().length;return this._jsPlumb.trigger(o,ee,l),n.beforeMouseMove&&n.beforeMouseMove(),this._jsPlumb.trigger(e?a:document,Te,u),n.beforeMouseUp&&n.beforeMouseUp(),this._jsPlumb.trigger(e?a:document,te,u),this._jsPlumb.select().get(c)}},{key:"aSyncDragConnection",value:function(i,r,e){var n=this;e=e||{};var o=this.getCanvas(i),a=this.getCanvas(r),l=this.makeEvent(o),u=this.makeEvent(a),c=this._jsPlumb.select().length;this._jsPlumb.trigger(o,ee,l),setTimeout(function(){e.beforeMouseMove&&e.beforeMouseMove(),n._jsPlumb.trigger(document,Te,u),setTimeout(function(){e.beforeMouseUp&&e.beforeMouseUp(),n._jsPlumb.trigger(a,te,u),e.after&&e.after(n._jsPlumb.select().get(c))},5)},5)}},{key:"dragAndAbortConnection",value:function(i){var r=this.getCanvas(i),e=this.makeEvent(r);this._jsPlumb.trigger(r,ee,e),this._jsPlumb.trigger(document,Te,Bn),this._jsPlumb.trigger(document,te,Bn)}},{key:"detachConnection",value:function(i,r){r=r||{};var e=this.getEndpointCanvas(i),n=this.makeEvent(e);r.before&&r.before(),this._jsPlumb.trigger(e,ee,n),r.beforeMouseMove&&r.beforeMouseMove(),this._jsPlumb.trigger(document,Te,Bn),r.beforeMouseUp&&r.beforeMouseUp(),this._jsPlumb.trigger(document,te,Bn),r.after&&r.after()}},{key:"detachAndReattachConnection",value:function(i,r){r=r||{};var e=this.getEndpointCanvas(i),n=this.makeEvent(e);r.before&&r.before(),this._jsPlumb.trigger(e,ee,n),r.beforeMouseMove&&r.beforeMouseMove(),this._jsPlumb.trigger(document,Te,Bn),this._jsPlumb.trigger(document,Te,n),r.beforeMouseUp&&r.beforeMouseUp(),this._jsPlumb.trigger(document,te,n),r.after&&r.after()}},{key:"detachConnectionByTarget",value:function(i,r){this.detachConnection(i.endpoints[1],r)}},{key:"relocateTarget",value:function(i,r,e){this.relocate(i,1,r,e)}},{key:"relocate",value:function(i,r,e,n){n=n||{},e=this.getCanvas(e);var o=this.getEndpointCanvas(i.endpoints[r]),a=this.makeEvent(o),l=this.makeEvent(e);n.before&&n.before(),this._jsPlumb.trigger(o,ee,a),n.beforeMouseMove&&n.beforeMouseMove(),this._jsPlumb.trigger(document,Te,l),n.beforeMouseUp&&n.beforeMouseUp(),this._jsPlumb.trigger(e,te,l),n.after&&n.after()}},{key:"relocateSource",value:function(i,r,e){this.relocate(i,0,r,e)}},{key:"makeEvent",value:function(i){var r=i.getBoundingClientRect(),e=r.x+r.width/2,n=r.y+r.height/2;return{clientX:e,clientY:n,screenX:e,screenY:n,pageX:e,pageY:n}}},{key:"getCanvas",value:function(i){return i.endpoint?this.getEndpointCanvas(i):i}},{key:"getEndpointCanvas",value:function(i){return i.endpoint.canvas}},{key:"getConnectionCanvas",value:function(i){return i.connector.canvas}},{key:"getEndpointCanvasPosition",value:function(i){var r=this.getEndpointCanvas(i);return{x:parseInt(r.style.left,10),y:parseInt(r.style.top,10),w:r.getAttribute("width"),h:r.getAttribute("height")}}},{key:"within",value:function(i,r,e){this.ok(Math.abs(i-r)<EE,e+"[expected: "+r+" got "+i+"] [diff:"+Math.abs(i-r)+"]")}},{key:"assertManagedEndpointCount",value:function(i,r){var e=this._jsPlumb.getId(i),n=this._jsPlumb._managedElements[e];this.equal(n.endpoints.length,r,e+" has "+r+" endpoints in managed record")}},{key:"assertManagedConnectionCount",value:function(i,r){var e=this._jsPlumb.getId(i),n=this._jsPlumb._managedElements[e];this.equal(n.connections.length,r,e+" has "+r+" connections in managed record")}},{key:"fireEventOnEndpoint",value:function(i){for(var r=this.getEndpointCanvas(i),e=0;e<(arguments.length<=1?0:arguments.length-1);e++)this._jsPlumb.trigger(r,e+1<1||arguments.length<=e+1?void 0:arguments[e+1])}},{key:"fireEventOnElement",value:function(i){for(var r=0;r<(arguments.length<=1?0:arguments.length-1);r++)this._jsPlumb.trigger(i,r+1<1||arguments.length<=r+1?void 0:arguments[r+1])}},{key:"fireEventOnConnection",value:function(i){for(var r=this.getConnectionCanvas(i),e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];this.fireEventOnElement.apply(this,[r].concat(n))}},{key:"clickOnConnection",value:function(i){this.fireEventOnConnection(i,je)}},{key:"dblClickOnConnection",value:function(i){this.fireEventOnConnection(i,ze)}},{key:"tapOnConnection",value:function(i){this.fireEventOnConnection(i,ee),this.fireEventOnConnection(i,te)}},{key:"dblTapOnConnection",value:function(i){this.fireEventOnConnection(i,ee),this.fireEventOnConnection(i,te),this.fireEventOnConnection(i,ee),this.fireEventOnConnection(i,te)}},{key:"clickOnElement",value:function(i,r){this._jsPlumb.trigger(i,je,null,null,r??1)}},{key:"dblClickOnElement",value:function(i){this._jsPlumb.trigger(i,ze)}},{key:"tapOnElement",value:function(i){this._jsPlumb.trigger(i,ee),this._jsPlumb.trigger(i,te)}},{key:"dblTapOnElement",value:function(i){this._jsPlumb.trigger(i,ee),this._jsPlumb.trigger(i,te),this._jsPlumb.trigger(i,ee),this._jsPlumb.trigger(i,te)}},{key:"getOverlayCanvas",value:function(i){return i.canvas||i.path}},{key:"fireEventOnOverlay",value:function(i,r,e){var n=i.getOverlay(r),o=this.getOverlayCanvas(n);this._jsPlumb.trigger(o,e)}},{key:"clickOnOverlay",value:function(i,r){this.fireEventOnOverlay(i,r,je)}},{key:"dblClickOnOverlay",value:function(i,r){this.fireEventOnOverlay(i,r,ze)}},{key:"tapOnOverlay",value:function(i,r){this.fireEventOnOverlay(i,r,ee),this.fireEventOnOverlay(i,r,te)}},{key:"dblTapOnOverlay",value:function(i,r){this.fireEventOnOverlay(i,r,ee),this.fireEventOnOverlay(i,r,te),this.fireEventOnOverlay(i,r,ee),this.fireEventOnOverlay(i,r,te)}},{key:"cleanup",value:function(){var i=this._jsPlumb.getContainer();this._jsPlumb.destroy();for(var r in this._divs){var e=document.getElementById(this._divs[r]);e&&e.parentNode.removeChild(e)}this._divs.length=0;var n=this._jsPlumb.select().length,o=this._jsPlumb.selectEndpoints().length,a=i.querySelectorAll(".jtk-endpoint").length,l=i.querySelectorAll(".jtk-connector").length;for(var u in i.__ta)for(var c in i.__ta[u])throw"Container event bindings not empty for key "+u;if(n>0)throw"there are connections in the data model!";if(o>0)throw"there are endpoints in the data model!";if(a>0)throw"there are "+a+" endpoints left in the dom!";if(l>0)throw"there are "+l+" connections left in the dom!"}},{key:"makeContent",value:function(i){var r=document.createElement("div");return r.innerHTML=i,r.firstChild}},{key:"length",value:function(i){var r=0;for(var e in i)i.hasOwnProperty(e)&&r++;return r}},{key:"head",value:function(i){for(var r in i)return i[r]}},{key:"uuid",value:function(){return Se()}}]),t})();var Gu=0;function bE(){var t=Gu+1;return Gu++,t}function CE(t){return new V0(bE(),t)}const xE=j("span",{class:"toggle-icons"},"export",-1),SE=[xE],PE=["id"],kE={__name:"workspace",setup(t){const s=qe([]);let i=null;const r=qe(null),e=qe([]);var n={jsplumbElements:e};const o=qe({});_c(()=>{r.value.focus(),console.log(e.value),i=CE({container:r.value,connectionOverlays:[{type:"Arrow",options:{location:1}}]})});async function a(h,d){if(console.log("entered addJSEndpoints"),console.log(h),console.log(d),h){const p=i.addEndpoint(h,{source:!0,anchor:"Bottom",endpoint:{type:"Dot"}}),g=i.addEndpoint(h,{target:!0,anchor:"Top",endpoint:{type:"Dot"}});d&&(d.sourceEndpointId=p.id,d.targetEndpointId=g.id)}}async function l(h){console.debug("workspace_items updated, watcher triggered"),await cc(),h.forEach(d=>{const p=e.value.find(g=>g.id===d.id);o.value[d.id]||(a(p,d),p.style.left=d.x+"px",p.style.top=d.y+"px",o.value[d.id]=!0)})}Or(s,l,{deep:!0});function u(){var h=document.implementation.createDocument(null,"BatchML"),d=h.documentElement,p=i.getConnections();p.forEach(function(C){console.log(C);var S=C.sourceId,N=C.targetId,G=s.value.find(Z=>Z.id===S),I=s.value.find(Z=>Z.id===N);if(G&&I){var T=G.id,K=I.id,$=h.createElement("Connection");$.setAttribute("sourceId",T),$.setAttribute("targetId",K),d.appendChild($)}}),s.value.forEach(function(C){var S=h.createElement("Element");S.setAttribute("id",C.id),S.setAttribute("name",C.name),S.setAttribute("type",C.type),S.setAttribute("x",C.x),S.setAttribute("y",C.y),d.appendChild(S)});var g=new XMLSerializer,y=g.serializeToString(h);console.log(y);var m="Verfahrensrezept.xml",E=document.createElement("a"),b=new Blob([y],{type:"text/plain"});E.setAttribute("href",window.URL.createObjectURL(b)),E.setAttribute("download",m),E.dataset.downloadurl=["text/plain",E.download,E.href].join(":"),E.draggable=!0,E.classList.add("dragout"),E.click()}const c=h=>{console.log("Drop"),h.preventDefault(),h.dataTransfer.getData("itemID");var d=h.dataTransfer.getData("itemName"),p=h.dataTransfer.getData("itemClasses"),g;p.includes("material_element")?g="material":p.includes("process_element")?g="process":console.log("neither material nor process");var y=h.target.getBoundingClientRect(),m=h.clientX-y.left,E=h.clientY-y.top;if(p.includes("sidebar_element")){var b=Date.now().toString(36)+Math.random().toString(36).substring(2);s.value.push({id:b,name:d,type:g,x:m,y:E}),console.log("dragged from sidebar, dropped in workspace at absolute position: "+h.clientX.toString()+" "+h.clientY.toString()),console.log(s)}};return(h,d)=>(Ae(),Me("div",{id:"workspace",ref_key:"workspace",ref:r,onDrop:d[0]||(d[0]=p=>c(p)),onDragenter:d[1]||(d[1]=Jr(()=>{},["prevent"])),onDragover:d[2]||(d[2]=Jr(()=>{},["prevent"]))},[j("button",{onClick:u},SE),(Ae(!0),Me(Be,null,Xi(s.value,p=>(Ae(),Me("div",{class:hi("workspace_element "+p.type),key:p.id,ref_for:!0,ref:it(n).jsplumbElements,id:p.id},Mt(p.name),11,PE))),128))],544))}};const TE={id:"editor"},AE={__name:"App",setup(t){return(s,i)=>(Ae(),Me("main",null,[Ue(Mp,{id:"top_bar"}),j("div",TE,[Ue(Jg),Ue(kE)])]))}},OE=Tp(AE);OE.mount("#app");
